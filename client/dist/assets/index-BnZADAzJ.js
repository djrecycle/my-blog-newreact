var MD=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fke=MD((wr,Tn)=>{function E3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Pg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ND(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var C3={exports:{}},Ag={},x3={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=Symbol.for("react.element"),DD=Symbol.for("react.portal"),LD=Symbol.for("react.fragment"),$D=Symbol.for("react.strict_mode"),FD=Symbol.for("react.profiler"),VD=Symbol.for("react.provider"),BD=Symbol.for("react.context"),UD=Symbol.for("react.forward_ref"),zD=Symbol.for("react.suspense"),HD=Symbol.for("react.memo"),WD=Symbol.for("react.lazy"),HE=Symbol.iterator;function jD(t){return t===null||typeof t!="object"?null:(t=HE&&t[HE]||t["@@iterator"],typeof t=="function"?t:null)}var S3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T3=Object.assign,P3={};function Xc(t,e,n){this.props=t,this.context=e,this.refs=P3,this.updater=n||S3}Xc.prototype.isReactComponent={};Xc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A3(){}A3.prototype=Xc.prototype;function Ob(t,e,n){this.props=t,this.context=e,this.refs=P3,this.updater=n||S3}var Mb=Ob.prototype=new A3;Mb.constructor=Ob;T3(Mb,Xc.prototype);Mb.isPureReactComponent=!0;var WE=Array.isArray,I3=Object.prototype.hasOwnProperty,Nb={current:null},R3={key:!0,ref:!0,__self:!0,__source:!0};function O3(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)I3.call(e,r)&&!R3.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Rh,type:t,key:s,ref:o,props:i,_owner:Nb.current}}function GD(t,e){return{$$typeof:Rh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Db(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rh}function qD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jE=/\/+/g;function g1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qD(""+t.key):e.toString(36)}function _m(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Rh:case DD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+g1(o,0):r,WE(i)?(n="",t!=null&&(n=t.replace(jE,"$&/")+"/"),_m(i,e,n,"",function(c){return c})):i!=null&&(Db(i)&&(i=GD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(jE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",WE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+g1(s,a);o+=_m(s,e,n,l,i)}else if(l=jD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+g1(s,a++),o+=_m(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wf(t,e,n){if(t==null)return t;var r=[],i=0;return _m(t,r,"","",function(s){return e.call(n,s,i++)}),r}function YD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fn={current:null},km={transition:null},KD={ReactCurrentDispatcher:Fn,ReactCurrentBatchConfig:km,ReactCurrentOwner:Nb};function M3(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:wf,forEach:function(t,e,n){wf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wf(t,function(){e++}),e},toArray:function(t){return wf(t,function(e){return e})||[]},only:function(t){if(!Db(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=Xc;Ce.Fragment=LD;Ce.Profiler=FD;Ce.PureComponent=Ob;Ce.StrictMode=$D;Ce.Suspense=zD;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KD;Ce.act=M3;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=T3({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Nb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)I3.call(e,l)&&!R3.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Rh,type:t.type,key:i,ref:s,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:BD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VD,_context:t},t.Consumer=t};Ce.createElement=O3;Ce.createFactory=function(t){var e=O3.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:UD,render:t}};Ce.isValidElement=Db;Ce.lazy=function(t){return{$$typeof:WD,_payload:{_status:-1,_result:t},_init:YD}};Ce.memo=function(t,e){return{$$typeof:HD,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=km.transition;km.transition={};try{t()}finally{km.transition=e}};Ce.unstable_act=M3;Ce.useCallback=function(t,e){return Fn.current.useCallback(t,e)};Ce.useContext=function(t){return Fn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return Fn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return Fn.current.useEffect(t,e)};Ce.useId=function(){return Fn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return Fn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return Fn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return Fn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return Fn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return Fn.current.useReducer(t,e,n)};Ce.useRef=function(t){return Fn.current.useRef(t)};Ce.useState=function(t){return Fn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return Fn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return Fn.current.useTransition()};Ce.version="18.3.1";x3.exports=Ce;var m=x3.exports;const V=Pg(m),Sc=E3({__proto__:null,default:V},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD=m,JD=Symbol.for("react.element"),XD=Symbol.for("react.fragment"),QD=Object.prototype.hasOwnProperty,eL=ZD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tL={key:!0,ref:!0,__self:!0,__source:!0};function N3(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)QD.call(e,r)&&!tL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JD,type:t,key:s,ref:o,props:i,_owner:eL.current}}Ag.Fragment=XD;Ag.jsx=N3;Ag.jsxs=N3;C3.exports=Ag;var Td=C3.exports;function nL(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rL(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var iL=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rL(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=nL(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Cn="-ms-",sp="-moz-",Fe="-webkit-",D3="comm",Lb="rule",$b="decl",sL="@import",L3="@keyframes",oL="@layer",aL=Math.abs,Ig=String.fromCharCode,lL=Object.assign;function cL(t,e){return dn(t,0)^45?(((e<<2^dn(t,0))<<2^dn(t,1))<<2^dn(t,2))<<2^dn(t,3):0}function $3(t){return t.trim()}function uL(t,e){return(t=e.exec(t))?t[0]:t}function Ve(t,e,n){return t.replace(e,n)}function iv(t,e){return t.indexOf(e)}function dn(t,e){return t.charCodeAt(e)|0}function Pd(t,e,n){return t.slice(e,n)}function ji(t){return t.length}function Fb(t){return t.length}function vf(t,e){return e.push(t),t}function dL(t,e){return t.map(e).join("")}var Rg=1,Tc=1,F3=0,nr=0,Ht=0,Qc="";function Og(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Rg,column:Tc,length:o,return:""}}function xu(t,e){return lL(Og("",null,null,"",null,null,0),t,{length:-t.length},e)}function hL(){return Ht}function fL(){return Ht=nr>0?dn(Qc,--nr):0,Tc--,Ht===10&&(Tc=1,Rg--),Ht}function vr(){return Ht=nr<F3?dn(Qc,nr++):0,Tc++,Ht===10&&(Tc=1,Rg++),Ht}function Ji(){return dn(Qc,nr)}function Em(){return nr}function Oh(t,e){return Pd(Qc,t,e)}function Ad(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function V3(t){return Rg=Tc=1,F3=ji(Qc=t),nr=0,[]}function B3(t){return Qc="",t}function Cm(t){return $3(Oh(nr-1,sv(t===91?t+2:t===40?t+1:t)))}function mL(t){for(;(Ht=Ji())&&Ht<33;)vr();return Ad(t)>2||Ad(Ht)>3?"":" "}function pL(t,e){for(;--e&&vr()&&!(Ht<48||Ht>102||Ht>57&&Ht<65||Ht>70&&Ht<97););return Oh(t,Em()+(e<6&&Ji()==32&&vr()==32))}function sv(t){for(;vr();)switch(Ht){case t:return nr;case 34:case 39:t!==34&&t!==39&&sv(Ht);break;case 40:t===41&&sv(t);break;case 92:vr();break}return nr}function gL(t,e){for(;vr()&&t+Ht!==57;)if(t+Ht===84&&Ji()===47)break;return"/*"+Oh(e,nr-1)+"*"+Ig(t===47?t:vr())}function wL(t){for(;!Ad(Ji());)vr();return Oh(t,nr)}function vL(t){return B3(xm("",null,null,null,[""],t=V3(t),0,[0],t))}function xm(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,g=1,_=1,v=1,w=0,b="",k=i,S=s,C=r,E=b;_;)switch(p=w,w=vr()){case 40:if(p!=108&&dn(E,d-1)==58){iv(E+=Ve(Cm(w),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=Cm(w);break;case 9:case 10:case 13:case 32:E+=mL(p);break;case 92:E+=pL(Em()-1,7);continue;case 47:switch(Ji()){case 42:case 47:vf(yL(gL(vr(),Em()),e,n),l);break;default:E+="/"}break;case 123*g:a[c++]=ji(E)*v;case 125*g:case 59:case 0:switch(w){case 0:case 125:_=0;case 59+u:v==-1&&(E=Ve(E,/\f/g,"")),f>0&&ji(E)-d&&vf(f>32?qE(E+";",r,n,d-1):qE(Ve(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if(vf(C=GE(E,e,n,c,u,i,a,b,k=[],S=[],d),s),w===123)if(u===0)xm(E,e,C,C,k,s,d,a,S);else switch(h===99&&dn(E,3)===110?100:h){case 100:case 108:case 109:case 115:xm(t,C,C,r&&vf(GE(t,C,C,0,0,i,a,b,i,k=[],d),S),i,S,d,a,r?k:S);break;default:xm(E,C,C,C,[""],S,0,a,S)}}c=u=f=0,g=v=1,b=E="",d=o;break;case 58:d=1+ji(E),f=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&fL()==125)continue}switch(E+=Ig(w),w*g){case 38:v=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(ji(E)-1)*v,v=1;break;case 64:Ji()===45&&(E+=Cm(vr())),h=Ji(),u=d=ji(b=E+=wL(Em())),w++;break;case 45:p===45&&ji(E)==2&&(g=0)}}return s}function GE(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],f=Fb(h),p=0,g=0,_=0;p<r;++p)for(var v=0,w=Pd(t,d+1,d=aL(g=o[p])),b=t;v<f;++v)(b=$3(g>0?h[v]+" "+w:Ve(w,/&\f/g,h[v])))&&(l[_++]=b);return Og(t,e,n,i===0?Lb:a,l,c,u)}function yL(t,e,n){return Og(t,e,n,D3,Ig(hL()),Pd(t,2,-2),0)}function qE(t,e,n,r){return Og(t,e,n,$b,Pd(t,0,r),Pd(t,r+1,-1),r)}function ac(t,e){for(var n="",r=Fb(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function bL(t,e,n,r){switch(t.type){case oL:if(t.children.length)break;case sL:case $b:return t.return=t.return||t.value;case D3:return"";case L3:return t.return=t.value+"{"+ac(t.children,r)+"}";case Lb:t.value=t.props.join(",")}return ji(n=ac(t.children,r))?t.return=t.value+"{"+n+"}":""}function _L(t){var e=Fb(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function kL(t){return function(e){e.root||(e=e.return)&&t(e)}}function EL(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var CL=function(e,n,r){for(var i=0,s=0;i=s,s=Ji(),i===38&&s===12&&(n[r]=1),!Ad(s);)vr();return Oh(e,nr)},xL=function(e,n){var r=-1,i=44;do switch(Ad(i)){case 0:i===38&&Ji()===12&&(n[r]=1),e[r]+=CL(nr-1,n,r);break;case 2:e[r]+=Cm(i);break;case 4:if(i===44){e[++r]=Ji()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Ig(i)}while(i=vr());return e},SL=function(e,n){return B3(xL(V3(e),n))},YE=new WeakMap,TL=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!YE.get(r))&&!i){YE.set(e,!0);for(var s=[],o=SL(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},PL=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function U3(t,e){switch(cL(t,e)){case 5103:return Fe+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Fe+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Fe+t+sp+t+Cn+t+t;case 6828:case 4268:return Fe+t+Cn+t+t;case 6165:return Fe+t+Cn+"flex-"+t+t;case 5187:return Fe+t+Ve(t,/(\w+).+(:[^]+)/,Fe+"box-$1$2"+Cn+"flex-$1$2")+t;case 5443:return Fe+t+Cn+"flex-item-"+Ve(t,/flex-|-self/,"")+t;case 4675:return Fe+t+Cn+"flex-line-pack"+Ve(t,/align-content|flex-|-self/,"")+t;case 5548:return Fe+t+Cn+Ve(t,"shrink","negative")+t;case 5292:return Fe+t+Cn+Ve(t,"basis","preferred-size")+t;case 6060:return Fe+"box-"+Ve(t,"-grow","")+Fe+t+Cn+Ve(t,"grow","positive")+t;case 4554:return Fe+Ve(t,/([^-])(transform)/g,"$1"+Fe+"$2")+t;case 6187:return Ve(Ve(Ve(t,/(zoom-|grab)/,Fe+"$1"),/(image-set)/,Fe+"$1"),t,"")+t;case 5495:case 3959:return Ve(t,/(image-set\([^]*)/,Fe+"$1$`$1");case 4968:return Ve(Ve(t,/(.+:)(flex-)?(.*)/,Fe+"box-pack:$3"+Cn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Fe+t+t;case 4095:case 3583:case 4068:case 2532:return Ve(t,/(.+)-inline(.+)/,Fe+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ji(t)-1-e>6)switch(dn(t,e+1)){case 109:if(dn(t,e+4)!==45)break;case 102:return Ve(t,/(.+:)(.+)-([^]+)/,"$1"+Fe+"$2-$3$1"+sp+(dn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~iv(t,"stretch")?U3(Ve(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(dn(t,e+1)!==115)break;case 6444:switch(dn(t,ji(t)-3-(~iv(t,"!important")&&10))){case 107:return Ve(t,":",":"+Fe)+t;case 101:return Ve(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Fe+(dn(t,14)===45?"inline-":"")+"box$3$1"+Fe+"$2$3$1"+Cn+"$2box$3")+t}break;case 5936:switch(dn(t,e+11)){case 114:return Fe+t+Cn+Ve(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Fe+t+Cn+Ve(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Fe+t+Cn+Ve(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Fe+t+Cn+t+t}return t}var AL=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case $b:e.return=U3(e.value,e.length);break;case L3:return ac([xu(e,{value:Ve(e.value,"@","@"+Fe)})],i);case Lb:if(e.length)return dL(e.props,function(s){switch(uL(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ac([xu(e,{props:[Ve(s,/:(read-\w+)/,":"+sp+"$1")]})],i);case"::placeholder":return ac([xu(e,{props:[Ve(s,/:(plac\w+)/,":"+Fe+"input-$1")]}),xu(e,{props:[Ve(s,/:(plac\w+)/,":"+sp+"$1")]}),xu(e,{props:[Ve(s,/:(plac\w+)/,Cn+"input-$1")]})],i)}return""})}},IL=[AL],RL=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var _=g.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||IL,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var _=g.getAttribute("data-emotion").split(" "),v=1;v<_.length;v++)s[_[v]]=!0;a.push(g)});var l,c=[TL,PL];{var u,d=[bL,kL(function(g){u.insert(g)})],h=_L(c.concat(i,d)),f=function(_){return ac(vL(_),h)};l=function(_,v,w,b){u=w,f(_?_+"{"+v.styles+"}":v.styles),b&&(p.inserted[v.name]=!0)}}var p={key:n,sheet:new iL({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p};function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U.apply(this,arguments)}var z3={exports:{}},Ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sn=typeof Symbol=="function"&&Symbol.for,Vb=sn?Symbol.for("react.element"):60103,Bb=sn?Symbol.for("react.portal"):60106,Mg=sn?Symbol.for("react.fragment"):60107,Ng=sn?Symbol.for("react.strict_mode"):60108,Dg=sn?Symbol.for("react.profiler"):60114,Lg=sn?Symbol.for("react.provider"):60109,$g=sn?Symbol.for("react.context"):60110,Ub=sn?Symbol.for("react.async_mode"):60111,Fg=sn?Symbol.for("react.concurrent_mode"):60111,Vg=sn?Symbol.for("react.forward_ref"):60112,Bg=sn?Symbol.for("react.suspense"):60113,OL=sn?Symbol.for("react.suspense_list"):60120,Ug=sn?Symbol.for("react.memo"):60115,zg=sn?Symbol.for("react.lazy"):60116,ML=sn?Symbol.for("react.block"):60121,NL=sn?Symbol.for("react.fundamental"):60117,DL=sn?Symbol.for("react.responder"):60118,LL=sn?Symbol.for("react.scope"):60119;function Ar(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Vb:switch(t=t.type,t){case Ub:case Fg:case Mg:case Dg:case Ng:case Bg:return t;default:switch(t=t&&t.$$typeof,t){case $g:case Vg:case zg:case Ug:case Lg:return t;default:return e}}case Bb:return e}}}function H3(t){return Ar(t)===Fg}Ye.AsyncMode=Ub;Ye.ConcurrentMode=Fg;Ye.ContextConsumer=$g;Ye.ContextProvider=Lg;Ye.Element=Vb;Ye.ForwardRef=Vg;Ye.Fragment=Mg;Ye.Lazy=zg;Ye.Memo=Ug;Ye.Portal=Bb;Ye.Profiler=Dg;Ye.StrictMode=Ng;Ye.Suspense=Bg;Ye.isAsyncMode=function(t){return H3(t)||Ar(t)===Ub};Ye.isConcurrentMode=H3;Ye.isContextConsumer=function(t){return Ar(t)===$g};Ye.isContextProvider=function(t){return Ar(t)===Lg};Ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vb};Ye.isForwardRef=function(t){return Ar(t)===Vg};Ye.isFragment=function(t){return Ar(t)===Mg};Ye.isLazy=function(t){return Ar(t)===zg};Ye.isMemo=function(t){return Ar(t)===Ug};Ye.isPortal=function(t){return Ar(t)===Bb};Ye.isProfiler=function(t){return Ar(t)===Dg};Ye.isStrictMode=function(t){return Ar(t)===Ng};Ye.isSuspense=function(t){return Ar(t)===Bg};Ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Mg||t===Fg||t===Dg||t===Ng||t===Bg||t===OL||typeof t=="object"&&t!==null&&(t.$$typeof===zg||t.$$typeof===Ug||t.$$typeof===Lg||t.$$typeof===$g||t.$$typeof===Vg||t.$$typeof===NL||t.$$typeof===DL||t.$$typeof===LL||t.$$typeof===ML)};Ye.typeOf=Ar;z3.exports=Ye;var $L=z3.exports,W3=$L,FL={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},VL={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},j3={};j3[W3.ForwardRef]=FL;j3[W3.Memo]=VL;var BL=!0;function UL(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var G3=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||BL===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},zL=function(e,n,r){G3(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function HL(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var WL={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jL=/[A-Z]|^ms/g,GL=/_EMO_([^_]+?)_([^]*?)_EMO_/g,q3=function(e){return e.charCodeAt(1)===45},KE=function(e){return e!=null&&typeof e!="boolean"},w1=EL(function(t){return q3(t)?t:t.replace(jL,"-$&").toLowerCase()}),ZE=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(GL,function(r,i,s){return Gi={name:i,styles:s,next:Gi},i})}return WL[e]!==1&&!q3(e)&&typeof n=="number"&&n!==0?n+"px":n};function Id(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Gi={name:n.name,styles:n.styles,next:Gi},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Gi={name:r.name,styles:r.styles,next:Gi},r=r.next;var i=n.styles+";";return i}return qL(t,e,n)}case"function":{if(t!==void 0){var s=Gi,o=n(t);return Gi=s,Id(t,e,o)}break}}return n}function qL(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Id(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")KE(o)&&(r+=w1(s)+":"+ZE(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var a=0;a<o.length;a++)KE(o[a])&&(r+=w1(s)+":"+ZE(s,o[a])+";");else{var l=Id(t,e,o);switch(s){case"animation":case"animationName":{r+=w1(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var JE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Gi,YL=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Gi=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Id(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Id(r,n,e[a]),i&&(s+=o[a]);JE.lastIndex=0;for(var l="",c;(c=JE.exec(s))!==null;)l+="-"+c[1];var u=HL(s)+l;return{name:u,styles:s,next:Gi}},KL=function(e){return e()},ZL=Sc.useInsertionEffect?Sc.useInsertionEffect:!1,JL=ZL||KL,Hg={}.hasOwnProperty,Y3=m.createContext(typeof HTMLElement<"u"?RL({key:"css"}):null);Y3.Provider;var XL=function(e){return m.forwardRef(function(n,r){var i=m.useContext(Y3);return e(n,i,r)})},QL=m.createContext({}),ov="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",K3=function(e,n){var r={};for(var i in n)Hg.call(n,i)&&(r[i]=n[i]);return r[ov]=e,r},e$=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return G3(n,r,i),JL(function(){return zL(n,r,i)}),null},t$=XL(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[ov],s=[r],o="";typeof t.className=="string"?o=UL(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=YL(s,void 0,m.useContext(QL));o+=e.key+"-"+a.name;var l={};for(var c in t)Hg.call(t,c)&&c!=="css"&&c!==ov&&(l[c]=t[c]);return l.ref=n,l.className=o,m.createElement(m.Fragment,null,m.createElement(e$,{cache:e,serialized:a,isStringTag:typeof i=="string"}),m.createElement(i,l))}),Z3=t$,Be=Td.Fragment;function y(t,e,n){return Hg.call(e,"css")?Td.jsx(Z3,K3(t,e),n):Td.jsx(t,e,n)}function I(t,e,n){return Hg.call(e,"css")?Td.jsxs(Z3,K3(t,e),n):Td.jsxs(t,e,n)}var av={},J3={exports:{}},Ir={},X3={exports:{}},Q3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,M){var H=D.length;D.push(M);e:for(;0<H;){var G=H-1>>>1,q=D[G];if(0<i(q,M))D[G]=M,D[H]=q,H=G;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var M=D[0],H=D.pop();if(H!==M){D[0]=H;e:for(var G=0,q=D.length,ke=q>>>1;G<ke;){var ae=2*(G+1)-1,Xe=D[ae],fe=ae+1,Pt=D[fe];if(0>i(Xe,H))fe<q&&0>i(Pt,Xe)?(D[G]=Pt,D[fe]=H,G=fe):(D[G]=Xe,D[ae]=H,G=ae);else if(fe<q&&0>i(Pt,H))D[G]=Pt,D[fe]=H,G=fe;else break e}}return M}function i(D,M){var H=D.sortIndex-M.sortIndex;return H!==0?H:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=D)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function k(D){if(g=!1,b(D),!p)if(n(l)!==null)p=!0,ue(S);else{var M=n(c);M!==null&&de(k,M.startTime-D)}}function S(D,M){p=!1,g&&(g=!1,v(x),x=-1),f=!0;var H=h;try{for(b(M),d=n(l);d!==null&&(!(d.expirationTime>M)||D&&!$());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var q=G(d.expirationTime<=M);M=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),b(M)}else r(l);d=n(l)}if(d!==null)var ke=!0;else{var ae=n(c);ae!==null&&de(k,ae.startTime-M),ke=!1}return ke}finally{d=null,h=H,f=!1}}var C=!1,E=null,x=-1,A=5,R=-1;function $(){return!(t.unstable_now()-R<A)}function z(){if(E!==null){var D=t.unstable_now();R=D;var M=!0;try{M=E(!0,D)}finally{M?re():(C=!1,E=null)}}else C=!1}var re;if(typeof w=="function")re=function(){w(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ne=Y.port2;Y.port1.onmessage=z,re=function(){ne.postMessage(null)}}else re=function(){_(z,0)};function ue(D){E=D,C||(C=!0,re())}function de(D,M){x=_(function(){D(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ue(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var H=h;h=M;try{return D()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=h;h=D;try{return M()}finally{h=H}},t.unstable_scheduleCallback=function(D,M,H){var G=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,D){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,D={id:u++,callback:M,priorityLevel:D,startTime:H,expirationTime:q,sortIndex:-1},H>G?(D.sortIndex=H,e(c,D),n(l)===null&&D===n(c)&&(g?(v(x),x=-1):g=!0,de(k,H-G))):(D.sortIndex=q,e(l,D),p||f||(p=!0,ue(S))),D},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(D){var M=h;return function(){var H=h;h=M;try{return D.apply(this,arguments)}finally{h=H}}}})(Q3);X3.exports=Q3;var n$=X3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r$=m,kr=n$;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eA=new Set,Rd={};function dl(t,e){Pc(t,e),Pc(t+"Capture",e)}function Pc(t,e){for(Rd[t]=e,t=0;t<e.length;t++)eA.add(e[t])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lv=Object.prototype.hasOwnProperty,i$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XE={},QE={};function s$(t){return lv.call(QE,t)?!0:lv.call(XE,t)?!1:i$.test(t)?QE[t]=!0:(XE[t]=!0,!1)}function o$(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function a$(t,e,n,r){if(e===null||typeof e>"u"||o$(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var zb=/[\-:]([a-z])/g;function Hb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zb,Hb);gn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zb,Hb);gn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zb,Hb);gn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wb(t,e,n,r){var i=gn.hasOwnProperty(e)?gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(a$(e,n,i,r)&&(n=null),r||i===null?s$(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oo=r$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yf=Symbol.for("react.element"),ql=Symbol.for("react.portal"),Yl=Symbol.for("react.fragment"),jb=Symbol.for("react.strict_mode"),cv=Symbol.for("react.profiler"),tA=Symbol.for("react.provider"),nA=Symbol.for("react.context"),Gb=Symbol.for("react.forward_ref"),uv=Symbol.for("react.suspense"),dv=Symbol.for("react.suspense_list"),qb=Symbol.for("react.memo"),Po=Symbol.for("react.lazy"),rA=Symbol.for("react.offscreen"),eC=Symbol.iterator;function Su(t){return t===null||typeof t!="object"?null:(t=eC&&t[eC]||t["@@iterator"],typeof t=="function"?t:null)}var St=Object.assign,v1;function ed(t){if(v1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);v1=e&&e[1]||""}return`
`+v1+t}var y1=!1;function b1(t,e){if(!t||y1)return"";y1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{y1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ed(t):""}function l$(t){switch(t.tag){case 5:return ed(t.type);case 16:return ed("Lazy");case 13:return ed("Suspense");case 19:return ed("SuspenseList");case 0:case 2:case 15:return t=b1(t.type,!1),t;case 11:return t=b1(t.type.render,!1),t;case 1:return t=b1(t.type,!0),t;default:return""}}function hv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yl:return"Fragment";case ql:return"Portal";case cv:return"Profiler";case jb:return"StrictMode";case uv:return"Suspense";case dv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nA:return(t.displayName||"Context")+".Consumer";case tA:return(t._context.displayName||"Context")+".Provider";case Gb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qb:return e=t.displayName||null,e!==null?e:hv(t.type)||"Memo";case Po:e=t._payload,t=t._init;try{return hv(t(e))}catch{}}return null}function c$(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hv(e);case 8:return e===jb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function na(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function u$(t){var e=iA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bf(t){t._valueTracker||(t._valueTracker=u$(t))}function sA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function op(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fv(t,e){var n=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=na(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oA(t,e){e=e.checked,e!=null&&Wb(t,"checked",e,!1)}function mv(t,e){oA(t,e);var n=na(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pv(t,e.type,n):e.hasOwnProperty("defaultValue")&&pv(t,e.type,na(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pv(t,e,n){(e!=="number"||op(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var td=Array.isArray;function lc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+na(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(td(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:na(n)}}function aA(t,e){var n=na(e.value),r=na(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _f,cA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_f=_f||document.createElement("div"),_f.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_f.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Od(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ld={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d$=["Webkit","ms","Moz","O"];Object.keys(ld).forEach(function(t){d$.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ld[e]=ld[t]})});function uA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ld.hasOwnProperty(t)&&ld[t]?(""+e).trim():e+"px"}function dA(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var h$=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vv(t,e){if(e){if(h$[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function yv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bv=null;function Yb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _v=null,cc=null,uc=null;function sC(t){if(t=Dh(t)){if(typeof _v!="function")throw Error(F(280));var e=t.stateNode;e&&(e=Yg(e),_v(t.stateNode,t.type,e))}}function hA(t){cc?uc?uc.push(t):uc=[t]:cc=t}function fA(){if(cc){var t=cc,e=uc;if(uc=cc=null,sC(t),e)for(t=0;t<e.length;t++)sC(e[t])}}function mA(t,e){return t(e)}function pA(){}var _1=!1;function gA(t,e,n){if(_1)return t(e,n);_1=!0;try{return mA(t,e,n)}finally{_1=!1,(cc!==null||uc!==null)&&(pA(),fA())}}function Md(t,e){var n=t.stateNode;if(n===null)return null;var r=Yg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var kv=!1;if(Ys)try{var Tu={};Object.defineProperty(Tu,"passive",{get:function(){kv=!0}}),window.addEventListener("test",Tu,Tu),window.removeEventListener("test",Tu,Tu)}catch{kv=!1}function f$(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var cd=!1,ap=null,lp=!1,Ev=null,m$={onError:function(t){cd=!0,ap=t}};function p$(t,e,n,r,i,s,o,a,l){cd=!1,ap=null,f$.apply(m$,arguments)}function g$(t,e,n,r,i,s,o,a,l){if(p$.apply(this,arguments),cd){if(cd){var c=ap;cd=!1,ap=null}else throw Error(F(198));lp||(lp=!0,Ev=c)}}function hl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oC(t){if(hl(t)!==t)throw Error(F(188))}function w$(t){var e=t.alternate;if(!e){if(e=hl(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oC(i),t;if(s===r)return oC(i),e;s=s.sibling}throw Error(F(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function vA(t){return t=w$(t),t!==null?yA(t):null}function yA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=yA(t);if(e!==null)return e;t=t.sibling}return null}var bA=kr.unstable_scheduleCallback,aC=kr.unstable_cancelCallback,v$=kr.unstable_shouldYield,y$=kr.unstable_requestPaint,$t=kr.unstable_now,b$=kr.unstable_getCurrentPriorityLevel,Kb=kr.unstable_ImmediatePriority,_A=kr.unstable_UserBlockingPriority,cp=kr.unstable_NormalPriority,_$=kr.unstable_LowPriority,kA=kr.unstable_IdlePriority,Wg=null,Xi=null;function k$(t){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(Wg,t,void 0,(t.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:x$,E$=Math.log,C$=Math.LN2;function x$(t){return t>>>=0,t===0?32:31-(E$(t)/C$|0)|0}var kf=64,Ef=4194304;function nd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function up(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nd(a):(s&=o,s!==0&&(r=nd(s)))}else o=n&~i,o!==0?r=nd(o):s!==0&&(r=nd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ci(e),i=1<<n,r|=t[n],e&=~i;return r}function S$(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T$(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ci(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=S$(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function EA(){var t=kf;return kf<<=1,!(kf&4194240)&&(kf=64),t}function k1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ci(e),t[e]=n}function P$(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ci(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ci(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function CA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xA,Jb,SA,TA,PA,xv=!1,Cf=[],zo=null,Ho=null,Wo=null,Nd=new Map,Dd=new Map,Io=[],A$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lC(t,e){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Ho=null;break;case"mouseover":case"mouseout":Wo=null;break;case"pointerover":case"pointerout":Nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dd.delete(e.pointerId)}}function Pu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Dh(e),e!==null&&Jb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function I$(t,e,n,r,i){switch(e){case"focusin":return zo=Pu(zo,t,e,n,r,i),!0;case"dragenter":return Ho=Pu(Ho,t,e,n,r,i),!0;case"mouseover":return Wo=Pu(Wo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nd.set(s,Pu(Nd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dd.set(s,Pu(Dd.get(s)||null,t,e,n,r,i)),!0}return!1}function AA(t){var e=Ra(t.target);if(e!==null){var n=hl(e);if(n!==null){if(e=n.tag,e===13){if(e=wA(n),e!==null){t.blockedOn=e,PA(t.priority,function(){SA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bv=r,n.target.dispatchEvent(r),bv=null}else return e=Dh(n),e!==null&&Jb(e),t.blockedOn=n,!1;e.shift()}return!0}function cC(t,e,n){Sm(t)&&n.delete(e)}function R$(){xv=!1,zo!==null&&Sm(zo)&&(zo=null),Ho!==null&&Sm(Ho)&&(Ho=null),Wo!==null&&Sm(Wo)&&(Wo=null),Nd.forEach(cC),Dd.forEach(cC)}function Au(t,e){t.blockedOn===e&&(t.blockedOn=null,xv||(xv=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,R$)))}function Ld(t){function e(i){return Au(i,t)}if(0<Cf.length){Au(Cf[0],t);for(var n=1;n<Cf.length;n++){var r=Cf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zo!==null&&Au(zo,t),Ho!==null&&Au(Ho,t),Wo!==null&&Au(Wo,t),Nd.forEach(e),Dd.forEach(e),n=0;n<Io.length;n++)r=Io[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Io.length&&(n=Io[0],n.blockedOn===null);)AA(n),n.blockedOn===null&&Io.shift()}var dc=oo.ReactCurrentBatchConfig,dp=!0;function O$(t,e,n,r){var i=Ge,s=dc.transition;dc.transition=null;try{Ge=1,Xb(t,e,n,r)}finally{Ge=i,dc.transition=s}}function M$(t,e,n,r){var i=Ge,s=dc.transition;dc.transition=null;try{Ge=4,Xb(t,e,n,r)}finally{Ge=i,dc.transition=s}}function Xb(t,e,n,r){if(dp){var i=Sv(t,e,n,r);if(i===null)O1(t,e,r,hp,n),lC(t,r);else if(I$(i,t,e,n,r))r.stopPropagation();else if(lC(t,r),e&4&&-1<A$.indexOf(t)){for(;i!==null;){var s=Dh(i);if(s!==null&&xA(s),s=Sv(t,e,n,r),s===null&&O1(t,e,r,hp,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else O1(t,e,r,null,n)}}var hp=null;function Sv(t,e,n,r){if(hp=null,t=Yb(r),t=Ra(t),t!==null)if(e=hl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hp=t,null}function IA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b$()){case Kb:return 1;case _A:return 4;case cp:case _$:return 16;case kA:return 536870912;default:return 16}default:return 16}}var $o=null,Qb=null,Tm=null;function RA(){if(Tm)return Tm;var t,e=Qb,n=e.length,r,i="value"in $o?$o.value:$o.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Tm=i.slice(t,1<r?1-r:void 0)}function Pm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xf(){return!0}function uC(){return!1}function Rr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xf:uC,this.isPropagationStopped=uC,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xf)},persist:function(){},isPersistent:xf}),e}var eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e_=Rr(eu),Nh=St({},eu,{view:0,detail:0}),N$=Rr(Nh),E1,C1,Iu,jg=St({},Nh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Iu&&(Iu&&t.type==="mousemove"?(E1=t.screenX-Iu.screenX,C1=t.screenY-Iu.screenY):C1=E1=0,Iu=t),E1)},movementY:function(t){return"movementY"in t?t.movementY:C1}}),dC=Rr(jg),D$=St({},jg,{dataTransfer:0}),L$=Rr(D$),$$=St({},Nh,{relatedTarget:0}),x1=Rr($$),F$=St({},eu,{animationName:0,elapsedTime:0,pseudoElement:0}),V$=Rr(F$),B$=St({},eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U$=Rr(B$),z$=St({},eu,{data:0}),hC=Rr(z$),H$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G$(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=j$[t])?!!e[t]:!1}function t_(){return G$}var q$=St({},Nh,{key:function(t){if(t.key){var e=H$[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?W$[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t_,charCode:function(t){return t.type==="keypress"?Pm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Y$=Rr(q$),K$=St({},jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fC=Rr(K$),Z$=St({},Nh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t_}),J$=Rr(Z$),X$=St({},eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q$=Rr(X$),eF=St({},jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tF=Rr(eF),nF=[9,13,27,32],n_=Ys&&"CompositionEvent"in window,ud=null;Ys&&"documentMode"in document&&(ud=document.documentMode);var rF=Ys&&"TextEvent"in window&&!ud,OA=Ys&&(!n_||ud&&8<ud&&11>=ud),mC=" ",pC=!1;function MA(t,e){switch(t){case"keyup":return nF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kl=!1;function iF(t,e){switch(t){case"compositionend":return NA(e);case"keypress":return e.which!==32?null:(pC=!0,mC);case"textInput":return t=e.data,t===mC&&pC?null:t;default:return null}}function sF(t,e){if(Kl)return t==="compositionend"||!n_&&MA(t,e)?(t=RA(),Tm=Qb=$o=null,Kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return OA&&e.locale!=="ko"?null:e.data;default:return null}}var oF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oF[t.type]:e==="textarea"}function DA(t,e,n,r){hA(r),e=fp(e,"onChange"),0<e.length&&(n=new e_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var dd=null,$d=null;function aF(t){GA(t,0)}function Gg(t){var e=Xl(t);if(sA(e))return t}function lF(t,e){if(t==="change")return e}var LA=!1;if(Ys){var S1;if(Ys){var T1="oninput"in document;if(!T1){var wC=document.createElement("div");wC.setAttribute("oninput","return;"),T1=typeof wC.oninput=="function"}S1=T1}else S1=!1;LA=S1&&(!document.documentMode||9<document.documentMode)}function vC(){dd&&(dd.detachEvent("onpropertychange",$A),$d=dd=null)}function $A(t){if(t.propertyName==="value"&&Gg($d)){var e=[];DA(e,$d,t,Yb(t)),gA(aF,e)}}function cF(t,e,n){t==="focusin"?(vC(),dd=e,$d=n,dd.attachEvent("onpropertychange",$A)):t==="focusout"&&vC()}function uF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gg($d)}function dF(t,e){if(t==="click")return Gg(e)}function hF(t,e){if(t==="input"||t==="change")return Gg(e)}function fF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ii=typeof Object.is=="function"?Object.is:fF;function Fd(t,e){if(Ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!lv.call(e,i)||!Ii(t[i],e[i]))return!1}return!0}function yC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bC(t,e){var n=yC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yC(n)}}function FA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function VA(){for(var t=window,e=op();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=op(t.document)}return e}function r_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mF(t){var e=VA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&FA(n.ownerDocument.documentElement,n)){if(r!==null&&r_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bC(n,s);var o=bC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pF=Ys&&"documentMode"in document&&11>=document.documentMode,Zl=null,Tv=null,hd=null,Pv=!1;function _C(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Pv||Zl==null||Zl!==op(r)||(r=Zl,"selectionStart"in r&&r_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hd&&Fd(hd,r)||(hd=r,r=fp(Tv,"onSelect"),0<r.length&&(e=new e_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zl)))}function Sf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jl={animationend:Sf("Animation","AnimationEnd"),animationiteration:Sf("Animation","AnimationIteration"),animationstart:Sf("Animation","AnimationStart"),transitionend:Sf("Transition","TransitionEnd")},P1={},BA={};Ys&&(BA=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function qg(t){if(P1[t])return P1[t];if(!Jl[t])return t;var e=Jl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in BA)return P1[t]=e[n];return t}var UA=qg("animationend"),zA=qg("animationiteration"),HA=qg("animationstart"),WA=qg("transitionend"),jA=new Map,kC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(t,e){jA.set(t,e),dl(e,[t])}for(var A1=0;A1<kC.length;A1++){var I1=kC[A1],gF=I1.toLowerCase(),wF=I1[0].toUpperCase()+I1.slice(1);da(gF,"on"+wF)}da(UA,"onAnimationEnd");da(zA,"onAnimationIteration");da(HA,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(WA,"onTransitionEnd");Pc("onMouseEnter",["mouseout","mouseover"]);Pc("onMouseLeave",["mouseout","mouseover"]);Pc("onPointerEnter",["pointerout","pointerover"]);Pc("onPointerLeave",["pointerout","pointerover"]);dl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dl("onBeforeInput",["compositionend","keypress","textInput","paste"]);dl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vF=new Set("cancel close invalid load scroll toggle".split(" ").concat(rd));function EC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,g$(r,e,void 0,t),t.currentTarget=null}function GA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;EC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;EC(i,a,c),s=l}}}if(lp)throw t=Ev,lp=!1,Ev=null,t}function at(t,e){var n=e[Mv];n===void 0&&(n=e[Mv]=new Set);var r=t+"__bubble";n.has(r)||(qA(e,t,2,!1),n.add(r))}function R1(t,e,n){var r=0;e&&(r|=4),qA(n,t,r,e)}var Tf="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[Tf]){t[Tf]=!0,eA.forEach(function(n){n!=="selectionchange"&&(vF.has(n)||R1(n,!1,t),R1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tf]||(e[Tf]=!0,R1("selectionchange",!1,e))}}function qA(t,e,n,r){switch(IA(e)){case 1:var i=O$;break;case 4:i=M$;break;default:i=Xb}n=i.bind(null,e,n,t),i=void 0,!kv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function O1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ra(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}gA(function(){var c=s,u=Yb(n),d=[];e:{var h=jA.get(t);if(h!==void 0){var f=e_,p=t;switch(t){case"keypress":if(Pm(n)===0)break e;case"keydown":case"keyup":f=Y$;break;case"focusin":p="focus",f=x1;break;case"focusout":p="blur",f=x1;break;case"beforeblur":case"afterblur":f=x1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=dC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=L$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=J$;break;case UA:case zA:case HA:f=V$;break;case WA:f=Q$;break;case"scroll":f=N$;break;case"wheel":f=tF;break;case"copy":case"cut":case"paste":f=U$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=fC}var g=(e&4)!==0,_=!g&&t==="scroll",v=g?h!==null?h+"Capture":null:h;g=[];for(var w=c,b;w!==null;){b=w;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,v!==null&&(k=Md(w,v),k!=null&&g.push(Bd(w,k,b)))),_)break;w=w.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==bv&&(p=n.relatedTarget||n.fromElement)&&(Ra(p)||p[Ks]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Ra(p):null,p!==null&&(_=hl(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=dC,k="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=fC,k="onPointerLeave",v="onPointerEnter",w="pointer"),_=f==null?h:Xl(f),b=p==null?h:Xl(p),h=new g(k,w+"leave",f,n,u),h.target=_,h.relatedTarget=b,k=null,Ra(u)===c&&(g=new g(v,w+"enter",p,n,u),g.target=b,g.relatedTarget=_,k=g),_=k,f&&p)t:{for(g=f,v=p,w=0,b=g;b;b=Pl(b))w++;for(b=0,k=v;k;k=Pl(k))b++;for(;0<w-b;)g=Pl(g),w--;for(;0<b-w;)v=Pl(v),b--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=Pl(g),v=Pl(v)}g=null}else g=null;f!==null&&CC(d,h,f,g,!1),p!==null&&_!==null&&CC(d,_,p,g,!0)}}e:{if(h=c?Xl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=lF;else if(gC(h))if(LA)S=hF;else{S=uF;var C=cF}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=dF);if(S&&(S=S(t,c))){DA(d,S,n,u);break e}C&&C(t,h,c),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&pv(h,"number",h.value)}switch(C=c?Xl(c):window,t){case"focusin":(gC(C)||C.contentEditable==="true")&&(Zl=C,Tv=c,hd=null);break;case"focusout":hd=Tv=Zl=null;break;case"mousedown":Pv=!0;break;case"contextmenu":case"mouseup":case"dragend":Pv=!1,_C(d,n,u);break;case"selectionchange":if(pF)break;case"keydown":case"keyup":_C(d,n,u)}var E;if(n_)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Kl?MA(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(OA&&n.locale!=="ko"&&(Kl||x!=="onCompositionStart"?x==="onCompositionEnd"&&Kl&&(E=RA()):($o=u,Qb="value"in $o?$o.value:$o.textContent,Kl=!0)),C=fp(c,x),0<C.length&&(x=new hC(x,t,null,n,u),d.push({event:x,listeners:C}),E?x.data=E:(E=NA(n),E!==null&&(x.data=E)))),(E=rF?iF(t,n):sF(t,n))&&(c=fp(c,"onBeforeInput"),0<c.length&&(u=new hC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}GA(d,e)})}function Bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Md(t,n),s!=null&&r.unshift(Bd(t,s,i)),s=Md(t,e),s!=null&&r.push(Bd(t,s,i))),t=t.return}return r}function Pl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Md(n,s),l!=null&&o.unshift(Bd(n,l,a))):i||(l=Md(n,s),l!=null&&o.push(Bd(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var yF=/\r\n?/g,bF=/\u0000|\uFFFD/g;function xC(t){return(typeof t=="string"?t:""+t).replace(yF,`
`).replace(bF,"")}function Pf(t,e,n){if(e=xC(e),xC(t)!==e&&n)throw Error(F(425))}function mp(){}var Av=null,Iv=null;function Rv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ov=typeof setTimeout=="function"?setTimeout:void 0,_F=typeof clearTimeout=="function"?clearTimeout:void 0,SC=typeof Promise=="function"?Promise:void 0,kF=typeof queueMicrotask=="function"?queueMicrotask:typeof SC<"u"?function(t){return SC.resolve(null).then(t).catch(EF)}:Ov;function EF(t){setTimeout(function(){throw t})}function M1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ld(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ld(e)}function jo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tu=Math.random().toString(36).slice(2),qi="__reactFiber$"+tu,Ud="__reactProps$"+tu,Ks="__reactContainer$"+tu,Mv="__reactEvents$"+tu,CF="__reactListeners$"+tu,xF="__reactHandles$"+tu;function Ra(t){var e=t[qi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ks]||n[qi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TC(t);t!==null;){if(n=t[qi])return n;t=TC(t)}return e}t=n,n=t.parentNode}return null}function Dh(t){return t=t[qi]||t[Ks],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function Yg(t){return t[Ud]||null}var Nv=[],Ql=-1;function ha(t){return{current:t}}function ut(t){0>Ql||(t.current=Nv[Ql],Nv[Ql]=null,Ql--)}function rt(t,e){Ql++,Nv[Ql]=t.current,t.current=e}var ra={},Rn=ha(ra),Zn=ha(!1),qa=ra;function Ac(t,e){var n=t.type.contextTypes;if(!n)return ra;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function pp(){ut(Zn),ut(Rn)}function PC(t,e,n){if(Rn.current!==ra)throw Error(F(168));rt(Rn,e),rt(Zn,n)}function YA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(F(108,c$(t)||"Unknown",i));return St({},n,r)}function gp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ra,qa=Rn.current,rt(Rn,t),rt(Zn,Zn.current),!0}function AC(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=YA(t,e,qa),r.__reactInternalMemoizedMergedChildContext=t,ut(Zn),ut(Rn),rt(Rn,t)):ut(Zn),rt(Zn,n)}var As=null,Kg=!1,N1=!1;function KA(t){As===null?As=[t]:As.push(t)}function SF(t){Kg=!0,KA(t)}function fa(){if(!N1&&As!==null){N1=!0;var t=0,e=Ge;try{var n=As;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}As=null,Kg=!1}catch(i){throw As!==null&&(As=As.slice(t+1)),bA(Kb,fa),i}finally{Ge=e,N1=!1}}return null}var ec=[],tc=0,wp=null,vp=0,zr=[],Hr=0,Ya=null,Ms=1,Ns="";function Sa(t,e){ec[tc++]=vp,ec[tc++]=wp,wp=t,vp=e}function ZA(t,e,n){zr[Hr++]=Ms,zr[Hr++]=Ns,zr[Hr++]=Ya,Ya=t;var r=Ms;t=Ns;var i=32-Ci(r)-1;r&=~(1<<i),n+=1;var s=32-Ci(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ms=1<<32-Ci(e)+i|n<<i|r,Ns=s+t}else Ms=1<<s|n<<i|r,Ns=t}function i_(t){t.return!==null&&(Sa(t,1),ZA(t,1,0))}function s_(t){for(;t===wp;)wp=ec[--tc],ec[tc]=null,vp=ec[--tc],ec[tc]=null;for(;t===Ya;)Ya=zr[--Hr],zr[Hr]=null,Ns=zr[--Hr],zr[Hr]=null,Ms=zr[--Hr],zr[Hr]=null}var yr=null,mr=null,vt=!1,mi=null;function JA(t,e){var n=jr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function IC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yr=t,mr=jo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ya!==null?{id:Ms,overflow:Ns}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yr=t,mr=null,!0):!1;default:return!1}}function Dv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lv(t){if(vt){var e=mr;if(e){var n=e;if(!IC(t,e)){if(Dv(t))throw Error(F(418));e=jo(n.nextSibling);var r=yr;e&&IC(t,e)?JA(r,n):(t.flags=t.flags&-4097|2,vt=!1,yr=t)}}else{if(Dv(t))throw Error(F(418));t.flags=t.flags&-4097|2,vt=!1,yr=t}}}function RC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yr=t}function Af(t){if(t!==yr)return!1;if(!vt)return RC(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rv(t.type,t.memoizedProps)),e&&(e=mr)){if(Dv(t))throw XA(),Error(F(418));for(;e;)JA(t,e),e=jo(e.nextSibling)}if(RC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mr=jo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=yr?jo(t.stateNode.nextSibling):null;return!0}function XA(){for(var t=mr;t;)t=jo(t.nextSibling)}function Ic(){mr=yr=null,vt=!1}function o_(t){mi===null?mi=[t]:mi.push(t)}var TF=oo.ReactCurrentBatchConfig;function Ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function If(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function OC(t){var e=t._init;return e(t._payload)}function QA(t){function e(v,w){if(t){var b=v.deletions;b===null?(v.deletions=[w],v.flags|=16):b.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ko(v,w),v.index=0,v.sibling=null,v}function s(v,w,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<w?(v.flags|=2,w):b):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,b,k){return w===null||w.tag!==6?(w=U1(b,v.mode,k),w.return=v,w):(w=i(w,b),w.return=v,w)}function l(v,w,b,k){var S=b.type;return S===Yl?u(v,w,b.props.children,k,b.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Po&&OC(S)===w.type)?(k=i(w,b.props),k.ref=Ru(v,w,b),k.return=v,k):(k=Dm(b.type,b.key,b.props,null,v.mode,k),k.ref=Ru(v,w,b),k.return=v,k)}function c(v,w,b,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=z1(b,v.mode,k),w.return=v,w):(w=i(w,b.children||[]),w.return=v,w)}function u(v,w,b,k,S){return w===null||w.tag!==7?(w=Va(b,v.mode,k,S),w.return=v,w):(w=i(w,b),w.return=v,w)}function d(v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=U1(""+w,v.mode,b),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case yf:return b=Dm(w.type,w.key,w.props,null,v.mode,b),b.ref=Ru(v,null,w),b.return=v,b;case ql:return w=z1(w,v.mode,b),w.return=v,w;case Po:var k=w._init;return d(v,k(w._payload),b)}if(td(w)||Su(w))return w=Va(w,v.mode,b,null),w.return=v,w;If(v,w)}return null}function h(v,w,b,k){var S=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(v,w,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yf:return b.key===S?l(v,w,b,k):null;case ql:return b.key===S?c(v,w,b,k):null;case Po:return S=b._init,h(v,w,S(b._payload),k)}if(td(b)||Su(b))return S!==null?null:u(v,w,b,k,null);If(v,b)}return null}function f(v,w,b,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(b)||null,a(w,v,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case yf:return v=v.get(k.key===null?b:k.key)||null,l(w,v,k,S);case ql:return v=v.get(k.key===null?b:k.key)||null,c(w,v,k,S);case Po:var C=k._init;return f(v,w,b,C(k._payload),S)}if(td(k)||Su(k))return v=v.get(b)||null,u(w,v,k,S,null);If(w,k)}return null}function p(v,w,b,k){for(var S=null,C=null,E=w,x=w=0,A=null;E!==null&&x<b.length;x++){E.index>x?(A=E,E=null):A=E.sibling;var R=h(v,E,b[x],k);if(R===null){E===null&&(E=A);break}t&&E&&R.alternate===null&&e(v,E),w=s(R,w,x),C===null?S=R:C.sibling=R,C=R,E=A}if(x===b.length)return n(v,E),vt&&Sa(v,x),S;if(E===null){for(;x<b.length;x++)E=d(v,b[x],k),E!==null&&(w=s(E,w,x),C===null?S=E:C.sibling=E,C=E);return vt&&Sa(v,x),S}for(E=r(v,E);x<b.length;x++)A=f(E,v,x,b[x],k),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?x:A.key),w=s(A,w,x),C===null?S=A:C.sibling=A,C=A);return t&&E.forEach(function($){return e(v,$)}),vt&&Sa(v,x),S}function g(v,w,b,k){var S=Su(b);if(typeof S!="function")throw Error(F(150));if(b=S.call(b),b==null)throw Error(F(151));for(var C=S=null,E=w,x=w=0,A=null,R=b.next();E!==null&&!R.done;x++,R=b.next()){E.index>x?(A=E,E=null):A=E.sibling;var $=h(v,E,R.value,k);if($===null){E===null&&(E=A);break}t&&E&&$.alternate===null&&e(v,E),w=s($,w,x),C===null?S=$:C.sibling=$,C=$,E=A}if(R.done)return n(v,E),vt&&Sa(v,x),S;if(E===null){for(;!R.done;x++,R=b.next())R=d(v,R.value,k),R!==null&&(w=s(R,w,x),C===null?S=R:C.sibling=R,C=R);return vt&&Sa(v,x),S}for(E=r(v,E);!R.done;x++,R=b.next())R=f(E,v,x,R.value,k),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?x:R.key),w=s(R,w,x),C===null?S=R:C.sibling=R,C=R);return t&&E.forEach(function(z){return e(v,z)}),vt&&Sa(v,x),S}function _(v,w,b,k){if(typeof b=="object"&&b!==null&&b.type===Yl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case yf:e:{for(var S=b.key,C=w;C!==null;){if(C.key===S){if(S=b.type,S===Yl){if(C.tag===7){n(v,C.sibling),w=i(C,b.props.children),w.return=v,v=w;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Po&&OC(S)===C.type){n(v,C.sibling),w=i(C,b.props),w.ref=Ru(v,C,b),w.return=v,v=w;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===Yl?(w=Va(b.props.children,v.mode,k,b.key),w.return=v,v=w):(k=Dm(b.type,b.key,b.props,null,v.mode,k),k.ref=Ru(v,w,b),k.return=v,v=k)}return o(v);case ql:e:{for(C=b.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(v,w.sibling),w=i(w,b.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=z1(b,v.mode,k),w.return=v,v=w}return o(v);case Po:return C=b._init,_(v,w,C(b._payload),k)}if(td(b))return p(v,w,b,k);if(Su(b))return g(v,w,b,k);If(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,b),w.return=v,v=w):(n(v,w),w=U1(b,v.mode,k),w.return=v,v=w),o(v)):n(v,w)}return _}var Rc=QA(!0),eI=QA(!1),yp=ha(null),bp=null,nc=null,a_=null;function l_(){a_=nc=bp=null}function c_(t){var e=yp.current;ut(yp),t._currentValue=e}function $v(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hc(t,e){bp=t,a_=nc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(a_!==t)if(t={context:t,memoizedValue:e,next:null},nc===null){if(bp===null)throw Error(F(308));nc=t,bp.dependencies={lanes:0,firstContext:t}}else nc=nc.next=t;return e}var Oa=null;function u_(t){Oa===null?Oa=[t]:Oa.push(t)}function tI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,u_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Zs(t,r)}function Zs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ao=!1;function d_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Go(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Zs(t,n)}return i=r.interleaved,i===null?(e.next=e,u_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Zs(t,n)}function Am(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zb(t,n)}}function MC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _p(t,e,n,r){var i=t.updateQueue;Ao=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=St({},d,h);break e;case 2:Ao=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Za|=o,t.lanes=o,t.memoizedState=d}}function NC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(F(191,i));i.call(r)}}}var Lh={},Qi=ha(Lh),zd=ha(Lh),Hd=ha(Lh);function Ma(t){if(t===Lh)throw Error(F(174));return t}function h_(t,e){switch(rt(Hd,e),rt(zd,t),rt(Qi,Lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wv(e,t)}ut(Qi),rt(Qi,e)}function Oc(){ut(Qi),ut(zd),ut(Hd)}function rI(t){Ma(Hd.current);var e=Ma(Qi.current),n=wv(e,t.type);e!==n&&(rt(zd,t),rt(Qi,n))}function f_(t){zd.current===t&&(ut(Qi),ut(zd))}var Ct=ha(0);function kp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var D1=[];function m_(){for(var t=0;t<D1.length;t++)D1[t]._workInProgressVersionPrimary=null;D1.length=0}var Im=oo.ReactCurrentDispatcher,L1=oo.ReactCurrentBatchConfig,Ka=0,xt=null,Gt=null,en=null,Ep=!1,fd=!1,Wd=0,PF=0;function _n(){throw Error(F(321))}function p_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ii(t[n],e[n]))return!1;return!0}function g_(t,e,n,r,i,s){if(Ka=s,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Im.current=t===null||t.memoizedState===null?OF:MF,t=n(r,i),fd){s=0;do{if(fd=!1,Wd=0,25<=s)throw Error(F(301));s+=1,en=Gt=null,e.updateQueue=null,Im.current=NF,t=n(r,i)}while(fd)}if(Im.current=Cp,e=Gt!==null&&Gt.next!==null,Ka=0,en=Gt=xt=null,Ep=!1,e)throw Error(F(300));return t}function w_(){var t=Wd!==0;return Wd=0,t}function zi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?xt.memoizedState=en=t:en=en.next=t,en}function Jr(){if(Gt===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var e=en===null?xt.memoizedState:en.next;if(e!==null)en=e,Gt=t;else{if(t===null)throw Error(F(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},en===null?xt.memoizedState=en=t:en=en.next=t}return en}function jd(t,e){return typeof e=="function"?e(t):e}function $1(t){var e=Jr(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Gt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ka&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,xt.lanes|=u,Za|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Ii(r,e.memoizedState)||(Kn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xt.lanes|=s,Za|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function F1(t){var e=Jr(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ii(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function iI(){}function sI(t,e){var n=xt,r=Jr(),i=e(),s=!Ii(r.memoizedState,i);if(s&&(r.memoizedState=i,Kn=!0),r=r.queue,v_(lI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,Gd(9,aI.bind(null,n,r,i,e),void 0,null),nn===null)throw Error(F(349));Ka&30||oI(n,e,i)}return i}function oI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aI(t,e,n,r){e.value=n,e.getSnapshot=r,cI(e)&&uI(t)}function lI(t,e,n){return n(function(){cI(e)&&uI(t)})}function cI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ii(t,n)}catch{return!0}}function uI(t){var e=Zs(t,1);e!==null&&xi(e,t,1,-1)}function DC(t){var e=zi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jd,lastRenderedState:t},e.queue=t,t=t.dispatch=RF.bind(null,xt,t),[e.memoizedState,t]}function Gd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dI(){return Jr().memoizedState}function Rm(t,e,n,r){var i=zi();xt.flags|=t,i.memoizedState=Gd(1|e,n,void 0,r===void 0?null:r)}function Zg(t,e,n,r){var i=Jr();r=r===void 0?null:r;var s=void 0;if(Gt!==null){var o=Gt.memoizedState;if(s=o.destroy,r!==null&&p_(r,o.deps)){i.memoizedState=Gd(e,n,s,r);return}}xt.flags|=t,i.memoizedState=Gd(1|e,n,s,r)}function LC(t,e){return Rm(8390656,8,t,e)}function v_(t,e){return Zg(2048,8,t,e)}function hI(t,e){return Zg(4,2,t,e)}function fI(t,e){return Zg(4,4,t,e)}function mI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pI(t,e,n){return n=n!=null?n.concat([t]):null,Zg(4,4,mI.bind(null,e,t),n)}function y_(){}function gI(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wI(t,e){var n=Jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&p_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vI(t,e,n){return Ka&21?(Ii(n,e)||(n=EA(),xt.lanes|=n,Za|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=n)}function AF(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=L1.transition;L1.transition={};try{t(!1),e()}finally{Ge=n,L1.transition=r}}function yI(){return Jr().memoizedState}function IF(t,e,n){var r=Yo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bI(t))_I(e,n);else if(n=tI(t,e,n,r),n!==null){var i=Ln();xi(n,t,r,i),kI(n,e,r)}}function RF(t,e,n){var r=Yo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bI(t))_I(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ii(a,o)){var l=e.interleaved;l===null?(i.next=i,u_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=tI(t,e,i,r),n!==null&&(i=Ln(),xi(n,t,r,i),kI(n,e,r))}}function bI(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function _I(t,e){fd=Ep=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zb(t,n)}}var Cp={readContext:Zr,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},OF={readContext:Zr,useCallback:function(t,e){return zi().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:LC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rm(4194308,4,mI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rm(4,2,t,e)},useMemo:function(t,e){var n=zi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IF.bind(null,xt,t),[r.memoizedState,t]},useRef:function(t){var e=zi();return t={current:t},e.memoizedState=t},useState:DC,useDebugValue:y_,useDeferredValue:function(t){return zi().memoizedState=t},useTransition:function(){var t=DC(!1),e=t[0];return t=AF.bind(null,t[1]),zi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xt,i=zi();if(vt){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),nn===null)throw Error(F(349));Ka&30||oI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,LC(lI.bind(null,r,s,t),[t]),r.flags|=2048,Gd(9,aI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zi(),e=nn.identifierPrefix;if(vt){var n=Ns,r=Ms;n=(r&~(1<<32-Ci(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MF={readContext:Zr,useCallback:gI,useContext:Zr,useEffect:v_,useImperativeHandle:pI,useInsertionEffect:hI,useLayoutEffect:fI,useMemo:wI,useReducer:$1,useRef:dI,useState:function(){return $1(jd)},useDebugValue:y_,useDeferredValue:function(t){var e=Jr();return vI(e,Gt.memoizedState,t)},useTransition:function(){var t=$1(jd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:iI,useSyncExternalStore:sI,useId:yI,unstable_isNewReconciler:!1},NF={readContext:Zr,useCallback:gI,useContext:Zr,useEffect:v_,useImperativeHandle:pI,useInsertionEffect:hI,useLayoutEffect:fI,useMemo:wI,useReducer:F1,useRef:dI,useState:function(){return F1(jd)},useDebugValue:y_,useDeferredValue:function(t){var e=Jr();return Gt===null?e.memoizedState=t:vI(e,Gt.memoizedState,t)},useTransition:function(){var t=F1(jd)[0],e=Jr().memoizedState;return[t,e]},useMutableSource:iI,useSyncExternalStore:sI,useId:yI,unstable_isNewReconciler:!1};function hi(t,e){if(t&&t.defaultProps){e=St({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:St({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jg={isMounted:function(t){return(t=t._reactInternals)?hl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ln(),i=Yo(t),s=zs(r,i);s.payload=e,n!=null&&(s.callback=n),e=Go(t,s,i),e!==null&&(xi(e,t,i,r),Am(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ln(),i=Yo(t),s=zs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Go(t,s,i),e!==null&&(xi(e,t,i,r),Am(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ln(),r=Yo(t),i=zs(n,r);i.tag=2,e!=null&&(i.callback=e),e=Go(t,i,r),e!==null&&(xi(e,t,r,n),Am(e,t,r))}};function $C(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fd(n,r)||!Fd(i,s):!0}function EI(t,e,n){var r=!1,i=ra,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(i=Jn(e)?qa:Rn.current,r=e.contextTypes,s=(r=r!=null)?Ac(t,i):ra),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jg,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function FC(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jg.enqueueReplaceState(e,e.state,null)}function Vv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},d_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zr(s):(s=Jn(e)?qa:Rn.current,i.context=Ac(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jg.enqueueReplaceState(i,i.state,null),_p(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mc(t,e){try{var n="",r=e;do n+=l$(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function V1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DF=typeof WeakMap=="function"?WeakMap:Map;function CI(t,e,n){n=zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sp||(Sp=!0,Zv=r),Bv(t,e)},n}function xI(t,e,n){n=zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bv(t,e),typeof r!="function"&&(qo===null?qo=new Set([this]):qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function VC(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DF;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KF.bind(null,t,e,n),e.then(t,t))}function BC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function UC(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zs(-1,1),e.tag=2,Go(n,e,1))),n.lanes|=1),t)}var LF=oo.ReactCurrentOwner,Kn=!1;function Nn(t,e,n,r){e.child=t===null?eI(e,null,n,r):Rc(e,t.child,n,r)}function zC(t,e,n,r,i){n=n.render;var s=e.ref;return hc(e,i),r=g_(t,e,n,r,s,i),n=w_(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Js(t,e,i)):(vt&&n&&i_(e),e.flags|=1,Nn(t,e,r,i),e.child)}function HC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!T_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,SI(t,e,s,r,i)):(t=Dm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fd,n(o,r)&&t.ref===e.ref)return Js(t,e,i)}return e.flags|=1,t=Ko(s,r),t.ref=e.ref,t.return=e,e.child=t}function SI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Fd(s,r)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,Js(t,e,i)}return Uv(t,e,n,r,i)}function TI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(ic,lr),lr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(ic,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,rt(ic,lr),lr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,rt(ic,lr),lr|=r;return Nn(t,e,i,n),e.child}function PI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uv(t,e,n,r,i){var s=Jn(n)?qa:Rn.current;return s=Ac(e,s),hc(e,i),n=g_(t,e,n,r,s,i),r=w_(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Js(t,e,i)):(vt&&r&&i_(e),e.flags|=1,Nn(t,e,n,i),e.child)}function WC(t,e,n,r,i){if(Jn(n)){var s=!0;gp(e)}else s=!1;if(hc(e,i),e.stateNode===null)Om(t,e),EI(e,n,r),Vv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zr(c):(c=Jn(n)?qa:Rn.current,c=Ac(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&FC(e,o,r,c),Ao=!1;var h=e.memoizedState;o.state=h,_p(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Zn.current||Ao?(typeof u=="function"&&(Fv(e,n,u,r),l=e.memoizedState),(a=Ao||$C(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,nI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hi(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=Jn(n)?qa:Rn.current,l=Ac(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&FC(e,o,r,l),Ao=!1,h=e.memoizedState,o.state=h,_p(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||Zn.current||Ao?(typeof f=="function"&&(Fv(e,n,f,r),p=e.memoizedState),(c=Ao||$C(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return zv(t,e,n,r,s,i)}function zv(t,e,n,r,i,s){PI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AC(e,n,!1),Js(t,e,s);r=e.stateNode,LF.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rc(e,t.child,null,s),e.child=Rc(e,null,a,s)):Nn(t,e,a,s),e.memoizedState=r.state,i&&AC(e,n,!0),e.child}function AI(t){var e=t.stateNode;e.pendingContext?PC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&PC(t,e.context,!1),h_(t,e.containerInfo)}function jC(t,e,n,r,i){return Ic(),o_(i),e.flags|=256,Nn(t,e,n,r),e.child}var Hv={dehydrated:null,treeContext:null,retryLane:0};function Wv(t){return{baseLanes:t,cachePool:null,transitions:null}}function II(t,e,n){var r=e.pendingProps,i=Ct.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rt(Ct,i&1),t===null)return Lv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=e0(o,r,0,null),t=Va(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wv(n),e.memoizedState=Hv,t):b_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $F(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ko(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ko(a,s):(s=Va(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hv,r}return s=t.child,t=s.sibling,r=Ko(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function b_(t,e){return e=e0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Rf(t,e,n,r){return r!==null&&o_(r),Rc(e,t.child,null,n),t=b_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $F(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=V1(Error(F(422))),Rf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=e0({mode:"visible",children:r.children},i,0,null),s=Va(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rc(e,t.child,null,o),e.child.memoizedState=Wv(o),e.memoizedState=Hv,s);if(!(e.mode&1))return Rf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(F(419)),r=V1(s,r,void 0),Rf(t,e,o,r)}if(a=(o&t.childLanes)!==0,Kn||a){if(r=nn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Zs(t,i),xi(r,t,i,-1))}return S_(),r=V1(Error(F(421))),Rf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ZF.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,mr=jo(i.nextSibling),yr=e,vt=!0,mi=null,t!==null&&(zr[Hr++]=Ms,zr[Hr++]=Ns,zr[Hr++]=Ya,Ms=t.id,Ns=t.overflow,Ya=e),e=b_(e,r.children),e.flags|=4096,e)}function GC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$v(t.return,e,n)}function B1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function RI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nn(t,e,r.children,n),r=Ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&GC(t,n,e);else if(t.tag===19)GC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(Ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&kp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),B1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}B1(e,!0,n,null,s);break;case"together":B1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Om(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Js(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Za|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Ko(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ko(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FF(t,e,n){switch(e.tag){case 3:AI(e),Ic();break;case 5:rI(e);break;case 1:Jn(e.type)&&gp(e);break;case 4:h_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rt(yp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(Ct,Ct.current&1),e.flags|=128,null):n&e.child.childLanes?II(t,e,n):(rt(Ct,Ct.current&1),t=Js(t,e,n),t!==null?t.sibling:null);rt(Ct,Ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rt(Ct,Ct.current),r)break;return null;case 22:case 23:return e.lanes=0,TI(t,e,n)}return Js(t,e,n)}var OI,jv,MI,NI;OI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jv=function(){};MI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ma(Qi.current);var s=null;switch(n){case"input":i=fv(t,i),r=fv(t,r),s=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),s=[];break;case"textarea":i=gv(t,i),r=gv(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mp)}vv(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&at("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};NI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ou(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VF(t,e,n){var r=e.pendingProps;switch(s_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(e),null;case 1:return Jn(e.type)&&pp(),kn(e),null;case 3:return r=e.stateNode,Oc(),ut(Zn),ut(Rn),m_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Af(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(Qv(mi),mi=null))),jv(t,e),kn(e),null;case 5:f_(e);var i=Ma(Hd.current);if(n=e.type,t!==null&&e.stateNode!=null)MI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return kn(e),null}if(t=Ma(Qi.current),Af(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qi]=e,r[Ud]=s,t=(e.mode&1)!==0,n){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(i=0;i<rd.length;i++)at(rd[i],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":tC(r,s),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},at("invalid",r);break;case"textarea":rC(r,s),at("invalid",r)}vv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pf(r.textContent,a,t),i=["children",""+a]):Rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&at("scroll",r)}switch(n){case"input":bf(r),nC(r,s,!0);break;case"textarea":bf(r),iC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qi]=e,t[Ud]=r,OI(t,e,!1,!1),e.stateNode=t;e:{switch(o=yv(n,r),n){case"dialog":at("cancel",t),at("close",t),i=r;break;case"iframe":case"object":case"embed":at("load",t),i=r;break;case"video":case"audio":for(i=0;i<rd.length;i++)at(rd[i],t);i=r;break;case"source":at("error",t),i=r;break;case"img":case"image":case"link":at("error",t),at("load",t),i=r;break;case"details":at("toggle",t),i=r;break;case"input":tC(t,r),i=fv(t,r),at("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),at("invalid",t);break;case"textarea":rC(t,r),i=gv(t,r),at("invalid",t);break;default:i=r}vv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?dA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&cA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Od(t,l):typeof l=="number"&&Od(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Rd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&at("scroll",t):l!=null&&Wb(t,s,l,o))}switch(n){case"input":bf(t),nC(t,r,!1);break;case"textarea":bf(t),iC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+na(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?lc(t,!!r.multiple,s,!1):r.defaultValue!=null&&lc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kn(e),null;case 6:if(t&&e.stateNode!=null)NI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Ma(Hd.current),Ma(Qi.current),Af(e)){if(r=e.stateNode,n=e.memoizedProps,r[qi]=e,(s=r.nodeValue!==n)&&(t=yr,t!==null))switch(t.tag){case 3:Pf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pf(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qi]=e,e.stateNode=r}return kn(e),null;case 13:if(ut(Ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&mr!==null&&e.mode&1&&!(e.flags&128))XA(),Ic(),e.flags|=98560,s=!1;else if(s=Af(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(F(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[qi]=e}else Ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kn(e),s=!1}else mi!==null&&(Qv(mi),mi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ct.current&1?Yt===0&&(Yt=3):S_())),e.updateQueue!==null&&(e.flags|=4),kn(e),null);case 4:return Oc(),jv(t,e),t===null&&Vd(e.stateNode.containerInfo),kn(e),null;case 10:return c_(e.type._context),kn(e),null;case 17:return Jn(e.type)&&pp(),kn(e),null;case 19:if(ut(Ct),s=e.memoizedState,s===null)return kn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ou(s,!1);else{if(Yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kp(t),o!==null){for(e.flags|=128,Ou(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(Ct,Ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&$t()>Nc&&(e.flags|=128,r=!0,Ou(s,!1),e.lanes=4194304)}else{if(!r)if(t=kp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ou(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vt)return kn(e),null}else 2*$t()-s.renderingStartTime>Nc&&n!==1073741824&&(e.flags|=128,r=!0,Ou(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=Ct.current,rt(Ct,r?n&1|2:n&1),e):(kn(e),null);case 22:case 23:return x_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(kn(e),e.subtreeFlags&6&&(e.flags|=8192)):kn(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function BF(t,e){switch(s_(e),e.tag){case 1:return Jn(e.type)&&pp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oc(),ut(Zn),ut(Rn),m_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return f_(e),null;case 13:if(ut(Ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ic()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(Ct),null;case 4:return Oc(),null;case 10:return c_(e.type._context),null;case 22:case 23:return x_(),null;case 24:return null;default:return null}}var Of=!1,Sn=!1,UF=typeof WeakSet=="function"?WeakSet:Set,X=null;function rc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function Gv(t,e,n){try{n()}catch(r){It(t,e,r)}}var qC=!1;function zF(t,e){if(Av=dp,t=VA(),r_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Iv={focusedElem:t,selectionRange:n},dp=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,_=p.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:hi(e.type,g),_);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(k){It(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return p=qC,qC=!1,p}function md(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gv(e,n,s)}i=i.next}while(i!==r)}}function Xg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function DI(t){var e=t.alternate;e!==null&&(t.alternate=null,DI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qi],delete e[Ud],delete e[Mv],delete e[CF],delete e[xF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function LI(t){return t.tag===5||t.tag===3||t.tag===4}function YC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||LI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mp));else if(r!==4&&(t=t.child,t!==null))for(Yv(t,e,n),t=t.sibling;t!==null;)Yv(t,e,n),t=t.sibling}function Kv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kv(t,e,n),t=t.sibling;t!==null;)Kv(t,e,n),t=t.sibling}var un=null,fi=!1;function bo(t,e,n){for(n=n.child;n!==null;)$I(t,e,n),n=n.sibling}function $I(t,e,n){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(Wg,n)}catch{}switch(n.tag){case 5:Sn||rc(n,e);case 6:var r=un,i=fi;un=null,bo(t,e,n),un=r,fi=i,un!==null&&(fi?(t=un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(fi?(t=un,n=n.stateNode,t.nodeType===8?M1(t.parentNode,n):t.nodeType===1&&M1(t,n),Ld(t)):M1(un,n.stateNode));break;case 4:r=un,i=fi,un=n.stateNode.containerInfo,fi=!0,bo(t,e,n),un=r,fi=i;break;case 0:case 11:case 14:case 15:if(!Sn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gv(n,e,o),i=i.next}while(i!==r)}bo(t,e,n);break;case 1:if(!Sn&&(rc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}bo(t,e,n);break;case 21:bo(t,e,n);break;case 22:n.mode&1?(Sn=(r=Sn)||n.memoizedState!==null,bo(t,e,n),Sn=r):bo(t,e,n);break;default:bo(t,e,n)}}function KC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UF),e.forEach(function(r){var i=JF.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:un=a.stateNode,fi=!1;break e;case 3:un=a.stateNode.containerInfo,fi=!0;break e;case 4:un=a.stateNode.containerInfo,fi=!0;break e}a=a.return}if(un===null)throw Error(F(160));$I(s,o,i),un=null,fi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){It(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FI(e,t),e=e.sibling}function FI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(li(e,t),Bi(t),r&4){try{md(3,t,t.return),Xg(3,t)}catch(g){It(t,t.return,g)}try{md(5,t,t.return)}catch(g){It(t,t.return,g)}}break;case 1:li(e,t),Bi(t),r&512&&n!==null&&rc(n,n.return);break;case 5:if(li(e,t),Bi(t),r&512&&n!==null&&rc(n,n.return),t.flags&32){var i=t.stateNode;try{Od(i,"")}catch(g){It(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&oA(i,s),yv(a,o);var c=yv(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?dA(i,d):u==="dangerouslySetInnerHTML"?cA(i,d):u==="children"?Od(i,d):Wb(i,u,d,c)}switch(a){case"input":mv(i,s);break;case"textarea":aA(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?lc(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?lc(i,!!s.multiple,s.defaultValue,!0):lc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ud]=s}catch(g){It(t,t.return,g)}}break;case 6:if(li(e,t),Bi(t),r&4){if(t.stateNode===null)throw Error(F(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){It(t,t.return,g)}}break;case 3:if(li(e,t),Bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(g){It(t,t.return,g)}break;case 4:li(e,t),Bi(t);break;case 13:li(e,t),Bi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(E_=$t())),r&4&&KC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Sn=(c=Sn)||u,li(e,t),Sn=c):li(e,t),Bi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(X=t,u=t.child;u!==null;){for(d=X=u;X!==null;){switch(h=X,f=h.child,h.tag){case 0:case 11:case 14:case 15:md(4,h,h.return);break;case 1:rc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){It(r,n,g)}}break;case 5:rc(h,h.return);break;case 22:if(h.memoizedState!==null){JC(d);continue}}f!==null?(f.return=h,X=f):JC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uA("display",o))}catch(g){It(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){It(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:li(e,t),Bi(t),r&4&&KC(t);break;case 21:break;default:li(e,t),Bi(t)}}function Bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(LI(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Od(i,""),r.flags&=-33);var s=YC(t);Kv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=YC(t);Yv(t,a,o);break;default:throw Error(F(161))}}catch(l){It(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HF(t,e,n){X=t,VI(t)}function VI(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Of;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Sn;a=Of;var c=Sn;if(Of=o,(Sn=l)&&!c)for(X=i;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?XC(i):l!==null?(l.return=o,X=l):XC(i);for(;s!==null;)X=s,VI(s),s=s.sibling;X=i,Of=a,Sn=c}ZC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):ZC(t)}}function ZC(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||Xg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Sn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&NC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}NC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ld(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Sn||e.flags&512&&qv(e)}catch(h){It(e,e.return,h)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function JC(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function XC(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xg(4,e)}catch(l){It(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){It(e,i,l)}}var s=e.return;try{qv(e)}catch(l){It(e,s,l)}break;case 5:var o=e.return;try{qv(e)}catch(l){It(e,o,l)}}}catch(l){It(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var WF=Math.ceil,xp=oo.ReactCurrentDispatcher,__=oo.ReactCurrentOwner,qr=oo.ReactCurrentBatchConfig,Ne=0,nn=null,Wt=null,pn=0,lr=0,ic=ha(0),Yt=0,qd=null,Za=0,Qg=0,k_=0,pd=null,Yn=null,E_=0,Nc=1/0,Ss=null,Sp=!1,Zv=null,qo=null,Mf=!1,Fo=null,Tp=0,gd=0,Jv=null,Mm=-1,Nm=0;function Ln(){return Ne&6?$t():Mm!==-1?Mm:Mm=$t()}function Yo(t){return t.mode&1?Ne&2&&pn!==0?pn&-pn:TF.transition!==null?(Nm===0&&(Nm=EA()),Nm):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:IA(t.type)),t):1}function xi(t,e,n,r){if(50<gd)throw gd=0,Jv=null,Error(F(185));Mh(t,n,r),(!(Ne&2)||t!==nn)&&(t===nn&&(!(Ne&2)&&(Qg|=n),Yt===4&&Ro(t,pn)),Xn(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Nc=$t()+500,Kg&&fa()))}function Xn(t,e){var n=t.callbackNode;T$(t,e);var r=up(t,t===nn?pn:0);if(r===0)n!==null&&aC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aC(n),e===1)t.tag===0?SF(QC.bind(null,t)):KA(QC.bind(null,t)),kF(function(){!(Ne&6)&&fa()}),n=null;else{switch(CA(r)){case 1:n=Kb;break;case 4:n=_A;break;case 16:n=cp;break;case 536870912:n=kA;break;default:n=cp}n=qI(n,BI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function BI(t,e){if(Mm=-1,Nm=0,Ne&6)throw Error(F(327));var n=t.callbackNode;if(fc()&&t.callbackNode!==n)return null;var r=up(t,t===nn?pn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pp(t,r);else{e=r;var i=Ne;Ne|=2;var s=zI();(nn!==t||pn!==e)&&(Ss=null,Nc=$t()+500,Fa(t,e));do try{qF();break}catch(a){UI(t,a)}while(!0);l_(),xp.current=s,Ne=i,Wt!==null?e=0:(nn=null,pn=0,e=Yt)}if(e!==0){if(e===2&&(i=Cv(t),i!==0&&(r=i,e=Xv(t,i))),e===1)throw n=qd,Fa(t,0),Ro(t,r),Xn(t,$t()),n;if(e===6)Ro(t,r);else{if(i=t.current.alternate,!(r&30)&&!jF(i)&&(e=Pp(t,r),e===2&&(s=Cv(t),s!==0&&(r=s,e=Xv(t,s))),e===1))throw n=qd,Fa(t,0),Ro(t,r),Xn(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ta(t,Yn,Ss);break;case 3:if(Ro(t,r),(r&130023424)===r&&(e=E_+500-$t(),10<e)){if(up(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ln(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ov(Ta.bind(null,t,Yn,Ss),e);break}Ta(t,Yn,Ss);break;case 4:if(Ro(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ci(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WF(r/1960))-r,10<r){t.timeoutHandle=Ov(Ta.bind(null,t,Yn,Ss),r);break}Ta(t,Yn,Ss);break;case 5:Ta(t,Yn,Ss);break;default:throw Error(F(329))}}}return Xn(t,$t()),t.callbackNode===n?BI.bind(null,t):null}function Xv(t,e){var n=pd;return t.current.memoizedState.isDehydrated&&(Fa(t,e).flags|=256),t=Pp(t,e),t!==2&&(e=Yn,Yn=n,e!==null&&Qv(e)),t}function Qv(t){Yn===null?Yn=t:Yn.push.apply(Yn,t)}function jF(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ii(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ro(t,e){for(e&=~k_,e&=~Qg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ci(e),r=1<<n;t[n]=-1,e&=~r}}function QC(t){if(Ne&6)throw Error(F(327));fc();var e=up(t,0);if(!(e&1))return Xn(t,$t()),null;var n=Pp(t,e);if(t.tag!==0&&n===2){var r=Cv(t);r!==0&&(e=r,n=Xv(t,r))}if(n===1)throw n=qd,Fa(t,0),Ro(t,e),Xn(t,$t()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ta(t,Yn,Ss),Xn(t,$t()),null}function C_(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Nc=$t()+500,Kg&&fa())}}function Ja(t){Fo!==null&&Fo.tag===0&&!(Ne&6)&&fc();var e=Ne;Ne|=1;var n=qr.transition,r=Ge;try{if(qr.transition=null,Ge=1,t)return t()}finally{Ge=r,qr.transition=n,Ne=e,!(Ne&6)&&fa()}}function x_(){lr=ic.current,ut(ic)}function Fa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_F(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(s_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pp();break;case 3:Oc(),ut(Zn),ut(Rn),m_();break;case 5:f_(r);break;case 4:Oc();break;case 13:ut(Ct);break;case 19:ut(Ct);break;case 10:c_(r.type._context);break;case 22:case 23:x_()}n=n.return}if(nn=t,Wt=t=Ko(t.current,null),pn=lr=e,Yt=0,qd=null,k_=Qg=Za=0,Yn=pd=null,Oa!==null){for(e=0;e<Oa.length;e++)if(n=Oa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Oa=null}return t}function UI(t,e){do{var n=Wt;try{if(l_(),Im.current=Cp,Ep){for(var r=xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ep=!1}if(Ka=0,en=Gt=xt=null,fd=!1,Wd=0,__.current=null,n===null||n.return===null){Yt=1,qd=e,Wt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=pn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=BC(o);if(f!==null){f.flags&=-257,UC(f,o,a,s,e),f.mode&1&&VC(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){VC(s,c,e),S_();break e}l=Error(F(426))}}else if(vt&&a.mode&1){var _=BC(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),UC(_,o,a,s,e),o_(Mc(l,a));break e}}s=l=Mc(l,a),Yt!==4&&(Yt=2),pd===null?pd=[s]:pd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=CI(s,l,e);MC(s,v);break e;case 1:a=l;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qo===null||!qo.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=xI(s,a,e);MC(s,k);break e}}s=s.return}while(s!==null)}WI(n)}catch(S){e=S,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function zI(){var t=xp.current;return xp.current=Cp,t===null?Cp:t}function S_(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),nn===null||!(Za&268435455)&&!(Qg&268435455)||Ro(nn,pn)}function Pp(t,e){var n=Ne;Ne|=2;var r=zI();(nn!==t||pn!==e)&&(Ss=null,Fa(t,e));do try{GF();break}catch(i){UI(t,i)}while(!0);if(l_(),Ne=n,xp.current=r,Wt!==null)throw Error(F(261));return nn=null,pn=0,Yt}function GF(){for(;Wt!==null;)HI(Wt)}function qF(){for(;Wt!==null&&!v$();)HI(Wt)}function HI(t){var e=GI(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?WI(t):Wt=e,__.current=null}function WI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BF(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Yt=6,Wt=null;return}}else if(n=VF(n,e,lr),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Yt===0&&(Yt=5)}function Ta(t,e,n){var r=Ge,i=qr.transition;try{qr.transition=null,Ge=1,YF(t,e,n,r)}finally{qr.transition=i,Ge=r}return null}function YF(t,e,n,r){do fc();while(Fo!==null);if(Ne&6)throw Error(F(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(P$(t,s),t===nn&&(Wt=nn=null,pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mf||(Mf=!0,qI(cp,function(){return fc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qr.transition,qr.transition=null;var o=Ge;Ge=1;var a=Ne;Ne|=4,__.current=null,zF(t,n),FI(n,t),mF(Iv),dp=!!Av,Iv=Av=null,t.current=n,HF(n),y$(),Ne=a,Ge=o,qr.transition=s}else t.current=n;if(Mf&&(Mf=!1,Fo=t,Tp=i),s=t.pendingLanes,s===0&&(qo=null),k$(n.stateNode),Xn(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sp)throw Sp=!1,t=Zv,Zv=null,t;return Tp&1&&t.tag!==0&&fc(),s=t.pendingLanes,s&1?t===Jv?gd++:(gd=0,Jv=t):gd=0,fa(),null}function fc(){if(Fo!==null){var t=CA(Tp),e=qr.transition,n=Ge;try{if(qr.transition=null,Ge=16>t?16:t,Fo===null)var r=!1;else{if(t=Fo,Fo=null,Tp=0,Ne&6)throw Error(F(331));var i=Ne;for(Ne|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var u=X;switch(u.tag){case 0:case 11:case 15:md(8,u,s)}var d=u.child;if(d!==null)d.return=u,X=d;else for(;X!==null;){u=X;var h=u.sibling,f=u.return;if(DI(u),u===c){X=null;break}if(h!==null){h.return=f,X=h;break}X=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(g!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:md(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,X=v;break e}X=s.return}}var w=t.current;for(X=w;X!==null;){o=X;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,X=b;else e:for(o=w;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xg(9,a)}}catch(S){It(a,a.return,S)}if(a===o){X=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,X=k;break e}X=a.return}}if(Ne=i,fa(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(Wg,t)}catch{}r=!0}return r}finally{Ge=n,qr.transition=e}}return!1}function ex(t,e,n){e=Mc(n,e),e=CI(t,e,1),t=Go(t,e,1),e=Ln(),t!==null&&(Mh(t,1,e),Xn(t,e))}function It(t,e,n){if(t.tag===3)ex(t,t,n);else for(;e!==null;){if(e.tag===3){ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qo===null||!qo.has(r))){t=Mc(n,t),t=xI(e,t,1),e=Go(e,t,1),t=Ln(),e!==null&&(Mh(e,1,t),Xn(e,t));break}}e=e.return}}function KF(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ln(),t.pingedLanes|=t.suspendedLanes&n,nn===t&&(pn&n)===n&&(Yt===4||Yt===3&&(pn&130023424)===pn&&500>$t()-E_?Fa(t,0):k_|=n),Xn(t,e)}function jI(t,e){e===0&&(t.mode&1?(e=Ef,Ef<<=1,!(Ef&130023424)&&(Ef=4194304)):e=1);var n=Ln();t=Zs(t,e),t!==null&&(Mh(t,e,n),Xn(t,n))}function ZF(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jI(t,n)}function JF(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),jI(t,n)}var GI;GI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zn.current)Kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kn=!1,FF(t,e,n);Kn=!!(t.flags&131072)}else Kn=!1,vt&&e.flags&1048576&&ZA(e,vp,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Om(t,e),t=e.pendingProps;var i=Ac(e,Rn.current);hc(e,n),i=g_(null,e,r,t,i,n);var s=w_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(r)?(s=!0,gp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,d_(e),i.updater=Jg,e.stateNode=i,i._reactInternals=e,Vv(e,r,t,n),e=zv(null,e,r,!0,s,n)):(e.tag=0,vt&&s&&i_(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Om(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=QF(r),t=hi(r,t),i){case 0:e=Uv(null,e,r,t,n);break e;case 1:e=WC(null,e,r,t,n);break e;case 11:e=zC(null,e,r,t,n);break e;case 14:e=HC(null,e,r,hi(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),Uv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),WC(t,e,r,i,n);case 3:e:{if(AI(e),t===null)throw Error(F(387));r=e.pendingProps,s=e.memoizedState,i=s.element,nI(t,e),_p(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mc(Error(F(423)),e),e=jC(t,e,r,n,i);break e}else if(r!==i){i=Mc(Error(F(424)),e),e=jC(t,e,r,n,i);break e}else for(mr=jo(e.stateNode.containerInfo.firstChild),yr=e,vt=!0,mi=null,n=eI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ic(),r===i){e=Js(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return rI(e),t===null&&Lv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Rv(r,i)?o=null:s!==null&&Rv(r,s)&&(e.flags|=32),PI(t,e),Nn(t,e,o,n),e.child;case 6:return t===null&&Lv(e),null;case 13:return II(t,e,n);case 4:return h_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rc(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),zC(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,rt(yp,r._currentValue),r._currentValue=o,s!==null)if(Ii(s.value,o)){if(s.children===i.children&&!Zn.current){e=Js(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zs(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$v(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(F(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$v(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hc(e,n),i=Zr(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=hi(r,e.pendingProps),i=hi(r.type,i),HC(t,e,r,i,n);case 15:return SI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),Om(t,e),e.tag=1,Jn(r)?(t=!0,gp(e)):t=!1,hc(e,n),EI(e,r,i),Vv(e,r,i,n),zv(null,e,r,!0,t,n);case 19:return RI(t,e,n);case 22:return TI(t,e,n)}throw Error(F(156,e.tag))};function qI(t,e){return bA(t,e)}function XF(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(t,e,n,r){return new XF(t,e,n,r)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QF(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gb)return 11;if(t===qb)return 14}return 2}function Ko(t,e){var n=t.alternate;return n===null?(n=jr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")T_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yl:return Va(n.children,i,s,e);case jb:o=8,i|=8;break;case cv:return t=jr(12,n,e,i|2),t.elementType=cv,t.lanes=s,t;case uv:return t=jr(13,n,e,i),t.elementType=uv,t.lanes=s,t;case dv:return t=jr(19,n,e,i),t.elementType=dv,t.lanes=s,t;case rA:return e0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tA:o=10;break e;case nA:o=9;break e;case Gb:o=11;break e;case qb:o=14;break e;case Po:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=jr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Va(t,e,n,r){return t=jr(7,t,r,e),t.lanes=n,t}function e0(t,e,n,r){return t=jr(22,t,r,e),t.elementType=rA,t.lanes=n,t.stateNode={isHidden:!1},t}function U1(t,e,n){return t=jr(6,t,null,e),t.lanes=n,t}function z1(t,e,n){return e=jr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=k1(0),this.expirationTimes=k1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=k1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function P_(t,e,n,r,i,s,o,a,l){return t=new eV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},d_(s),t}function tV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ql,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function YI(t){if(!t)return ra;t=t._reactInternals;e:{if(hl(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Jn(n))return YA(t,n,e)}return e}function KI(t,e,n,r,i,s,o,a,l){return t=P_(n,r,!0,t,i,s,o,a,l),t.context=YI(null),n=t.current,r=Ln(),i=Yo(n),s=zs(r,i),s.callback=e??null,Go(n,s,i),t.current.lanes=i,Mh(t,i,r),Xn(t,r),t}function t0(t,e,n,r){var i=e.current,s=Ln(),o=Yo(i);return n=YI(n),e.context===null?e.context=n:e.pendingContext=n,e=zs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Go(i,e,o),t!==null&&(xi(t,i,o,s),Am(t,i,o)),o}function Ap(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A_(t,e){tx(t,e),(t=t.alternate)&&tx(t,e)}function nV(){return null}var ZI=typeof reportError=="function"?reportError:function(t){console.error(t)};function I_(t){this._internalRoot=t}n0.prototype.render=I_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));t0(t,e,null,null)};n0.prototype.unmount=I_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ja(function(){t0(null,t,null,null)}),e[Ks]=null}};function n0(t){this._internalRoot=t}n0.prototype.unstable_scheduleHydration=function(t){if(t){var e=TA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Io.length&&e!==0&&e<Io[n].priority;n++);Io.splice(n,0,t),n===0&&AA(t)}};function R_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function r0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nx(){}function rV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ap(o);s.call(c)}}var o=KI(e,r,t,0,null,!1,!1,"",nx);return t._reactRootContainer=o,t[Ks]=o.current,Vd(t.nodeType===8?t.parentNode:t),Ja(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ap(l);a.call(c)}}var l=P_(t,0,!1,null,null,!1,!1,"",nx);return t._reactRootContainer=l,t[Ks]=l.current,Vd(t.nodeType===8?t.parentNode:t),Ja(function(){t0(e,l,n,r)}),l}function i0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ap(o);a.call(l)}}t0(e,o,t,i)}else o=rV(n,e,t,i,r);return Ap(o)}xA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nd(e.pendingLanes);n!==0&&(Zb(e,n|1),Xn(e,$t()),!(Ne&6)&&(Nc=$t()+500,fa()))}break;case 13:Ja(function(){var r=Zs(t,1);if(r!==null){var i=Ln();xi(r,t,1,i)}}),A_(t,1)}};Jb=function(t){if(t.tag===13){var e=Zs(t,134217728);if(e!==null){var n=Ln();xi(e,t,134217728,n)}A_(t,134217728)}};SA=function(t){if(t.tag===13){var e=Yo(t),n=Zs(t,e);if(n!==null){var r=Ln();xi(n,t,e,r)}A_(t,e)}};TA=function(){return Ge};PA=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};_v=function(t,e,n){switch(e){case"input":if(mv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yg(r);if(!i)throw Error(F(90));sA(r),mv(r,i)}}}break;case"textarea":aA(t,n);break;case"select":e=n.value,e!=null&&lc(t,!!n.multiple,e,!1)}};mA=C_;pA=Ja;var iV={usingClientEntryPoint:!1,Events:[Dh,Xl,Yg,hA,fA,C_]},Mu={findFiberByHostInstance:Ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sV={bundleType:Mu.bundleType,version:Mu.version,rendererPackageName:Mu.rendererPackageName,rendererConfig:Mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vA(t),t===null?null:t.stateNode},findFiberByHostInstance:Mu.findFiberByHostInstance||nV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{Wg=Nf.inject(sV),Xi=Nf}catch{}}Ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iV;Ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R_(e))throw Error(F(200));return tV(t,e,null,n)};Ir.createRoot=function(t,e){if(!R_(t))throw Error(F(299));var n=!1,r="",i=ZI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=P_(t,1,!1,null,null,n,!1,r,i),t[Ks]=e.current,Vd(t.nodeType===8?t.parentNode:t),new I_(e)};Ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=vA(e),t=t===null?null:t.stateNode,t};Ir.flushSync=function(t){return Ja(t)};Ir.hydrate=function(t,e,n){if(!r0(e))throw Error(F(200));return i0(null,t,e,!0,n)};Ir.hydrateRoot=function(t,e,n){if(!R_(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=KI(e,null,t,1,n??null,i,!1,s,o),t[Ks]=e.current,Vd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new n0(e)};Ir.render=function(t,e,n){if(!r0(e))throw Error(F(200));return i0(null,t,e,!1,n)};Ir.unmountComponentAtNode=function(t){if(!r0(t))throw Error(F(40));return t._reactRootContainer?(Ja(function(){i0(null,null,t,!1,function(){t._reactRootContainer=null,t[Ks]=null})}),!0):!1};Ir.unstable_batchedUpdates=C_;Ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!r0(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return i0(t,e,n,!1,r)};Ir.version="18.3.1-next-f1338f8080-20240426";function JI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JI)}catch(t){console.error(t)}}JI(),J3.exports=Ir;var $h=J3.exports;const XI=Pg($h);var rx=$h;av.createRoot=rx.createRoot,av.hydrateRoot=rx.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(this,arguments)}var Vo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vo||(Vo={}));const ix="popstate";function oV(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ey("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ip(i)}return lV(e,n,null,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function QI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aV(){return Math.random().toString(36).substr(2,8)}function sx(t,e){return{usr:t.state,key:t.key,idx:e}}function ey(t,e,n,r){return n===void 0&&(n=null),Yd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?nu(e):e,{state:n,key:e&&e.key||r||aV()})}function Ip(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function nu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Vo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Yd({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Vo.Pop;let _=u(),v=_==null?null:_-c;c=_,l&&l({action:a,location:g.location,delta:v})}function h(_,v){a=Vo.Push;let w=ey(g.location,_,v);c=u()+1;let b=sx(w,c),k=g.createHref(w);try{o.pushState(b,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}s&&l&&l({action:a,location:g.location,delta:1})}function f(_,v){a=Vo.Replace;let w=ey(g.location,_,v);c=u();let b=sx(w,c),k=g.createHref(w);o.replaceState(b,"",k),s&&l&&l({action:a,location:g.location,delta:0})}function p(_){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof _=="string"?_:Ip(_);return w=w.replace(/ $/,"%20"),Vt(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let g={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ix,d),l=_,()=>{i.removeEventListener(ix,d),l=null}},createHref(_){return e(i,_)},createURL:p,encodeLocation(_){let v=p(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:f,go(_){return o.go(_)}};return g}var ox;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ox||(ox={}));function cV(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?nu(e):e,i=O_(r.pathname||"/",n);if(i==null)return null;let s=e4(t);uV(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=kV(i);o=yV(s[a],l)}return o}function e4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Vt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Zo([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Vt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),e4(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:wV(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of t4(s.path))i(s,o,l)}),e}function t4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=t4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function uV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dV=/^:[\w-]+$/,hV=3,fV=2,mV=1,pV=10,gV=-2,ax=t=>t==="*";function wV(t,e){let n=t.split("/"),r=n.length;return n.some(ax)&&(r+=gV),e&&(r+=fV),n.filter(i=>!ax(i)).reduce((i,s)=>i+(dV.test(s)?hV:s===""?mV:pV),r)}function vV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function yV(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=bV({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Zo([i,u.pathname]),pathnameBase:SV(Zo([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Zo([i,u.pathnameBase]))}return s}function bV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_V(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _V(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),QI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return QI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function O_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?nu(t):t;return{pathname:n?n.startsWith("/")?n:CV(n,e):e,search:TV(r),hash:PV(i)}}function CV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function H1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function M_(t,e){let n=xV(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=nu(t):(i=Yd({},t),Vt(!i.pathname||!i.pathname.includes("?"),H1("?","pathname","search",i)),Vt(!i.pathname||!i.pathname.includes("#"),H1("#","pathname","hash",i)),Vt(!i.search||!i.search.includes("#"),H1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=EV(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Zo=t=>t.join("/").replace(/\/\/+/g,"/"),SV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),TV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function AV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n4=["post","put","patch","delete"];new Set(n4);const IV=["get",...n4];new Set(IV);/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kd.apply(this,arguments)}const D_=m.createContext(null),RV=m.createContext(null),ma=m.createContext(null),s0=m.createContext(null),ls=m.createContext({outlet:null,matches:[],isDataRoute:!1}),r4=m.createContext(null);function OV(t,e){let{relative:n}=e===void 0?{}:e;ru()||Vt(!1);let{basename:r,navigator:i}=m.useContext(ma),{hash:s,pathname:o,search:a}=o4(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Zo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ru(){return m.useContext(s0)!=null}function fl(){return ru()||Vt(!1),m.useContext(s0).location}function i4(t){m.useContext(ma).static||m.useLayoutEffect(t)}function pa(){let{isDataRoute:t}=m.useContext(ls);return t?qV():MV()}function MV(){ru()||Vt(!1);let t=m.useContext(D_),{basename:e,future:n,navigator:r}=m.useContext(ma),{matches:i}=m.useContext(ls),{pathname:s}=fl(),o=JSON.stringify(M_(i,n.v7_relativeSplatPath)),a=m.useRef(!1);return i4(()=>{a.current=!0}),m.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=N_(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Zo([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const NV=m.createContext(null);function DV(t){let e=m.useContext(ls).outlet;return e&&m.createElement(NV.Provider,{value:t},e)}function s4(){let{matches:t}=m.useContext(ls),e=t[t.length-1];return e?e.params:{}}function o4(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext(ma),{matches:i}=m.useContext(ls),{pathname:s}=fl(),o=JSON.stringify(M_(i,r.v7_relativeSplatPath));return m.useMemo(()=>N_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function LV(t,e){return $V(t,e)}function $V(t,e,n,r){ru()||Vt(!1);let{navigator:i}=m.useContext(ma),{matches:s}=m.useContext(ls),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=fl(),u;if(e){var d;let _=typeof e=="string"?nu(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||Vt(!1),u=_}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=cV(t,{pathname:f}),g=zV(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Zo([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Zo([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&g?m.createElement(s0.Provider,{value:{location:Kd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Vo.Pop}},g):g}function FV(){let t=GV(),e=AV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:i},n):null,null)}const VV=m.createElement(FV,null);class BV extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(ls.Provider,{value:this.props.routeContext},m.createElement(r4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UV(t){let{routeContext:e,match:n,children:r}=t,i=m.useContext(D_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(ls.Provider,{value:e},r)}function zV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,_=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||VV,l&&(c<0&&h===0?(p=!0,_=null):c===h&&(p=!0,_=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,h+1)),w=()=>{let b;return f?b=g:p?b=_:d.route.Component?b=m.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,m.createElement(UV,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?m.createElement(BV,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var a4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a4||{}),Rp=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Rp||{});function HV(t){let e=m.useContext(D_);return e||Vt(!1),e}function WV(t){let e=m.useContext(RV);return e||Vt(!1),e}function jV(t){let e=m.useContext(ls);return e||Vt(!1),e}function l4(t){let e=jV(),n=e.matches[e.matches.length-1];return n.route.id||Vt(!1),n.route.id}function GV(){var t;let e=m.useContext(r4),n=WV(Rp.UseRouteError),r=l4(Rp.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function qV(){let{router:t}=HV(a4.UseNavigateStable),e=l4(Rp.UseNavigateStable),n=m.useRef(!1);return i4(()=>{n.current=!0}),m.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Kd({fromRouteId:e},s)))},[t,e])}function L_(t){let{to:e,replace:n,state:r,relative:i}=t;ru()||Vt(!1);let{future:s,static:o}=m.useContext(ma),{matches:a}=m.useContext(ls),{pathname:l}=fl(),c=pa(),u=N_(e,M_(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return m.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function $_(t){return DV(t.context)}function Br(t){Vt(!1)}function YV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Vo.Pop,navigator:s,static:o=!1,future:a}=t;ru()&&Vt(!1);let l=e.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:l,navigator:s,static:o,future:Kd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=nu(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=m.useMemo(()=>{let _=O_(u,l);return _==null?null:{location:{pathname:_,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return g==null?null:m.createElement(ma.Provider,{value:c},m.createElement(s0.Provider,{children:n,value:g}))}function KV(t){let{children:e,location:n}=t;return LV(ty(e),n)}new Promise(()=>{});function ty(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,i)=>{if(!m.isValidElement(r))return;let s=[...e,i];if(r.type===m.Fragment){n.push.apply(n,ty(r.props.children,s));return}r.type!==Br&&Vt(!1),!r.props.index||!r.props.children||Vt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ty(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ny(){return ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ny.apply(this,arguments)}function ZV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function JV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XV(t,e){return t.button===0&&(!e||e==="_self")&&!JV(t)}const QV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],eB="6";try{window.__reactRouterVersion=eB}catch{}const tB="startTransition",lx=Sc[tB];function nB(t){let{basename:e,children:n,future:r,window:i}=t,s=m.useRef();s.current==null&&(s.current=oV({window:i,v5Compat:!0}));let o=s.current,[a,l]=m.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=m.useCallback(d=>{c&&lx?lx(()=>l(d)):l(d)},[l,c]);return m.useLayoutEffect(()=>o.listen(u),[o,u]),m.createElement(YV,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const rB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=m.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=ZV(e,QV),{basename:f}=m.useContext(ma),p,g=!1;if(typeof c=="string"&&iB.test(c)&&(p=c,rB))try{let b=new URL(window.location.href),k=c.startsWith("//")?new URL(b.protocol+c):new URL(c),S=O_(k.pathname,f);k.origin===b.origin&&S!=null?c=S+k.search+k.hash:g=!0}catch{}let _=OV(c,{relative:i}),v=sB(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function w(b){r&&r(b),b.defaultPrevented||v(b)}return m.createElement("a",ny({},h,{href:p||_,onClick:g||s?r:w,ref:n,target:l}))});var cx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cx||(cx={}));var ux;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ux||(ux={}));function sB(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=pa(),c=fl(),u=o4(t,{relative:o});return m.useCallback(d=>{if(XV(d,n)){d.preventDefault();let h=r!==void 0?r:Ip(c)===Ip(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function oB(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function o0(...t){return e=>t.forEach(n=>oB(n,e))}function bt(...t){return m.useCallback(o0(...t),t)}const Xa=m.forwardRef((t,e)=>{const{children:n,...r}=t,i=m.Children.toArray(n),s=i.find(aB);if(s){const o=s.props.children,a=i.map(l=>l===s?m.Children.count(o)>1?m.Children.only(null):m.isValidElement(o)?o.props.children:null:l);return m.createElement(ry,U({},r,{ref:e}),m.isValidElement(o)?m.cloneElement(o,void 0,a):null)}return m.createElement(ry,U({},r,{ref:e}),n)});Xa.displayName="Slot";const ry=m.forwardRef((t,e)=>{const{children:n,...r}=t;return m.isValidElement(n)?m.cloneElement(n,{...lB(r,n.props),ref:e?o0(e,n.ref):n.ref}):m.Children.count(n)>1?m.Children.only(null):null});ry.displayName="SlotClone";const c4=({children:t})=>m.createElement(m.Fragment,null,t);function aB(t){return m.isValidElement(t)&&t.type===c4}function lB(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function u4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=u4(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function cB(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=u4(t))&&(r&&(r+=" "),r+=e);return r}const dx=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,hx=cB,a0=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return hx(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=dx(u)||dx(d);return i[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(p=>{let[g,_]=p;return Array.isArray(_)?_.includes({...s,...a}[g]):{...s,...a}[g]===_})?[...c,d,h]:c},[]);return hx(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};function d4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=d4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uB(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=d4(t))&&(r&&(r+=" "),r+=e);return r}const F_="-";function dB(t){const e=fB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;function i(o){const a=o.split(F_);return a[0]===""&&a.length!==1&&a.shift(),h4(a,e)||hB(o)}function s(o,a){const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}return{getClassGroupId:i,getConflictingClassGroupIds:s}}function h4(t,e){var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?h4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(F_);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId}const fx=/^\[(.+)\]$/;function hB(t){if(fx.test(t)){const e=fx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function fB(t){const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return pB(Object.entries(t.classGroups),n).forEach(([s,o])=>{iy(o,r,s,e)}),r}function iy(t,e,n,r){t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:mx(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(mB(i)){iy(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{iy(o,mx(e,s),n,r)})})}function mx(t,e){let n=t;return e.split(F_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function mB(t){return t.isThemeGetter}function pB(t,e){return e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t}function gB(t){if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;function i(s,o){n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)}return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}}const f4="!";function wB(t){const e=t.separator,n=e.length===1,r=e[0],i=e.length;return function(o){const a=[];let l=0,c=0,u;for(let g=0;g<o.length;g++){let _=o[g];if(l===0){if(_===r&&(n||o.slice(g,g+i)===e)){a.push(o.slice(c,g)),c=g+i;continue}if(_==="/"){u=g;continue}}_==="["?l++:_==="]"&&l--}const d=a.length===0?o:o.substring(c),h=d.startsWith(f4),f=h?d.substring(1):d,p=u&&u>c?u-c:void 0;return{modifiers:a,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}}}function vB(t){if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e}function yB(t){return{cache:gB(t.cacheSize),splitModifiers:wB(t),...dB(t)}}const bB=/\s+/;function _B(t,e){const{splitModifiers:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=new Set;return t.trim().split(bB).map(o=>{const{modifiers:a,hasImportantModifier:l,baseClassName:c,maybePostfixModifierPosition:u}=n(o);let d=r(u?c.substring(0,u):c),h=!!u;if(!d){if(!u)return{isTailwindClass:!1,originalClassName:o};if(d=r(c),!d)return{isTailwindClass:!1,originalClassName:o};h=!1}const f=vB(a).join(":");return{isTailwindClass:!0,modifierId:l?f+f4:f,classGroupId:d,originalClassName:o,hasPostfixModifier:h}}).reverse().filter(o=>{if(!o.isTailwindClass)return!0;const{modifierId:a,classGroupId:l,hasPostfixModifier:c}=o,u=a+l;return s.has(u)?!1:(s.add(u),i(l,c).forEach(d=>s.add(a+d)),!0)}).reverse().map(o=>o.originalClassName).join(" ")}function kB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=m4(e))&&(r&&(r+=" "),r+=n);return r}function m4(t){if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=m4(t[r]))&&(n&&(n+=" "),n+=e);return n}function EB(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=yB(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=_B(l,n);return i(l,u),u}return function(){return s(kB.apply(null,arguments))}}function ot(t){const e=n=>n[t]||[];return e.isThemeGetter=!0,e}const p4=/^\[(?:([a-z-]+):)?(.+)\]$/i,CB=/^\d+\/\d+$/,xB=new Set(["px","full","screen"]),SB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,TB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,PB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,AB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,IB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function ys(t){return Na(t)||xB.has(t)||CB.test(t)}function _o(t){return iu(t,"length",FB)}function Na(t){return!!t&&!Number.isNaN(Number(t))}function Df(t){return iu(t,"number",Na)}function Nu(t){return!!t&&Number.isInteger(Number(t))}function RB(t){return t.endsWith("%")&&Na(t.slice(0,-1))}function we(t){return p4.test(t)}function ko(t){return SB.test(t)}const OB=new Set(["length","size","percentage"]);function MB(t){return iu(t,OB,g4)}function NB(t){return iu(t,"position",g4)}const DB=new Set(["image","url"]);function LB(t){return iu(t,DB,BB)}function $B(t){return iu(t,"",VB)}function Du(){return!0}function iu(t,e,n){const r=p4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1}function FB(t){return TB.test(t)&&!PB.test(t)}function g4(){return!1}function VB(t){return AB.test(t)}function BB(t){return IB.test(t)}function UB(){const t=ot("colors"),e=ot("spacing"),n=ot("blur"),r=ot("brightness"),i=ot("borderColor"),s=ot("borderRadius"),o=ot("borderSpacing"),a=ot("borderWidth"),l=ot("contrast"),c=ot("grayscale"),u=ot("hueRotate"),d=ot("invert"),h=ot("gap"),f=ot("gradientColorStops"),p=ot("gradientColorStopPositions"),g=ot("inset"),_=ot("margin"),v=ot("opacity"),w=ot("padding"),b=ot("saturate"),k=ot("scale"),S=ot("sepia"),C=ot("skew"),E=ot("space"),x=ot("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",we,e],z=()=>[we,e],re=()=>["",ys,_o],Y=()=>["auto",Na,we],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ue=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",we],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],G=()=>[Na,Df],q=()=>[Na,we];return{cacheSize:500,separator:":",theme:{colors:[Du],spacing:[ys,_o],blur:["none","",ko,we],brightness:G(),borderColor:[t],borderRadius:["none","","full",ko,we],borderSpacing:z(),borderWidth:re(),contrast:G(),grayscale:M(),hueRotate:q(),invert:M(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[RB,_o],inset:$(),margin:$(),opacity:G(),padding:z(),saturate:G(),scale:G(),sepia:M(),skew:q(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",we]}],container:["container"],columns:[{columns:[ko]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),we]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nu,we]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",we]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Nu,we]}],"grid-cols":[{"grid-cols":[Du]}],"col-start-end":[{col:["auto",{span:["full",Nu,we]},we]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[Du]}],"row-start-end":[{row:["auto",{span:[Nu,we]},we]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",we]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",we]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",we,e]}],"min-w":[{"min-w":[we,e,"min","max","fit"]}],"max-w":[{"max-w":[we,e,"none","full","min","max","fit","prose",{screen:[ko]},ko]}],h:[{h:[we,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[we,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[we,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ko,_o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Df]}],"font-family":[{font:[Du]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",we]}],"line-clamp":[{"line-clamp":["none",Na,Df]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ys,we]}],"list-image":[{"list-image":["none",we]}],"list-style-type":[{list:["none","disc","decimal",we]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ue(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ys,_o]}],"underline-offset":[{"underline-offset":["auto",ys,we]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),NB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},LB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...ue(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:ue()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ue()]}],"outline-offset":[{"outline-offset":[ys,we]}],"outline-w":[{outline:[ys,_o]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ys,_o]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ko,$B]}],"shadow-color":[{shadow:[Du]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ko,we]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",we]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",we]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",we]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Nu,we]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",we]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",we]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",we]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ys,_o,Df]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const zB=EB(UB);function oe(...t){return zB(uB(t))}const l0=a0("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),it=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>y(r?Xa:"button",{className:oe(l0({variant:e,size:n,className:t})),ref:s,...i}));it.displayName="Button";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=(t,e)=>{const n=m.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>m.createElement("svg",{ref:u,...HB,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${WB(t)}`,a].join(" "),...c},[...e.map(([d,h])=>m.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=ga("CornerDownLeft",[["polyline",{points:"9 10 4 15 9 20",key:"r3jprv"}],["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=ga("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=ga("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=ga("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=ga("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=ga("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=ga("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=ga("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function ZB(t,e){const n=m.createContext(e);function r(s){const{children:o,...a}=s,l=m.useMemo(()=>a,Object.values(a));return m.createElement(n.Provider,{value:l},o)}function i(s){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return r.displayName=t+"Provider",[r,i]}function cs(t,e=[]){let n=[];function r(s,o){const a=m.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:h,children:f,...p}=d,g=(h==null?void 0:h[t][l])||a,_=m.useMemo(()=>p,Object.values(p));return m.createElement(g.Provider,{value:_},f)}function u(d,h){const f=(h==null?void 0:h[t][l])||a,p=m.useContext(f);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>m.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return m.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,JB(i,...e)]}function JB(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function tn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function B_({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=XB({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=tn(n),l=m.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function XB({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,i=m.useRef(r),s=tn(e);return m.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}const QB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ze=QB.reduce((t,e)=>{const n=m.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Xa:e;return m.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),m.createElement(a,U({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function v4(t,e){t&&$h.flushSync(()=>t.dispatchEvent(e))}function y4(t){const e=t+"CollectionProvider",[n,r]=cs(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=f=>{const{scope:p,children:g}=f,_=V.useRef(null),v=V.useRef(new Map).current;return V.createElement(i,{scope:p,itemMap:v,collectionRef:_},g)},a=t+"CollectionSlot",l=V.forwardRef((f,p)=>{const{scope:g,children:_}=f,v=s(a,g),w=bt(p,v.collectionRef);return V.createElement(Xa,{ref:w},_)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=V.forwardRef((f,p)=>{const{scope:g,children:_,...v}=f,w=V.useRef(null),b=bt(p,w),k=s(c,g);return V.useEffect(()=>(k.itemMap.set(w,{ref:w,...v}),()=>void k.itemMap.delete(w))),V.createElement(Xa,{[u]:"",ref:b},_)});function h(f){const p=s(t+"CollectionConsumer",f);return V.useCallback(()=>{const _=p.collectionRef.current;if(!_)return[];const v=Array.from(_.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((k,S)=>v.indexOf(k.ref.current)-v.indexOf(S.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,r]}const eU=m.createContext(void 0);function U_(t){const e=m.useContext(eU);return t||e||"ltr"}function tU(t,e=globalThis==null?void 0:globalThis.document){const n=tn(t);m.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const sy="dismissableLayer.update",nU="dismissableLayer.pointerDownOutside",rU="dismissableLayer.focusOutside";let gx;const iU=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),b4=m.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=m.useContext(iU),[d,h]=m.useState(null),f=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=m.useState({}),g=bt(e,x=>h(x)),_=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=_.indexOf(v),b=d?_.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=w,C=sU(x=>{const A=x.target,R=[...u.branches].some($=>$.contains(A));!S||R||(s==null||s(x),a==null||a(x),x.defaultPrevented||l==null||l())},f),E=oU(x=>{const A=x.target;[...u.branches].some($=>$.contains(A))||(o==null||o(x),a==null||a(x),x.defaultPrevented||l==null||l())},f);return tU(x=>{b===u.layers.size-1&&(i==null||i(x),!x.defaultPrevented&&l&&(x.preventDefault(),l()))},f),m.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(gx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),wx(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=gx)}},[d,f,r,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),wx())},[d,u]),m.useEffect(()=>{const x=()=>p({});return document.addEventListener(sy,x),()=>document.removeEventListener(sy,x)},[]),m.createElement(ze.div,U({},c,{ref:g,style:{pointerEvents:k?S?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,C.onPointerDownCapture)}))});function sU(t,e=globalThis==null?void 0:globalThis.document){const n=tn(t),r=m.useRef(!1),i=m.useRef(()=>{});return m.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){_4(nU,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function oU(t,e=globalThis==null?void 0:globalThis.document){const n=tn(t),r=m.useRef(!1);return m.useEffect(()=>{const i=s=>{s.target&&!r.current&&_4(rU,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wx(){const t=new CustomEvent(sy);document.dispatchEvent(t)}function _4(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?v4(i,s):i.dispatchEvent(s)}let W1=0;function k4(){m.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:vx()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:vx()),W1++,()=>{W1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),W1--}},[])}function vx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const j1="focusScope.autoFocusOnMount",G1="focusScope.autoFocusOnUnmount",yx={bubbles:!1,cancelable:!0},E4=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=m.useState(null),c=tn(i),u=tn(s),d=m.useRef(null),h=bt(e,g=>l(g)),f=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let w=function(C){if(f.paused||!a)return;const E=C.target;a.contains(E)?d.current=E:xo(d.current,{select:!0})},b=function(C){if(f.paused||!a)return;const E=C.relatedTarget;E!==null&&(a.contains(E)||xo(d.current,{select:!0}))},k=function(C){if(document.activeElement===document.body)for(const x of C)x.removedNodes.length>0&&xo(a)};var g=w,_=b,v=k;document.addEventListener("focusin",w),document.addEventListener("focusout",b);const S=new MutationObserver(k);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",b),S.disconnect()}}},[r,a,f.paused]),m.useEffect(()=>{if(a){_x.add(f);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(j1,yx);a.addEventListener(j1,c),a.dispatchEvent(v),v.defaultPrevented||(aU(hU(C4(a)),{select:!0}),document.activeElement===g&&xo(a))}return()=>{a.removeEventListener(j1,c),setTimeout(()=>{const v=new CustomEvent(G1,yx);a.addEventListener(G1,u),a.dispatchEvent(v),v.defaultPrevented||xo(g??document.body,{select:!0}),a.removeEventListener(G1,u),_x.remove(f)},0)}}},[a,c,u,f]);const p=m.useCallback(g=>{if(!n&&!r||f.paused)return;const _=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(_&&v){const w=g.currentTarget,[b,k]=lU(w);b&&k?!g.shiftKey&&v===k?(g.preventDefault(),n&&xo(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),n&&xo(k,{select:!0})):v===w&&g.preventDefault()}},[n,r,f.paused]);return m.createElement(ze.div,U({tabIndex:-1},o,{ref:h,onKeyDown:p}))});function aU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(xo(r,{select:e}),document.activeElement!==n)return}function lU(t){const e=C4(t),n=bx(e,t),r=bx(e.reverse(),t);return[n,r]}function C4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bx(t,e){for(const n of t)if(!cU(n,{upTo:e}))return n}function cU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function uU(t){return t instanceof HTMLInputElement&&"select"in t}function xo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&uU(t)&&e&&t.select()}}const _x=dU();function dU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=kx(t,e),t.unshift(e)},remove(e){var n;t=kx(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function kx(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function hU(t){return t.filter(e=>e.tagName!=="A")}const Xs=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},fU=Sc.useId||(()=>{});let mU=0;function mc(t){const[e,n]=m.useState(fU());return Xs(()=>{n(r=>r??String(mU++))},[t]),e?`radix-${e}`:""}const pU=["top","right","bottom","left"],ia=Math.min,ur=Math.max,Op=Math.round,Lf=Math.floor,sa=t=>({x:t,y:t}),gU={left:"right",right:"left",bottom:"top",top:"bottom"},wU={start:"end",end:"start"};function oy(t,e,n){return ur(t,ia(e,n))}function Qs(t,e){return typeof t=="function"?t(e):t}function eo(t){return t.split("-")[0]}function su(t){return t.split("-")[1]}function z_(t){return t==="x"?"y":"x"}function H_(t){return t==="y"?"height":"width"}function ou(t){return["top","bottom"].includes(eo(t))?"y":"x"}function W_(t){return z_(ou(t))}function vU(t,e,n){n===void 0&&(n=!1);const r=su(t),i=W_(t),s=H_(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Mp(o)),[o,Mp(o)]}function yU(t){const e=Mp(t);return[ay(t),e,ay(e)]}function ay(t){return t.replace(/start|end/g,e=>wU[e])}function bU(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function _U(t,e,n,r){const i=su(t);let s=bU(eo(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(ay)))),s}function Mp(t){return t.replace(/left|right|bottom|top/g,e=>gU[e])}function kU(t){return{top:0,right:0,bottom:0,left:0,...t}}function x4(t){return typeof t!="number"?kU(t):{top:t,right:t,bottom:t,left:t}}function Np(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Ex(t,e,n){let{reference:r,floating:i}=t;const s=ou(e),o=W_(e),a=H_(o),l=eo(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(su(e)){case"start":f[o]-=h*(n&&c?-1:1);break;case"end":f[o]+=h*(n&&c?-1:1);break}return f}const EU=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=Ex(c,r,l),h=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:_,fn:v}=a[g],{x:w,y:b,data:k,reset:S}=await v({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=w??u,d=b??d,f={...f,[_]:{...f[_],...k}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:d}=Ex(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function Zd(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Qs(e,t),p=x4(f),_=a[h?d==="floating"?"reference":"floating":d],v=Np(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(_)))==null||n?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Np(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:b,strategy:l}):w);return{top:(v.top-S.top+p.top)/k.y,bottom:(S.bottom-v.bottom+p.bottom)/k.y,left:(v.left-S.left+p.left)/k.x,right:(S.right-v.right+p.right)/k.x}}const CU=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Qs(t,e)||{};if(c==null)return{};const d=x4(u),h={x:n,y:r},f=W_(i),p=H_(f),g=await o.getDimensions(c),_=f==="y",v=_?"top":"left",w=_?"bottom":"right",b=_?"clientHeight":"clientWidth",k=s.reference[p]+s.reference[f]-h[f]-s.floating[p],S=h[f]-s.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let E=C?C[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=a.floating[b]||s.floating[p]);const x=k/2-S/2,A=E/2-g[p]/2-1,R=ia(d[v],A),$=ia(d[w],A),z=R,re=E-g[p]-$,Y=E/2-g[p]/2+x,ne=oy(z,Y,re),ue=!l.arrow&&su(i)!=null&&Y!==ne&&s.reference[p]/2-(Y<z?R:$)-g[p]/2<0,de=ue?Y<z?Y-z:Y-re:0;return{[f]:h[f]+de,data:{[f]:ne,centerOffset:Y-ne-de,...ue&&{alignmentOffset:de}},reset:ue}}}),xU=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,..._}=Qs(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=eo(i),w=eo(a)===a,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=h||(w||!g?[Mp(a)]:yU(a));!h&&p!=="none"&&k.push(..._U(a,g,p,b));const S=[a,...k],C=await Zd(e,_),E=[];let x=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&E.push(C[v]),d){const z=vU(i,o,b);E.push(C[z[0]],C[z[1]])}if(x=[...x,{placement:i,overflows:E}],!E.every(z=>z<=0)){var A,R;const z=(((A=s.flip)==null?void 0:A.index)||0)+1,re=S[z];if(re)return{data:{index:z,overflows:x},reset:{placement:re}};let Y=(R=x.filter(ne=>ne.overflows[0]<=0).sort((ne,ue)=>ne.overflows[1]-ue.overflows[1])[0])==null?void 0:R.placement;if(!Y)switch(f){case"bestFit":{var $;const ne=($=x.map(ue=>[ue.placement,ue.overflows.filter(de=>de>0).reduce((de,D)=>de+D,0)]).sort((ue,de)=>ue[1]-de[1])[0])==null?void 0:$[0];ne&&(Y=ne);break}case"initialPlacement":Y=a;break}if(i!==Y)return{reset:{placement:Y}}}return{}}}};function Cx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xx(t){return pU.some(e=>t[e]>=0)}const SU=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Qs(t,e);switch(r){case"referenceHidden":{const s=await Zd(e,{...i,elementContext:"reference"}),o=Cx(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:xx(o)}}}case"escaped":{const s=await Zd(e,{...i,altBoundary:!0}),o=Cx(s,n.floating);return{data:{escapedOffsets:o,escaped:xx(o)}}}default:return{}}}}};async function TU(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=eo(n),a=su(n),l=ou(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Qs(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const PU=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await TU(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},AU=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:v,y:w}=_;return{x:v,y:w}}},...l}=Qs(t,e),c={x:n,y:r},u=await Zd(e,l),d=ou(eo(i)),h=z_(d);let f=c[h],p=c[d];if(s){const _=h==="y"?"top":"left",v=h==="y"?"bottom":"right",w=f+u[_],b=f-u[v];f=oy(w,f,b)}if(o){const _=d==="y"?"top":"left",v=d==="y"?"bottom":"right",w=p+u[_],b=p-u[v];p=oy(w,p,b)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},IU=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Qs(t,e),u={x:n,y:r},d=ou(i),h=z_(d);let f=u[h],p=u[d];const g=Qs(a,e),_=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=h==="y"?"height":"width",k=s.reference[h]-s.floating[b]+_.mainAxis,S=s.reference[h]+s.reference[b]-_.mainAxis;f<k?f=k:f>S&&(f=S)}if(c){var v,w;const b=h==="y"?"width":"height",k=["top","left"].includes(eo(i)),S=s.reference[d]-s.floating[b]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:_.crossAxis),C=s.reference[d]+s.reference[b]+(k?0:((w=o.offset)==null?void 0:w[d])||0)-(k?_.crossAxis:0);p<S?p=S:p>C&&(p=C)}return{[h]:f,[d]:p}}}},RU=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:r,platform:i,elements:s}=e,{apply:o=()=>{},...a}=Qs(t,e),l=await Zd(e,a),c=eo(n),u=su(n),d=ou(n)==="y",{width:h,height:f}=r.floating;let p,g;c==="top"||c==="bottom"?(p=c,g=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=c,p=u==="end"?"top":"bottom");const _=f-l[p],v=h-l[g],w=!e.middlewareData.shift;let b=_,k=v;if(d){const C=h-l.left-l.right;k=u||w?ia(v,C):C}else{const C=f-l.top-l.bottom;b=u||w?ia(_,C):C}if(w&&!u){const C=ur(l.left,0),E=ur(l.right,0),x=ur(l.top,0),A=ur(l.bottom,0);d?k=h-2*(C!==0||E!==0?C+E:ur(l.left,l.right)):b=f-2*(x!==0||A!==0?x+A:ur(l.top,l.bottom))}await o({...e,availableWidth:k,availableHeight:b});const S=await i.getDimensions(s.floating);return h!==S.width||f!==S.height?{reset:{rects:!0}}:{}}}};function oa(t){return S4(t)?(t.nodeName||"").toLowerCase():"#document"}function br(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ao(t){var e;return(e=(S4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function S4(t){return t instanceof Node||t instanceof br(t).Node}function to(t){return t instanceof Element||t instanceof br(t).Element}function ns(t){return t instanceof HTMLElement||t instanceof br(t).HTMLElement}function Sx(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof br(t).ShadowRoot}function Fh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function OU(t){return["table","td","th"].includes(oa(t))}function j_(t){const e=G_(),n=Xr(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function MU(t){let e=Dc(t);for(;ns(e)&&!c0(e);){if(j_(e))return e;e=Dc(e)}return null}function G_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function c0(t){return["html","body","#document"].includes(oa(t))}function Xr(t){return br(t).getComputedStyle(t)}function u0(t){return to(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Dc(t){if(oa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Sx(t)&&t.host||ao(t);return Sx(e)?e.host:e}function T4(t){const e=Dc(t);return c0(e)?t.ownerDocument?t.ownerDocument.body:t.body:ns(e)&&Fh(e)?e:T4(e)}function Jd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=T4(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=br(i);return s?e.concat(o,o.visualViewport||[],Fh(i)?i:[],o.frameElement&&n?Jd(o.frameElement):[]):e.concat(i,Jd(i,[],n))}function P4(t){const e=Xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ns(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Op(n)!==s||Op(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function q_(t){return to(t)?t:t.contextElement}function pc(t){const e=q_(t);if(!ns(e))return sa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=P4(e);let o=(s?Op(n.width):n.width)/r,a=(s?Op(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const NU=sa(0);function A4(t){const e=br(t);return!G_()||!e.visualViewport?NU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DU(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==br(t)?!1:e}function Qa(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=q_(t);let o=sa(1);e&&(r?to(r)&&(o=pc(r)):o=pc(t));const a=DU(s,n,r)?A4(s):sa(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=br(s),f=r&&to(r)?br(r):r;let p=h,g=p.frameElement;for(;g&&r&&f!==p;){const _=pc(g),v=g.getBoundingClientRect(),w=Xr(g),b=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*_.x,k=v.top+(g.clientTop+parseFloat(w.paddingTop))*_.y;l*=_.x,c*=_.y,u*=_.x,d*=_.y,l+=b,c+=k,p=br(g),g=p.frameElement}}return Np({width:u,height:d,x:l,y:c})}const LU=[":popover-open",":modal"];function I4(t){return LU.some(e=>{try{return t.matches(e)}catch{return!1}})}function $U(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ao(r),a=e?I4(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=sa(1);const u=sa(0),d=ns(r);if((d||!d&&!s)&&((oa(r)!=="body"||Fh(o))&&(l=u0(r)),ns(r))){const h=Qa(r);c=pc(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x,y:n.y*c.y-l.scrollTop*c.y+u.y}}function FU(t){return Array.from(t.getClientRects())}function R4(t){return Qa(ao(t)).left+u0(t).scrollLeft}function VU(t){const e=ao(t),n=u0(t),r=t.ownerDocument.body,i=ur(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ur(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+R4(t);const a=-n.scrollTop;return Xr(r).direction==="rtl"&&(o+=ur(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function BU(t,e){const n=br(t),r=ao(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=G_();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function UU(t,e){const n=Qa(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ns(t)?pc(t):sa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function Tx(t,e,n){let r;if(e==="viewport")r=BU(t,n);else if(e==="document")r=VU(ao(t));else if(to(e))r=UU(e,n);else{const i=A4(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Np(r)}function O4(t,e){const n=Dc(t);return n===e||!to(n)||c0(n)?!1:Xr(n).position==="fixed"||O4(n,e)}function zU(t,e){const n=e.get(t);if(n)return n;let r=Jd(t,[],!1).filter(a=>to(a)&&oa(a)!=="body"),i=null;const s=Xr(t).position==="fixed";let o=s?Dc(t):t;for(;to(o)&&!c0(o);){const a=Xr(o),l=j_(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Fh(o)&&!l&&O4(t,o))?r=r.filter(u=>u!==o):i=a,o=Dc(o)}return e.set(t,r),r}function HU(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?zU(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=Tx(e,u,i);return c.top=ur(d.top,c.top),c.right=ia(d.right,c.right),c.bottom=ia(d.bottom,c.bottom),c.left=ur(d.left,c.left),c},Tx(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function WU(t){const{width:e,height:n}=P4(t);return{width:e,height:n}}function jU(t,e,n){const r=ns(e),i=ao(e),s=n==="fixed",o=Qa(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=sa(0);if(r||!r&&!s)if((oa(e)!=="body"||Fh(i))&&(a=u0(e)),r){const d=Qa(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&(l.x=R4(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function Px(t,e){return!ns(t)||Xr(t).position==="fixed"?null:e?e(t):t.offsetParent}function M4(t,e){const n=br(t);if(!ns(t)||I4(t))return n;let r=Px(t,e);for(;r&&OU(r)&&Xr(r).position==="static";)r=Px(r,e);return r&&(oa(r)==="html"||oa(r)==="body"&&Xr(r).position==="static"&&!j_(r))?n:r||MU(t)||n}const GU=async function(t){const e=this.getOffsetParent||M4,n=this.getDimensions,r=await n(t.floating);return{reference:jU(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function qU(t){return Xr(t).direction==="rtl"}const YU={convertOffsetParentRelativeRectToViewportRelativeRect:$U,getDocumentElement:ao,getClippingRect:HU,getOffsetParent:M4,getElementRects:GU,getClientRects:FU,getDimensions:WU,getScale:pc,isElement:to,isRTL:qU};function KU(t,e){let n=null,r;const i=ao(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=t.getBoundingClientRect();if(a||e(),!d||!h)return;const f=Lf(u),p=Lf(i.clientWidth-(c+d)),g=Lf(i.clientHeight-(u+h)),_=Lf(c),w={rootMargin:-f+"px "+-p+"px "+-g+"px "+-_+"px",threshold:ur(0,ia(1,l))||1};let b=!0;function k(S){const C=S[0].intersectionRatio;if(C!==l){if(!b)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(k,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(t)}return o(!0),s}function ZU(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=q_(t),u=i||s?[...c?Jd(c):[],...Jd(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?KU(c,n):null;let h=-1,f=null;o&&(f=new ResizeObserver(v=>{let[w]=v;w&&w.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let p,g=l?Qa(t):null;l&&_();function _(){const v=Qa(t);g&&(v.x!==g.x||v.y!==g.y||v.width!==g.width||v.height!==g.height)&&n(),g=v,p=requestAnimationFrame(_)}return n(),()=>{var v;u.forEach(w=>{i&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),d==null||d(),(v=f)==null||v.disconnect(),f=null,l&&cancelAnimationFrame(p)}}const JU=PU,XU=AU,QU=xU,ez=RU,tz=SU,Ax=CU,nz=IU,rz=(t,e,n)=>{const r=new Map,i={platform:YU,...n},s={...i.platform,_c:r};return EU(t,e,{...i,platform:s})},iz=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ax({element:r.current,padding:i}).fn(n):{}:r?Ax({element:r,padding:i}).fn(n):{}}}};var Lm=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Dp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Dp(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Dp(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function N4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ix(t,e){const n=N4(t);return Math.round(e*n)/n}function Rx(t){const e=m.useRef(t);return Lm(()=>{e.current=t}),e}function sz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=m.useState(r);Dp(h,r)||f(r);const[p,g]=m.useState(null),[_,v]=m.useState(null),w=m.useCallback(de=>{de!==C.current&&(C.current=de,g(de))},[]),b=m.useCallback(de=>{de!==E.current&&(E.current=de,v(de))},[]),k=s||p,S=o||_,C=m.useRef(null),E=m.useRef(null),x=m.useRef(u),A=l!=null,R=Rx(l),$=Rx(i),z=m.useCallback(()=>{if(!C.current||!E.current)return;const de={placement:e,strategy:n,middleware:h};$.current&&(de.platform=$.current),rz(C.current,E.current,de).then(D=>{const M={...D,isPositioned:!0};re.current&&!Dp(x.current,M)&&(x.current=M,$h.flushSync(()=>{d(M)}))})},[h,e,n,$]);Lm(()=>{c===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,d(de=>({...de,isPositioned:!1})))},[c]);const re=m.useRef(!1);Lm(()=>(re.current=!0,()=>{re.current=!1}),[]),Lm(()=>{if(k&&(C.current=k),S&&(E.current=S),k&&S){if(R.current)return R.current(k,S,z);z()}},[k,S,z,R,A]);const Y=m.useMemo(()=>({reference:C,floating:E,setReference:w,setFloating:b}),[w,b]),ne=m.useMemo(()=>({reference:k,floating:S}),[k,S]),ue=m.useMemo(()=>{const de={position:n,left:0,top:0};if(!ne.floating)return de;const D=Ix(ne.floating,u.x),M=Ix(ne.floating,u.y);return a?{...de,transform:"translate("+D+"px, "+M+"px)",...N4(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:M}},[n,a,ne.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:z,refs:Y,elements:ne,floatingStyles:ue}),[u,z,Y,ne,ue])}function oz(t){const[e,n]=m.useState(void 0);return Xs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const D4="Popper",[L4,$4]=cs(D4),[az,F4]=L4(D4),lz=t=>{const{__scopePopper:e,children:n}=t,[r,i]=m.useState(null);return m.createElement(az,{scope:e,anchor:r,onAnchorChange:i},n)},cz="PopperAnchor",uz=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=F4(cz,n),o=m.useRef(null),a=bt(e,o);return m.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.createElement(ze.div,U({},i,{ref:a}))}),V4="PopperContent",[dz,Bke]=L4(V4),hz=m.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:p=0,arrowPadding:g=0,avoidCollisions:_=!0,collisionBoundary:v=[],collisionPadding:w=0,sticky:b="partial",hideWhenDetached:k=!1,updatePositionStrategy:S="optimized",onPlaced:C,...E}=t,x=F4(V4,u),[A,R]=m.useState(null),$=bt(e,_e=>R(_e)),[z,re]=m.useState(null),Y=oz(z),ne=(n=Y==null?void 0:Y.width)!==null&&n!==void 0?n:0,ue=(r=Y==null?void 0:Y.height)!==null&&r!==void 0?r:0,de=d+(f!=="center"?"-"+f:""),D=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},M=Array.isArray(v)?v:[v],H=M.length>0,G={padding:D,boundary:M.filter(fz),altBoundary:H},{refs:q,floatingStyles:ke,placement:ae,isPositioned:Xe,middlewareData:fe}=sz({strategy:"fixed",placement:de,whileElementsMounted:(..._e)=>ZU(..._e,{animationFrame:S==="always"}),elements:{reference:x.anchor},middleware:[JU({mainAxis:h+ue,alignmentAxis:p}),_&&XU({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?nz():void 0,...G}),_&&QU({...G}),ez({...G,apply:({elements:_e,rects:_t,availableWidth:Jt,availableHeight:an})=>{const{width:Bt,height:Ot}=_t.reference,At=_e.floating.style;At.setProperty("--radix-popper-available-width",`${Jt}px`),At.setProperty("--radix-popper-available-height",`${an}px`),At.setProperty("--radix-popper-anchor-width",`${Bt}px`),At.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),z&&iz({element:z,padding:g}),mz({arrowWidth:ne,arrowHeight:ue}),k&&tz({strategy:"referenceHidden",...G})]}),[Pt,on]=B4(ae),gt=tn(C);Xs(()=>{Xe&&(gt==null||gt())},[Xe,gt]);const yn=(i=fe.arrow)===null||i===void 0?void 0:i.x,sr=(s=fe.arrow)===null||s===void 0?void 0:s.y,se=((o=fe.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Me,be]=m.useState();return Xs(()=>{A&&be(window.getComputedStyle(A).zIndex)},[A]),m.createElement("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ke,transform:Xe?ke.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(a=fe.transformOrigin)===null||a===void 0?void 0:a.x,(l=fe.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},m.createElement(dz,{scope:u,placedSide:Pt,onArrowChange:re,arrowX:yn,arrowY:sr,shouldHideArrow:se},m.createElement(ze.div,U({"data-side":Pt,"data-align":on},E,{ref:$,style:{...E.style,animation:Xe?void 0:"none",opacity:(c=fe.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function fz(t){return t!==null}const mz=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,h=d?0:t.arrowWidth,f=d?0:t.arrowHeight,[p,g]=B4(a),_={start:"0%",center:"50%",end:"100%"}[g],v=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+h/2,w=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+f/2;let b="",k="";return p==="bottom"?(b=d?_:`${v}px`,k=`${-f}px`):p==="top"?(b=d?_:`${v}px`,k=`${l.floating.height+f}px`):p==="right"?(b=`${-f}px`,k=d?_:`${w}px`):p==="left"&&(b=`${l.floating.width+f}px`,k=d?_:`${w}px`),{data:{x:b,y:k}}}});function B4(t){const[e,n="center"]=t.split("-");return[e,n]}const pz=lz,gz=uz,wz=hz,U4=m.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?XI.createPortal(m.createElement(ze.div,U({},i,{ref:e})),r):null});function vz(t,e){return m.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const ri=t=>{const{present:e,children:n}=t,r=yz(e),i=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),s=bt(r.ref,i.ref);return typeof n=="function"||r.isPresent?m.cloneElement(i,{ref:s}):null};ri.displayName="Presence";function yz(t){const[e,n]=m.useState(),r=m.useRef({}),i=m.useRef(t),s=m.useRef("none"),o=t?"mounted":"unmounted",[a,l]=vz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const c=$f(r.current);s.current=a==="mounted"?c:"none"},[a]),Xs(()=>{const c=r.current,u=i.current;if(u!==t){const h=s.current,f=$f(c);t?l("MOUNT"):f==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Xs(()=>{if(e){const c=d=>{const f=$f(r.current).includes(d.animationName);d.target===e&&f&&$h.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=$f(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:m.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function $f(t){return(t==null?void 0:t.animationName)||"none"}const q1="rovingFocusGroup.onEntryFocus",bz={bubbles:!1,cancelable:!0},Y_="RovingFocusGroup",[ly,z4,_z]=y4(Y_),[kz,H4]=cs(Y_,[_z]),[Ez,Cz]=kz(Y_),xz=m.forwardRef((t,e)=>m.createElement(ly.Provider,{scope:t.__scopeRovingFocusGroup},m.createElement(ly.Slot,{scope:t.__scopeRovingFocusGroup},m.createElement(Sz,U({},t,{ref:e}))))),Sz=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=m.useRef(null),h=bt(e,d),f=U_(s),[p=null,g]=B_({prop:o,defaultProp:a,onChange:l}),[_,v]=m.useState(!1),w=tn(c),b=z4(n),k=m.useRef(!1),[S,C]=m.useState(0);return m.useEffect(()=>{const E=d.current;if(E)return E.addEventListener(q1,w),()=>E.removeEventListener(q1,w)},[w]),m.createElement(Ez,{scope:n,orientation:r,dir:f,loop:i,currentTabStopId:p,onItemFocus:m.useCallback(E=>g(E),[g]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>C(E=>E-1),[])},m.createElement(ze.div,U({tabIndex:_||S===0?-1:0,"data-orientation":r},u,{ref:h,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{k.current=!0}),onFocus:ce(t.onFocus,E=>{const x=!k.current;if(E.target===E.currentTarget&&x&&!_){const A=new CustomEvent(q1,bz);if(E.currentTarget.dispatchEvent(A),!A.defaultPrevented){const R=b().filter(ne=>ne.focusable),$=R.find(ne=>ne.active),z=R.find(ne=>ne.id===p),Y=[$,z,...R].filter(Boolean).map(ne=>ne.ref.current);W4(Y)}}k.current=!1}),onBlur:ce(t.onBlur,()=>v(!1))})))}),Tz="RovingFocusGroupItem",Pz=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=mc(),l=s||a,c=Cz(Tz,n),u=c.currentTabStopId===l,d=z4(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return m.useEffect(()=>{if(r)return h(),()=>f()},[r,h,f]),m.createElement(ly.ItemSlot,{scope:n,id:l,focusable:r,active:i},m.createElement(ze.span,U({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ce(t.onMouseDown,p=>{r?c.onItemFocus(l):p.preventDefault()}),onFocus:ce(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ce(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=Rz(p,c.orientation,c.dir);if(g!==void 0){p.preventDefault();let v=d().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")v.reverse();else if(g==="prev"||g==="next"){g==="prev"&&v.reverse();const w=v.indexOf(p.currentTarget);v=c.loop?Oz(v,w+1):v.slice(w+1)}setTimeout(()=>W4(v))}})})))}),Az={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Iz(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Rz(t,e,n){const r=Iz(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Az[r]}function W4(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Oz(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Mz=xz,Nz=Pz;var Dz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Al=new WeakMap,Ff=new WeakMap,Vf={},Y1=0,j4=function(t){return t&&(t.host||j4(t.parentNode))},Lz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=j4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},$z=function(t,e,n,r){var i=Lz(e,Array.isArray(t)?t:[t]);Vf[n]||(Vf[n]=new WeakMap);var s=Vf[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var f=h.getAttribute(r),p=f!==null&&f!=="false",g=(Al.get(h)||0)+1,_=(s.get(h)||0)+1;Al.set(h,g),s.set(h,_),o.push(h),g===1&&p&&Ff.set(h,!0),_===1&&h.setAttribute(n,"true"),p||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),Y1++,function(){o.forEach(function(d){var h=Al.get(d)-1,f=s.get(d)-1;Al.set(d,h),s.set(d,f),h||(Ff.has(d)||d.removeAttribute(r),Ff.delete(d)),f||d.removeAttribute(n)}),Y1--,Y1||(Al=new WeakMap,Al=new WeakMap,Ff=new WeakMap,Vf={})}},G4=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Dz(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),$z(r,i,n,"aria-hidden")):function(){return null}},Yi=function(){return Yi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yi.apply(this,arguments)};function Vh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Fz(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var $m="right-scroll-bar-position",Fm="width-before-scroll-bar",Vz="with-scroll-bars-hidden",Bz="--removed-body-scroll-bar-size";function K1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Uz(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var zz=typeof window<"u"?m.useLayoutEffect:m.useEffect,Ox=new WeakMap;function Hz(t,e){var n=Uz(null,function(r){return t.forEach(function(i){return K1(i,r)})});return zz(function(){var r=Ox.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||K1(a,null)}),s.forEach(function(a){i.has(a)||K1(a,o)})}Ox.set(n,t)},[t]),n}function Wz(t){return t}function jz(t,e){e===void 0&&(e=Wz);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Gz(t){t===void 0&&(t={});var e=jz(null);return e.options=Yi({async:!0,ssr:!1},t),e}var q4=function(t){var e=t.sideCar,n=Vh(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Yi({},n))};q4.isSideCarExport=!0;function qz(t,e){return t.useMedium(e),q4}var Y4=Gz(),Z1=function(){},d0=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Z1,onWheelCapture:Z1,onTouchMoveCapture:Z1}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,p=t.inert,g=t.allowPinchZoom,_=t.as,v=_===void 0?"div":_,w=Vh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=h,k=Hz([n,e]),S=Yi(Yi({},w),i);return m.createElement(m.Fragment,null,u&&m.createElement(b,{sideCar:Y4,removeScrollBar:c,shards:d,noIsolation:f,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n}),o?m.cloneElement(m.Children.only(a),Yi(Yi({},S),{ref:k})):m.createElement(v,Yi({},S,{className:l,ref:k}),a))});d0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};d0.classNames={fullWidth:Fm,zeroRight:$m};var Yz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Kz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Yz();return e&&t.setAttribute("nonce",e),t}function Zz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Jz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Xz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Kz())&&(Zz(e,n),Jz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Qz=function(){var t=Xz();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},K4=function(){var t=Qz(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},eH={left:0,top:0,right:0,gap:0},J1=function(t){return parseInt(t||"",10)||0},tH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[J1(n),J1(r),J1(i)]},nH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return eH;var e=tH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},rH=K4(),gc="data-scroll-locked",iH=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Vz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(gc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($m,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fm,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat($m," .").concat($m,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Fm," .").concat(Fm,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gc,`] {
    `).concat(Bz,": ").concat(a,`px;
  }
`)},Mx=function(){var t=parseInt(document.body.getAttribute(gc)||"0",10);return isFinite(t)?t:0},sH=function(){m.useEffect(function(){return document.body.setAttribute(gc,(Mx()+1).toString()),function(){var t=Mx()-1;t<=0?document.body.removeAttribute(gc):document.body.setAttribute(gc,t.toString())}},[])},oH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;sH();var s=m.useMemo(function(){return nH(i)},[i]);return m.createElement(rH,{styles:iH(s,!e,i,n?"":"!important")})},cy=!1;if(typeof window<"u")try{var Bf=Object.defineProperty({},"passive",{get:function(){return cy=!0,!0}});window.addEventListener("test",Bf,Bf),window.removeEventListener("test",Bf,Bf)}catch{cy=!1}var Il=cy?{passive:!1}:!1,aH=function(t){return t.tagName==="TEXTAREA"},Z4=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!aH(t)&&n[e]==="visible")},lH=function(t){return Z4(t,"overflowY")},cH=function(t){return Z4(t,"overflowX")},Nx=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=J4(t,n);if(r){var i=X4(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},uH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},dH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},J4=function(t,e){return t==="v"?lH(e):cH(e)},X4=function(t,e){return t==="v"?uH(e):dH(e)},hH=function(t,e){return t==="h"&&e==="rtl"?-1:1},fH=function(t,e,n,r,i){var s=hH(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var f=X4(t,a),p=f[0],g=f[1],_=f[2],v=g-_-s*p;(p||v)&&J4(t,a)&&(d+=v,h+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(d===0||!i)||!u&&(h===0||!i))&&(c=!0),c},Uf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Dx=function(t){return[t.deltaX,t.deltaY]},Lx=function(t){return t&&"current"in t?t.current:t},mH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},pH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},gH=0,Rl=[];function wH(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),i=m.useState(gH++)[0],s=m.useState(function(){return K4()})[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=Fz([t.lockRef.current],(t.shards||[]).map(Lx),!0).filter(Boolean);return g.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=m.useCallback(function(g,_){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var v=Uf(g),w=n.current,b="deltaX"in g?g.deltaX:w[0]-v[0],k="deltaY"in g?g.deltaY:w[1]-v[1],S,C=g.target,E=Math.abs(b)>Math.abs(k)?"h":"v";if("touches"in g&&E==="h"&&C.type==="range")return!1;var x=Nx(E,C);if(!x)return!0;if(x?S=E:(S=E==="v"?"h":"v",x=Nx(E,C)),!x)return!1;if(!r.current&&"changedTouches"in g&&(b||k)&&(r.current=S),!S)return!0;var A=r.current||S;return fH(A,_,g,A==="h"?b:k,!0)},[]),l=m.useCallback(function(g){var _=g;if(!(!Rl.length||Rl[Rl.length-1]!==s)){var v="deltaY"in _?Dx(_):Uf(_),w=e.current.filter(function(S){return S.name===_.type&&S.target===_.target&&mH(S.delta,v)})[0];if(w&&w.should){_.cancelable&&_.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(Lx).filter(Boolean).filter(function(S){return S.contains(_.target)}),k=b.length>0?a(_,b[0]):!o.current.noIsolation;k&&_.cancelable&&_.preventDefault()}}},[]),c=m.useCallback(function(g,_,v,w){var b={name:g,delta:_,target:v,should:w};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(k){return k!==b})},1)},[]),u=m.useCallback(function(g){n.current=Uf(g),r.current=void 0},[]),d=m.useCallback(function(g){c(g.type,Dx(g),g.target,a(g,t.lockRef.current))},[]),h=m.useCallback(function(g){c(g.type,Uf(g),g.target,a(g,t.lockRef.current))},[]);m.useEffect(function(){return Rl.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Il),document.addEventListener("touchmove",l,Il),document.addEventListener("touchstart",u,Il),function(){Rl=Rl.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Il),document.removeEventListener("touchmove",l,Il),document.removeEventListener("touchstart",u,Il)}},[]);var f=t.removeScrollBar,p=t.inert;return m.createElement(m.Fragment,null,p?m.createElement(s,{styles:pH(i)}):null,f?m.createElement(oH,{gapMode:"margin"}):null)}const vH=qz(Y4,wH);var K_=m.forwardRef(function(t,e){return m.createElement(d0,Yi({},t,{ref:e,sideCar:vH}))});K_.classNames=d0.classNames;const uy=["Enter"," "],yH=["ArrowDown","PageUp","Home"],Q4=["ArrowUp","PageDown","End"],bH=[...yH,...Q4],_H={ltr:[...uy,"ArrowRight"],rtl:[...uy,"ArrowLeft"]},kH={ltr:["ArrowLeft"],rtl:["ArrowRight"]},h0="Menu",[Xd,EH,CH]=y4(h0),[ml,e6]=cs(h0,[CH,$4,H4]),Z_=$4(),t6=H4(),[xH,pl]=ml(h0),[SH,Bh]=ml(h0),TH=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=Z_(e),[l,c]=m.useState(null),u=m.useRef(!1),d=tn(s),h=U_(i);return m.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),m.createElement(pz,a,m.createElement(xH,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c},m.createElement(SH,{scope:e,onClose:m.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o},r)))},n6=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=Z_(n);return m.createElement(gz,U({},i,r,{ref:e}))}),r6="MenuPortal",[PH,i6]=ml(r6,{forceMount:void 0}),AH=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=pl(r6,e);return m.createElement(PH,{scope:e,forceMount:n},m.createElement(ri,{present:n||s.open},m.createElement(U4,{asChild:!0,container:i},r)))},Si="MenuContent",[IH,J_]=ml(Si),RH=m.forwardRef((t,e)=>{const n=i6(Si,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=pl(Si,t.__scopeMenu),o=Bh(Si,t.__scopeMenu);return m.createElement(Xd.Provider,{scope:t.__scopeMenu},m.createElement(ri,{present:r||s.open},m.createElement(Xd.Slot,{scope:t.__scopeMenu},o.modal?m.createElement(OH,U({},i,{ref:e})):m.createElement(MH,U({},i,{ref:e})))))}),OH=m.forwardRef((t,e)=>{const n=pl(Si,t.__scopeMenu),r=m.useRef(null),i=bt(e,r);return m.useEffect(()=>{const s=r.current;if(s)return G4(s)},[]),m.createElement(X_,U({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ce(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),MH=m.forwardRef((t,e)=>{const n=pl(Si,t.__scopeMenu);return m.createElement(X_,U({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),X_=m.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:p,...g}=t,_=pl(Si,n),v=Bh(Si,n),w=Z_(n),b=t6(n),k=EH(n),[S,C]=m.useState(null),E=m.useRef(null),x=bt(e,E,_.onContentChange),A=m.useRef(0),R=m.useRef(""),$=m.useRef(0),z=m.useRef(null),re=m.useRef("right"),Y=m.useRef(0),ne=p?K_:m.Fragment,ue=p?{as:Xa,allowPinchZoom:!0}:void 0,de=M=>{var H,G;const q=R.current+M,ke=k().filter(gt=>!gt.disabled),ae=document.activeElement,Xe=(H=ke.find(gt=>gt.ref.current===ae))===null||H===void 0?void 0:H.textValue,fe=ke.map(gt=>gt.textValue),Pt=ZH(fe,q,Xe),on=(G=ke.find(gt=>gt.textValue===Pt))===null||G===void 0?void 0:G.ref.current;(function gt(yn){R.current=yn,window.clearTimeout(A.current),yn!==""&&(A.current=window.setTimeout(()=>gt(""),1e3))})(q),on&&setTimeout(()=>on.focus())};m.useEffect(()=>()=>window.clearTimeout(A.current),[]),k4();const D=m.useCallback(M=>{var H,G;return re.current===((H=z.current)===null||H===void 0?void 0:H.side)&&XH(M,(G=z.current)===null||G===void 0?void 0:G.area)},[]);return m.createElement(IH,{scope:n,searchRef:R,onItemEnter:m.useCallback(M=>{D(M)&&M.preventDefault()},[D]),onItemLeave:m.useCallback(M=>{var H;D(M)||((H=E.current)===null||H===void 0||H.focus(),C(null))},[D]),onTriggerLeave:m.useCallback(M=>{D(M)&&M.preventDefault()},[D]),pointerGraceTimerRef:$,onPointerGraceIntentChange:m.useCallback(M=>{z.current=M},[])},m.createElement(ne,ue,m.createElement(E4,{asChild:!0,trapped:i,onMountAutoFocus:ce(s,M=>{var H;M.preventDefault(),(H=E.current)===null||H===void 0||H.focus()}),onUnmountAutoFocus:o},m.createElement(b4,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f},m.createElement(Mz,U({asChild:!0},b,{dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:C,onEntryFocus:ce(l,M=>{v.isUsingKeyboardRef.current||M.preventDefault()})}),m.createElement(wz,U({role:"menu","aria-orientation":"vertical","data-state":c6(_.open),"data-radix-menu-content":"",dir:v.dir},w,g,{ref:x,style:{outline:"none",...g.style},onKeyDown:ce(g.onKeyDown,M=>{const G=M.target.closest("[data-radix-menu-content]")===M.currentTarget,q=M.ctrlKey||M.altKey||M.metaKey,ke=M.key.length===1;G&&(M.key==="Tab"&&M.preventDefault(),!q&&ke&&de(M.key));const ae=E.current;if(M.target!==ae||!bH.includes(M.key))return;M.preventDefault();const fe=k().filter(Pt=>!Pt.disabled).map(Pt=>Pt.ref.current);Q4.includes(M.key)&&fe.reverse(),YH(fe)}),onBlur:ce(t.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(A.current),R.current="")}),onPointerMove:ce(t.onPointerMove,Qd(M=>{const H=M.target,G=Y.current!==M.clientX;if(M.currentTarget.contains(H)&&G){const q=M.clientX>Y.current?"right":"left";re.current=q,Y.current=M.clientX}}))})))))))}),NH=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.createElement(ze.div,U({role:"group"},r,{ref:e}))}),DH=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.createElement(ze.div,U({},r,{ref:e}))}),dy="MenuItem",$x="menu.itemSelect",Q_=m.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=m.useRef(null),o=Bh(dy,t.__scopeMenu),a=J_(dy,t.__scopeMenu),l=bt(e,s),c=m.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent($x,{bubbles:!0,cancelable:!0});d.addEventListener($x,f=>r==null?void 0:r(f),{once:!0}),v4(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return m.createElement(s6,U({},i,{ref:l,disabled:n,onClick:ce(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)===null||h===void 0||h.call(t,d),c.current=!0},onPointerUp:ce(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)===null||h===void 0||h.click()}),onKeyDown:ce(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||uy.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),s6=m.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=J_(dy,n),a=t6(n),l=m.useRef(null),c=bt(e,l),[u,d]=m.useState(!1),[h,f]=m.useState("");return m.useEffect(()=>{const p=l.current;if(p){var g;f(((g=p.textContent)!==null&&g!==void 0?g:"").trim())}},[s.children]),m.createElement(Xd.ItemSlot,{scope:n,disabled:r,textValue:i??h},m.createElement(Nz,U({asChild:!0},a,{focusable:!r}),m.createElement(ze.div,U({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},s,{ref:c,onPointerMove:ce(t.onPointerMove,Qd(p=>{r?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ce(t.onPointerLeave,Qd(p=>o.onItemLeave(p))),onFocus:ce(t.onFocus,()=>d(!0)),onBlur:ce(t.onBlur,()=>d(!1))}))))}),LH=m.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return m.createElement(a6,{scope:t.__scopeMenu,checked:n},m.createElement(Q_,U({role:"menuitemcheckbox","aria-checked":Lp(n)?"mixed":n},i,{ref:e,"data-state":e2(n),onSelect:ce(i.onSelect,()=>r==null?void 0:r(Lp(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),$H="MenuRadioGroup",[Uke,FH]=ml($H,{value:void 0,onValueChange:()=>{}}),VH="MenuRadioItem",BH=m.forwardRef((t,e)=>{const{value:n,...r}=t,i=FH(VH,t.__scopeMenu),s=n===i.value;return m.createElement(a6,{scope:t.__scopeMenu,checked:s},m.createElement(Q_,U({role:"menuitemradio","aria-checked":s},r,{ref:e,"data-state":e2(s),onSelect:ce(r.onSelect,()=>{var o;return(o=i.onValueChange)===null||o===void 0?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})))}),o6="MenuItemIndicator",[a6,UH]=ml(o6,{checked:!1}),zH=m.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=UH(o6,n);return m.createElement(ri,{present:r||Lp(s.checked)||s.checked===!0},m.createElement(ze.span,U({},i,{ref:e,"data-state":e2(s.checked)})))}),HH=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.createElement(ze.div,U({role:"separator","aria-orientation":"horizontal"},r,{ref:e}))}),WH="MenuSub",[zke,l6]=ml(WH),zf="MenuSubTrigger",jH=m.forwardRef((t,e)=>{const n=pl(zf,t.__scopeMenu),r=Bh(zf,t.__scopeMenu),i=l6(zf,t.__scopeMenu),s=J_(zf,t.__scopeMenu),o=m.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=m.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.createElement(n6,U({asChild:!0},c),m.createElement(s6,U({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":c6(n.open)},t,{ref:o0(e,i.onTriggerChange),onClick:d=>{var h;(h=t.onClick)===null||h===void 0||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ce(t.onPointerMove,Qd(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ce(t.onPointerLeave,Qd(d=>{var h;u();const f=(h=n.content)===null||h===void 0?void 0:h.getBoundingClientRect();if(f){var p;const g=(p=n.content)===null||p===void 0?void 0:p.dataset.side,_=g==="right",v=_?-5:5,w=f[_?"left":"right"],b=f[_?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:w,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:w,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ce(t.onKeyDown,d=>{const h=s.searchRef.current!=="";if(!(t.disabled||h&&d.key===" ")&&_H[r.dir].includes(d.key)){var f;n.onOpenChange(!0),(f=n.content)===null||f===void 0||f.focus(),d.preventDefault()}})})))}),GH="MenuSubContent",qH=m.forwardRef((t,e)=>{const n=i6(Si,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=pl(Si,t.__scopeMenu),o=Bh(Si,t.__scopeMenu),a=l6(GH,t.__scopeMenu),l=m.useRef(null),c=bt(e,l);return m.createElement(Xd.Provider,{scope:t.__scopeMenu},m.createElement(ri,{present:r||s.open},m.createElement(Xd.Slot,{scope:t.__scopeMenu},m.createElement(X_,U({id:a.contentId,"aria-labelledby":a.triggerId},i,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ce(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ce(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ce(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=kH[o.dir].includes(u.key);if(d&&h){var f;s.onOpenChange(!1),(f=a.trigger)===null||f===void 0||f.focus(),u.preventDefault()}})})))))});function c6(t){return t?"open":"closed"}function Lp(t){return t==="indeterminate"}function e2(t){return Lp(t)?"indeterminate":t?"checked":"unchecked"}function YH(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function KH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function ZH(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=KH(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function JH(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(i=!i)}return i}function XH(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return JH(n,e)}function Qd(t){return e=>e.pointerType==="mouse"?t(e):void 0}const QH=TH,eW=n6,tW=AH,nW=RH,rW=NH,iW=DH,sW=Q_,oW=LH,aW=BH,lW=zH,cW=HH,uW=jH,dW=qH,u6="DropdownMenu",[hW,Hke]=cs(u6,[e6]),Or=e6(),[fW,d6]=hW(u6),mW=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Or(e),c=m.useRef(null),[u=!1,d]=B_({prop:i,defaultProp:s,onChange:o});return m.createElement(fW,{scope:e,triggerId:mc(),triggerRef:c,contentId:mc(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(h=>!h),[d]),modal:a},m.createElement(QH,U({},l,{open:u,onOpenChange:d,dir:r,modal:a}),n))},pW="DropdownMenuTrigger",gW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=d6(pW,n),o=Or(n);return m.createElement(eW,U({asChild:!0},o),m.createElement(ze.button,U({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r},i,{ref:o0(e,s.triggerRef),onPointerDown:ce(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ce(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),wW=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Or(e);return m.createElement(tW,U({},r,n))},vW="DropdownMenuContent",yW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=d6(vW,n),s=Or(n),o=m.useRef(!1);return m.createElement(nW,U({id:i.contentId,"aria-labelledby":i.triggerId},s,r,{ref:e,onCloseAutoFocus:ce(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ce(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),bW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(rW,U({},i,r,{ref:e}))}),_W=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(iW,U({},i,r,{ref:e}))}),kW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(sW,U({},i,r,{ref:e}))}),EW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(oW,U({},i,r,{ref:e}))}),CW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(aW,U({},i,r,{ref:e}))}),xW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(lW,U({},i,r,{ref:e}))}),SW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(cW,U({},i,r,{ref:e}))}),TW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(uW,U({},i,r,{ref:e}))}),PW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Or(n);return m.createElement(dW,U({},i,r,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),AW=mW,IW=gW,RW=wW,h6=yW,OW=bW,f6=_W,m6=kW,p6=EW,g6=CW,w6=xW,v6=SW,y6=TW,b6=PW;function au(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var MW=["color"],NW=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,MW);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),DW=["color"],LW=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,DW);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$W=["color"],_6=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,$W);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),FW=["color"],VW=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,FW);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),BW=["color"],UW=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,BW);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),zW=["color"],t2=m.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,i=au(t,zW);return m.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:e}),m.createElement("path",{d:"M1.84998 7.49998C1.84998 4.66458 4.05979 1.84998 7.49998 1.84998C10.2783 1.84998 11.6515 3.9064 12.2367 5H10.5C10.2239 5 10 5.22386 10 5.5C10 5.77614 10.2239 6 10.5 6H13.5C13.7761 6 14 5.77614 14 5.5V2.5C14 2.22386 13.7761 2 13.5 2C13.2239 2 13 2.22386 13 2.5V4.31318C12.2955 3.07126 10.6659 0.849976 7.49998 0.849976C3.43716 0.849976 0.849976 4.18537 0.849976 7.49998C0.849976 10.8146 3.43716 14.15 7.49998 14.15C9.44382 14.15 11.0622 13.3808 12.2145 12.2084C12.8315 11.5806 13.3133 10.839 13.6418 10.0407C13.7469 9.78536 13.6251 9.49315 13.3698 9.38806C13.1144 9.28296 12.8222 9.40478 12.7171 9.66014C12.4363 10.3425 12.0251 10.9745 11.5013 11.5074C10.5295 12.4963 9.16504 13.15 7.49998 13.15C4.05979 13.15 1.84998 10.3354 1.84998 7.49998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const f0=AW,m0=IW,k6=OW,HW=m.forwardRef(({className:t,inset:e,children:n,...r},i)=>I(y6,{ref:i,className:oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,y(_6,{className:"ml-auto h-4 w-4"})]}));HW.displayName=y6.displayName;const WW=m.forwardRef(({className:t,...e},n)=>y(b6,{ref:n,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));WW.displayName=b6.displayName;const Uh=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>y(RW,{children:y(h6,{ref:r,sideOffset:e,className:oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Uh.displayName=h6.displayName;const Yr=m.forwardRef(({className:t,inset:e,...n},r)=>y(m6,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Yr.displayName=m6.displayName;const jW=m.forwardRef(({className:t,children:e,checked:n,...r},i)=>I(p6,{ref:i,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[y("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y(w6,{children:y(NW,{className:"h-4 w-4"})})}),e]}));jW.displayName=p6.displayName;const GW=m.forwardRef(({className:t,children:e,...n},r)=>I(g6,{ref:r,className:oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[y("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:y(w6,{children:y(UW,{className:"h-4 w-4 fill-current"})})}),e]}));GW.displayName=g6.displayName;const n2=m.forwardRef(({className:t,inset:e,...n},r)=>y(f6,{ref:r,className:oe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));n2.displayName=f6.displayName;const Lc=m.forwardRef(({className:t,...e},n)=>y(v6,{ref:n,className:oe("-mx-1 my-1 h-px bg-muted",t),...e}));Lc.displayName=v6.displayName;const qW={theme:"system",setTheme:()=>null},E6=m.createContext(qW);function YW({children:t,defaultTheme:e="system",storageKey:n="vite-ui-theme",...r}){const[i,s]=m.useState(()=>localStorage.getItem(n)||e);m.useEffect(()=>{const a=window.document.documentElement;if(a.classList.remove("light","dark"),i==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";a.classList.add(l);return}a.classList.add(i)},[i]);const o={theme:i,setTheme:a=>{localStorage.setItem(n,a),s(a)}};return y(E6.Provider,{...r,value:o,children:t})}const KW=()=>{const t=m.useContext(E6);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t};function hy(){const{setTheme:t}=KW();return I(f0,{children:[y(m0,{asChild:!0,children:I(it,{children:[y(KB,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),y(qB,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),y("span",{className:"sr-only",children:"Toggle theme"})]})}),I(Uh,{align:"end",children:[y(Yr,{onClick:()=>t("light"),children:"Light"}),y(Yr,{onClick:()=>t("dark"),children:"Dark"}),y(Yr,{onClick:()=>t("system"),children:"System"})]})]})}function cn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ZW=typeof Symbol=="function"&&Symbol.observable||"@@observable",Fx=ZW,X1=()=>Math.random().toString(36).substring(7).split("").join("."),JW={INIT:`@@redux/INIT${X1()}`,REPLACE:`@@redux/REPLACE${X1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${X1()}`},$p=JW;function r2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function i2(t,e,n){if(typeof t!="function")throw new Error(cn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cn(1));return n(i2)(t,e)}let r=t,i=e,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach((_,v)=>{o.set(v,_)}))}function u(){if(l)throw new Error(cn(3));return i}function d(_){if(typeof _!="function")throw new Error(cn(4));if(l)throw new Error(cn(5));let v=!0;c();const w=a++;return o.set(w,_),function(){if(v){if(l)throw new Error(cn(6));v=!1,c(),o.delete(w),s=null}}}function h(_){if(!r2(_))throw new Error(cn(7));if(typeof _.type>"u")throw new Error(cn(8));if(typeof _.type!="string")throw new Error(cn(17));if(l)throw new Error(cn(9));try{l=!0,i=r(i,_)}finally{l=!1}return(s=o).forEach(w=>{w()}),_}function f(_){if(typeof _!="function")throw new Error(cn(10));r=_,h({type:$p.REPLACE})}function p(){const _=d;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(cn(11));function w(){const k=v;k.next&&k.next(u())}return w(),{unsubscribe:_(w)}},[Fx](){return this}}}return h({type:$p.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:f,[Fx]:p}}function XW(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:$p.INIT})>"u")throw new Error(cn(12));if(typeof n(void 0,{type:$p.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cn(13))})}function C6(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{XW(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],h=n[d],f=o[d],p=h(f,a);if(typeof p>"u")throw a&&a.type,new Error(cn(14));c[d]=p,l=l||p!==f}return l=l||r.length!==Object.keys(o).length,l?c:o}}function Fp(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function QW(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(cn(15))};const o={getState:i.getState,dispatch:(l,...c)=>s(l,...c)},a=t.map(l=>l(o));return s=Fp(...a)(i.dispatch),{...i,dispatch:s}}}function ej(t){return r2(t)&&"type"in t&&typeof t.type=="string"}var x6=Symbol.for("immer-nothing"),Vx=Symbol.for("immer-draftable"),Er=Symbol.for("immer-state");function wi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $c=Object.getPrototypeOf;function aa(t){return!!t&&!!t[Er]}function no(t){var e;return t?S6(t)||Array.isArray(t)||!!t[Vx]||!!((e=t.constructor)!=null&&e[Vx])||g0(t)||w0(t):!1}var tj=Object.prototype.constructor.toString();function S6(t){if(!t||typeof t!="object")return!1;const e=$c(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tj}function Vp(t,e){p0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function p0(t){const e=t[Er];return e?e.type_:Array.isArray(t)?1:g0(t)?2:w0(t)?3:0}function fy(t,e){return p0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function T6(t,e,n){const r=p0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function nj(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function g0(t){return t instanceof Map}function w0(t){return t instanceof Set}function Pa(t){return t.copy_||t.base_}function my(t,e){if(g0(t))return new Map(t);if(w0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=S6(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Er];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create($c(t),r)}else{const r=$c(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function s2(t,e=!1){return v0(t)||aa(t)||!no(t)||(p0(t)>1&&(t.set=t.add=t.clear=t.delete=rj),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>s2(r,!0))),t}function rj(){wi(2)}function v0(t){return Object.isFrozen(t)}var ij={};function el(t){const e=ij[t];return e||wi(0,t),e}var eh;function P6(){return eh}function sj(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Bx(t,e){e&&(el("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function py(t){gy(t),t.drafts_.forEach(oj),t.drafts_=null}function gy(t){t===eh&&(eh=t.parent_)}function Ux(t){return eh=sj(eh,t)}function oj(t){const e=t[Er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zx(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Er].modified_&&(py(e),wi(4)),no(t)&&(t=Bp(e,t),e.parent_||Up(e,t)),e.patches_&&el("Patches").generateReplacementPatches_(n[Er].base_,t,e.patches_,e.inversePatches_)):t=Bp(e,n,[]),py(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==x6?t:void 0}function Bp(t,e,n){if(v0(e))return e;const r=e[Er];if(!r)return Vp(e,(i,s)=>Hx(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return Up(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Vp(s,(a,l)=>Hx(t,r,i,a,l,n,o)),Up(t,i,!1),n&&t.patches_&&el("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function Hx(t,e,n,r,i,s,o){if(aa(i)){const a=s&&e&&e.type_!==3&&!fy(e.assigned_,r)?s.concat(r):void 0,l=Bp(t,i,a);if(T6(n,r,l),aa(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(no(i)&&!v0(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Bp(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Up(t,i)}}function Up(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&s2(e,n)}function aj(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:P6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=o2;n&&(i=[r],s=th);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var o2={get(t,e){if(e===Er)return t;const n=Pa(t);if(!fy(n,e))return lj(t,n,e);const r=n[e];return t.finalized_||!no(r)?r:r===Q1(t.base_,e)?(ew(t),t.copy_[e]=vy(r,t)):r},has(t,e){return e in Pa(t)},ownKeys(t){return Reflect.ownKeys(Pa(t))},set(t,e,n){const r=A6(Pa(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Q1(Pa(t),e),s=i==null?void 0:i[Er];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(nj(n,i)&&(n!==void 0||fy(t.base_,e)))return!0;ew(t),wy(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Q1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,ew(t),wy(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Pa(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){wi(11)},getPrototypeOf(t){return $c(t.base_)},setPrototypeOf(){wi(12)}},th={};Vp(o2,(t,e)=>{th[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});th.deleteProperty=function(t,e){return th.set.call(this,t,e,void 0)};th.set=function(t,e,n){return o2.set.call(this,t[0],e,n,t[0])};function Q1(t,e){const n=t[Er];return(n?Pa(n):t)[e]}function lj(t,e,n){var i;const r=A6(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function A6(t,e){if(!(e in t))return;let n=$c(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=$c(n)}}function wy(t){t.modified_||(t.modified_=!0,t.parent_&&wy(t.parent_))}function ew(t){t.copy_||(t.copy_=my(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var cj=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&wi(6),r!==void 0&&typeof r!="function"&&wi(7);let i;if(no(e)){const s=Ux(this),o=vy(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?py(s):gy(s)}return Bx(s,r),zx(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===x6&&(i=void 0),this.autoFreeze_&&s2(i,!0),r){const s=[],o=[];el("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else wi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){no(t)||wi(8),aa(t)&&(t=I6(t));const e=Ux(this),n=vy(t,void 0);return n[Er].isManual_=!0,gy(e),n}finishDraft(t,e){const n=t&&t[Er];(!n||!n.isManual_)&&wi(9);const{scope_:r}=n;return Bx(r,e),zx(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=el("Patches").applyPatches_;return aa(t)?r(t,e):this.produce(t,i=>r(i,e))}};function vy(t,e){const n=g0(t)?el("MapSet").proxyMap_(t,e):w0(t)?el("MapSet").proxySet_(t,e):aj(t,e);return(e?e.scope_:P6()).drafts_.push(n),n}function I6(t){return aa(t)||wi(10,t),R6(t)}function R6(t){if(!no(t)||v0(t))return t;const e=t[Er];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=my(t,e.scope_.immer_.useStrictShallowCopy_)}else n=my(t,!0);return Vp(n,(r,i)=>{T6(n,r,R6(i))}),e&&(e.finalized_=!1),n}var Cr=new cj,O6=Cr.produce;Cr.produceWithPatches.bind(Cr);Cr.setAutoFreeze.bind(Cr);Cr.setUseStrictShallowCopy.bind(Cr);Cr.applyPatches.bind(Cr);Cr.createDraft.bind(Cr);Cr.finishDraft.bind(Cr);function uj(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function dj(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function hj(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var Wx=t=>Array.isArray(t)?t:[t];function fj(t){const e=Array.isArray(t[0])?t[0]:t;return hj(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function mj(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var pj=class{constructor(t){this.value=t}deref(){return this.value}},gj=typeof WeakRef<"u"?WeakRef:pj,wj=0,jx=1;function Hf(){return{s:wj,v:void 0,o:null,p:null}}function a2(t,e={}){let n=Hf();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=a.o;g===null&&(a.o=g=new WeakMap);const _=g.get(p);_===void 0?(a=Hf(),g.set(p,a)):a=_}else{let g=a.p;g===null&&(a.p=g=new Map);const _=g.get(p);_===void 0?(a=Hf(),g.set(p,a)):a=_}}const c=a;let u;if(a.s===jx?u=a.v:(u=t.apply(null,arguments),s++),c.s=jx,r){const h=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;h!=null&&r(h,u)&&(u=h,s!==0&&s--),i=typeof u=="object"&&u!==null||typeof u=="function"?new gj(u):u}return c.v=u,u}return o.clearCache=()=>{n=Hf(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function M6(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),uj(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=a2,argsMemoizeOptions:p=[],devModeChecks:g={}}=u,_=Wx(h),v=Wx(p),w=fj(i),b=d(function(){return s++,c.apply(null,arguments)},..._),k=f(function(){o++;const C=mj(w,arguments);return a=b.apply(null,C),a},...v);return Object.assign(k,{resultFunc:c,memoizedResultFunc:b,dependencies:w,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:f})};return Object.assign(r,{withTypes:()=>r}),r}var vj=M6(a2),yj=Object.assign((t,e=vj)=>{dj(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>yj});function N6(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var bj=N6(),_j=N6,kj=(...t)=>{const e=M6(...t),n=Object.assign((...r)=>{const i=e(...r),s=(o,...a)=>i(aa(o)?I6(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};kj(a2);var Ej=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fp:Fp.apply(null,arguments)};function Fc(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Qn(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>ej(r)&&r.type===t,n}var D6=class id extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,id.prototype)}static get[Symbol.species](){return id}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new id(...e[0].concat(this)):new id(...e.concat(this))}};function Gx(t){return no(t)?O6(t,()=>{}):t}function qx(t,e,n){if(t.has(e)){let i=t.get(e);return n.update&&(i=n.update(i,e,t),t.set(e,i)),i}if(!n.insert)throw new Error(Qn(10));const r=n.insert(e,t);return t.set(e,r),r}function Cj(t){return typeof t=="boolean"}var xj=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new D6;return n&&(Cj(n)?o.push(bj):o.push(_j(n.extraArgument))),o},Sj="RTK_autoBatch",L6=t=>e=>{setTimeout(e,t)},Tj=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:L6(10),Pj=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?Tj:t.type==="callback"?t.queueNotification:L6(t.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>i&&u(),h=r.subscribe(d);return a.add(u),()=>{h(),a.delete(u)}},dispatch(u){var d;try{return i=!((d=u==null?void 0:u.meta)!=null&&d[Sj]),s=!i,s&&(o||(o=!0,l(c))),r.dispatch(u)}finally{i=!0}}})},Aj=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new D6(t);return r&&i.push(Pj(typeof r=="object"?r:void 0)),i},Ij=!0;function Rj(t){const e=xj(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(r2(n))a=C6(n);else throw new Error(Qn(1));let l;typeof r=="function"?l=r(e):l=e();let c=Fp;i&&(c=Ej({trace:!Ij,...typeof i=="object"&&i}));const u=QW(...l),d=Aj(u);let h=typeof o=="function"?o(d):d();const f=c(...h);return i2(a,s,f)}function $6(t){const e={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Qn(28));if(a in e)throw new Error(Qn(29));return e[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function Oj(t){return typeof t=="function"}function Mj(t,e){let[n,r,i]=$6(e),s;if(Oj(t))s=()=>Gx(t());else{const a=Gx(t);s=()=>a}function o(a=s(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[i]),c.reduce((u,d)=>{if(d)if(aa(u)){const f=d(u,l);return f===void 0?u:f}else{if(no(u))return O6(u,h=>d(h,l));{const h=d(u,l);if(h===void 0){if(u===null)return u;throw new Error(Qn(9))}return h}}return u},a)}return o.getInitialState=s,o}var Nj="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Dj=(t=21)=>{let e="",n=t;for(;n--;)e+=Nj[Math.random()*64|0];return e},Lj=Symbol.for("rtk-slice-createasyncthunk");function $j(t,e){return`${t}/${e}`}function Fj({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Lj];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Qn(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Uj()):i.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,k){const S=typeof b=="string"?b:b.type;if(!S)throw new Error(Qn(12));if(S in c.sliceCaseReducersByType)throw new Error(Qn(13));return c.sliceCaseReducersByType[S]=k,u},addMatcher(b,k){return c.sliceMatchers.push({matcher:b,reducer:k}),u},exposeAction(b,k){return c.actionCreators[b]=k,u},exposeCaseReducer(b,k){return c.sliceCaseReducersByName[b]=k,u}};l.forEach(b=>{const k=a[b],S={reducerName:b,type:$j(s,b),createNotation:typeof i.reducers=="function"};Hj(k)?jj(S,k,u,e):zj(S,k,u)});function d(){const[b={},k=[],S=void 0]=typeof i.extraReducers=="function"?$6(i.extraReducers):[i.extraReducers],C={...b,...c.sliceCaseReducersByType};return Mj(i.initialState,E=>{for(let x in C)E.addCase(x,C[x]);for(let x of c.sliceMatchers)E.addMatcher(x.matcher,x.reducer);for(let x of k)E.addMatcher(x.matcher,x.reducer);S&&E.addDefaultCase(S)})}const h=b=>b,f=new Map;let p;function g(b,k){return p||(p=d()),p(b,k)}function _(){return p||(p=d()),p.getInitialState()}function v(b,k=!1){function S(E){let x=E[b];return typeof x>"u"&&k&&(x=_()),x}function C(E=h){const x=qx(f,k,{insert:()=>new WeakMap});return qx(x,E,{insert:()=>{const A={};for(const[R,$]of Object.entries(i.selectors??{}))A[R]=Vj($,E,_,k);return A}})}return{reducerPath:b,getSelectors:C,get selectors(){return C(S)},selectSlice:S}}const w={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:_,...v(o),injectInto(b,{reducerPath:k,...S}={}){const C=k??o;return b.inject({reducerPath:C,reducer:g},S),{...w,...v(C,!0)}}};return w}}function Vj(t,e,n,r){function i(s,...o){let a=e(s);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return i.unwrapped=t,i}var Bj=Fj();function Uj(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function zj({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Wj(r))throw new Error(Qn(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Fc(t,o):Fc(t))}function Hj(t){return t._reducerDefinitionType==="asyncThunk"}function Wj(t){return t._reducerDefinitionType==="reducerWithPrepare"}function jj({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Qn(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,d=i(t,s,u);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Wf,pending:a||Wf,rejected:l||Wf,settled:c||Wf})}function Wf(){}var Gj=(t,e)=>{if(typeof t!="function")throw new Error(Qn(32))},l2="listenerMiddleware",qj=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Fc(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Qn(21));return Gj(s),{predicate:i,type:e,effect:s}},Yj=Object.assign(t=>{const{type:e,predicate:n,effect:r}=qj(t);return{id:Dj(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Qn(22))}}},{withTypes:()=>Yj}),Kj=Object.assign(Fc(`${l2}/add`),{withTypes:()=>Kj});Fc(`${l2}/removeAll`);var Zj=Object.assign(Fc(`${l2}/remove`),{withTypes:()=>Zj});function Qn(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const Jj={currentUser:null,error:null,loading:!1},F6=Bj({name:"user",initialState:Jj,reducers:{signInStart:t=>{t.loading=!0,t.error=null},signInSuccess:(t,e)=>{t.currentUser=e.payload,t.loading=!1,t.error=null},signInFailure:(t,e)=>{t.loading=!1,t.error=e.payload},signoutSuccess:t=>{t.currentUser=null,t.error=null,t.loading=!1},updateStart:t=>{t.loading=!0,t.error=null},updateSuccess:(t,e)=>{t.currentUser=e.payload,t.loading=!1,t.error=null},updateFailure:(t,e)=>{t.loading=!1,t.error=e.payload},deleteUserStart:t=>{t.loading=!0,t.error=null},deleteUserSuccess:t=>{t.currentUser=null,t.loading=!1,t.error=null},deleteUserFailure:(t,e)=>{t.loading=!1,t.error=e.payload}}}),{signInStart:Xj,signInSuccess:V6,signInFailure:tw,updateStart:Qj,updateSuccess:eG,updateFailure:Yx,deleteUserStart:Wke,deleteUserSuccess:jke,deleteUserFailure:Gke,signoutSuccess:B6}=F6.actions,tG=F6.reducer;var U6={exports:{}},z6={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh=m;function nG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rG=typeof Object.is=="function"?Object.is:nG,iG=zh.useSyncExternalStore,sG=zh.useRef,oG=zh.useEffect,aG=zh.useMemo,lG=zh.useDebugValue;z6.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=sG(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=aG(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),i!==void 0&&o.hasValue){var p=o.value;if(i(p,f))return d=p}return d=f}if(p=d,rG(u,f))return p;var g=r(f);return i!==void 0&&i(p,g)?p:(u=f,d=g)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,i]);var a=iG(t,s[0],s[1]);return oG(function(){o.hasValue=!0,o.value=a},[a]),lG(a),a};U6.exports=z6;var cG=U6.exports,pr="default"in Sc?V:Sc,Kx=Symbol.for("react-redux-context"),Zx=typeof globalThis<"u"?globalThis:{};function uG(){if(!pr.createContext)return{};const t=Zx[Kx]??(Zx[Kx]=new Map);let e=t.get(pr.createContext);return e||(e=pr.createContext(null),t.set(pr.createContext,e)),e}var la=uG(),dG=()=>{throw new Error("uSES not initialized!")};function c2(t=la){return function(){return pr.useContext(t)}}var H6=c2(),W6=dG,hG=t=>{W6=t},fG=(t,e)=>t===e;function mG(t=la){const e=t===la?H6:c2(t),n=(r,i={})=>{const{equalityFn:s=fG,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:d}=e();pr.useRef(!0);const h=pr.useCallback({[r.name](p){return r(p)}}[r.name],[r,u,o.stabilityCheck]),f=W6(l.addNestedSub,a.getState,c||a.getState,h,s);return pr.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var Bn=mG();function pG(t){t()}function gG(){let t=null,e=null;return{clear(){t=null,e=null},notify(){pG(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var Jx={notify(){},get:()=>[]};function wG(t,e){let n,r=Jx,i=0,s=!1;function o(g){u();const _=r.subscribe(g);let v=!1;return()=>{v||(v=!0,_(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return s}function u(){i++,n||(n=t.subscribe(l),r=gG())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Jx)}function h(){s||(s=!0,u())}function f(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return p}var vG=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yG=typeof navigator<"u"&&navigator.product==="ReactNative",bG=vG||yG?pr.useLayoutEffect:pr.useEffect;function _G({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=pr.useMemo(()=>{const c=wG(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[t,r,i,s]),a=pr.useMemo(()=>t.getState(),[t]);bG(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||la;return pr.createElement(l.Provider,{value:o},n)}var kG=_G;function j6(t=la){const e=t===la?H6:c2(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var EG=j6();function CG(t=la){const e=t===la?EG:j6(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Hh=CG();hG(cG.useSyncExternalStoreWithSelector);const G6="Avatar",[xG,qke]=cs(G6),[SG,q6]=xG(G6),TG=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=m.useState("idle");return m.createElement(SG,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s},m.createElement(ze.span,U({},r,{ref:e})))}),PG="AvatarImage",AG=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=q6(PG,n),a=OG(r),l=tn(c=>{i(c),o.onImageLoadingStatusChange(c)});return Xs(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?m.createElement(ze.img,U({},s,{ref:e,src:r})):null}),IG="AvatarFallback",RG=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=q6(IG,n),[o,a]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&s.imageLoadingStatus!=="loaded"?m.createElement(ze.span,U({},i,{ref:e})):null});function OG(t){const[e,n]=m.useState("idle");return Xs(()=>{if(!t){n("error");return}let r=!0;const i=new window.Image,s=o=>()=>{r&&n(o)};return n("loading"),i.onload=s("loaded"),i.onerror=s("error"),i.src=t,()=>{r=!1}},[t]),e}const Y6=TG,K6=AG,Z6=RG,y0=m.forwardRef(({className:t,...e},n)=>y(Y6,{ref:n,className:oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));y0.displayName=Y6.displayName;const b0=m.forwardRef(({className:t,...e},n)=>y(K6,{ref:n,className:oe("aspect-square h-full w-full",t),...e}));b0.displayName=K6.displayName;const _0=m.forwardRef(({className:t,...e},n)=>y(Z6,{ref:n,className:oe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));_0.displayName=Z6.displayName;function MG({handleSignout:t,currentUser:e}){return I(f0,{children:[y(m0,{asChild:!0,children:y(it,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:I(y0,{className:"h-10 w-10",children:[y(b0,{src:e.profilePicture,alt:"@shadcn"}),y(_0,{children:"SC"})]})})}),I(Uh,{className:"w-56",align:"center",forceMount:!0,children:[y(n2,{className:"font-normal",children:I("div",{className:"flex flex-col space-y-1",children:[I("p",{className:"text-sm font-medium leading-none",children:["@",e.username]}),y("p",{className:"text-xs leading-none text-muted-foreground",children:e.email})]})}),y(Lc,{}),I(k6,{children:[y(Yr,{children:y(Pe,{to:e.isAdmin?"/admin/dashboard?tab=dash":"/user/dashboard?tab=dash",children:"Dashboard"})}),y(Yr,{children:y(Pe,{to:e.isAdmin?"/admin/dashboard?tab=profile":"/user/dashboard?tab=profile",children:"Profile"})})]}),y(Lc,{}),y(Yr,{onClick:t,children:"Sign out"})]})]})}var J6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Xx=V.createContext&&V.createContext(J6),NG=["attr","size","title"];function DG(t,e){if(t==null)return{};var n=LG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LG(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zp(){return zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zp.apply(this,arguments)}function Qx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qx(Object(n),!0).forEach(function(r){$G(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $G(t,e,n){return e=FG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FG(t){var e=VG(t,"string");return typeof e=="symbol"?e:e+""}function VG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X6(t){return t&&t.map((e,n)=>V.createElement(e.tag,Hp({key:n},e.attr),X6(e.child)))}function us(t){return e=>V.createElement(BG,zp({attr:Hp({},t.attr)},e),X6(t.child))}function BG(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=DG(t,NG),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),V.createElement("svg",zp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Hp(Hp({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&V.createElement("title",null,s),t.children)};return Xx!==void 0?V.createElement(Xx.Consumer,null,n=>e(n)):e(J6)}function UG(t){return us({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432 176H80c-8.8 0-16-7.2-16-16s7.2-16 16-16h352c8.8 0 16 7.2 16 16s-7.2 16-16 16zM432 272H80c-8.8 0-16-7.2-16-16s7.2-16 16-16h352c8.8 0 16 7.2 16 16s-7.2 16-16 16zM432 368H80c-8.8 0-16-7.2-16-16s7.2-16 16-16h352c8.8 0 16 7.2 16 16s-7.2 16-16 16z"},child:[]}]})(t)}function zG(){return I(f0,{children:[y(m0,{asChild:!0,children:y(it,{className:"relative ",children:y(UG,{className:"text-2xl"})})}),y(Uh,{className:"w-fit cursor-pointer",align:"center",forceMount:!0,children:I(k6,{children:[y(Yr,{children:y(Pe,{to:"/sign-in",children:"Sign-in"})}),y(Lc,{}),y(Yr,{children:y(Pe,{to:"/sign-up",children:"Sign-up"})})]})})]})}function jf(){const t=Hh(),{currentUser:e}=Bn(r=>r.user);return y("header",{className:"z-[9999999]",children:I("nav",{className:"flex fixed w-screen bg-red-500 dark:bg-rose-950 flex-row items-center justify-between py-2 sm:px-24 px-9 rounded-b-2xl shadow-md dark:shadow-sm dark:shadow-gray-800",children:[y(Pe,{to:"/",className:"hover:text-gray-600",children:y("h1",{className:"text-white",children:"My Blog"})}),y("div",{className:"md:flex gap-2",children:e?y(Be,{children:I("div",{className:"flex gap-2",children:[y(MG,{handleSignout:async()=>{try{const r=await fetch("/api/user/signout",{method:"POST"}),i=await r.json();r.ok?t(B6()):console.log(i.message)}catch(r){console.log(r.message)}},currentUser:e}),y(hy,{})]})}):I(Be,{children:[y(Pe,{to:"/sign-in",children:y(it,{className:"hidden md:block",children:"Sign-In"})}),y(Pe,{to:"/sign-up",children:y(it,{className:"hidden md:block",variant:"secondary",children:"Sign-Up"})}),I("div",{className:"md:hidden flex gap-2",children:[y(zG,{}),y(hy,{})]})]})})]})})}const qt=m.forwardRef(({className:t,...e},n)=>y("div",{ref:n,className:oe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));qt.displayName="Card";const Dn=m.forwardRef(({className:t,...e},n)=>y("div",{ref:n,className:oe("flex flex-col space-y-1.5 p-6",t),...e}));Dn.displayName="CardHeader";const vi=m.forwardRef(({className:t,...e},n)=>y("h3",{ref:n,className:oe("font-semibold leading-none tracking-tight",t),...e}));vi.displayName="CardTitle";const Wh=m.forwardRef(({className:t,...e},n)=>y("p",{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));Wh.displayName="CardDescription";const hn=m.forwardRef(({className:t,...e},n)=>y("div",{ref:n,className:oe("p-6 pt-0",t),...e}));hn.displayName="CardContent";const wa=m.forwardRef(({className:t,...e},n)=>y("div",{ref:n,className:oe("flex items-center p-6 pt-0",t),...e}));wa.displayName="CardFooter";const HG=a0("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function wc({className:t,variant:e,...n}){return y("div",{className:oe(HG({variant:e}),t),...n})}var WG=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,jG=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,GG=/[^-+\dA-Z]/g;function nh(t,e,n,r){if(arguments.length===1&&typeof t=="string"&&!/\d/.test(t)&&(e=t,t=void 0),t=t||t===0?t:new Date,t instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");e=String(e5[e]||e||e5.default);var i=e.slice(0,4);(i==="UTC:"||i==="GMT:")&&(e=e.slice(4),n=!0,i==="GMT:"&&(r=!0));var s=function(){return n?"getUTC":"get"},o=function(){return t[s()+"Date"]()},a=function(){return t[s()+"Day"]()},l=function(){return t[s()+"Month"]()},c=function(){return t[s()+"FullYear"]()},u=function(){return t[s()+"Hours"]()},d=function(){return t[s()+"Minutes"]()},h=function(){return t[s()+"Seconds"]()},f=function(){return t[s()+"Milliseconds"]()},p=function(){return n?0:t.getTimezoneOffset()},g=function(){return qG(t)},_=function(){return YG(t)},v={d:function(){return o()},dd:function(){return or(o())},ddd:function(){return zn.dayNames[a()]},DDD:function(){return t5({y:c(),m:l(),d:o(),_:s(),dayName:zn.dayNames[a()],short:!0})},dddd:function(){return zn.dayNames[a()+7]},DDDD:function(){return t5({y:c(),m:l(),d:o(),_:s(),dayName:zn.dayNames[a()+7]})},m:function(){return l()+1},mm:function(){return or(l()+1)},mmm:function(){return zn.monthNames[l()]},mmmm:function(){return zn.monthNames[l()+12]},yy:function(){return String(c()).slice(2)},yyyy:function(){return or(c(),4)},h:function(){return u()%12||12},hh:function(){return or(u()%12||12)},H:function(){return u()},HH:function(){return or(u())},M:function(){return d()},MM:function(){return or(d())},s:function(){return h()},ss:function(){return or(h())},l:function(){return or(f(),3)},L:function(){return or(Math.floor(f()/10))},t:function(){return u()<12?zn.timeNames[0]:zn.timeNames[1]},tt:function(){return u()<12?zn.timeNames[2]:zn.timeNames[3]},T:function(){return u()<12?zn.timeNames[4]:zn.timeNames[5]},TT:function(){return u()<12?zn.timeNames[6]:zn.timeNames[7]},Z:function(){return r?"GMT":n?"UTC":KG(t)},o:function(){return(p()>0?"-":"+")+or(Math.floor(Math.abs(p())/60)*100+Math.abs(p())%60,4)},p:function(){return(p()>0?"-":"+")+or(Math.floor(Math.abs(p())/60),2)+":"+or(Math.floor(Math.abs(p())%60),2)},S:function(){return["th","st","nd","rd"][o()%10>3?0:(o()%100-o()%10!=10)*o()%10]},W:function(){return g()},WW:function(){return or(g())},N:function(){return _()}};return e.replace(WG,function(w){return w in v?v[w]():w.slice(1,w.length-1)})}var e5={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},zn={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},or=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(e).padStart(n,"0")},t5=function(e){var n=e.y,r=e.m,i=e.d,s=e._,o=e.dayName,a=e.short,l=a===void 0?!1:a,c=new Date,u=new Date;u.setDate(u[s+"Date"]()-1);var d=new Date;d.setDate(d[s+"Date"]()+1);var h=function(){return c[s+"Date"]()},f=function(){return c[s+"Month"]()},p=function(){return c[s+"FullYear"]()},g=function(){return u[s+"Date"]()},_=function(){return u[s+"Month"]()},v=function(){return u[s+"FullYear"]()},w=function(){return d[s+"Date"]()},b=function(){return d[s+"Month"]()},k=function(){return d[s+"FullYear"]()};return p()===n&&f()===r&&h()===i?l?"Tdy":"Today":v()===n&&_()===r&&g()===i?l?"Ysd":"Yesterday":k()===n&&b()===r&&w()===i?l?"Tmw":"Tomorrow":o},qG=function(e){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate());n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=new Date(n.getFullYear(),0,4);r.setDate(r.getDate()-(r.getDay()+6)%7+3);var i=n.getTimezoneOffset()-r.getTimezoneOffset();n.setHours(n.getHours()-i);var s=(n-r)/(864e5*7);return 1+Math.floor(s)},YG=function(e){var n=e.getDay();return n===0&&(n=7),n},KG=function(e){return(String(e).match(jG)||[""]).pop().replace(GG,"").replace(/GMT\+0000/g,"UTC")};const Q6=({className:t,...e})=>y("nav",{role:"navigation","aria-label":"pagination",className:oe("mx-auto flex w-full justify-center",t),...e});Q6.displayName="Pagination";const e7=m.forwardRef(({className:t,...e},n)=>y("ul",{ref:n,className:oe("flex flex-row items-center gap-1",t),...e}));e7.displayName="PaginationContent";const Vm=m.forwardRef(({className:t,...e},n)=>y("li",{ref:n,className:oe("",t),...e}));Vm.displayName="PaginationItem";const k0=({className:t,isActive:e,size:n="icon",...r})=>y("a",{"aria-current":e?"page":void 0,className:oe(l0({variant:e?"outline":"ghost",size:n}),t),...r});k0.displayName="PaginationLink";const t7=({className:t,...e})=>I(k0,{"aria-label":"Go to previous page",size:"default",className:oe("gap-1 pl-2.5",t),...e,children:[y(LW,{className:"h-4 w-4"}),y("span",{children:"Previous"})]});t7.displayName="PaginationPrevious";const n7=({className:t,...e})=>I(k0,{"aria-label":"Go to next page",size:"default",className:oe("gap-1 pr-2.5",t),...e,children:[y("span",{children:"Next"}),y(_6,{className:"h-4 w-4"})]});n7.displayName="PaginationNext";function ZG({currentPage:t,totalPages:e,onPageChange:n}){const r=i=>{n(i)};return y(Q6,{children:I(e7,{children:[t>1&&y(Vm,{children:y(t7,{href:"#",onClick:()=>r(t-1)})}),Array.from({length:e},(i,s)=>s+1).map(i=>y(Vm,{children:y(k0,{href:"#",isActive:t===i,onClick:()=>r(i),children:i})},i)),t<e&&y(Vm,{children:y(n7,{href:"#",onClick:()=>r(t+1)})})]})})}const JG=()=>{const[t,e]=m.useState([]),[n,r]=m.useState(!0),[i,s]=m.useState(1),[o,a]=m.useState(0);m.useEffect(()=>{(async()=>{const d=await(await fetch(`/api/post/getposts?limit=6&startIndex=${(i-1)*6}`)).json();e(d.posts),r(!1),a(Math.ceil(d.totalPosts/6))})()},[i]);const l=c=>{s(c)};return n?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y("div",{className:"dark:bg-[#0C0A09] md:w-screen md:h-screen ",children:I("div",{className:"pt-24 flex justify-center flex-col  md:items-stretch md:gap-3 p-4",children:[y("div",{className:"pb-6 flex justify-center",children:y("h1",{className:"text-2xl font-bold",children:"Recent Post"})}),y("div",{className:"flex flex-wrap justify-center gap-3",children:t.map((c,u)=>I(qt,{className:"shadow-xl p-4 rounded-xl w-96 my-2",children:[I(Dn,{className:"p-4",children:[y(wc,{className:"w-fit ms-auto",children:c.category}),y(Pe,{to:`/post/${c.slug}`,children:y("img",{src:c.image,alt:"Photo by Drew Beamer",className:"rounded-md object-cover  h-48"})})]}),I(hn,{className:"capitalize flex flex-col ",children:[y(Pe,{to:`/post/${c.slug}`,children:y("h1",{className:"text-xl font-bold",children:c.title})}),y("p",{className:"mt-3",children:c.description})]}),I(wa,{className:"flex justify-between",children:[y("i",{className:"text-sm dark:text-gray-400",children:nh(c.updatedAt,"mmmm dS, yyyy")}),I("i",{className:"text-sm",children:["@",c.author]})]})]},u))}),y(ZG,{currentPage:i,totalPages:o,onPageChange:l})]})})},fn=m.forwardRef(({className:t,type:e,...n},r)=>y("input",{type:e,className:oe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));fn.displayName="Input";const XG=m.forwardRef((t,e)=>m.createElement(ze.label,U({},t,{ref:e,onMouseDown:n=>{var r;(r=t.onMouseDown)===null||r===void 0||r.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),r7=XG,QG=a0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pn=m.forwardRef(({className:t,...e},n)=>y(r7,{ref:n,className:oe(QG(),t),...e}));Pn.displayName=r7.displayName;function eq(t){return us({tag:"svg",attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(t)}function tq(t){return us({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(t)}function nq(t){return us({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function rq(t){return us({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}var n5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},s7={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i7(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new sq;const h=s<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oq=function(t){const e=i7(t);return s7.encodeByteArray(e,!0)},Wp=function(t){return oq(t).replace(/\./g,"")},o7=function(t){try{return s7.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=()=>aq().__FIREBASE_DEFAULTS__,cq=()=>{if(typeof process>"u"||typeof n5>"u")return;const t=n5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o7(t[1]);return e&&JSON.parse(e)},u2=()=>{try{return lq()||cq()||uq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},a7=t=>{var e,n;return(n=(e=u2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},dq=t=>{const e=a7(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},l7=()=>{var t;return(t=u2())===null||t===void 0?void 0:t.config},c7=t=>{var e;return(e=u2())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wp(JSON.stringify(n)),Wp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mq(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function pq(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gq(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wq(){const t=On();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vq(){try{return typeof indexedDB=="object"}catch{return!1}}function yq(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="FirebaseError";class lo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bq,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jh.prototype.create)}}class jh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_q(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new lo(i,a,r)}}function _q(t,e){return t.replace(kq,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const kq=/\{\$([^}]+)}/g;function Eq(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function jp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(r5(s)&&r5(o)){if(!jp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function r5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cq(t,e){const n=new xq(t,e);return n.subscribe.bind(n)}class xq{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Sq(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=nw),i.error===void 0&&(i.error=nw),i.complete===void 0&&(i.complete=nw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sq(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){return t&&t._delegate?t._delegate:t}class tl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hq;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Aq(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pq(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pq(t){return t===Aa?void 0:t}function Aq(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tq(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const Rq={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},Oq=Qe.INFO,Mq={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},Nq=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Mq[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class u7{constructor(e){this.name=e,this._logLevel=Oq,this._logHandler=Nq,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Rq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const Dq=(t,e)=>e.some(n=>t instanceof n);let i5,s5;function Lq(){return i5||(i5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $q(){return s5||(s5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const d7=new WeakMap,yy=new WeakMap,h7=new WeakMap,rw=new WeakMap,d2=new WeakMap;function Fq(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Jo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&d7.set(n,t)}).catch(()=>{}),d2.set(e,t),e}function Vq(t){if(yy.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yy.set(t,e)}let by={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h7.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bq(t){by=t(by)}function Uq(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(iw(this),e,...n);return h7.set(r,e.sort?e.sort():[e]),Jo(r)}:$q().includes(t)?function(...e){return t.apply(iw(this),e),Jo(d7.get(this))}:function(...e){return Jo(t.apply(iw(this),e))}}function zq(t){return typeof t=="function"?Uq(t):(t instanceof IDBTransaction&&Vq(t),Dq(t,Lq())?new Proxy(t,by):t)}function Jo(t){if(t instanceof IDBRequest)return Fq(t);if(rw.has(t))return rw.get(t);const e=zq(t);return e!==t&&(rw.set(t,e),d2.set(e,t)),e}const iw=t=>d2.get(t);function Hq(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Jo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Jo(o.result),l.oldVersion,l.newVersion,Jo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Wq=["get","getKey","getAll","getAllKeys","count"],jq=["put","add","delete","clear"],sw=new Map;function o5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sw.get(e))return sw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=jq.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Wq.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return sw.set(e,s),s}Bq(t=>({...t,get:(e,n,r)=>o5(e,n)||t.get(e,n,r),has:(e,n)=>!!o5(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qq(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qq(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _y="@firebase/app",a5="0.10.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new u7("@firebase/app"),Yq="@firebase/app-compat",Kq="@firebase/analytics-compat",Zq="@firebase/analytics",Jq="@firebase/app-check-compat",Xq="@firebase/app-check",Qq="@firebase/auth",eY="@firebase/auth-compat",tY="@firebase/database",nY="@firebase/database-compat",rY="@firebase/functions",iY="@firebase/functions-compat",sY="@firebase/installations",oY="@firebase/installations-compat",aY="@firebase/messaging",lY="@firebase/messaging-compat",cY="@firebase/performance",uY="@firebase/performance-compat",dY="@firebase/remote-config",hY="@firebase/remote-config-compat",fY="@firebase/storage",mY="@firebase/storage-compat",pY="@firebase/firestore",gY="@firebase/firestore-compat",wY="firebase",vY="10.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="[DEFAULT]",yY={[_y]:"fire-core",[Yq]:"fire-core-compat",[Zq]:"fire-analytics",[Kq]:"fire-analytics-compat",[Xq]:"fire-app-check",[Jq]:"fire-app-check-compat",[Qq]:"fire-auth",[eY]:"fire-auth-compat",[tY]:"fire-rtdb",[nY]:"fire-rtdb-compat",[rY]:"fire-fn",[iY]:"fire-fn-compat",[sY]:"fire-iid",[oY]:"fire-iid-compat",[aY]:"fire-fcm",[lY]:"fire-fcm-compat",[cY]:"fire-perf",[uY]:"fire-perf-compat",[dY]:"fire-rc",[hY]:"fire-rc-compat",[fY]:"fire-gcs",[mY]:"fire-gcs-compat",[pY]:"fire-fst",[gY]:"fire-fst-compat","fire-js":"fire-js",[wY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp=new Map,bY=new Map,Ey=new Map;function l5(t,e){try{t.container.addComponent(e)}catch(n){nl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Vc(t){const e=t.name;if(Ey.has(e))return nl.debug(`There were multiple attempts to register component ${e}.`),!1;Ey.set(e,t);for(const n of Gp.values())l5(n,t);for(const n of bY.values())l5(n,t);return!0}function h2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ds(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new jh("app","Firebase",_Y);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kY{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=vY;function f7(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ky,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xo.create("bad-app-name",{appName:String(i)});if(n||(n=l7()),!n)throw Xo.create("no-options");const s=Gp.get(i);if(s){if(jp(n,s.options)&&jp(r,s.config))return s;throw Xo.create("duplicate-app",{appName:i})}const o=new Iq(i);for(const l of Ey.values())o.addComponent(l);const a=new kY(n,r,o);return Gp.set(i,a),a}function m7(t=ky){const e=Gp.get(t);if(!e&&t===ky&&l7())return f7();if(!e)throw Xo.create("no-app",{appName:t});return e}function Qo(t,e,n){var r;let i=(r=yY[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nl.warn(a.join(" "));return}Vc(new tl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EY="firebase-heartbeat-database",CY=1,rh="firebase-heartbeat-store";let ow=null;function p7(){return ow||(ow=Hq(EY,CY,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xo.create("idb-open",{originalErrorMessage:t.message})})),ow}async function xY(t){try{const n=(await p7()).transaction(rh),r=await n.objectStore(rh).get(g7(t));return await n.done,r}catch(e){if(e instanceof lo)nl.warn(e.message);else{const n=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nl.warn(n.message)}}}async function c5(t,e){try{const r=(await p7()).transaction(rh,"readwrite");await r.objectStore(rh).put(e,g7(t)),await r.done}catch(n){if(n instanceof lo)nl.warn(n.message);else{const r=Xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nl.warn(r.message)}}}function g7(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY=1024,TY=30*24*60*60*1e3;class PY{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IY(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=u5();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=TY}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=u5(),{heartbeatsToSend:r,unsentEntries:i}=AY(this._heartbeatsCache.heartbeats),s=Wp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function u5(){return new Date().toISOString().substring(0,10)}function AY(t,e=SY){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),d5(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),d5(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vq()?yq().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xY(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return c5(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function d5(t){return Wp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RY(t){Vc(new tl("platform-logger",e=>new Gq(e),"PRIVATE")),Vc(new tl("heartbeat",e=>new PY(e),"PRIVATE")),Qo(_y,a5,t),Qo(_y,a5,"esm2017"),Qo("fire-js","")}RY("");function w7(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OY=w7,v7=new jh("auth","Firebase",w7());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=new u7("@firebase/auth");function MY(t,...e){qp.logLevel<=Qe.WARN&&qp.warn(`Auth (${lu}): ${t}`,...e)}function Bm(t,...e){qp.logLevel<=Qe.ERROR&&qp.error(`Auth (${lu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t,...e){throw m2(t,...e)}function Ti(t,...e){return m2(t,...e)}function f2(t,e,n){const r=Object.assign(Object.assign({},OY()),{[e]:n});return new jh("auth","Firebase",r).create(e,{appName:t.name})}function Ba(t){return f2(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NY(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&rs(t,"argument-error"),f2(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m2(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return v7.create(t,...e)}function he(t,e,...n){if(!t)throw m2(e,...n)}function Ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bm(e),new Error(e)}function ro(t,e){t||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DY(){return h5()==="http:"||h5()==="https:"}function h5(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DY()||pq()||"connection"in navigator)?navigator.onLine:!0}function $Y(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,ro(n>e,"Short delay should be less than long delay!"),this.isMobile=mq()||gq()}get(){return LY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t,e){ro(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=new qh(3e4,6e4);function g2(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cu(t,e,n,r,i={}){return b7(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Gh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),y7.fetch()(_7(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function b7(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FY),e);try{const i=new UY(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Gf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gf(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Gf(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Gf(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw f2(t,u,c);rs(t,u)}}catch(i){if(i instanceof lo)throw i;rs(t,"network-request-failed",{message:String(i)})}}async function BY(t,e,n,r,i={}){const s=await cu(t,e,n,r,i);return"mfaPendingCredential"in s&&rs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _7(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?p2(t.config,i):`${t.config.apiScheme}://${i}`}class UY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),VY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ti(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zY(t,e){return cu(t,"POST","/v1/accounts:delete",e)}async function k7(t,e){return cu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HY(t,e=!1){const n=ds(t),r=await n.getIdToken(e),i=w2(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wd(aw(i.auth_time)),issuedAtTime:wd(aw(i.iat)),expirationTime:wd(aw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function aw(t){return Number(t)*1e3}function w2(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bm("JWT malformed, contained fewer than 3 sections"),null;try{const i=o7(n);return i?JSON.parse(i):(Bm("Failed to decode base64 JWT payload"),null)}catch(i){return Bm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function f5(t){const e=w2(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lo&&WY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wd(this.lastLoginAt),this.creationTime=wd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ih(t,k7(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?E7(s.providerUserInfo):[],a=qY(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function GY(t){const e=ds(t);await Yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qY(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E7(t){return t.map(e=>{var{providerId:n}=e,r=Vh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YY(t,e){const n=await b7(t,{},async()=>{const r=Gh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=_7(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",y7.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KY(t,e){return cu(t,"POST","/v2/accounts:revokeToken",g2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=f5(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await YY(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new vc;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Vh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ih(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HY(this,e)}reload(){return GY(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ds(this.auth.app))return Promise.reject(Ba(this.auth));const e=await this.getIdToken();return await ih(this,zY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:k,isAnonymous:S,providerData:C,stsTokenManager:E}=n;he(b&&E,e,"internal-error");const x=vc.fromJSON(this.name,E);he(typeof b=="string",e,"internal-error"),Eo(d,e.name),Eo(h,e.name),he(typeof k=="boolean",e,"internal-error"),he(typeof S=="boolean",e,"internal-error"),Eo(f,e.name),Eo(p,e.name),Eo(g,e.name),Eo(_,e.name),Eo(v,e.name),Eo(w,e.name);const A=new $s({uid:b,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:S,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:x,createdAt:v,lastLoginAt:w});return C&&Array.isArray(C)&&(A.providerData=C.map(R=>Object.assign({},R))),_&&(A._redirectEventId=_),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new vc;i.updateFromServerResponse(n);const s=new $s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Yp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?E7(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new vc;a.updateFromIdToken(r);const l=new $s({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xy(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=new Map;function Fs(t){ro(t instanceof Function,"Expected a class definition");let e=m5.get(t);return e?(ro(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C7.type="NONE";const p5=C7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e,n){return`firebase:${t}:${e}:${n}`}class yc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Um(this.userKey,i.apiKey,s),this.fullPersistenceKey=Um("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yc(Fs(p5),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Fs(p5);const o=Um(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=$s._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new yc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new yc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x7(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A7(e))return"Blackberry";if(I7(e))return"Webos";if(v2(e))return"Safari";if((e.includes("chrome/")||S7(e))&&!e.includes("edge/"))return"Chrome";if(P7(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x7(t=On()){return/firefox\//i.test(t)}function v2(t=On()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S7(t=On()){return/crios\//i.test(t)}function T7(t=On()){return/iemobile/i.test(t)}function P7(t=On()){return/android/i.test(t)}function A7(t=On()){return/blackberry/i.test(t)}function I7(t=On()){return/webos/i.test(t)}function E0(t=On()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZY(t=On()){var e;return E0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JY(){return wq()&&document.documentMode===10}function R7(t=On()){return E0(t)||P7(t)||I7(t)||A7(t)||/windows phone/i.test(t)||T7(t)}function XY(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(t,e=[]){let n;switch(t){case"Browser":n=g5(On());break;case"Worker":n=`${g5(On())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eK(t,e={}){return cu(t,"GET","/v2/passwordPolicy",g2(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tK=6;class nK{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:tK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w5(this),this.idTokenSubscription=new w5(this),this.beforeStateQueue=new QY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v7,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fs(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await k7(this,{idToken:e}),r=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ds(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$Y()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ds(this.app))return Promise.reject(Ba(this));const n=e?ds(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ds(this.app)?Promise.reject(Ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ds(this.app)?Promise.reject(Ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await eK(this),n=new nK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KY(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fs(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await yc.create(this,[Fs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MY(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function C0(t){return ds(t)}class w5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Cq(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y2={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iK(t){y2=t}function sK(t){return y2.loadJS(t)}function oK(){return y2.gapiScript}function aK(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t,e){const n=h2(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(jp(s,e??{}))return i;rs(i,"already-initialized")}return n.initialize({options:e})}function cK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uK(t,e,n){const r=C0(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=M7(e),{host:o,port:a}=dK(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),hK()}function M7(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dK(t){const e=M7(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:v5(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:v5(o)}}}function v5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,n){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t,e){return BY(t,"POST","/v1/accounts:signInWithIdp",g2(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK="http://localhost";class rl extends N7{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Vh(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new rl(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bc(e,n)}buildRequest(){const e={requestUri:fK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends b2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Yh{constructor(){super("facebook.com")}static credential(e){return rl._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oo.credential(e.oauthAccessToken)}catch{return null}}}Oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rl._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Os.credential(n,r)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Yh{constructor(){super("github.com")}static credential(e){return rl._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.GITHUB_SIGN_IN_METHOD="github.com";Mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Yh{constructor(){super("twitter.com")}static credential(e,n){return rl._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return No.credential(n,r)}catch{return null}}}No.TWITTER_SIGN_IN_METHOD="twitter.com";No.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $s._fromIdTokenResponse(e,r,i),o=y5(r);return new Bc({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=y5(r);return new Bc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function y5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends lo{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kp(e,n,r,i)}}function D7(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kp._fromErrorAndOperation(t,s,e,r):s})}async function mK(t,e,n=!1){const r=await ih(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pK(t,e,n=!1){const{auth:r}=t;if(Ds(r.app))return Promise.reject(Ba(r));const i="reauthenticate";try{const s=await ih(t,D7(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=w2(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Bc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gK(t,e,n=!1){if(Ds(t.app))return Promise.reject(Ba(t));const r="signIn",i=await D7(t,r,e),s=await Bc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function wK(t,e,n,r){return ds(t).onIdTokenChanged(e,n,r)}function vK(t,e,n){return ds(t).beforeAuthStateChanged(e,n)}const Zp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zp,"1"),this.storage.removeItem(Zp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(){const t=On();return v2(t)||E0(t)}const bK=1e3,_K=10;class $7 extends L7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yK()&&XY(),this.fallbackToPolling=R7(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);JY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_K):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$7.type="LOCAL";const kK=$7;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7 extends L7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}F7.type="SESSION";const V7=F7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new x0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await EK(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}x0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_2("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function xK(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B7(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function SK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PK(){return B7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7="firebaseLocalStorageDb",AK=1,Jp="firebaseLocalStorage",z7="fbase_key";class Kh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function S0(t,e){return t.transaction([Jp],e?"readwrite":"readonly").objectStore(Jp)}function IK(){const t=indexedDB.deleteDatabase(U7);return new Kh(t).toPromise()}function Sy(){const t=indexedDB.open(U7,AK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jp,{keyPath:z7})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jp)?e(r):(r.close(),await IK(),e(await Sy()))})})}async function b5(t,e,n){const r=S0(t,!0).put({[z7]:e,value:n});return new Kh(r).toPromise()}async function RK(t,e){const n=S0(t,!1).get(e),r=await new Kh(n).toPromise();return r===void 0?null:r.value}function _5(t,e){const n=S0(t,!0).delete(e);return new Kh(n).toPromise()}const OK=800,MK=3;class H7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=x0._getInstance(PK()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SK(),!this.activeServiceWorker)return;this.sender=new CK(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sy();return await b5(e,Zp,"1"),await _5(e,Zp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>b5(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_5(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=S0(i,!1).getAll();return new Kh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}H7.type="LOCAL";const NK=H7;new qh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W7(t,e){return e?Fs(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2 extends N7{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DK(t){return gK(t.auth,new k2(t),t.bypassAuthState)}function LK(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),pK(n,new k2(t),t.bypassAuthState)}async function $K(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),mK(n,new k2(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DK;case"linkViaPopup":case"linkViaRedirect":return $K;case"reauthViaPopup":case"reauthViaRedirect":return LK;default:rs(this.auth,"internal-error")}}resolve(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FK=new qh(2e3,1e4);async function VK(t,e,n){if(Ds(t.app))return Promise.reject(Ti(t,"operation-not-supported-in-this-environment"));const r=C0(t);NY(t,e,b2);const i=W7(r,n);return new Da(r,"signInViaPopup",e,i).executeNotNull()}class Da extends j7{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Da.currentPopupAction&&Da.currentPopupAction.cancel(),Da.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){ro(this.filter.length===1,"Popup operations only handle one event");const e=_2();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Da.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FK.get())};e()}}Da.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK="pendingRedirect",zm=new Map;class UK extends j7{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zm.get(this.auth._key());if(!e){try{const r=await zK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zm.set(this.auth._key(),e)}return this.bypassAuthState||zm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zK(t,e){const n=jK(e),r=WK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function HK(t,e){zm.set(t._key(),e)}function WK(t){return Fs(t._redirectPersistence)}function jK(t){return Um(BK,t.config.apiKey,t.name)}async function GK(t,e,n=!1){if(Ds(t.app))return Promise.reject(Ba(t));const r=C0(t),i=W7(r,e),o=await new UK(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qK=10*60*1e3;class YK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!G7(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ti(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qK&&this.cachedEventUids.clear(),this.cachedEventUids.has(k5(e))}saveEventToCache(e){this.cachedEventUids.add(k5(e)),this.lastProcessedEventTime=Date.now()}}function k5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G7({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G7(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZK(t,e={}){return cu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XK=/^https?/;async function QK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZK(t);for(const n of e)try{if(eZ(n))return}catch{}rs(t,"unauthorized-domain")}function eZ(t){const e=Cy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!XK.test(n))return!1;if(JK.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=new qh(3e4,6e4);function E5(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nZ(t){return new Promise((e,n)=>{var r,i,s;function o(){E5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E5(),n(Ti(t,"network-request-failed"))},timeout:tZ.get()})}if(!((i=(r=es().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=es().gapi)===null||s===void 0)&&s.load)o();else{const a=aK("iframefcb");return es()[a]=()=>{gapi.load?o():n(Ti(t,"network-request-failed"))},sK(`${oK()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Hm=null,e})}let Hm=null;function rZ(t){return Hm=Hm||nZ(t),Hm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iZ=new qh(5e3,15e3),sZ="__/auth/iframe",oZ="emulator/auth/iframe",aZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cZ(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?p2(e,oZ):`https://${t.config.authDomain}/${sZ}`,r={apiKey:e.apiKey,appName:t.name,v:lu},i=lZ.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Gh(r).slice(1)}`}async function uZ(t){const e=await rZ(t),n=es().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:cZ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aZ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ti(t,"network-request-failed"),a=es().setTimeout(()=>{s(o)},iZ.get());function l(){es().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hZ=500,fZ=600,mZ="_blank",pZ="http://localhost";class C5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gZ(t,e,n,r=hZ,i=fZ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},dZ),{width:r.toString(),height:i.toString(),top:s,left:o}),c=On().toLowerCase();n&&(a=S7(c)?mZ:n),x7(c)&&(e=e||pZ,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(ZY(c)&&a!=="_self")return wZ(e||"",a),new C5(null);const d=window.open(e||"",a,u);he(d,t,"popup-blocked");try{d.focus()}catch{}return new C5(d)}function wZ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZ="__/auth/handler",yZ="emulator/auth/handler",bZ=encodeURIComponent("fac");async function x5(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:lu,eventId:i};if(e instanceof b2){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Eq(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof Yh){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${bZ}=${encodeURIComponent(l)}`:"";return`${_Z(t)}?${Gh(a).slice(1)}${c}`}function _Z({config:t}){return t.emulator?p2(t,yZ):`https://${t.authDomain}/${vZ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="webStorageSupport";class kZ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V7,this._completeRedirectFn=GK,this._overrideRedirectResult=HK}async _openPopup(e,n,r,i){var s;ro((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await x5(e,n,r,Cy(),i);return gZ(e,o,_2())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await x5(e,n,r,Cy(),i);return xK(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ro(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uZ(e),r=new YK(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lw,{type:lw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[lw];o!==void 0&&n(!!o),rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R7()||v2()||E0()}}const EZ=kZ;var S5="@firebase/auth",T5="1.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xZ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SZ(t){Vc(new tl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O7(t)},c=new rK(r,i,s,l);return cK(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Vc(new tl("auth-internal",e=>{const n=C0(e.getProvider("auth").getImmediate());return(r=>new CZ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qo(S5,T5,xZ(t)),Qo(S5,T5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ=5*60,PZ=c7("authIdTokenMaxAge")||TZ;let P5=null;const AZ=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PZ)return;const i=n==null?void 0:n.token;P5!==i&&(P5=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IZ(t=m7()){const e=h2(t,"auth");if(e.isInitialized())return e.getImmediate();const n=lK(t,{popupRedirectResolver:EZ,persistence:[NK,kK,V7]}),r=c7("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=AZ(s.toString());vK(n,o,()=>o(n.currentUser)),wK(n,a=>o(a))}}const i=a7("auth");return i&&uK(n,`http://${i}`),n}function RZ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}iK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ti("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",RZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SZ("Browser");var OZ="firebase",MZ="10.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(OZ,MZ,"app");const NZ={apiKey:"AIzaSyAymGK1YcU61rPVTUoXHm0gqbMnOxVCVTw",authDomain:"my-blog-recycle.firebaseapp.com",projectId:"my-blog-recycle",storageBucket:"my-blog-recycle.appspot.com",messagingSenderId:"219773950004",appId:"1:219773950004:web:82ac73c7b31008802a9261",measurementId:"G-2J2EDP8G5L"},T0=f7(NZ);function q7(){const t=IZ(T0),e=Hh(),n=pa();return I(it,{type:"button",className:"bg-blue-600 w-full gap-2",onClick:async()=>{const i=new Os;i.setCustomParameters({prompt:"select_account"});try{const s=await VK(t,i),o=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.user.displayName,email:s.user.email,googlePhotoUrl:s.user.photoURL})}),a=await o.json();o.ok&&(e(V6(a)),n("/"))}catch(s){console.log(s)}},children:[y(eq,{}),y("p",{children:"with Google"})]})}function DZ({handleChange:t,handleSubmit:e,loading:n,errorMessage:r}){return I(Be,{children:[y(qt,{className:"w-[350px]",children:I("form",{onSubmit:e,children:[I(Dn,{children:[y(vi,{children:"Sign In"}),y(Wh,{children:"Let's creat your blog."})]}),y(hn,{children:I("div",{className:"grid w-full items-center gap-4",children:[I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"email",children:"Email"}),y(fn,{id:"email",placeholder:"Email",type:"email",required:!0,onChange:t})]}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"password",children:"Password"}),y(fn,{id:"password",placeholder:"Password",type:"password",required:!0,onChange:t})]})]})}),I(wa,{className:"flex flex-col gap-3 justify-center",children:[y(it,{type:"submit",disabled:n,className:"w-full",children:n?y(Be,{children:I(it,{disabled:!0,className:"w-full",children:[y(t2,{className:"mr-2 h-4 w-4 animate-spin"}),n]})}):"Sign-in"}),y(q7,{})]})]})}),r&&y("p",{className:"text-red-700 font-bold text-xl",children:r})]})}const LZ=()=>{const[t,e]=m.useState({}),{loading:n,error:r}=Bn(l=>l.user),i=Hh(),s=pa();return y("div",{className:"flex justify-center pt-36 ",children:y(DZ,{handleChange:l=>{e({...t,[l.target.id]:l.target.value.trim()})},handleSubmit:async l=>{if(l.preventDefault(),!t.email||!t.password)return i(tw("Please fill all the fields"));try{i(Xj());const c=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),u=await c.json();u.success===!1&&i(tw(u.message)),c.ok&&(i(V6(u)),s("/"))}catch(c){i(tw(c.message))}},loading:n,errorMessage:r})})};function $Z({handleChange:t,handleSubmit:e,loading:n,errorMessage:r}){return I(qt,{className:"w-[350px]",children:[I("form",{onSubmit:e,children:[I(Dn,{children:[y(vi,{children:"Sign Up"}),y(Wh,{children:"Let's join with Us."})]}),y(hn,{children:I("div",{className:"grid w-full items-center gap-4",children:[I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"username",children:"Username"}),y(fn,{id:"username",placeholder:"Username",type:"text",onChange:t,required:!0})]}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"email",children:"Email"}),y(fn,{id:"email",placeholder:"Email",type:"email",onChange:t,required:!0})]}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"password",children:"Password"}),y(fn,{id:"password",placeholder:"Password",type:"password",onChange:t,required:!0})]})]})}),I(wa,{className:"flex flex-col gap-3 justify-center",children:[y(it,{type:"submit",disabled:n,className:"w-full",children:n?y(Be,{children:I(it,{disabled:!0,className:"w-full",children:[y(t2,{className:"mr-2 h-4 w-4 animate-spin"}),n]})}):"Sign-Up"}),y(q7,{})]})]}),r&&y("p",{className:"text-xl text-red-700 font-bold",children:r})]})}const FZ=()=>{const[t,e]=m.useState({}),[n,r]=m.useState(null),[i,s]=m.useState(!1),o=pa();return y("div",{className:"flex justify-center pt-36 ",children:y($Z,{handleChange:c=>{e({...t,[c.target.id]:c.target.value.trim()})},handleSubmit:async c=>{if(c.preventDefault(),!t.username||!t.email||!t.password)return r("Please fill out all fields.");try{s(!0),r(null);const u=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),d=await u.json();if(d.success===!1)return r(d.message);s(!1),u.ok&&o("/sign-in")}catch(u){r(u.message),s(!1)}},loading:i,errorMessage:n})})},Y7="Dialog",[K7,Z7]=cs(Y7),[VZ,Di]=K7(Y7),BZ=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=m.useRef(null),l=m.useRef(null),[c=!1,u]=B_({prop:r,defaultProp:i,onChange:s});return m.createElement(VZ,{scope:e,triggerRef:a,contentRef:l,contentId:mc(),titleId:mc(),descriptionId:mc(),open:c,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(d=>!d),[u]),modal:o},n)},UZ="DialogTrigger",zZ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(UZ,n),s=bt(e,i.triggerRef);return m.createElement(ze.button,U({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":E2(i.open)},r,{ref:s,onClick:ce(t.onClick,i.onOpenToggle)}))}),J7="DialogPortal",[HZ,X7]=K7(J7,{forceMount:void 0}),WZ=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Di(J7,e);return m.createElement(HZ,{scope:e,forceMount:n},m.Children.map(r,o=>m.createElement(ri,{present:n||s.open},m.createElement(U4,{asChild:!0,container:i},o))))},Ty="DialogOverlay",jZ=m.forwardRef((t,e)=>{const n=X7(Ty,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Di(Ty,t.__scopeDialog);return s.modal?m.createElement(ri,{present:r||s.open},m.createElement(GZ,U({},i,{ref:e}))):null}),GZ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(Ty,n);return m.createElement(K_,{as:Xa,allowPinchZoom:!0,shards:[i.contentRef]},m.createElement(ze.div,U({"data-state":E2(i.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Uc="DialogContent",qZ=m.forwardRef((t,e)=>{const n=X7(Uc,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Di(Uc,t.__scopeDialog);return m.createElement(ri,{present:r||s.open},s.modal?m.createElement(YZ,U({},i,{ref:e})):m.createElement(KZ,U({},i,{ref:e})))}),YZ=m.forwardRef((t,e)=>{const n=Di(Uc,t.__scopeDialog),r=m.useRef(null),i=bt(e,n.contentRef,r);return m.useEffect(()=>{const s=r.current;if(s)return G4(s)},[]),m.createElement(Q7,U({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,s=>s.preventDefault())}))}),KZ=m.forwardRef((t,e)=>{const n=Di(Uc,t.__scopeDialog),r=m.useRef(!1),i=m.useRef(!1);return m.createElement(Q7,U({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,i.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),Q7=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Di(Uc,n),l=m.useRef(null),c=bt(e,l);return k4(),m.createElement(m.Fragment,null,m.createElement(E4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s},m.createElement(b4,U({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":E2(a.open)},o,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)}),eR="DialogTitle",ZZ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(eR,n);return m.createElement(ze.h2,U({id:i.titleId},r,{ref:e}))}),JZ="DialogDescription",XZ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(JZ,n);return m.createElement(ze.p,U({id:i.descriptionId},r,{ref:e}))}),QZ="DialogClose",eJ=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Di(QZ,n);return m.createElement(ze.button,U({type:"button"},r,{ref:e,onClick:ce(t.onClick,()=>i.onOpenChange(!1))}))});function E2(t){return t?"open":"closed"}const tJ="DialogTitleWarning",[nJ,Yke]=ZB(tJ,{contentName:Uc,titleName:eR,docsSlug:"dialog"}),tR=BZ,nR=zZ,rR=WZ,C2=jZ,x2=qZ,S2=ZZ,T2=XZ,P2=eJ,rJ=tR,iJ=nR,sJ=rR,iR=m.forwardRef(({className:t,...e},n)=>y(C2,{className:oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));iR.displayName=C2.displayName;const oJ=a0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),sR=m.forwardRef(({side:t="right",className:e,children:n,...r},i)=>I(sJ,{children:[y(iR,{}),I(x2,{ref:i,className:oe(oJ({side:t}),e),...r,children:[n,I(P2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[y(VW,{className:"h-4 w-4"}),y("span",{className:"sr-only",children:"Close"})]})]})]}));sR.displayName=x2.displayName;const aJ=m.forwardRef(({className:t,...e},n)=>y(S2,{ref:n,className:oe("text-lg font-semibold text-foreground",t),...e}));aJ.displayName=S2.displayName;const lJ=m.forwardRef(({className:t,...e},n)=>y(T2,{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));lJ.displayName=T2.displayName;function Xp(t){return us({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M2.8 1L2.74967 0.99997C2.52122 0.999752 2.32429 0.999564 2.14983 1.04145C1.60136 1.17312 1.17312 1.60136 1.04145 2.14983C0.999564 2.32429 0.999752 2.52122 0.99997 2.74967L1 2.8V5.2L0.99997 5.25033C0.999752 5.47878 0.999564 5.67572 1.04145 5.85017C1.17312 6.39864 1.60136 6.82688 2.14983 6.95856C2.32429 7.00044 2.52122 7.00025 2.74967 7.00003L2.8 7H5.2L5.25033 7.00003C5.47878 7.00025 5.67572 7.00044 5.85017 6.95856C6.39864 6.82688 6.82688 6.39864 6.95856 5.85017C7.00044 5.67572 7.00025 5.47878 7.00003 5.25033L7 5.2V2.8L7.00003 2.74967C7.00025 2.52122 7.00044 2.32429 6.95856 2.14983C6.82688 1.60136 6.39864 1.17312 5.85017 1.04145C5.67572 0.999564 5.47878 0.999752 5.25033 0.99997L5.2 1H2.8ZM2.38328 2.01382C2.42632 2.00348 2.49222 2 2.8 2H5.2C5.50779 2 5.57369 2.00348 5.61672 2.01382C5.79955 2.05771 5.94229 2.20045 5.98619 2.38328C5.99652 2.42632 6 2.49222 6 2.8V5.2C6 5.50779 5.99652 5.57369 5.98619 5.61672C5.94229 5.79955 5.79955 5.94229 5.61672 5.98619C5.57369 5.99652 5.50779 6 5.2 6H2.8C2.49222 6 2.42632 5.99652 2.38328 5.98619C2.20045 5.94229 2.05771 5.79955 2.01382 5.61672C2.00348 5.57369 2 5.50779 2 5.2V2.8C2 2.49222 2.00348 2.42632 2.01382 2.38328C2.05771 2.20045 2.20045 2.05771 2.38328 2.01382ZM9.8 1L9.74967 0.99997C9.52122 0.999752 9.32429 0.999564 9.14983 1.04145C8.60136 1.17312 8.17312 1.60136 8.04145 2.14983C7.99956 2.32429 7.99975 2.52122 7.99997 2.74967L8 2.8V5.2L7.99997 5.25033C7.99975 5.47878 7.99956 5.67572 8.04145 5.85017C8.17312 6.39864 8.60136 6.82688 9.14983 6.95856C9.32429 7.00044 9.52122 7.00025 9.74967 7.00003L9.8 7H12.2L12.2503 7.00003C12.4788 7.00025 12.6757 7.00044 12.8502 6.95856C13.3986 6.82688 13.8269 6.39864 13.9586 5.85017C14.0004 5.67572 14.0003 5.47878 14 5.25033L14 5.2V2.8L14 2.74967C14.0003 2.52122 14.0004 2.32429 13.9586 2.14983C13.8269 1.60136 13.3986 1.17312 12.8502 1.04145C12.6757 0.999564 12.4788 0.999752 12.2503 0.99997L12.2 1H9.8ZM9.38328 2.01382C9.42632 2.00348 9.49222 2 9.8 2H12.2C12.5078 2 12.5737 2.00348 12.6167 2.01382C12.7995 2.05771 12.9423 2.20045 12.9862 2.38328C12.9965 2.42632 13 2.49222 13 2.8V5.2C13 5.50779 12.9965 5.57369 12.9862 5.61672C12.9423 5.79955 12.7995 5.94229 12.6167 5.98619C12.5737 5.99652 12.5078 6 12.2 6H9.8C9.49222 6 9.42632 5.99652 9.38328 5.98619C9.20045 5.94229 9.05771 5.79955 9.01382 5.61672C9.00348 5.57369 9 5.50779 9 5.2V2.8C9 2.49222 9.00348 2.42632 9.01382 2.38328C9.05771 2.20045 9.20045 2.05771 9.38328 2.01382ZM2.74967 7.99997L2.8 8H5.2L5.25033 7.99997C5.47878 7.99975 5.67572 7.99956 5.85017 8.04145C6.39864 8.17312 6.82688 8.60136 6.95856 9.14983C7.00044 9.32429 7.00025 9.52122 7.00003 9.74967L7 9.8V12.2L7.00003 12.2503C7.00025 12.4788 7.00044 12.6757 6.95856 12.8502C6.82688 13.3986 6.39864 13.8269 5.85017 13.9586C5.67572 14.0004 5.47878 14.0003 5.25033 14L5.2 14H2.8L2.74967 14C2.52122 14.0003 2.32429 14.0004 2.14983 13.9586C1.60136 13.8269 1.17312 13.3986 1.04145 12.8502C0.999564 12.6757 0.999752 12.4788 0.99997 12.2503L1 12.2V9.8L0.99997 9.74967C0.999752 9.52122 0.999564 9.32429 1.04145 9.14983C1.17312 8.60136 1.60136 8.17312 2.14983 8.04145C2.32429 7.99956 2.52122 7.99975 2.74967 7.99997ZM2.8 9C2.49222 9 2.42632 9.00348 2.38328 9.01382C2.20045 9.05771 2.05771 9.20045 2.01382 9.38328C2.00348 9.42632 2 9.49222 2 9.8V12.2C2 12.5078 2.00348 12.5737 2.01382 12.6167C2.05771 12.7995 2.20045 12.9423 2.38328 12.9862C2.42632 12.9965 2.49222 13 2.8 13H5.2C5.50779 13 5.57369 12.9965 5.61672 12.9862C5.79955 12.9423 5.94229 12.7995 5.98619 12.6167C5.99652 12.5737 6 12.5078 6 12.2V9.8C6 9.49222 5.99652 9.42632 5.98619 9.38328C5.94229 9.20045 5.79955 9.05771 5.61672 9.01382C5.57369 9.00348 5.50779 9 5.2 9H2.8ZM9.8 8L9.74967 7.99997C9.52122 7.99975 9.32429 7.99956 9.14983 8.04145C8.60136 8.17312 8.17312 8.60136 8.04145 9.14983C7.99956 9.32429 7.99975 9.52122 7.99997 9.74967L8 9.8V12.2L7.99997 12.2503C7.99975 12.4788 7.99956 12.6757 8.04145 12.8502C8.17312 13.3986 8.60136 13.8269 9.14983 13.9586C9.32429 14.0004 9.52122 14.0003 9.74967 14L9.8 14H12.2L12.2503 14C12.4788 14.0003 12.6757 14.0004 12.8502 13.9586C13.3986 13.8269 13.8269 13.3986 13.9586 12.8502C14.0004 12.6757 14.0003 12.4788 14 12.2503L14 12.2V9.8L14 9.74967C14.0003 9.52122 14.0004 9.32429 13.9586 9.14983C13.8269 8.60136 13.3986 8.17312 12.8502 8.04145C12.6757 7.99956 12.4788 7.99975 12.2503 7.99997L12.2 8H9.8ZM9.38328 9.01382C9.42632 9.00348 9.49222 9 9.8 9H12.2C12.5078 9 12.5737 9.00348 12.6167 9.01382C12.7995 9.05771 12.9423 9.20045 12.9862 9.38328C12.9965 9.42632 13 9.49222 13 9.8V12.2C13 12.5078 12.9965 12.5737 12.9862 12.6167C12.9423 12.7995 12.7995 12.9423 12.6167 12.9862C12.5737 12.9965 12.5078 13 12.2 13H9.8C9.49222 13 9.42632 12.9965 9.38328 12.9862C9.20045 12.9423 9.05771 12.7995 9.01382 12.6167C9.00348 12.5737 9 12.5078 9 12.2V9.8C9 9.49222 9.00348 9.42632 9.01382 9.38328C9.05771 9.20045 9.20045 9.05771 9.38328 9.01382Z",fill:"currentColor"},child:[]}]})(t)}function Qp(t){return us({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.5 0h-12c-0.825 0-1.5 0.675-1.5 1.5v13c0 0.825 0.675 1.5 1.5 1.5h12c0.825 0 1.5-0.675 1.5-1.5v-13c0-0.825-0.675-1.5-1.5-1.5zM13 14h-11v-12h11v12zM4 9h7v1h-7zM4 11h7v1h-7zM5 4.5c0-0.828 0.672-1.5 1.5-1.5s1.5 0.672 1.5 1.5c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5zM7.5 6h-2c-0.825 0-1.5 0.45-1.5 1v1h5v-1c0-0.55-0.675-1-1.5-1z"},child:[]}]})(t)}function Ua(t){return us({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"},child:[]}]})(t)}function oR(t){return us({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}const aR=()=>{const t=Hh(),{currentUser:e}=Bn(r=>r.user),n=async()=>{try{const r=await fetch("/api/user/signout",{method:"POST"}),i=await r.json();r.ok?t(B6()):console.log(i.message)}catch(r){console.log(r.message)}};return I("header",{className:"flex h-14 items-center gap-4 border-b bg-muted/40 px-4 lg:h-[60px] lg:px-6",children:[I(rJ,{children:[y(iJ,{asChild:!0,children:I(it,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[y(GB,{className:"h-5 w-5"}),y("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),I(sR,{side:"left",className:"flex flex-col",children:[y("nav",{className:"grid gap-2 text-lg font-medium",children:e.isAdmin?I(Be,{children:[I(Pe,{to:"#",className:"flex items-center gap-2 text-lg font-semibold",children:[y(w4,{className:"h-6 w-6"}),y("span",{className:"sr-only",children:"Acme Inc"})]}),I(Pe,{to:"/admin/dashboard?tab=dash",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Xp,{}),"Dashboard"]}),I(Pe,{to:"/admin/dashboard?tab=users",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(oR,{}),"Users"]}),I(Pe,{to:"/admin/dashboard?tab=profile",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Qp,{}),"Profile"]}),I(Pe,{to:"/admin/dashboard?tab=posts",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Ua,{}),"Posts"]})]}):I(Be,{children:[I(Pe,{to:"/user/dashboard?tab=dash",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Xp,{}),"Dashboard"]}),I(Pe,{to:"/user/dashboard?tab=profile",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Qp,{}),"Profile"]}),e.role==="author"&&I(Pe,{to:"/user/dashboard?tab=posts",className:"mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground",children:[y(Ua,{}),"Posts"]})]})}),y("div",{className:"mt-auto",children:y(qt,{})})]})]}),y("div",{className:"w-full flex-1",children:y("form",{children:I("div",{className:"relative",children:[y(YB,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y(fn,{type:"search",placeholder:"Search products...",className:"w-full appearance-none bg-background pl-8 shadow-none md:w-2/3 lg:w-1/3"})]})})}),y(hy,{}),I(f0,{children:[y(m0,{asChild:!0,children:y(it,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:I(y0,{className:"h-10 w-10",children:[y(b0,{src:e.profilePicture,alt:"@shadcn"}),y(_0,{children:"SC"})]})})}),I(Uh,{align:"end",children:[I(n2,{children:[" ","@",e.username]}),y(Lc,{}),y(Yr,{children:y(Pe,{to:e.isAdmin?"/admin/dashboard?tab=dash":"/user/dashboard?tab=dash",children:"Dashboard"})}),y(Yr,{children:y(Pe,{to:e.isAdmin?"/admin/dashboard?tab=profile":"/user/dashboard?tab=profile",children:"Profile"})}),y(Lc,{}),y(Yr,{onClick:n,children:"Logout"})]})]})]})},cJ=({currentUser:t})=>{const e=fl(),[n,r]=m.useState("");return m.useEffect(()=>{const s=new URLSearchParams(e.search).get("tab");s&&r(s)},[e.search]),y("div",{className:"hidden border-r bg-muted/40 md:block",children:I("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[y("div",{className:"flex h-14 items-center border-b px-4 lg:h-[60px] lg:px-6",children:I(Pe,{to:"/",className:"flex items-center gap-2 font-semibold",children:[y(w4,{className:"h-6 w-6"}),y("span",{className:"",children:"My-Blog"})]})}),y("div",{className:"flex-1",children:y("nav",{className:"grid items-start px-2 text-sm font-medium lg:px-4",children:t.isAdmin?I(Be,{children:[I(Pe,{to:"/admin/dashboard?tab=dash",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="dash"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Xp,{}),"Dashboard"]}),I(Pe,{to:"/admin/dashboard?tab=users",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="users"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(oR,{}),"Users"]}),I(Pe,{to:"/admin/dashboard?tab=profile",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="profile"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Qp,{}),"Profile"]}),I(Pe,{to:"/admin/dashboard?tab=posts",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="posts"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Ua,{}),"Posts"]})]}):I(Be,{children:[I(Pe,{to:"/user/dashboard?tab=dash",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="dash"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Xp,{}),"Dashboard"]}),I(Pe,{to:"/user/dashboard?tab=profile",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="profile"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Qp,{}),"Profile"]}),t.role==="author"&&I(Pe,{to:"/user/dashboard?tab=posts",className:`flex items-center gap-3 rounded-lg px-3 py-2 ${n==="posts"?"bg-muted  text-primary":"text-muted-foreground"}  transition-all hover:text-primary`,children:[y(Ua,{}),"Posts"]})]})})}),y("div",{className:"mt-auto p-4",children:y(qt,{"x-chunk":"dashboard-02-chunk-0"})})]})})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="firebasestorage.googleapis.com",cR="storageBucket",uJ=2*60*1e3,dJ=10*60*1e3,hJ=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends lo{constructor(e,n,r=0){super(cw(e),`Firebase Storage: ${n} (${cw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function cw(t){return"storage/"+t}function A2(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(ht.UNKNOWN,t)}function fJ(t){return new Tt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mJ(t){return new Tt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pJ(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(ht.UNAUTHENTICATED,t)}function gJ(){return new Tt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function wJ(t){return new Tt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uR(){return new Tt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dR(){return new Tt(ht.CANCELED,"User canceled the upload/download.")}function vJ(t){return new Tt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function yJ(t){return new Tt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bJ(){return new Tt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cR+"' property when initializing the app?")}function hR(){return new Tt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _J(){return new Tt(ht.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function kJ(){return new Tt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EJ(t){return new Tt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Py(t){return new Tt(ht.INVALID_ARGUMENT,t)}function fR(){return new Tt(ht.APP_DELETED,"The Firebase app was deleted.")}function CJ(t){return new Tt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(t,e){return new Tt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Lu(t){throw new Tt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gr.makeFromUrl(e,n)}catch{return new gr(e,"")}if(r.path==="")return r;throw yJ(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${u}/b/${i}/o${h}`,"i"),p={bucket:1,path:3},g=n===lR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",v=new RegExp(`^https?://${g}/${i}/${_}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:f,indices:p,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<b.length;k++){const S=b[k],C=S.regex.exec(e);if(C){const E=C[S.indices.bucket];let x=C[S.indices.path];x||(x=""),r=new gr(E,x),S.postModify(r);break}}if(r==null)throw vJ(e);return r}}class xJ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(..._){c||(c=!0,e.apply(null,_))}function d(_){i=setTimeout(()=>{i=null,t(f,l())},_)}function h(){s&&clearTimeout(s)}function f(_,...v){if(c){h();return}if(_){h(),u.call(null,_,...v);return}if(l()||o){h(),u.call(null,_,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let p=!1;function g(_){p||(p=!0,h(),!c&&(i!==null?(_||(a=2),clearTimeout(i),d(0)):_||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function TJ(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PJ(t){return t!==void 0}function AJ(t){return typeof t=="function"}function IJ(t){return typeof t=="object"&&!Array.isArray(t)}function P0(t){return typeof t=="string"||t instanceof String}function A5(t){return I2()&&t instanceof Blob}function I2(){return typeof Blob<"u"}function I5(t,e,n,r){if(r<e)throw Py(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Py(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function mR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(za||(za={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(e,n,r,i,s,o,a,l,c,u,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new qf(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===za.NO_ERROR,l=s.getStatus();if(!a||pR(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===za.ABORT;r(!1,new qf(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new qf(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());PJ(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=A2();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?fR():dR();o(l)}else{const l=uR();o(l)}};this.canceled_?n(!1,new qf(!1,null,!0)):this.backoffId_=SJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function OJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function MJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LJ(t,e,n,r,i,s,o=!0){const a=mR(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return NJ(c,e),OJ(c,n),MJ(c,s),DJ(c,r),new RJ(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $J(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FJ(...t){const e=$J();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(I2())return new Blob(t);throw new Tt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VJ(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(t){if(typeof atob>"u")throw EJ("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class uw{constructor(e,n){this.data=e,this.contentType=n||null}}function UJ(t,e){switch(t){case Zi.RAW:return new uw(gR(e));case Zi.BASE64:case Zi.BASE64URL:return new uw(wR(t,e));case Zi.DATA_URL:return new uw(HJ(e),WJ(e))}throw A2()}function gR(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zJ(t){let e;try{e=decodeURIComponent(t)}catch{throw vd(Zi.DATA_URL,"Malformed data URL.")}return gR(e)}function wR(t,e){switch(t){case Zi.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Zi.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw vd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BJ(e)}catch(i){throw i.message.includes("polyfill")?i:vd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class vR{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vd(Zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=jJ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function HJ(t){const e=new vR(t);return e.base64?wR(Zi.BASE64,e.rest):zJ(e.rest)}function WJ(t){return new vR(t).contentType}function jJ(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){let r=0,i="";A5(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(A5(this.data_)){const r=this.data_,i=VJ(r,e,n);return i===null?null:new Do(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Do(r,!0)}}static getBlob(...e){if(I2()){const n=e.map(r=>r instanceof Do?r.data_:r);return new Do(FJ.apply(null,n))}else{const n=e.map(o=>P0(o)?UJ(Zi.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Do(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){let e;try{e=JSON.parse(t)}catch{return null}return IJ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function qJ(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function bR(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YJ(t,e){return e}class Mn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||YJ}}let Yf=null;function KJ(t){return!P0(t)||t.length<2?t:bR(t)}function _R(){if(Yf)return Yf;const t=[];t.push(new Mn("bucket")),t.push(new Mn("generation")),t.push(new Mn("metageneration")),t.push(new Mn("name","fullPath",!0));function e(s,o){return KJ(o)}const n=new Mn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Mn("size");return i.xform=r,t.push(i),t.push(new Mn("timeCreated")),t.push(new Mn("updated")),t.push(new Mn("md5Hash",null,!0)),t.push(new Mn("cacheControl",null,!0)),t.push(new Mn("contentDisposition",null,!0)),t.push(new Mn("contentEncoding",null,!0)),t.push(new Mn("contentLanguage",null,!0)),t.push(new Mn("contentType",null,!0)),t.push(new Mn("metadata","customMetadata",!0)),Yf=t,Yf}function ZJ(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new gr(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function JJ(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return ZJ(r,t),r}function kR(t,e,n){const r=yR(e);return r===null?null:JJ(t,r,n)}function XJ(t,e,n,r){const i=yR(e);if(i===null||!P0(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,h="/b/"+o(u)+"/o/"+o(d),f=Zh(h,n,r),p=mR({alt:"media",token:c});return f+p})[0]}function ER(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class uu{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t){if(!t)throw A2()}function R2(t,e){function n(r,i){const s=kR(t,i,e);return Hs(s!==null),s}return n}function QJ(t,e){function n(r,i){const s=kR(t,i,e);return Hs(s!==null),XJ(s,i,t.host,t._protocol)}return n}function Jh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=gJ():i=pJ():n.getStatus()===402?i=mJ(t.bucket):n.getStatus()===403?i=wJ(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function CR(t){const e=Jh(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=fJ(t.path)),s.serverResponse=i.serverResponse,s}return n}function eX(t,e,n){const r=e.fullServerUrl(),i=Zh(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new uu(i,s,R2(t,n),o);return a.errorHandler=CR(e),a}function tX(t,e,n){const r=e.fullServerUrl(),i=Zh(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new uu(i,s,QJ(t,n),o);return a.errorHandler=CR(e),a}function nX(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xR(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=nX(null,e)),r}function rX(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let k=0;k<2;k++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=xR(e,r,i),u=ER(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=Do.getBlob(d,r,h);if(f===null)throw hR();const p={name:c.fullPath},g=Zh(s,t.host,t._protocol),_="POST",v=t.maxUploadRetryTime,w=new uu(g,_,R2(t,n),v);return w.urlParams=p,w.headers=o,w.body=f.uploadData(),w.errorHandler=Jh(e),w}class eg{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function O2(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Hs(!1)}return Hs(!!n&&(e||["active"]).indexOf(n)!==-1),n}function iX(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=xR(e,r,i),a={name:o.fullPath},l=Zh(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=ER(o,n),h=t.maxUploadRetryTime;function f(g){O2(g);let _;try{_=g.getResponseHeader("X-Goog-Upload-URL")}catch{Hs(!1)}return Hs(P0(_)),_}const p=new uu(l,c,f,h);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Jh(e),p}function sX(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=O2(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Hs(!1)}d||Hs(!1);const h=Number(d);return Hs(!isNaN(h)),new eg(h,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new uu(n,o,s,a);return l.headers=i,l.errorHandler=Jh(e),l}const R5=256*1024;function oX(t,e,n,r,i,s,o,a){const l=new eg(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw _J();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";u===0?f="finalize":c===u?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(d,h);if(g===null)throw hR();function _(k,S){const C=O2(k,["active","final"]),E=l.current+u,x=r.size();let A;return C==="final"?A=R2(e,s)(k,S):A=null,new eg(E,x,C==="final",A)}const v="POST",w=e.maxUploadRetryTime,b=new uu(n,v,_,w);return b.headers=p,b.body=g.uploadData(),b.progressCallback=a||null,b.errorHandler=Jh(t),b}const jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dw(t){switch(t){case"running":case"pausing":case"canceling":return jn.RUNNING;case"paused":return jn.PAUSED;case"success":return jn.SUCCESS;case"canceled":return jn.CANCELED;case"error":return jn.ERROR;default:return jn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aX=class{constructor(e,n,r){if(AJ(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class lX{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=za.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=za.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=za.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Lu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cX extends lX{initXhr(){this.xhr_.responseType="text"}}function Ul(){return new cX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=_R(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ht.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(pR(i.status,[]))if(s)i=uR();else{this.sleepTime=Math.max(this.sleepTime*2,hJ),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ht.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=iX(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=sX(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Ul,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=R5*this._chunkMultiplier,n=new eg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=oX(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ul,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){R5*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=eX(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Ul,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=rX(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Ul,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=dR(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=dw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new aX(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(dw(this._state)){case jn.SUCCESS:Ol(this._resolve.bind(null,this.snapshot))();break;case jn.CANCELED:case jn.ERROR:const n=this._reject;Ol(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(dw(this._state)){case jn.RUNNING:case jn.PAUSED:e.next&&Ol(e.next.bind(e,this.snapshot))();break;case jn.SUCCESS:e.complete&&Ol(e.complete.bind(e))();break;case jn.CANCELED:case jn.ERROR:e.error&&Ol(e.error.bind(e,this._error))();break;default:e.error&&Ol(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this._service=e,n instanceof gr?this._location=n:this._location=gr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new il(e,n)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bR(this._location.path)}get storage(){return this._service}get parent(){const e=GJ(this._location.path);if(e===null)return null;const n=new gr(this._location.bucket,e);return new il(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw CJ(e)}}function dX(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new uX(t,new Do(e),n)}function hX(t){t._throwIfRoot("getDownloadURL");const e=tX(t.storage,t._location,_R());return t.storage.makeRequestWithTokens(e,Ul).then(n=>{if(n===null)throw kJ();return n})}function fX(t,e){const n=qJ(t._location.path,e),r=new gr(t._location.bucket,n);return new il(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(t){return/^[A-Za-z]+:\/\//.test(t)}function pX(t,e){return new il(t,e)}function SR(t,e){if(t instanceof M2){const n=t;if(n._bucket==null)throw bJ();const r=new il(n,n._bucket);return e!=null?SR(r,e):r}else return e!==void 0?fX(t,e):t}function gX(t,e){if(e&&mX(e)){if(t instanceof M2)return pX(t,e);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}else return SR(t,e)}function O5(t,e){const n=e==null?void 0:e[cR];return n==null?null:gr.makeFromBucketSpec(n,t)}function wX(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:fq(i,t.app.options.projectId))}class M2{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=lR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uJ,this._maxUploadRetryTime=dJ,this._requests=new Set,i!=null?this._bucket=gr.makeFromBucketSpec(i,this._host):this._bucket=O5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=O5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){I5("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){I5("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new il(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new xJ(fR());{const o=LJ(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const M5="@firebase/storage",N5="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="storage";function N2(t,e,n){return t=ds(t),dX(t,e,n)}function D2(t){return t=ds(t),hX(t)}function L2(t,e){return t=ds(t),gX(t,e)}function $2(t=m7(),e){t=ds(t);const r=h2(t,TR).getImmediate({identifier:e}),i=dq("storage");return i&&vX(r,...i),r}function vX(t,e,n,r={}){wX(t,e,n,r)}function yX(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new M2(n,r,i,e,lu)}function bX(){Vc(new tl(TR,yX,"PUBLIC").setMultipleInstances(!0)),Qo(M5,N5,""),Qo(M5,N5,"esm2017")}bX();var{entries:PR,setPrototypeOf:D5,isFrozen:_X,getPrototypeOf:kX,getOwnPropertyDescriptor:EX}=Object,{freeze:$n,seal:Qr,create:AR}=Object,{apply:Ay,construct:Iy}=typeof Reflect<"u"&&Reflect;$n||($n=function(t){return t});Qr||(Qr=function(t){return t});Ay||(Ay=function(t,e,n){return t.apply(e,n)});Iy||(Iy=function(t,e){return new t(...e)});var Kf=xr(Array.prototype.forEach),L5=xr(Array.prototype.pop),$u=xr(Array.prototype.push),Wm=xr(String.prototype.toLowerCase),hw=xr(String.prototype.toString),$5=xr(String.prototype.match),Fu=xr(String.prototype.replace),CX=xr(String.prototype.indexOf),xX=xr(String.prototype.trim),ci=xr(Object.prototype.hasOwnProperty),ar=xr(RegExp.prototype.test),Vu=SX(TypeError);function xr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ay(t,e,r)}}function SX(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Iy(t,n)}}function Ee(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Wm;D5&&D5(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){let s=n(i);s!==i&&(_X(e)||(e[r]=s),i=s)}t[i]=!0}return t}function TX(t){for(let e=0;e<t.length;e++)ci(t,e)||(t[e]=null);return t}function Ia(t){let e=AR(null);for(let[n,r]of PR(t))ci(t,n)&&(Array.isArray(r)?e[n]=TX(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ia(r):e[n]=r);return e}function Zf(t,e){for(;t!==null;){let r=EX(t,e);if(r){if(r.get)return xr(r.get);if(typeof r.value=="function")return xr(r.value)}t=kX(t)}function n(){return null}return n}var F5=$n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fw=$n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mw=$n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),PX=$n(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),pw=$n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),AX=$n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),V5=$n(["#text"]),B5=$n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),gw=$n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),U5=$n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Jf=$n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),IX=Qr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),RX=Qr(/<%[\w\W]*|[\w\W]*%>/gm),OX=Qr(/\${[\w\W]*}/gm),MX=Qr(/^data-[\-\w.\u00B7-\uFFFF]/),NX=Qr(/^aria-[\-\w]+$/),IR=Qr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),DX=Qr(/^(?:\w+script|data):/i),LX=Qr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),RR=Qr(/^html$/i),$X=Qr(/^[a-z][a-z\d]*(-[a-z\d]+)+$/i),z5=Object.freeze({__proto__:null,MUSTACHE_EXPR:IX,ERB_EXPR:RX,TMPLIT_EXPR:OX,DATA_ATTR:MX,ARIA_ATTR:NX,IS_ALLOWED_URI:IR,IS_SCRIPT_OR_DATA:DX,ATTR_WHITESPACE:LX,DOCTYPE_NAME:RR,CUSTOM_ELEMENT:$X}),FX=function(){return typeof window>"u"?null:window},VX=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null,r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));let i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function OR(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:FX(),e=P=>OR(P);if(e.version="3.0.10",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;let{document:n}=t,r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=l.prototype,g=Zf(p,"cloneNode"),_=Zf(p,"nextSibling"),v=Zf(p,"childNodes"),w=Zf(p,"parentNode");if(typeof o=="function"){let P=n.createElement("template");P.content&&P.content.ownerDocument&&(n=P.content.ownerDocument)}let b,k="",{implementation:S,createNodeIterator:C,createDocumentFragment:E,getElementsByTagName:x}=n,{importNode:A}=r,R={};e.isSupported=typeof PR=="function"&&typeof w=="function"&&S&&S.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:$,ERB_EXPR:z,TMPLIT_EXPR:re,DATA_ATTR:Y,ARIA_ATTR:ne,IS_SCRIPT_OR_DATA:ue,ATTR_WHITESPACE:de,CUSTOM_ELEMENT:D}=z5,{IS_ALLOWED_URI:M}=z5,H=null,G=Ee({},[...F5,...fw,...mw,...pw,...V5]),q=null,ke=Ee({},[...B5,...gw,...U5,...Jf]),ae=Object.seal(AR(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xe=null,fe=null,Pt=!0,on=!0,gt=!1,yn=!0,sr=!1,se=!1,Me=!1,be=!1,_e=!1,_t=!1,Jt=!1,an=!0,Bt=!1,Ot="user-content-",At=!0,kt=!1,Te={},et=null,bn=Ee({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Eu=null,gf=Ee({},["audio","video","img","source","image","track"]),Cl=null,Cu=Ee({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xl="http://www.w3.org/1998/Math/MathML",wo="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml",vo=Xt,Sl=!1,le=null,Mt=Ee({},[xl,wo,Xt],hw),tt=null,Fr=["application/xhtml+xml","text/html"],Vr="text/html",Et=null,yo=null,PD=n.createElement("form"),AE=function(P){return P instanceof RegExp||P instanceof Function},m1=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yo&&yo===P)){if((!P||typeof P!="object")&&(P={}),P=Ia(P),tt=Fr.indexOf(P.PARSER_MEDIA_TYPE)===-1?Vr:P.PARSER_MEDIA_TYPE,Et=tt==="application/xhtml+xml"?hw:Wm,H=ci(P,"ALLOWED_TAGS")?Ee({},P.ALLOWED_TAGS,Et):G,q=ci(P,"ALLOWED_ATTR")?Ee({},P.ALLOWED_ATTR,Et):ke,le=ci(P,"ALLOWED_NAMESPACES")?Ee({},P.ALLOWED_NAMESPACES,hw):Mt,Cl=ci(P,"ADD_URI_SAFE_ATTR")?Ee(Ia(Cu),P.ADD_URI_SAFE_ATTR,Et):Cu,Eu=ci(P,"ADD_DATA_URI_TAGS")?Ee(Ia(gf),P.ADD_DATA_URI_TAGS,Et):gf,et=ci(P,"FORBID_CONTENTS")?Ee({},P.FORBID_CONTENTS,Et):bn,Xe=ci(P,"FORBID_TAGS")?Ee({},P.FORBID_TAGS,Et):{},fe=ci(P,"FORBID_ATTR")?Ee({},P.FORBID_ATTR,Et):{},Te=ci(P,"USE_PROFILES")?P.USE_PROFILES:!1,Pt=P.ALLOW_ARIA_ATTR!==!1,on=P.ALLOW_DATA_ATTR!==!1,gt=P.ALLOW_UNKNOWN_PROTOCOLS||!1,yn=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,sr=P.SAFE_FOR_TEMPLATES||!1,se=P.WHOLE_DOCUMENT||!1,_e=P.RETURN_DOM||!1,_t=P.RETURN_DOM_FRAGMENT||!1,Jt=P.RETURN_TRUSTED_TYPE||!1,be=P.FORCE_BODY||!1,an=P.SANITIZE_DOM!==!1,Bt=P.SANITIZE_NAMED_PROPS||!1,At=P.KEEP_CONTENT!==!1,kt=P.IN_PLACE||!1,M=P.ALLOWED_URI_REGEXP||IR,vo=P.NAMESPACE||Xt,ae=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&AE(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&AE(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),sr&&(on=!1),_t&&(_e=!0),Te&&(H=Ee({},V5),q=[],Te.html===!0&&(Ee(H,F5),Ee(q,B5)),Te.svg===!0&&(Ee(H,fw),Ee(q,gw),Ee(q,Jf)),Te.svgFilters===!0&&(Ee(H,mw),Ee(q,gw),Ee(q,Jf)),Te.mathMl===!0&&(Ee(H,pw),Ee(q,U5),Ee(q,Jf))),P.ADD_TAGS&&(H===G&&(H=Ia(H)),Ee(H,P.ADD_TAGS,Et)),P.ADD_ATTR&&(q===ke&&(q=Ia(q)),Ee(q,P.ADD_ATTR,Et)),P.ADD_URI_SAFE_ATTR&&Ee(Cl,P.ADD_URI_SAFE_ATTR,Et),P.FORBID_CONTENTS&&(et===bn&&(et=Ia(et)),Ee(et,P.FORBID_CONTENTS,Et)),At&&(H["#text"]=!0),se&&Ee(H,["html","head","body"]),H.table&&(Ee(H,["tbody"]),delete Xe.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=P.TRUSTED_TYPES_POLICY,k=b.createHTML("")}else b===void 0&&(b=VX(f,i)),b!==null&&typeof k=="string"&&(k=b.createHTML(""));$n&&$n(P),yo=P}},IE=Ee({},["mi","mo","mn","ms","mtext"]),RE=Ee({},["foreignobject","desc","title","annotation-xml"]),AD=Ee({},["title","style","font","a","script"]),OE=Ee({},[...fw,...mw,...PX]),ME=Ee({},[...pw,...AX]),ID=function(P){let J=w(P);(!J||!J.tagName)&&(J={namespaceURI:vo,tagName:"template"});let W=Wm(P.tagName),We=Wm(J.tagName);return le[P.namespaceURI]?P.namespaceURI===wo?J.namespaceURI===Xt?W==="svg":J.namespaceURI===xl?W==="svg"&&(We==="annotation-xml"||IE[We]):!!OE[W]:P.namespaceURI===xl?J.namespaceURI===Xt?W==="math":J.namespaceURI===wo?W==="math"&&RE[We]:!!ME[W]:P.namespaceURI===Xt?J.namespaceURI===wo&&!RE[We]||J.namespaceURI===xl&&!IE[We]?!1:!ME[W]&&(AD[W]||!OE[W]):!!(tt==="application/xhtml+xml"&&le[P.namespaceURI]):!1},Tl=function(P){$u(e.removed,{element:P});try{P.parentNode.removeChild(P)}catch{P.remove()}},p1=function(P,J){try{$u(e.removed,{attribute:J.getAttributeNode(P),from:J})}catch{$u(e.removed,{attribute:null,from:J})}if(J.removeAttribute(P),P==="is"&&!q[P])if(_e||_t)try{Tl(J)}catch{}else try{J.setAttribute(P,"")}catch{}},NE=function(P){let J=null,W=null;if(be)P="<remove></remove>"+P;else{let Nt=$5(P,/^[\r\n\t ]+/);W=Nt&&Nt[0]}tt==="application/xhtml+xml"&&vo===Xt&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");let We=b?b.createHTML(P):P;if(vo===Xt)try{J=new h().parseFromString(We,tt)}catch{}if(!J||!J.documentElement){J=S.createDocument(vo,"template",null);try{J.documentElement.innerHTML=Sl?k:We}catch{}}let ln=J.body||J.documentElement;return P&&W&&ln.insertBefore(n.createTextNode(W),ln.childNodes[0]||null),vo===Xt?x.call(J,se?"html":"body")[0]:se?J.documentElement:ln},DE=function(P){return C.call(P.ownerDocument||P,P,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION,null)},RD=function(P){return P instanceof d&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof u)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},LE=function(P){return typeof a=="function"&&P instanceof a},gs=function(P,J,W){R[P]&&Kf(R[P],We=>{We.call(e,J,W,yo)})},$E=function(P){let J=null;if(gs("beforeSanitizeElements",P,null),RD(P))return Tl(P),!0;let W=Et(P.nodeName);if(gs("uponSanitizeElement",P,{tagName:W,allowedTags:H}),P.hasChildNodes()&&!LE(P.firstElementChild)&&ar(/<[/\w]/g,P.innerHTML)&&ar(/<[/\w]/g,P.textContent))return Tl(P),!0;if(!H[W]||Xe[W]){if(!Xe[W]&&VE(W)&&(ae.tagNameCheck instanceof RegExp&&ar(ae.tagNameCheck,W)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(W)))return!1;if(At&&!et[W]){let We=w(P)||P.parentNode,ln=v(P)||P.childNodes;if(ln&&We){let Nt=ln.length;for(let ws=Nt-1;ws>=0;--ws)We.insertBefore(g(ln[ws],!0),_(P))}}return Tl(P),!0}return P instanceof l&&!ID(P)||(W==="noscript"||W==="noembed"||W==="noframes")&&ar(/<\/no(script|embed|frames)/i,P.innerHTML)?(Tl(P),!0):(sr&&P.nodeType===3&&(J=P.textContent,Kf([$,z,re],We=>{J=Fu(J,We," ")}),P.textContent!==J&&($u(e.removed,{element:P.cloneNode()}),P.textContent=J)),gs("afterSanitizeElements",P,null),!1)},FE=function(P,J,W){if(an&&(J==="id"||J==="name")&&(W in n||W in PD))return!1;if(!(on&&!fe[J]&&ar(Y,J))&&!(Pt&&ar(ne,J))){if(!q[J]||fe[J]){if(!(VE(P)&&(ae.tagNameCheck instanceof RegExp&&ar(ae.tagNameCheck,P)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(P))&&(ae.attributeNameCheck instanceof RegExp&&ar(ae.attributeNameCheck,J)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(J))||J==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&ar(ae.tagNameCheck,W)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(W))))return!1}else if(!Cl[J]&&!ar(M,Fu(W,de,""))&&!((J==="src"||J==="xlink:href"||J==="href")&&P!=="script"&&CX(W,"data:")===0&&Eu[P])&&!(gt&&!ar(ue,Fu(W,de,"")))&&W)return!1}return!0},VE=function(P){return P!=="annotation-xml"&&$5(P,D)},BE=function(P){gs("beforeSanitizeAttributes",P,null);let{attributes:J}=P;if(!J)return;let W={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q},We=J.length;for(;We--;){let ln=J[We],{name:Nt,namespaceURI:ws,value:vs}=ln,Vi=Et(Nt),Un=Nt==="value"?vs:xX(vs);if(W.attrName=Vi,W.attrValue=Un,W.keepAttr=!0,W.forceKeepAttr=void 0,gs("uponSanitizeAttribute",P,W),Un=W.attrValue,W.forceKeepAttr||(p1(Nt,P),!W.keepAttr))continue;if(!yn&&ar(/\/>/i,Un)){p1(Nt,P);continue}sr&&Kf([$,z,re],zE=>{Un=Fu(Un,zE," ")});let UE=Et(P.nodeName);if(FE(UE,Vi,Un)){if(Bt&&(Vi==="id"||Vi==="name")&&(p1(Nt,P),Un=Ot+Un),b&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!ws)switch(f.getAttributeType(UE,Vi)){case"TrustedHTML":{Un=b.createHTML(Un);break}case"TrustedScriptURL":{Un=b.createScriptURL(Un);break}}try{ws?P.setAttributeNS(ws,Nt,Un):P.setAttribute(Nt,Un),L5(e.removed)}catch{}}}gs("afterSanitizeAttributes",P,null)},OD=function P(J){let W=null,We=DE(J);for(gs("beforeSanitizeShadowDOM",J,null);W=We.nextNode();)gs("uponSanitizeShadowNode",W,null),!$E(W)&&(W.content instanceof s&&P(W.content),BE(W));gs("afterSanitizeShadowDOM",J,null)};return e.sanitize=function(P){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=null,We=null,ln=null,Nt=null;if(Sl=!P,Sl&&(P="<!-->"),typeof P!="string"&&!LE(P))if(typeof P.toString=="function"){if(P=P.toString(),typeof P!="string")throw Vu("dirty is not a string, aborting")}else throw Vu("toString is not a function");if(!e.isSupported)return P;if(Me||m1(J),e.removed=[],typeof P=="string"&&(kt=!1),kt){if(P.nodeName){let Vi=Et(P.nodeName);if(!H[Vi]||Xe[Vi])throw Vu("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof a)W=NE("<!---->"),We=W.ownerDocument.importNode(P,!0),We.nodeType===1&&We.nodeName==="BODY"||We.nodeName==="HTML"?W=We:W.appendChild(We);else{if(!_e&&!sr&&!se&&P.indexOf("<")===-1)return b&&Jt?b.createHTML(P):P;if(W=NE(P),!W)return _e?null:Jt?k:""}W&&be&&Tl(W.firstChild);let ws=DE(kt?P:W);for(;ln=ws.nextNode();)$E(ln)||(ln.content instanceof s&&OD(ln.content),BE(ln));if(kt)return P;if(_e){if(_t)for(Nt=E.call(W.ownerDocument);W.firstChild;)Nt.appendChild(W.firstChild);else Nt=W;return(q.shadowroot||q.shadowrootmode)&&(Nt=A.call(r,Nt,!0)),Nt}let vs=se?W.outerHTML:W.innerHTML;return se&&H["!doctype"]&&W.ownerDocument&&W.ownerDocument.doctype&&W.ownerDocument.doctype.name&&ar(RR,W.ownerDocument.doctype.name)&&(vs="<!DOCTYPE "+W.ownerDocument.doctype.name+`>
`+vs),sr&&Kf([$,z,re],Vi=>{vs=Fu(vs,Vi," ")}),b&&Jt?b.createHTML(vs):vs},e.setConfig=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};m1(P),Me=!0},e.clearConfig=function(){yo=null,Me=!1},e.isValidAttribute=function(P,J,W){yo||m1({});let We=Et(P),ln=Et(J);return FE(We,ln,W)},e.addHook=function(P,J){typeof J=="function"&&(R[P]=R[P]||[],$u(R[P],J))},e.removeHook=function(P){if(R[P])return L5(R[P])},e.removeHooks=function(P){R[P]&&(R[P]=[])},e.removeAllHooks=function(){R={}},e}var BX=OR(),UX=t=>{switch(t){case"success":return WX;case"info":return GX;case"warning":return jX;case"error":return qX;default:return null}},zX=Array(12).fill(0),HX=({visible:t})=>V.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},V.createElement("div",{className:"sonner-spinner"},zX.map((e,n)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),WX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),GX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),qX=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),YX=()=>{let[t,e]=V.useState(!1);return V.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Ry=1,KX=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Ry++,s=this.toasts.find(a=>a.id===i),o=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...t,id:i,title:n}),{...a,...t,id:i,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0;return r.then(s=>{if(s&&typeof s.ok=="boolean"&&!s.ok){i=!1;let o=typeof e.error=="function"?e.error(`HTTP error! status: ${s.status}`):e.error,a=typeof e.description=="function"?e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:n,type:"error",message:o,description:a})}else if(e.success!==void 0){i=!1;let o=typeof e.success=="function"?e.success(s):e.success,a=typeof e.description=="function"?e.description(s):e.description;this.create({id:n,type:"success",message:o,description:a})}}).catch(s=>{if(e.error!==void 0){i=!1;let o=typeof e.error=="function"?e.error(s):e.error,a=typeof e.description=="function"?e.description(s):e.description;this.create({id:n,type:"error",message:o,description:a})}}).finally(()=>{var s;i&&(this.dismiss(n),n=void 0),(s=e.finally)==null||s.call(e)}),n},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Ry++;return this.create({jsx:t(n),id:n,...e}),n},this.subscribers=[],this.toasts=[]}},ui=new KX,ZX=(t,e)=>{let n=(e==null?void 0:e.id)||Ry++;return ui.addToast({title:t,...e,id:n}),n},JX=ZX,je=Object.assign(JX,{success:ui.success,info:ui.info,warning:ui.warning,error:ui.error,custom:ui.custom,message:ui.message,promise:ui.promise,dismiss:ui.dismiss,loading:ui.loading});function XX(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}XX(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true] [data-sonner-toast][data-type=success],[data-rich-colors=true] [data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true] [data-sonner-toast][data-type=info],[data-rich-colors=true] [data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true] [data-sonner-toast][data-type=warning],[data-rich-colors=true] [data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true] [data-sonner-toast][data-type=error],[data-rich-colors=true] [data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xf(t){return t.label!==void 0&&typeof t.onClick=="function"}var QX=3,eQ="32px",tQ=4e3,nQ=356,rQ=14,iQ=20,sQ=200;function oQ(...t){return t.filter(Boolean).join(" ")}var aQ=t=>{var e,n,r,i,s,o,a;let{invert:l,toast:c,unstyled:u,interacting:d,setHeights:h,visibleToasts:f,heights:p,index:g,toasts:_,expanded:v,removeToast:w,closeButton:b,style:k,cancelButtonStyle:S,actionButtonStyle:C,className:E="",descriptionClassName:x="",duration:A,position:R,gap:$,loadingIcon:z,expandByDefault:re,classNames:Y,icons:ne,closeButtonAriaLabel:ue="Close toast",pauseWhenPageIsHidden:de,cn:D}=t,[M,H]=V.useState(!1),[G,q]=V.useState(!1),[ke,ae]=V.useState(!1),[Xe,fe]=V.useState(!1),[Pt,on]=V.useState(0),[gt,yn]=V.useState(0),sr=V.useRef(null),se=V.useRef(null),Me=g===0,be=g+1<=f,_e=c.type,_t=c.dismissible!==!1,Jt=c.className||"",an=c.descriptionClassName||"",Bt=V.useMemo(()=>p.findIndex(le=>le.toastId===c.id)||0,[p,c.id]),Ot=V.useMemo(()=>{var le;return(le=c.closeButton)!=null?le:b},[c.closeButton,b]),At=V.useMemo(()=>c.duration||A||tQ,[c.duration,A]),kt=V.useRef(0),Te=V.useRef(0),et=V.useRef(0),bn=V.useRef(null),[Eu,gf]=R.split("-"),Cl=V.useMemo(()=>p.reduce((le,Mt,tt)=>tt>=Bt?le:le+Mt.height,0),[p,Bt]),Cu=YX(),xl=c.invert||l,wo=_e==="loading";Te.current=V.useMemo(()=>Bt*$+Cl,[Bt,Cl]),V.useEffect(()=>{H(!0)},[]),V.useLayoutEffect(()=>{if(!M)return;let le=se.current,Mt=le.style.height;le.style.height="auto";let tt=le.getBoundingClientRect().height;le.style.height=Mt,yn(tt),h(Fr=>Fr.find(Vr=>Vr.toastId===c.id)?Fr.map(Vr=>Vr.toastId===c.id?{...Vr,height:tt}:Vr):[{toastId:c.id,height:tt,position:c.position},...Fr])},[M,c.title,c.description,h,c.id]);let Xt=V.useCallback(()=>{q(!0),on(Te.current),h(le=>le.filter(Mt=>Mt.toastId!==c.id)),setTimeout(()=>{w(c)},sQ)},[c,w,h,Te]);V.useEffect(()=>{if(c.promise&&_e==="loading"||c.duration===1/0||c.type==="loading")return;let le,Mt=At;return v||d||de&&Cu?(()=>{if(et.current<kt.current){let tt=new Date().getTime()-kt.current;Mt=Mt-tt}et.current=new Date().getTime()})():Mt!==1/0&&(kt.current=new Date().getTime(),le=setTimeout(()=>{var tt;(tt=c.onAutoClose)==null||tt.call(c,c),Xt()},Mt)),()=>clearTimeout(le)},[v,d,re,c,At,Xt,c.promise,_e,de,Cu]),V.useEffect(()=>{let le=se.current;if(le){let Mt=le.getBoundingClientRect().height;return yn(Mt),h(tt=>[{toastId:c.id,height:Mt,position:c.position},...tt]),()=>h(tt=>tt.filter(Fr=>Fr.toastId!==c.id))}},[h,c.id]),V.useEffect(()=>{c.delete&&Xt()},[Xt,c.delete]);function vo(){return ne!=null&&ne.loading?V.createElement("div",{className:"sonner-loader","data-visible":_e==="loading"},ne.loading):z?V.createElement("div",{className:"sonner-loader","data-visible":_e==="loading"},z):V.createElement(HX,{visible:_e==="loading"})}function Sl(le){return{__html:BX.sanitize(le)}}return V.createElement("li",{"aria-live":c.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:se,className:D(E,Jt,Y==null?void 0:Y.toast,(e=c==null?void 0:c.classNames)==null?void 0:e.toast,Y==null?void 0:Y.default,Y==null?void 0:Y[_e],(n=c==null?void 0:c.classNames)==null?void 0:n[_e]),"data-sonner-toast":"","data-styled":!(c.jsx||c.unstyled||u),"data-mounted":M,"data-promise":!!c.promise,"data-removed":G,"data-visible":be,"data-y-position":Eu,"data-x-position":gf,"data-index":g,"data-front":Me,"data-swiping":ke,"data-dismissible":_t,"data-type":_e,"data-invert":xl,"data-swipe-out":Xe,"data-expanded":!!(v||re&&M),style:{"--index":g,"--toasts-before":g,"--z-index":_.length-g,"--offset":`${G?Pt:Te.current}px`,"--initial-height":re?"auto":`${gt}px`,...k,...c.style},onPointerDown:le=>{wo||!_t||(sr.current=new Date,on(Te.current),le.target.setPointerCapture(le.pointerId),le.target.tagName!=="BUTTON"&&(ae(!0),bn.current={x:le.clientX,y:le.clientY}))},onPointerUp:()=>{var le,Mt,tt,Fr;if(Xe||!_t)return;bn.current=null;let Vr=Number(((le=se.current)==null?void 0:le.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Et=new Date().getTime()-((Mt=sr.current)==null?void 0:Mt.getTime()),yo=Math.abs(Vr)/Et;if(Math.abs(Vr)>=iQ||yo>.11){on(Te.current),(tt=c.onDismiss)==null||tt.call(c,c),Xt(),fe(!0);return}(Fr=se.current)==null||Fr.style.setProperty("--swipe-amount","0px"),ae(!1)},onPointerMove:le=>{var Mt;if(!bn.current||!_t)return;let tt=le.clientY-bn.current.y,Fr=le.clientX-bn.current.x,Vr=(Eu==="top"?Math.min:Math.max)(0,tt),Et=le.pointerType==="touch"?10:2;Math.abs(Vr)>Et?(Mt=se.current)==null||Mt.style.setProperty("--swipe-amount",`${tt}px`):Math.abs(Fr)>Et&&(bn.current=null)}},Ot&&!c.jsx?V.createElement("button",{"aria-label":ue,"data-disabled":wo,"data-close-button":!0,onClick:wo||!_t?()=>{}:()=>{var le;Xt(),(le=c.onDismiss)==null||le.call(c,c)},className:D(Y==null?void 0:Y.closeButton,(r=c==null?void 0:c.classNames)==null?void 0:r.closeButton)},V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,c.jsx||V.isValidElement(c.title)?c.jsx||c.title:V.createElement(V.Fragment,null,_e||c.icon||c.promise?V.createElement("div",{"data-icon":"",className:D(Y==null?void 0:Y.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||vo():null,c.type!=="loading"?c.icon||(ne==null?void 0:ne[_e])||UX(_e):null):null,V.createElement("div",{"data-content":"",className:D(Y==null?void 0:Y.content)},V.createElement("div",{"data-title":"",className:D(Y==null?void 0:Y.title,(i=c==null?void 0:c.classNames)==null?void 0:i.title),dangerouslySetInnerHTML:Sl(c.title)}),c.description?V.createElement("div",{"data-description":"",className:D(x,an,Y==null?void 0:Y.description,(s=c==null?void 0:c.classNames)==null?void 0:s.description),dangerouslySetInnerHTML:Sl(c.description)}):null),V.isValidElement(c.cancel)?c.cancel:c.cancel&&Xf(c.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||S,onClick:le=>{Xf(c.cancel)&&_t&&(Xt(),c.cancel.onClick(le))},className:D(Y==null?void 0:Y.cancelButton,(o=c==null?void 0:c.classNames)==null?void 0:o.cancelButton)},c.cancel.label):null,V.isValidElement(c.action)?c.action:c.action&&Xf(c.action)?V.createElement("button",{"data-button":"",style:c.actionButtonStyle||C,onClick:le=>{Xf(c.action)&&(c.action.onClick(le),!le.defaultPrevented&&Xt())},className:D(Y==null?void 0:Y.actionButton,(a=c==null?void 0:c.classNames)==null?void 0:a.actionButton)},c.action.label):null))};function H5(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var lQ=t=>{let{invert:e,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:s,className:o,offset:a,theme:l="light",richColors:c,duration:u,style:d,visibleToasts:h=QX,toastOptions:f,dir:p=H5(),gap:g=rQ,loadingIcon:_,icons:v,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b,cn:k=oQ}=t,[S,C]=V.useState([]),E=V.useMemo(()=>Array.from(new Set([n].concat(S.filter(G=>G.position).map(G=>G.position)))),[S,n]),[x,A]=V.useState([]),[R,$]=V.useState(!1),[z,re]=V.useState(!1),[Y,ne]=V.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ue=V.useRef(null),de=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=V.useRef(null),M=V.useRef(!1),H=V.useCallback(G=>C(q=>q.filter(({id:ke})=>ke!==G.id)),[]);return V.useEffect(()=>ui.subscribe(G=>{if(G.dismiss){C(q=>q.map(ke=>ke.id===G.id?{...ke,delete:!0}:ke));return}setTimeout(()=>{XI.flushSync(()=>{C(q=>{let ke=q.findIndex(ae=>ae.id===G.id);return ke!==-1?[...q.slice(0,ke),{...q[ke],...G},...q.slice(ke+1)]:[G,...q]})})})}),[]),V.useEffect(()=>{if(l!=="system"){ne(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:G})=>{ne(G?"dark":"light")})},[l]),V.useEffect(()=>{S.length<=1&&$(!1)},[S]),V.useEffect(()=>{let G=q=>{var ke,ae;r.every(Xe=>q[Xe]||q.code===Xe)&&($(!0),(ke=ue.current)==null||ke.focus()),q.code==="Escape"&&(document.activeElement===ue.current||(ae=ue.current)!=null&&ae.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[r]),V.useEffect(()=>{if(ue.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,M.current=!1)}},[ue.current]),S.length?V.createElement("section",{"aria-label":`${w} ${de}`,tabIndex:-1},E.map((G,q)=>{var ke;let[ae,Xe]=G.split("-");return V.createElement("ol",{key:G,dir:p==="auto"?H5():p,tabIndex:-1,ref:ue,className:o,"data-sonner-toaster":!0,"data-theme":Y,"data-rich-colors":c,"data-y-position":ae,"data-x-position":Xe,style:{"--front-toast-height":`${((ke=x[0])==null?void 0:ke.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||eQ,"--width":`${nQ}px`,"--gap":`${g}px`,...d},onBlur:fe=>{M.current&&!fe.currentTarget.contains(fe.relatedTarget)&&(M.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||M.current||(M.current=!0,D.current=fe.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{z||$(!1)},onPointerDown:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},S.filter(fe=>!fe.position&&q===0||fe.position===G).map((fe,Pt)=>{var on,gt;return V.createElement(aQ,{key:fe.id,icons:v,index:Pt,toast:fe,duration:(on=f==null?void 0:f.duration)!=null?on:u,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:e,visibleToasts:h,closeButton:(gt=f==null?void 0:f.closeButton)!=null?gt:s,interacting:z,position:G,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,removeToast:H,toasts:S.filter(yn=>yn.position==fe.position),heights:x.filter(yn=>yn.position==fe.position),setHeights:A,expandByDefault:i,gap:g,loadingIcon:_,expanded:R,pauseWhenPageIsHidden:b,cn:k})}))})):null};/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.0.10 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.10/LICENSE *)
*/const MR="Progress",A0=100,[cQ,Zke]=cs(MR),[uQ,dQ]=cQ(MR),NR=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r,max:i,getValueLabel:s=mQ,...o}=t,a=Oy(i)?i:A0,l=LR(r,a)?r:null,c=tg(l)?s(l,a):void 0;return m.createElement(uQ,{scope:n,value:l,max:a},m.createElement(ze.div,U({"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":tg(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":DR(l,a),"data-value":l??void 0,"data-max":a},o,{ref:e})))});NR.propTypes={max(t,e,n){const r=t[e],i=String(r);return r&&!Oy(r)?new Error(pQ(i,n)):null},value(t,e,n){const r=t[e],i=String(r),s=Oy(t.max)?t.max:A0;return r!=null&&!LR(r,s)?new Error(gQ(i,n)):null}};const hQ="ProgressIndicator",fQ=m.forwardRef((t,e)=>{var n;const{__scopeProgress:r,...i}=t,s=dQ(hQ,r);return m.createElement(ze.div,U({"data-state":DR(s.value,s.max),"data-value":(n=s.value)!==null&&n!==void 0?n:void 0,"data-max":s.max},i,{ref:e}))});function mQ(t,e){return`${Math.round(t/e*100)}%`}function DR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function tg(t){return typeof t=="number"}function Oy(t){return tg(t)&&!isNaN(t)&&t>0}function LR(t,e){return tg(t)&&!isNaN(t)&&t<=e&&t>=0}function pQ(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${A0}\`.`}function gQ(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${A0} if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`}const $R=NR,wQ=fQ,I0=m.forwardRef(({className:t,value:e,...n},r)=>y($R,{ref:r,className:oe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:y(wQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));I0.displayName=$R.displayName;var FR={exports:{}},ww={exports:{}},vw,W5;function vQ(){if(W5)return vw;W5=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return vw=t,vw}var yw,j5;function yQ(){if(j5)return yw;j5=1;var t=vQ();function e(){}function n(){}return n.resetWarningCache=e,yw=function(){function r(o,a,l,c,u,d){if(d!==t){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},yw}var G5;function bQ(){return G5||(G5=1,ww.exports=yQ()()),ww.exports}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F2{constructor(e){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=n=>{const r="error"in n?n.error:n.reason;r instanceof Error&&this._handleError(r,n)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,n){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(n)}off(e,n){this._listeners[e]=this._listeners[e].filter(r=>r!==n)}_fire(e,...n){const r=this._listeners[e]||[];for(const i of r)i.apply(this,[null,...n])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,n){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:n instanceof ErrorEvent?n.filename:void 0,lineno:n instanceof ErrorEvent?n.lineno:void 0,colno:n instanceof ErrorEvent?n.colno:void 0,date:this._now()});const r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,n=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-n)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function My(t,e=new Set){const n=[t],r=new Set;let i=0;for(;n.length>i;){const s=n[i++];if(!(r.has(s)||!_Q(s)||e.has(s)))if(r.add(s),Symbol.iterator in s)try{for(const o of s)n.push(o)}catch{}else for(const o in s)o!=="defaultValue"&&n.push(s[o])}return r}function _Q(t){const e=Object.prototype.toString.call(t),n=typeof t;return!(n==="number"||n==="boolean"||n==="string"||n==="symbol"||n==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||t===void 0||t===null||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function VR(t,e,n=new Set){if(t===e&&kQ(t))return!0;const r=My(t,n),i=My(e,n);for(const s of r)if(i.has(s))return!0;return!1}function kQ(t){return typeof t=="object"&&t!==null}var BR=typeof global=="object"&&global&&global.Object===Object&&global,EQ=typeof self=="object"&&self&&self.Object===Object&&self,Li=BR||EQ||Function("return this")(),is=Li.Symbol,UR=Object.prototype,CQ=UR.hasOwnProperty,xQ=UR.toString,Bu=is?is.toStringTag:void 0;function SQ(t){var e=CQ.call(t,Bu),n=t[Bu];try{t[Bu]=void 0;var r=!0}catch{}var i=xQ.call(t);return r&&(e?t[Bu]=n:delete t[Bu]),i}var TQ=Object.prototype,PQ=TQ.toString;function AQ(t){return PQ.call(t)}var IQ="[object Null]",RQ="[object Undefined]",q5=is?is.toStringTag:void 0;function va(t){return t==null?t===void 0?RQ:IQ:q5&&q5 in Object(t)?SQ(t):AQ(t)}function ei(t){return t!=null&&typeof t=="object"}var OQ="[object Symbol]";function R0(t){return typeof t=="symbol"||ei(t)&&va(t)==OQ}function MQ(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Sr=Array.isArray,NQ=1/0,Y5=is?is.prototype:void 0,K5=Y5?Y5.toString:void 0;function zR(t){if(typeof t=="string")return t;if(Sr(t))return MQ(t,zR)+"";if(R0(t))return K5?K5.call(t):"";var e=t+"";return e=="0"&&1/t==-NQ?"-0":e}var DQ=/\s/;function LQ(t){for(var e=t.length;e--&&DQ.test(t.charAt(e)););return e}var $Q=/^\s+/;function FQ(t){return t&&t.slice(0,LQ(t)+1).replace($Q,"")}function ft(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Z5=NaN,VQ=/^[-+]0x[0-9a-f]+$/i,BQ=/^0b[01]+$/i,UQ=/^0o[0-7]+$/i,zQ=parseInt;function J5(t){if(typeof t=="number")return t;if(R0(t))return Z5;if(ft(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ft(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FQ(t);var n=BQ.test(t);return n||UQ.test(t)?zQ(t.slice(2),n?2:8):VQ.test(t)?Z5:+t}function V2(t){return t}var HQ="[object AsyncFunction]",WQ="[object Function]",jQ="[object GeneratorFunction]",GQ="[object Proxy]";function sl(t){if(!ft(t))return!1;var e=va(t);return e==WQ||e==jQ||e==HQ||e==GQ}var bw=Li["__core-js_shared__"],X5=function(){var t=/[^.]+$/.exec(bw&&bw.keys&&bw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function qQ(t){return!!X5&&X5 in t}var YQ=Function.prototype,KQ=YQ.toString;function gl(t){if(t!=null){try{return KQ.call(t)}catch{}try{return t+""}catch{}}return""}var ZQ=/[\\^$.*+?()[\]{}|]/g,JQ=/^\[object .+?Constructor\]$/,XQ=Function.prototype,QQ=Object.prototype,eee=XQ.toString,tee=QQ.hasOwnProperty,nee=RegExp("^"+eee.call(tee).replace(ZQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ree(t){if(!ft(t)||qQ(t))return!1;var e=sl(t)?nee:JQ;return e.test(gl(t))}function iee(t,e){return t==null?void 0:t[e]}function wl(t,e){var n=iee(t,e);return ree(n)?n:void 0}var Ny=wl(Li,"WeakMap"),Q5=Object.create,see=function(){function t(){}return function(e){if(!ft(e))return{};if(Q5)return Q5(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function oee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function HR(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var aee=800,lee=16,cee=Date.now;function uee(t){var e=0,n=0;return function(){var r=cee(),i=lee-(r-n);if(n=r,i>0){if(++e>=aee)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function dee(t){return function(){return t}}var ng=function(){try{var t=wl(Object,"defineProperty");return t({},"",{}),t}catch{}}(),hee=ng?function(t,e){return ng(t,"toString",{configurable:!0,enumerable:!1,value:dee(e),writable:!0})}:V2,fee=uee(hee);function mee(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var pee=9007199254740991,gee=/^(?:0|[1-9]\d*)$/;function O0(t,e){var n=typeof t;return e=e??pee,!!e&&(n=="number"||n!="symbol"&&gee.test(t))&&t>-1&&t%1==0&&t<e}function M0(t,e,n){e=="__proto__"&&ng?ng(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Xh(t,e){return t===e||t!==t&&e!==e}var wee=Object.prototype,vee=wee.hasOwnProperty;function B2(t,e,n){var r=t[e];(!(vee.call(t,e)&&Xh(r,n))||n===void 0&&!(e in t))&&M0(t,e,n)}function du(t,e,n,r){var i=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=t[a]),i?M0(n,a,l):B2(n,a,l)}return n}var eS=Math.max;function yee(t,e,n){return e=eS(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=eS(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),oee(t,this,a)}}function bee(t,e){return fee(yee(t,e,V2),t+"")}var _ee=9007199254740991;function U2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_ee}function N0(t){return t!=null&&U2(t.length)&&!sl(t)}function kee(t,e,n){if(!ft(n))return!1;var r=typeof e;return(r=="number"?N0(n)&&O0(e,n.length):r=="string"&&e in n)?Xh(n[e],t):!1}function WR(t){return bee(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&kee(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,s)}return e})}var Eee=Object.prototype;function z2(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Eee;return t===n}function Cee(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var xee="[object Arguments]";function tS(t){return ei(t)&&va(t)==xee}var jR=Object.prototype,See=jR.hasOwnProperty,Tee=jR.propertyIsEnumerable,rg=tS(function(){return arguments}())?tS:function(t){return ei(t)&&See.call(t,"callee")&&!Tee.call(t,"callee")};function Pee(){return!1}var GR=typeof wr=="object"&&wr&&!wr.nodeType&&wr,nS=GR&&typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,Aee=nS&&nS.exports===GR,rS=Aee?Li.Buffer:void 0,Iee=rS?rS.isBuffer:void 0,sh=Iee||Pee,Ree="[object Arguments]",Oee="[object Array]",Mee="[object Boolean]",Nee="[object Date]",Dee="[object Error]",Lee="[object Function]",$ee="[object Map]",Fee="[object Number]",Vee="[object Object]",Bee="[object RegExp]",Uee="[object Set]",zee="[object String]",Hee="[object WeakMap]",Wee="[object ArrayBuffer]",jee="[object DataView]",Gee="[object Float32Array]",qee="[object Float64Array]",Yee="[object Int8Array]",Kee="[object Int16Array]",Zee="[object Int32Array]",Jee="[object Uint8Array]",Xee="[object Uint8ClampedArray]",Qee="[object Uint16Array]",ete="[object Uint32Array]",lt={};lt[Gee]=lt[qee]=lt[Yee]=lt[Kee]=lt[Zee]=lt[Jee]=lt[Xee]=lt[Qee]=lt[ete]=!0;lt[Ree]=lt[Oee]=lt[Wee]=lt[Mee]=lt[jee]=lt[Nee]=lt[Dee]=lt[Lee]=lt[$ee]=lt[Fee]=lt[Vee]=lt[Bee]=lt[Uee]=lt[zee]=lt[Hee]=!1;function tte(t){return ei(t)&&U2(t.length)&&!!lt[va(t)]}function H2(t){return function(e){return t(e)}}var qR=typeof wr=="object"&&wr&&!wr.nodeType&&wr,yd=qR&&typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,nte=yd&&yd.exports===qR,_w=nte&&BR.process,zc=function(){try{var t=yd&&yd.require&&yd.require("util").types;return t||_w&&_w.binding&&_w.binding("util")}catch{}}(),iS=zc&&zc.isTypedArray,W2=iS?H2(iS):tte,rte=Object.prototype,ite=rte.hasOwnProperty;function YR(t,e){var n=Sr(t),r=!n&&rg(t),i=!n&&!r&&sh(t),s=!n&&!r&&!i&&W2(t),o=n||r||i||s,a=o?Cee(t.length,String):[],l=a.length;for(var c in t)(e||ite.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||O0(c,l)))&&a.push(c);return a}function KR(t,e){return function(n){return t(e(n))}}var ste=KR(Object.keys,Object),ote=Object.prototype,ate=ote.hasOwnProperty;function lte(t){if(!z2(t))return ste(t);var e=[];for(var n in Object(t))ate.call(t,n)&&n!="constructor"&&e.push(n);return e}function Qh(t){return N0(t)?YR(t):lte(t)}function cte(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var ute=Object.prototype,dte=ute.hasOwnProperty;function hte(t){if(!ft(t))return cte(t);var e=z2(t),n=[];for(var r in t)r=="constructor"&&(e||!dte.call(t,r))||n.push(r);return n}function hu(t){return N0(t)?YR(t,!0):hte(t)}var ZR=WR(function(t,e){du(e,hu(e),t)}),fte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mte=/^\w*$/;function j2(t,e){if(Sr(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||R0(t)?!0:mte.test(t)||!fte.test(t)||e!=null&&t in Object(e)}var oh=wl(Object,"create");function pte(){this.__data__=oh?oh(null):{},this.size=0}function gte(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var wte="__lodash_hash_undefined__",vte=Object.prototype,yte=vte.hasOwnProperty;function bte(t){var e=this.__data__;if(oh){var n=e[t];return n===wte?void 0:n}return yte.call(e,t)?e[t]:void 0}var _te=Object.prototype,kte=_te.hasOwnProperty;function Ete(t){var e=this.__data__;return oh?e[t]!==void 0:kte.call(e,t)}var Cte="__lodash_hash_undefined__";function xte(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oh&&e===void 0?Cte:e,this}function ol(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ol.prototype.clear=pte;ol.prototype.delete=gte;ol.prototype.get=bte;ol.prototype.has=Ete;ol.prototype.set=xte;function Ste(){this.__data__=[],this.size=0}function D0(t,e){for(var n=t.length;n--;)if(Xh(t[n][0],e))return n;return-1}var Tte=Array.prototype,Pte=Tte.splice;function Ate(t){var e=this.__data__,n=D0(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Pte.call(e,n,1),--this.size,!0}function Ite(t){var e=this.__data__,n=D0(e,t);return n<0?void 0:e[n][1]}function Rte(t){return D0(this.__data__,t)>-1}function Ote(t,e){var n=this.__data__,r=D0(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function co(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}co.prototype.clear=Ste;co.prototype.delete=Ate;co.prototype.get=Ite;co.prototype.has=Rte;co.prototype.set=Ote;var ah=wl(Li,"Map");function Mte(){this.size=0,this.__data__={hash:new ol,map:new(ah||co),string:new ol}}function Nte(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function L0(t,e){var n=t.__data__;return Nte(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Dte(t){var e=L0(this,t).delete(t);return this.size-=e?1:0,e}function Lte(t){return L0(this,t).get(t)}function $te(t){return L0(this,t).has(t)}function Fte(t,e){var n=L0(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function uo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uo.prototype.clear=Mte;uo.prototype.delete=Dte;uo.prototype.get=Lte;uo.prototype.has=$te;uo.prototype.set=Fte;var Vte="Expected a function";function G2(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Vte);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(G2.Cache||uo),n}G2.Cache=uo;var Bte=500;function Ute(t){var e=G2(t,function(r){return n.size===Bte&&n.clear(),r}),n=e.cache;return e}var zte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hte=/\\(\\)?/g,Wte=Ute(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(zte,function(n,r,i,s){e.push(i?s.replace(Hte,"$1"):r||n)}),e});function q2(t){return t==null?"":zR(t)}function $0(t,e){return Sr(t)?t:j2(t,e)?[t]:Wte(q2(t))}var jte=1/0;function fu(t){if(typeof t=="string"||R0(t))return t;var e=t+"";return e=="0"&&1/t==-jte?"-0":e}function Y2(t,e){e=$0(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[fu(e[n++])];return n&&n==r?t:void 0}function lh(t,e,n){var r=t==null?void 0:Y2(t,e);return r===void 0?n:r}function JR(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var K2=KR(Object.getPrototypeOf,Object),Gte="[object Object]",qte=Function.prototype,Yte=Object.prototype,XR=qte.toString,Kte=Yte.hasOwnProperty,Zte=XR.call(Object);function hr(t){if(!ei(t)||va(t)!=Gte)return!1;var e=K2(t);if(e===null)return!0;var n=Kte.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&XR.call(n)==Zte}function QR(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function Jte(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:QR(t,e,n)}var Xte="\\ud800-\\udfff",Qte="\\u0300-\\u036f",ene="\\ufe20-\\ufe2f",tne="\\u20d0-\\u20ff",nne=Qte+ene+tne,rne="\\ufe0e\\ufe0f",ine="\\u200d",sne=RegExp("["+ine+Xte+nne+rne+"]");function e8(t){return sne.test(t)}function one(t){return t.split("")}var t8="\\ud800-\\udfff",ane="\\u0300-\\u036f",lne="\\ufe20-\\ufe2f",cne="\\u20d0-\\u20ff",une=ane+lne+cne,dne="\\ufe0e\\ufe0f",hne="["+t8+"]",Dy="["+une+"]",Ly="\\ud83c[\\udffb-\\udfff]",fne="(?:"+Dy+"|"+Ly+")",n8="[^"+t8+"]",r8="(?:\\ud83c[\\udde6-\\uddff]){2}",i8="[\\ud800-\\udbff][\\udc00-\\udfff]",mne="\\u200d",s8=fne+"?",o8="["+dne+"]?",pne="(?:"+mne+"(?:"+[n8,r8,i8].join("|")+")"+o8+s8+")*",gne=o8+s8+pne,wne="(?:"+[n8+Dy+"?",Dy,r8,i8,hne].join("|")+")",vne=RegExp(Ly+"(?="+Ly+")|"+wne+gne,"g");function yne(t){return t.match(vne)||[]}function bne(t){return e8(t)?yne(t):one(t)}function _ne(t){return function(e){e=q2(e);var n=e8(e)?bne(e):void 0,r=n?n[0]:e.charAt(0),i=n?Jte(n,1).join(""):e.slice(1);return r[t]()+i}}var kne=_ne("toUpperCase");function Ene(){this.__data__=new co,this.size=0}function Cne(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function xne(t){return this.__data__.get(t)}function Sne(t){return this.__data__.has(t)}var Tne=200;function Pne(t,e){var n=this.__data__;if(n instanceof co){var r=n.__data__;if(!ah||r.length<Tne-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new uo(r)}return n.set(t,e),this.size=n.size,this}function Pi(t){var e=this.__data__=new co(t);this.size=e.size}Pi.prototype.clear=Ene;Pi.prototype.delete=Cne;Pi.prototype.get=xne;Pi.prototype.has=Sne;Pi.prototype.set=Pne;function Ane(t,e){return t&&du(e,Qh(e),t)}function Ine(t,e){return t&&du(e,hu(e),t)}var a8=typeof wr=="object"&&wr&&!wr.nodeType&&wr,sS=a8&&typeof Tn=="object"&&Tn&&!Tn.nodeType&&Tn,Rne=sS&&sS.exports===a8,oS=Rne?Li.Buffer:void 0,aS=oS?oS.allocUnsafe:void 0;function l8(t,e){if(e)return t.slice();var n=t.length,r=aS?aS(n):new t.constructor(n);return t.copy(r),r}function One(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}function c8(){return[]}var Mne=Object.prototype,Nne=Mne.propertyIsEnumerable,lS=Object.getOwnPropertySymbols,Z2=lS?function(t){return t==null?[]:(t=Object(t),One(lS(t),function(e){return Nne.call(t,e)}))}:c8;function Dne(t,e){return du(t,Z2(t),e)}var Lne=Object.getOwnPropertySymbols,u8=Lne?function(t){for(var e=[];t;)JR(e,Z2(t)),t=K2(t);return e}:c8;function $ne(t,e){return du(t,u8(t),e)}function d8(t,e,n){var r=e(t);return Sr(t)?r:JR(r,n(t))}function $y(t){return d8(t,Qh,Z2)}function Fne(t){return d8(t,hu,u8)}var Fy=wl(Li,"DataView"),Vy=wl(Li,"Promise"),By=wl(Li,"Set"),cS="[object Map]",Vne="[object Object]",uS="[object Promise]",dS="[object Set]",hS="[object WeakMap]",fS="[object DataView]",Bne=gl(Fy),Une=gl(ah),zne=gl(Vy),Hne=gl(By),Wne=gl(Ny),pi=va;(Fy&&pi(new Fy(new ArrayBuffer(1)))!=fS||ah&&pi(new ah)!=cS||Vy&&pi(Vy.resolve())!=uS||By&&pi(new By)!=dS||Ny&&pi(new Ny)!=hS)&&(pi=function(t){var e=va(t),n=e==Vne?t.constructor:void 0,r=n?gl(n):"";if(r)switch(r){case Bne:return fS;case Une:return cS;case zne:return uS;case Hne:return dS;case Wne:return hS}return e});var jne=Object.prototype,Gne=jne.hasOwnProperty;function qne(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Gne.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var ig=Li.Uint8Array;function J2(t){var e=new t.constructor(t.byteLength);return new ig(e).set(new ig(t)),e}function Yne(t,e){var n=e?J2(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Kne=/\w*$/;function Zne(t){var e=new t.constructor(t.source,Kne.exec(t));return e.lastIndex=t.lastIndex,e}var mS=is?is.prototype:void 0,pS=mS?mS.valueOf:void 0;function Jne(t){return pS?Object(pS.call(t)):{}}function h8(t,e){var n=e?J2(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Xne="[object Boolean]",Qne="[object Date]",ere="[object Map]",tre="[object Number]",nre="[object RegExp]",rre="[object Set]",ire="[object String]",sre="[object Symbol]",ore="[object ArrayBuffer]",are="[object DataView]",lre="[object Float32Array]",cre="[object Float64Array]",ure="[object Int8Array]",dre="[object Int16Array]",hre="[object Int32Array]",fre="[object Uint8Array]",mre="[object Uint8ClampedArray]",pre="[object Uint16Array]",gre="[object Uint32Array]";function wre(t,e,n){var r=t.constructor;switch(e){case ore:return J2(t);case Xne:case Qne:return new r(+t);case are:return Yne(t,n);case lre:case cre:case ure:case dre:case hre:case fre:case mre:case pre:case gre:return h8(t,n);case ere:return new r;case tre:case ire:return new r(t);case nre:return Zne(t);case rre:return new r;case sre:return Jne(t)}}function f8(t){return typeof t.constructor=="function"&&!z2(t)?see(K2(t)):{}}var vre="[object Map]";function yre(t){return ei(t)&&pi(t)==vre}var gS=zc&&zc.isMap,bre=gS?H2(gS):yre,_re="[object Set]";function kre(t){return ei(t)&&pi(t)==_re}var wS=zc&&zc.isSet,Ere=wS?H2(wS):kre,Cre=1,xre=2,Sre=4,m8="[object Arguments]",Tre="[object Array]",Pre="[object Boolean]",Are="[object Date]",Ire="[object Error]",p8="[object Function]",Rre="[object GeneratorFunction]",Ore="[object Map]",Mre="[object Number]",g8="[object Object]",Nre="[object RegExp]",Dre="[object Set]",Lre="[object String]",$re="[object Symbol]",Fre="[object WeakMap]",Vre="[object ArrayBuffer]",Bre="[object DataView]",Ure="[object Float32Array]",zre="[object Float64Array]",Hre="[object Int8Array]",Wre="[object Int16Array]",jre="[object Int32Array]",Gre="[object Uint8Array]",qre="[object Uint8ClampedArray]",Yre="[object Uint16Array]",Kre="[object Uint32Array]",nt={};nt[m8]=nt[Tre]=nt[Vre]=nt[Bre]=nt[Pre]=nt[Are]=nt[Ure]=nt[zre]=nt[Hre]=nt[Wre]=nt[jre]=nt[Ore]=nt[Mre]=nt[g8]=nt[Nre]=nt[Dre]=nt[Lre]=nt[$re]=nt[Gre]=nt[qre]=nt[Yre]=nt[Kre]=!0;nt[Ire]=nt[p8]=nt[Fre]=!1;function _c(t,e,n,r,i,s){var o,a=e&Cre,l=e&xre,c=e&Sre;if(n&&(o=i?n(t,r,i,s):n(t)),o!==void 0)return o;if(!ft(t))return t;var u=Sr(t);if(u){if(o=qne(t),!a)return HR(t,o)}else{var d=pi(t),h=d==p8||d==Rre;if(sh(t))return l8(t,a);if(d==g8||d==m8||h&&!i){if(o=l||h?{}:f8(t),!a)return l?$ne(t,Ine(o,t)):Dne(t,Ane(o,t))}else{if(!nt[d])return i?t:{};o=wre(t,d,a)}}s||(s=new Pi);var f=s.get(t);if(f)return f;s.set(t,o),Ere(t)?t.forEach(function(_){o.add(_c(_,e,n,_,t,s))}):bre(t)&&t.forEach(function(_,v){o.set(v,_c(_,e,n,v,t,s))});var p=c?l?Fne:$y:l?hu:Qh,g=u?void 0:p(t);return mee(g||t,function(_,v){g&&(v=_,_=t[v]),B2(o,v,_c(_,e,n,v,t,s))}),o}var Zre=4;function w8(t){return _c(t,Zre)}var Jre=1,Xre=4;function $i(t){return _c(t,Jre|Xre)}var Qre=1,eie=4;function X2(t,e){return e=typeof e=="function"?e:void 0,_c(t,Qre|eie,e)}var tie="__lodash_hash_undefined__";function nie(t){return this.__data__.set(t,tie),this}function rie(t){return this.__data__.has(t)}function sg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new uo;++e<n;)this.add(t[e])}sg.prototype.add=sg.prototype.push=nie;sg.prototype.has=rie;function iie(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function sie(t,e){return t.has(e)}var oie=1,aie=2;function v8(t,e,n,r,i,s){var o=n&oie,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var d=-1,h=!0,f=n&aie?new sg:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],g=e[d];if(r)var _=o?r(g,p,d,e,t,s):r(p,g,d,t,e,s);if(_!==void 0){if(_)continue;h=!1;break}if(f){if(!iie(e,function(v,w){if(!sie(f,w)&&(p===v||i(p,v,n,r,s)))return f.push(w)})){h=!1;break}}else if(!(p===g||i(p,g,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function lie(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function cie(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var uie=1,die=2,hie="[object Boolean]",fie="[object Date]",mie="[object Error]",pie="[object Map]",gie="[object Number]",wie="[object RegExp]",vie="[object Set]",yie="[object String]",bie="[object Symbol]",_ie="[object ArrayBuffer]",kie="[object DataView]",vS=is?is.prototype:void 0,kw=vS?vS.valueOf:void 0;function Eie(t,e,n,r,i,s,o){switch(n){case kie:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _ie:return!(t.byteLength!=e.byteLength||!s(new ig(t),new ig(e)));case hie:case fie:case gie:return Xh(+t,+e);case mie:return t.name==e.name&&t.message==e.message;case wie:case yie:return t==e+"";case pie:var a=lie;case vie:var l=r&uie;if(a||(a=cie),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=die,o.set(t,e);var u=v8(a(t),a(e),r,i,s,o);return o.delete(t),u;case bie:if(kw)return kw.call(t)==kw.call(e)}return!1}var Cie=1,xie=Object.prototype,Sie=xie.hasOwnProperty;function Tie(t,e,n,r,i,s){var o=n&Cie,a=$y(t),l=a.length,c=$y(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:Sie.call(e,h)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var _=o;++d<l;){h=a[d];var v=t[h],w=e[h];if(r)var b=o?r(w,v,h,e,t,s):r(v,w,h,t,e,s);if(!(b===void 0?v===w||i(v,w,n,r,s):b)){g=!1;break}_||(_=h=="constructor")}if(g&&!_){var k=t.constructor,S=e.constructor;k!=S&&"constructor"in t&&"constructor"in e&&!(typeof k=="function"&&k instanceof k&&typeof S=="function"&&S instanceof S)&&(g=!1)}return s.delete(t),s.delete(e),g}var Pie=1,yS="[object Arguments]",bS="[object Array]",Qf="[object Object]",Aie=Object.prototype,_S=Aie.hasOwnProperty;function Iie(t,e,n,r,i,s){var o=Sr(t),a=Sr(e),l=o?bS:pi(t),c=a?bS:pi(e);l=l==yS?Qf:l,c=c==yS?Qf:c;var u=l==Qf,d=c==Qf,h=l==c;if(h&&sh(t)){if(!sh(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new Pi),o||W2(t)?v8(t,e,n,r,i,s):Eie(t,e,l,n,r,i,s);if(!(n&Pie)){var f=u&&_S.call(t,"__wrapped__"),p=d&&_S.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,_=p?e.value():e;return s||(s=new Pi),i(g,_,n,r,s)}}return h?(s||(s=new Pi),Tie(t,e,n,r,i,s)):!1}function ef(t,e,n,r,i){return t===e?!0:t==null||e==null||!ei(t)&&!ei(e)?t!==t&&e!==e:Iie(t,e,n,r,ef,i)}var Rie=1,Oie=2;function Mie(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var a=o[0],l=t[a],c=o[1];if(o[2]){if(l===void 0&&!(a in t))return!1}else{var u=new Pi,d;if(!(d===void 0?ef(c,l,Rie|Oie,r,u):d))return!1}}return!0}function y8(t){return t===t&&!ft(t)}function Nie(t){for(var e=Qh(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,y8(i)]}return e}function b8(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function Die(t){var e=Nie(t);return e.length==1&&e[0][2]?b8(e[0][0],e[0][1]):function(n){return n===t||Mie(n,t,e)}}function Lie(t,e){return t!=null&&e in Object(t)}function $ie(t,e,n){e=$0(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var o=fu(e[r]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&U2(i)&&O0(o,i)&&(Sr(t)||rg(t)))}function Fie(t,e){return t!=null&&$ie(t,e,Lie)}var Vie=1,Bie=2;function Uie(t,e){return j2(t)&&y8(e)?b8(fu(t),e):function(n){var r=lh(n,t);return r===void 0&&r===e?Fie(n,t):ef(e,r,Vie|Bie)}}function zie(t){return function(e){return e==null?void 0:e[t]}}function Hie(t){return function(e){return Y2(e,t)}}function Wie(t){return j2(t)?zie(fu(t)):Hie(t)}function jie(t){return typeof t=="function"?t:t==null?V2:typeof t=="object"?Sr(t)?Uie(t[0],t[1]):Die(t):Wie(t)}function Gie(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var l=o[++i];if(n(s[l],l,s)===!1)break}return e}}var _8=Gie();function qie(t,e){return t&&_8(t,e,Qh)}var Ew=function(){return Li.Date.now()},Yie="Expected a function",Kie=Math.max,Zie=Math.min;function al(t,e,n){var r,i,s,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(Yie);e=J5(e)||0,ft(n)&&(u=!!n.leading,d="maxWait"in n,s=d?Kie(J5(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function f(C){var E=r,x=i;return r=i=void 0,c=C,o=t.apply(x,E),o}function p(C){return c=C,a=setTimeout(v,e),u?f(C):o}function g(C){var E=C-l,x=C-c,A=e-E;return d?Zie(A,s-x):A}function _(C){var E=C-l,x=C-c;return l===void 0||E>=e||E<0||d&&x>=s}function v(){var C=Ew();if(_(C))return w(C);a=setTimeout(v,g(C))}function w(C){return a=void 0,h&&r?f(C):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function k(){return a===void 0?o:w(Ew())}function S(){var C=Ew(),E=_(C);if(r=arguments,i=this,l=C,E){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,e),f(l)}return a===void 0&&(a=setTimeout(v,e)),o}return S.cancel=b,S.flush=k,S}function Uy(t,e,n){(n!==void 0&&!Xh(t[e],n)||n===void 0&&!(e in t))&&M0(t,e,n)}function Jie(t){return ei(t)&&N0(t)}function zy(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Xie(t){return du(t,hu(t))}function Qie(t,e,n,r,i,s,o){var a=zy(t,n),l=zy(e,n),c=o.get(l);if(c){Uy(t,n,c);return}var u=s?s(a,l,n+"",t,e,o):void 0,d=u===void 0;if(d){var h=Sr(l),f=!h&&sh(l),p=!h&&!f&&W2(l);u=l,h||f||p?Sr(a)?u=a:Jie(a)?u=HR(a):f?(d=!1,u=l8(l,!0)):p?(d=!1,u=h8(l,!0)):u=[]:hr(l)||rg(l)?(u=a,rg(a)?u=Xie(a):(!ft(a)||sl(a))&&(u=f8(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Uy(t,n,u)}function k8(t,e,n,r,i){t!==e&&_8(e,function(s,o){if(i||(i=new Pi),ft(s))Qie(t,e,o,n,k8,r,i);else{var a=r?r(zy(t,o),s,o+"",t,e,i):void 0;a===void 0&&(a=s),Uy(t,o,a)}},hu)}function ese(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var E8=/[\\^$.*+?()[\]{}|]/g,tse=RegExp(E8.source);function nse(t){return t=q2(t),t&&tse.test(t)?t.replace(E8,"\\$&"):t}var rse="[object String]";function kS(t){return typeof t=="string"||!Sr(t)&&ei(t)&&va(t)==rse}function ise(t,e){return e.length<2?t:Y2(t,QR(e,0,-1))}function ll(t){return ei(t)&&t.nodeType===1&&!hr(t)}function Hy(t,e){return ef(t,e)}function sse(t,e,n){n=typeof n=="function"?n:void 0;var r=n?n(t,e):void 0;return r===void 0?ef(t,e,void 0,n):!!r}function ose(t,e){var n={};return e=jie(e),qie(t,function(r,i,s){M0(n,i,e(r,i,s))}),n}var Q2=WR(function(t,e,n){k8(t,e,n)});function ase(t,e){return e=$0(e,t),t=ise(t,e),t==null||delete t[fu(ese(e))]}function lse(t,e,n,r){if(!ft(t))return t;e=$0(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var l=fu(e[i]),c=n;if(l==="__proto__"||l==="constructor"||l==="prototype")return t;if(i!=o){var u=a[l];c=void 0,c===void 0&&(c=ft(u)?u:O0(e[i+1])?[]:{})}B2(a,l,c),a=a[l]}return t}function cse(t,e,n){return t==null?t:lse(t,e,n)}var use="Expected a function";function ch(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(use);return ft(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),al(t,e,{leading:r,maxWait:e,trailing:i})}function dse(t,e){return t==null?!0:ase(t,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ek extends F2{constructor(e,n={}){super(n),this._editor=null,this._lifecyclePromise=null,this._initUsingData=!0,this._editables={},this._throttledSave=ch(this._save.bind(this),typeof n.saveInterval=="number"?n.saveInterval:5e3),e&&(this._creator=(r,i)=>e.create(r,i)),this._destructor=r=>r.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},n=[],r=this._config.rootsAttributes||{},i={};for(const[o,a]of Object.entries(this._data.roots))a.isLoaded?(e[o]="",i[o]=r[o]||{}):n.push(o);const s={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:n,rootsAttributes:i,_watchdogInitialData:this._data};return delete s.initialData,s.extraPlugins.push(hse),this._initUsingData?this.create(e,s,s.context):ll(this._elementOrData)?this.create(this._elementOrData,s,s.context):this.create(this._editables,s,s.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,n=this._config,r){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(n)||{},this._config.context=r,this._creator(e,this._config))).then(i=>{this._editor=i,i.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=i.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(n){console.error(n,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,n=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:r}=e,i=r.has("CommentsRepository")&&r.get("CommentsRepository"),s=r.has("TrackChanges")&&r.get("TrackChanges"),o={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};n.forEach(a=>{o.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(o.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return i&&(o.commentThreads=JSON.stringify(i.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),s&&(o.suggestions=JSON.stringify(s.getSuggestions({toJSON:!0,skipNotAttached:!0}))),o}_getEditables(){const e={};for(const n of this.editor.model.document.getRootNames()){const r=this.editor.ui.getEditableElement(n);r&&(e[n]=r)}return e}_isErrorComingFromThisItem(e){return VR(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return X2(e,(n,r)=>{if(ll(n)||r==="context")return n})}}class hse{constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},n=>{this._restoreCollaborationData(),this._restoreEditorData(n)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,n){if("name"in n){const r=e.createElement(n.name,n.attributes);if(n.children)for(const i of n.children)r._appendChild(this._createNode(e,i));return r}else return e.createText(n.data,n.attributes)}_restoreEditorData(e){const n=this.editor;Object.entries(this._data.roots).forEach(([r,{content:i,attributes:s}])=>{const o=JSON.parse(i),a=JSON.parse(s),l=n.model.document.getRoot(r);for(const[c,u]of a)e.setAttribute(c,u,l);for(const c of o){const u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([r,i])=>{const{document:s}=n.model,{rangeJSON:{start:o,end:a},...l}=i,c=s.getRoot(o.root),u=e.createPositionFromPath(c,o.path,o.stickiness),d=e.createPositionFromPath(c,a.path,a.stickiness),h=e.createRange(u,d);e.addMarker(r,{range:h,...l})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),n=JSON.parse(this._data.suggestions);e.forEach(r=>{const i=this.editor.config.get("collaboration.channelId"),s=this.editor.plugins.get("CommentsRepository");s.hasCommentThread(r.threadId)&&s.getCommentThread(r.threadId).remove(),s.addCommentThread({channelId:i,...r})}),n.forEach(r=>{const i=this.editor.plugins.get("TrackChangesEditing");if(i.hasSuggestion(r.id)){const s=i.getSuggestion(r.id);s.attributes=r.attributes}else i.addSuggestionData(r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const bd=Symbol("MainQueueId");class C8 extends F2{constructor(e,n={}){super(n),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new fse,this._watchdogConfig=n,this._creator=r=>e.create(r),this._destructor=r=>r.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(bd,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const n=ES(e);return Promise.all(n.map(r=>this._actionQueues.enqueue(r.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let i;if(this._watchdogs.has(r.id))throw new Error(`Item with the given id is already added: '${r.id}'.`);if(r.type==="editor")return i=new ek(null,this._watchdogConfig),i.setCreator(r.creator),i._setExcludedProperties(this._contextProps),r.destructor&&i.setDestructor(r.destructor),this._watchdogs.set(r.id,i),i.on("error",(s,{error:o,causesRestart:a})=>{this._fire("itemError",{itemId:r.id,error:o}),a&&this._actionQueues.enqueue(r.id,()=>new Promise(l=>{const c=()=>{i.off("restart",c),this._fire("itemRestart",{itemId:r.id}),l()};i.on("restart",c)}))}),i.create(r.sourceElementOrData,r.config,this._context);throw new Error(`Not supported item type: '${r.type}'.`)})))}remove(e){const n=ES(e);return Promise.all(n.map(r=>this._actionQueues.enqueue(r,()=>{const i=this._getWatchdog(r);return this._watchdogs.delete(r),i.destroy()})))}destroy(){return this._actionQueues.enqueue(bd,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(bd,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=My(this._context),Promise.all(Array.from(this._watchdogs.values()).map(n=>(n._setExcludedProperties(this._contextProps),n.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(n=>n.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const n=this._watchdogs.get(e);if(!n)throw new Error(`Item with the given id was not registered: ${e}.`);return n}_isErrorComingFromThisItem(e){for(const n of this._watchdogs.values())if(n._isErrorComingFromThisItem(e))return!1;return VR(this._context,e.context)}}class fse{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,n){const r=e===bd;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const s=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(bd),this._queues.get(e)])).then(n),o=s.catch(()=>{});return this._queues.set(e,o),s.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function ES(t){return Array.isArray(t)?t:[t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const mse=Object.freeze(Object.defineProperty({__proto__:null,ContextWatchdog:C8,EditorWatchdog:ek,Watchdog:F2},Symbol.toStringTag,{value:"Module"})),pse=ND(mse);/*!
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(t,e){(function(n,r){t.exports=r(m,bQ(),pse)})(self,(n,r,i)=>(()=>{var s={546:c=>{c.exports=i},949:c=>{c.exports=r},155:c=>{c.exports=n}},o={};function a(c){var u=o[c];if(u!==void 0)return u.exports;var d=o[c]={exports:{}};return s[c](d,d.exports,a),d.exports}a.n=c=>{var u=c&&c.__esModule?()=>c.default:()=>c;return a.d(u,{a:u}),u},a.d=(c,u)=>{for(var d in u)a.o(u,d)&&!a.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:u[d]})},a.o=(c,u)=>Object.prototype.hasOwnProperty.call(c,u),a.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var l={};return(()=>{a.r(l),a.d(l,{CKEditor:()=>w,CKEditorContext:()=>_,useMultiRootEditor:()=>C});var c=a(155),u=a.n(c),d=a(949),h=a.n(d);const f=new Array(256).fill("").map((E,x)=>("0"+x.toString(16)).slice(-2));var p=a(546);const g=u().createContext("contextWatchdog");class _ extends u().Component{constructor(x,A){super(x,A),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(x){return this._shouldComponentUpdate(x)}async _shouldComponentUpdate(x){return x.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(x.config)),x.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(x.config),!0):this.props.children!==x.children}render(){return u().createElement(g.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(x){this.contextWatchdog=new p.ContextWatchdog(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(A,R)=>{this.props.onError(R.error,{phase:"runtime",willContextRestart:R.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{this.contextWatchdog.state==="ready"&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(x).catch(A=>{this.props.onError(A,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}_.defaultProps={isLayoutReady:!0,onError:(E,x)=>console.error(E,x)},_.propTypes={id:h().string,isLayoutReady:h().bool,context:h().func,watchdogConfig:h().object,config:h().object,onReady:h().func,onError:h().func};const v="Lock from React integration (@ckeditor/ckeditor5-react)";class w extends u().Component{constructor(x){super(x),this.editorDestructionInProgress=null,this.domContainer=u().createRef(),this.watchdog=null;const{CKEDITOR_VERSION:A}=window;if(A){const[R]=A.split(".").map(Number);R<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(x){return!!this.editor&&(x.id!==this.props.id||x.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(x)&&this.editor.data.set(x.data),"disabled"in x&&(x.disabled?this.editor.enableReadOnlyMode(v):this.editor.disableReadOnlyMode(v)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return u().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=await this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof p.ContextWatchdog?this.watchdog=new b(this.context):this.watchdog=new w._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((x,A)=>this._createEditor(x,A)),this.watchdog.on("error",(x,{error:A,causesRestart:R})=>{(this.props.onError||console.error)(A,{phase:"runtime",willEditorRestart:R})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(x=>{(this.props.onError||console.error)(x,{phase:"initialization",willEditorRestart:!1})}))}_createEditor(x,A){return this.props.editor.create(x,A).then(R=>{"disabled"in this.props&&this.props.disabled&&R.enableReadOnlyMode(v);const $=R.model.document,z=R.editing.view.document;return $.on("change:data",re=>{this.props.onChange&&this.props.onChange(re,R)}),z.on("focus",re=>{this.props.onFocus&&this.props.onFocus(re,R)}),z.on("blur",re=>{this.props.onBlur&&this.props.onBlur(re,R)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(R)}),R})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(x=>{setTimeout(async()=>this.watchdog?(await this.watchdog.destroy(),this.watchdog=null,x()):this.instance?(await this.instance.destroy(),this.instance=null,x()):void x())})}_shouldUpdateEditor(x){return this.props.data!==x.data&&this.editor.data.get()!==x.data}_getConfig(){const x=this.props.config||{};return this.props.data&&x.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...x,initialData:x.initialData||this.props.data||""}}}w.contextType=g,w.propTypes={editor:h().func.isRequired,data:h().string,config:h().object,disableWatchdog:h().bool,watchdogConfig:h().object,onChange:h().func,onReady:h().func,onFocus:h().func,onBlur:h().func,onError:h().func,disabled:h().bool,id:h().any},w._EditorWatchdog=p.EditorWatchdog;class b{constructor(x){this._contextWatchdog=x,this._id=function(){const A=4294967296*Math.random()>>>0,R=4294967296*Math.random()>>>0,$=4294967296*Math.random()>>>0,z=4294967296*Math.random()>>>0;return"e"+f[255&A]+f[A>>8&255]+f[A>>16&255]+f[A>>24&255]+f[255&R]+f[R>>8&255]+f[R>>16&255]+f[R>>24&255]+f[255&$]+f[$>>8&255]+f[$>>16&255]+f[$>>24&255]+f[255&z]+f[z>>8&255]+f[z>>16&255]+f[z>>24&255]}()}setCreator(x){this._creator=x}create(x,A){return this._contextWatchdog.add({sourceElementOrData:x,config:A,creator:this._creator,id:this._id,type:"editor"})}on(x,A){this._contextWatchdog.on("itemError",(R,{itemId:$,error:z})=>{$===this._id&&A(null,{error:z,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}const k="Lock from React integration (@ckeditor/ckeditor5-react)",S=({editor:E})=>{const x=(0,c.useRef)(null);return(0,c.useEffect)(()=>{const A=x.current;if(!E||!A)return;const R=E.ui.view.toolbar.element;return A&&A.appendChild(R),()=>{A&&A.removeChild(R)}},[E&&E.id]),u().createElement("div",{ref:x})},C=E=>{const x=(0,c.useRef)(null),A=(0,c.useRef)(null),R=(0,c.useContext)(g),[$,z]=(0,c.useState)(null),[re,Y]=(0,c.useState)(E.data),[ne,ue]=(0,c.useState)(E.rootsAttributes||{}),[de,D]=(0,c.useState)([]),M=(0,c.useRef)(!0);(0,c.useEffect)(()=>((async()=>(await A.current,E.isLayoutReady!==!1&&await ae()))(),()=>{ke().then(()=>{A.current=null})}),[E.isLayoutReady]),(0,c.useEffect)(()=>{$&&(E.disabled?$.enableReadOnlyMode(k):$.disableReadOnlyMode(k))},[E.disabled]),(0,c.useEffect)(()=>{if($&&!A.current){const se=$.getFullData();Y({...se}),ue({...$.getRootsAttributes()}),D([...Object.keys(se).map(Me=>G($,Me))])}},[$&&$.id]);const H=()=>{const se=E.config||{};return E.data&&se.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),{...se,rootsAttributes:ne}},G=(se,Me)=>u().createElement("div",{id:Me,key:Me,ref:be=>{if(be){const _e=se.ui.view.createEditable(Me,be);se.ui.addEditable(_e),se.editing.view.forceRender()}}}),q=(se,Me)=>E.editor.create(se,Me).then(be=>{E.disabled&&E.disabled&&be.enableReadOnlyMode(k);const _e=be.model.document,_t=be.editing.view.document;return _e.on("change:data",Jt=>((an,Bt)=>{const Ot=an.model.document;if(!E.disableTwoWayDataBinding){const At={},kt={};Ot.differ.getChanges().forEach(Te=>{let et;if(et=Te.type=="insert"||Te.type=="remove"?Te.position.root:Te.range.root,!et.isAttached())return;const{rootName:bn}=et;At[bn]=an.getData({rootName:bn})}),Ot.differ.getChangedRoots().forEach(Te=>{if(Te.state)return void(At[Te.name]!==void 0&&delete At[Te.name]);const et=Te.name;kt[et]=an.getRootAttributes(et)}),Object.keys(At).length&&Y(Te=>({...Te,...At})),Object.keys(kt).length&&ue(Te=>({...Te,...kt}))}E.onChange&&E.onChange(Bt,an)})(be,Jt)),be.on("addRoot",(Jt,an)=>((Bt,Ot,At)=>{const kt=At.rootName,Te=G(Bt,kt);E.disableTwoWayDataBinding||(Y(et=>({...et,[kt]:Bt.getData({rootName:kt})})),ue(et=>({...et,[kt]:Bt.getRootAttributes(kt)}))),D(et=>[...et,Te])})(be,0,an)),be.on("detachRoot",(Jt,an)=>((Bt,Ot,At)=>{const kt=At.rootName;D(Te=>Te.filter(et=>et.props.id!==kt)),E.disableTwoWayDataBinding||(Y(Te=>{const{[kt]:et,...bn}=Te;return{...bn}}),ue(Te=>{const{[kt]:et,...bn}=Te;return{...bn}})),Bt.detachEditable(At)})(be,0,an)),_t.on("focus",Jt=>{E.onFocus&&E.onFocus(Jt,be)}),_t.on("blur",Jt=>{E.onBlur&&E.onBlur(Jt,be)}),z(be),E.onReady&&E.onReady(be),be}),ke=async()=>{z(null),Y({}),ue({}),D([]),A.current=new Promise(se=>{setTimeout(async()=>x.current?(await x.current.destroy(),x.current=null,se()):$?(await $.destroy(),se()):void se())})},ae=async()=>{if(E.disableWatchdog)return void await q(E.data,H());if(x.current)return;R instanceof p.ContextWatchdog?x.current=new b(R):x.current=new p.EditorWatchdog(E.editor,E.watchdogConfig);const se=x.current;se.setCreator((Me,be)=>q(Me,be)),se.on("error",(Me,{error:be,causesRestart:_e})=>{(E.onError||console.error)(be,{phase:"runtime",willEditorRestart:_e})}),await se.create(re,H()).catch(Me=>{(E.onError||console.error)(Me,{phase:"initialization",willEditorRestart:!1})})};(0,c.useEffect)(()=>{if($&&M.current){M.current=!1;const se=Object.keys(re),Me=Object.keys(ne);if(!se.every(Ot=>Me.includes(Ot)))throw new Error("`data` and `attributes` objects must have the same keys (roots).");const be=$.getFullData(),_e=$.getRootsAttributes(),{addedKeys:_t,removedKeys:Jt}=Xe(be,re||{}),an=se.some(Ot=>be[Ot]!==void 0&&JSON.stringify(be[Ot])!==JSON.stringify(re[Ot])),Bt=Me.filter(Ot=>JSON.stringify(_e[Ot])!==JSON.stringify(ne[Ot]));$.model.change(Ot=>{fe(_t),Pt(Jt),an&&on(),Bt.length&&gt(Ot,Bt)})}},[re,ne]);const Xe=(se,Me)=>{const be=Object.keys(se),_e=Object.keys(Me);return{addedKeys:_e.filter(_t=>!be.includes(_t)),removedKeys:be.filter(_t=>!_e.includes(_t))}},fe=se=>{se.forEach(Me=>{$.addRoot(Me,{data:re[Me]||"",attributes:(ne==null?void 0:ne[Me])||{},isUndoable:!0})})},Pt=se=>{se.forEach(Me=>{$.detachRoot(Me,!0)})},on=()=>{$.data.set(re,{suppressErrorInCollaboration:!0})},gt=(se,Me)=>{Me.forEach(be=>{Object.keys(ne[be]).forEach(_e=>{$.registerRootAttribute(_e)}),se.clearAttributes($.model.document.getRoot(be)),se.setAttributes(ne[be],$.model.document.getRoot(be))})},yn=(0,c.useCallback)(se=>{M.current=!0,Y(se)},[Y]),sr=(0,c.useCallback)(se=>{M.current=!0,ue(se)},[ue]);return{editor:$,editableElements:de,toolbarElement:u().createElement(S,{editor:$}),data:re,setData:yn,attributes:ne,setAttributes:sr}}})(),l})())})(FR);var x8=FR.exports;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function F0({emitter:t,activator:e,callback:n,contextElements:r}){t.listenTo(document,"mousedown",(i,s)=>{if(!e())return;const o=typeof s.composedPath=="function"?s.composedPath():[],a=typeof r=="function"?r():r;for(const l of a)if(l.contains(s.target)||o.includes(l))return;n()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function S8(t){class e extends t{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...r){super(...r),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tk({view:t}){t.listenTo(t.element,"submit",(e,n)=>{n.preventDefault(),t.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function T8({keystrokeHandler:t,focusTracker:e,gridItems:n,numberOfColumns:r,uiLanguageDirection:i}){const s=typeof r=="number"?()=>r:r;t.set("arrowright",o((c,u)=>i==="rtl"?l(c,u.length):a(c,u.length))),t.set("arrowleft",o((c,u)=>i==="rtl"?a(c,u.length):l(c,u.length))),t.set("arrowup",o((c,u)=>{let d=c-s();return d<0&&(d=c+s()*Math.floor(u.length/s()),d>u.length-1&&(d-=s())),d})),t.set("arrowdown",o((c,u)=>{let d=c+s();return d>u.length-1&&(d=c%s()),d}));function o(c){return u=>{const d=n.find(p=>p.element===e.focusedElement),h=n.getIndex(d),f=c(h,n);n.get(f).focus(),u.stopPropagation(),u.preventDefault()}}function a(c,u){return c===u-1?0:c+1}function l(c,u){return c===0?u-1:c-1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gse(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const ba=gse(),me={isMac:P8(ba),isWindows:wse(ba),isGecko:vse(ba),isSafari:yse(ba),isiOS:bse(ba),isAndroid:_se(ba),isBlink:kse(ba),features:{isRegExpUnicodePropertySupported:Ese()}};function P8(t){return t.indexOf("macintosh")>-1}function wse(t){return t.indexOf("windows")>-1}function vse(t){return!!t.match(/gecko\/\d+/)}function yse(t){return t.indexOf(" applewebkit/")>-1&&t.indexOf("chrome")===-1}function bse(t){return!!t.match(/iphone|ipad/i)||P8(t)&&navigator.maxTouchPoints>0}function _se(t){return t.indexOf("android")>-1}function kse(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}function Ese(){let t=!1;try{t="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function A8(t,e,n,r){n=n||function(l,c){return l===c};const i=Array.isArray(t)?t:Array.prototype.slice.call(t),s=Array.isArray(e)?e:Array.prototype.slice.call(e),o=Cse(i,s,n);return r?Sse(o,s.length):xse(s,o)}function Cse(t,e,n){const r=CS(t,e,n);if(r===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const i=xS(t,r),s=xS(e,r),o=CS(i,s,n),a=t.length-o,l=e.length-o;return{firstIndex:r,lastIndexOld:a,lastIndexNew:l}}function CS(t,e,n){for(let r=0;r<Math.max(t.length,e.length);r++)if(t[r]===void 0||e[r]===void 0||!n(t[r],e[r]))return r;return-1}function xS(t,e){return t.slice(e).reverse()}function xse(t,e){const n=[],{firstIndex:r,lastIndexOld:i,lastIndexNew:s}=e;return s-r>0&&n.push({index:r,type:"insert",values:t.slice(r,s)}),i-r>0&&n.push({index:r+(s-r),type:"delete",howMany:i-r}),n}function Sse(t,e){const{firstIndex:n,lastIndexOld:r,lastIndexNew:i}=t;if(n===-1)return Array(e).fill("equal");let s=[];return n>0&&(s=s.concat(Array(n).fill("equal"))),i-n>0&&(s=s.concat(Array(i-n).fill("insert"))),r-n>0&&(s=s.concat(Array(r-n).fill("delete"))),i<e&&(s=s.concat(Array(e-i).fill("equal"))),s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _d(t,e,n){n=n||function(g,_){return g===_};const r=t.length,i=e.length;if(r>200||i>200||r+i>300)return _d.fastDiff(t,e,n,!0);let s,o;if(i<r){const g=t;t=e,e=g,s="delete",o="insert"}else s="insert",o="delete";const a=t.length,l=e.length,c=l-a,u={},d={};function h(g){const _=(d[g-1]!==void 0?d[g-1]:-1)+1,v=d[g+1]!==void 0?d[g+1]:-1,w=_>v?-1:1;u[g+w]&&(u[g]=u[g+w].slice(0)),u[g]||(u[g]=[]),u[g].push(_>v?s:o);let b=Math.max(_,v),k=b-g;for(;k<a&&b<l&&n(t[k],e[b]);)k++,b++,u[g].push("equal");return b}let f=0,p;do{for(p=-f;p<c;p++)d[p]=h(p);for(p=c+f;p>c;p--)d[p]=h(p);d[c]=h(c),f++}while(d[c]!==l);return u[c].slice(1)}_d.fastDiff=A8;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function SS(){return function t(){t.called=!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class io{constructor(e,n){this.source=e,this.name=n,this.path=[],this.stop=SS(),this.off=SS()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const En=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function ti(){const t=Math.random()*4294967296>>>0,e=Math.random()*4294967296>>>0,n=Math.random()*4294967296>>>0,r=Math.random()*4294967296>>>0;return"e"+En[t>>0&255]+En[t>>8&255]+En[t>>16&255]+En[t>>24&255]+En[e>>0&255]+En[e>>8&255]+En[e>>16&255]+En[e>>24&255]+En[n>>0&255]+En[n>>8&255]+En[n>>16&255]+En[n>>24&255]+En[r>>0&255]+En[r>>8&255]+En[r>>16&255]+En[r>>24&255]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ea={get(t="normal"){return typeof t!="number"?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tse(t,e){const n=ea.get(e.priority);for(let r=0;r<t.length;r++)if(ea.get(t[r].priority)<n){t.splice(r,0,e);return}t.push(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pse="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class T extends Error{constructor(e,n,r){super(Ase(e,r)),this.name="CKEditorError",this.context=n,this.data=r}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,n){if(e.is&&e.is("CKEditorError"))throw e;const r=new T(e.message,n);throw r.stack=e.stack,r}}function Ie(t,e){console.warn(...R8(t,e))}function Wy(t,e){console.error(...R8(t,e))}function I8(t){return`
Read more: ${Pse}#error-${t}`}function Ase(t,e){const n=new WeakSet,i=e?` ${JSON.stringify(e,(o,a)=>{if(typeof a=="object"&&a!==null){if(n.has(a))return`[object ${a.constructor.name}]`;n.add(a)}return a})}`:"",s=I8(t);return t+i+s}function R8(t,e){const n=I8(t);return e?[t,e,n]:[t,n]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ise="41.3.1",Rse=new Date(2024,3,16);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new T("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Ise;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zl=Symbol("listeningTo"),jy=Symbol("emitterId"),bs=Symbol("delegations"),O8=qe(Object);function qe(t){if(!t)return O8;class e extends t{on(r,i,s){this.listenTo(this,r,i,s)}once(r,i,s){let o=!1;const a=(l,...c)=>{o||(o=!0,l.off(),i.call(this,l,...c))};this.listenTo(this,r,a,s)}off(r,i){this.stopListening(this,r,i)}listenTo(r,i,s,o={}){let a,l;this[zl]||(this[zl]={});const c=this[zl];Cw(r)||M8(r);const u=Cw(r);(a=c[u])||(a=c[u]={emitter:r,callbacks:{}}),(l=a.callbacks[i])||(l=a.callbacks[i]=[]),l.push(s),Dse(this,r,i,s,o)}stopListening(r,i,s){const o=this[zl];let a=r&&Cw(r);const l=o&&a?o[a]:void 0,c=l&&i?l.callbacks[i]:void 0;if(!(!o||r&&!l||i&&!c))if(s)xw(this,r,i,s),c.indexOf(s)!==-1&&(c.length===1?delete l.callbacks[i]:xw(this,r,i,s));else if(c){for(;s=c.pop();)xw(this,r,i,s);delete l.callbacks[i]}else if(l){for(i in l.callbacks)this.stopListening(r,i);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[zl]}}fire(r,...i){try{const s=r instanceof io?r:new io(this,r),o=s.name;let a=D8(this,o);if(s.path.push(this),a){const c=[s,...i];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),s.off.called&&(delete s.off.called,this._removeEventListener(o,a[u].callback)),!s.stop.called);u++);}const l=this[bs];if(l){const c=l.get(o),u=l.get("*");c&&TS(c,s,i),u&&TS(u,s,i)}return s.return}catch(s){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(s,this)}}delegate(...r){return{to:(i,s)=>{this[bs]||(this[bs]=new Map),r.forEach(o=>{const a=this[bs].get(o);a?a.set(i,s):this[bs].set(o,new Map([[i,s]]))})}}}stopDelegating(r,i){if(this[bs])if(!r)this[bs].clear();else if(!i)this[bs].delete(r);else{const s=this[bs].get(r);s&&s.delete(i)}}_addEventListener(r,i,s){Nse(this,r);const o=Gy(this,r),a=ea.get(s.priority),l={callback:i,priority:a};for(const c of o)Tse(c,l)}_removeEventListener(r,i){const s=Gy(this,r);for(const o of s)for(let a=0;a<o.length;a++)o[a].callback==i&&(o.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{qe[t]=O8.prototype[t]});function Ose(t,e){const n=t[zl];return n&&n[e]?n[e].emitter:null}function M8(t,e){t[jy]||(t[jy]=e||ti())}function Cw(t){return t[jy]}function N8(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Mse(){return{callbacks:[],childEvents:[]}}function Nse(t,e){const n=N8(t);if(n[e])return;let r=e,i=null;const s=[];for(;r!==""&&!n[r];)n[r]=Mse(),s.push(n[r]),i&&n[r].childEvents.push(i),i=r,r=r.substr(0,r.lastIndexOf(":"));if(r!==""){for(const o of s)o.callbacks=n[r].callbacks.slice();n[r].childEvents.push(i)}}function Gy(t,e){const n=N8(t)[e];if(!n)return[];let r=[n.callbacks];for(let i=0;i<n.childEvents.length;i++){const s=Gy(t,n.childEvents[i]);r=r.concat(s)}return r}function D8(t,e){let n;return!t._events||!(n=t._events[e])||!n.callbacks.length?e.indexOf(":")>-1?D8(t,e.substr(0,e.lastIndexOf(":"))):null:n.callbacks}function TS(t,e,n){for(let[r,i]of t){i?typeof i=="function"&&(i=i(e.name)):i=e.name;const s=new io(e.source,i);s.path=[...e.path],r.fire(s,...n)}}function Dse(t,e,n,r,i){e._addEventListener?e._addEventListener(n,r,i):t._addEventListener.call(e,n,r,i)}function xw(t,e,n,r){e._removeEventListener?e._removeEventListener(n,r):t._removeEventListener.call(e,n,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const og=Symbol("observableProperties"),V0=Symbol("boundObservables"),ag=Symbol("boundProperties"),Ml=Symbol("decoratedMethods"),PS=Symbol("decoratedOriginal"),L8=Ue(qe());function Ue(t){if(!t)return L8;class e extends t{set(r,i){if(ft(r)){Object.keys(r).forEach(o=>{this.set(o,r[o])},this);return}Sw(this);const s=this[og];if(r in this&&!s.has(r))throw new T("observable-set-cannot-override",this);Object.defineProperty(this,r,{enumerable:!0,configurable:!0,get(){return s.get(r)},set(o){const a=s.get(r);let l=this.fire(`set:${r}`,r,o,a);l===void 0&&(l=o),(a!==l||!s.has(r))&&(s.set(r,l),this.fire(`change:${r}`,r,l,a))}}),this[r]=i}bind(...r){if(!r.length||!AS(r))throw new T("observable-bind-wrong-properties",this);if(new Set(r).size!==r.length)throw new T("observable-bind-duplicate-properties",this);Sw(this);const i=this[ag];r.forEach(o=>{if(i.has(o))throw new T("observable-bind-rebind",this)});const s=new Map;return r.forEach(o=>{const a={property:o,to:[]};i.set(o,a),s.set(o,a)}),{to:Lse,toMany:$se,_observable:this,_bindProperties:r,_to:[],_bindings:s}}unbind(...r){if(!this[og])return;const i=this[ag],s=this[V0];if(r.length){if(!AS(r))throw new T("observable-unbind-wrong-properties",this);r.forEach(o=>{const a=i.get(o);a&&(a.to.forEach(([l,c])=>{const u=s.get(l),d=u[c];d.delete(a),d.size||delete u[c],Object.keys(u).length||(s.delete(l),this.stopListening(l,"change"))}),i.delete(o))})}else s.forEach((o,a)=>{this.stopListening(a,"change")}),s.clear(),i.clear()}decorate(r){Sw(this);const i=this[r];if(!i)throw new T("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:r});this.on(r,(s,o)=>{s.return=i.apply(this,o)}),this[r]=function(...s){return this.fire(r,s)},this[r][PS]=i,this[Ml]||(this[Ml]=[]),this[Ml].push(r)}stopListening(r,i,s){if(!r&&this[Ml]){for(const o of this[Ml])this[o]=this[o][PS];delete this[Ml]}super.stopListening(r,i,s)}}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Ue[t]=L8.prototype[t]});function Sw(t){t[og]||(Object.defineProperty(t,og,{value:new Map}),Object.defineProperty(t,V0,{value:new Map}),Object.defineProperty(t,ag,{value:new Map}))}function Lse(...t){const e=Vse(...t),n=Array.from(this._bindings.keys()),r=n.length;if(!e.callback&&e.to.length>1)throw new T("observable-bind-to-no-callback",this);if(r>1&&e.callback)throw new T("observable-bind-to-extra-callback",this);e.to.forEach(i=>{if(i.properties.length&&i.properties.length!==r)throw new T("observable-bind-to-properties-length",this);i.properties.length||(i.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(n[0]).callback=e.callback),zse(this._observable,this._to),Use(this),this._bindProperties.forEach(i=>{$8(this._observable,i)})}function $se(t,e,n){if(this._bindings.size>1)throw new T("observable-bind-to-many-not-one-binding",this);this.to(...Fse(t,e),n)}function Fse(t,e){const n=t.map(r=>[r,e]);return Array.prototype.concat.apply([],n)}function AS(t){return t.every(e=>typeof e=="string")}function Vse(...t){if(!t.length)throw new T("observable-bind-to-parse-error",null);const e={to:[]};let n;return typeof t[t.length-1]=="function"&&(e.callback=t.pop()),t.forEach(r=>{if(typeof r=="string")n.properties.push(r);else if(typeof r=="object")n={observable:r,properties:[]},e.to.push(n);else throw new T("observable-bind-to-parse-error",null)}),e}function Bse(t,e,n,r){const i=t[V0],s=i.get(n),o=s||{};o[r]||(o[r]=new Set),o[r].add(e),s||i.set(n,o)}function Use(t){let e;t._bindings.forEach((n,r)=>{t._to.forEach(i=>{e=i.properties[n.callback?0:t._bindProperties.indexOf(r)],n.to.push([i.observable,e]),Bse(t._observable,n,i.observable,e)})})}function $8(t,e){const r=t[ag].get(e);let i;r.callback?i=r.callback.apply(t,r.to.map(s=>s[0][s[1]])):(i=r.to[0],i=i[0][i[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=i:t.set(e,i)}function zse(t,e){e.forEach(n=>{const r=t[V0];let i;r.get(n.observable)||t.listenTo(n.observable,"change",(s,o)=>{i=r.get(n.observable)[o],i&&i.forEach(a=>{$8(t,a.property)})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hse{constructor(){this._replacedElements=[]}replace(e,n){this._replacedElements.push({element:e,newElement:n}),e.style.display="none",n&&e.parentNode.insertBefore(n,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:n})=>{e.style.display="",n&&n.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Wse(t){let e=new AbortController;function n(...r){return e.abort(),e=new AbortController,t(e.signal,...r)}return n.abort=()=>e.abort(),n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qy(t){let e=0;for(const n of t)e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function xn(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++)if(t[r]!=e[r])return r;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Tr(t){return!!(t&&t[Symbol.iterator])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cr(t,e,n={},r=[]){const i=n&&n.xmlns,s=i?t.createElementNS(i,e):t.createElement(e);for(const o in n)s.setAttribute(o,n[o]);(kS(r)||!Tr(r))&&(r=[r]);for(let o of r)kS(o)&&(o=t.createTextNode(o)),s.appendChild(o);return s}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class F8{constructor(e,n){this._config={},n&&this.define(IS(n)),e&&this._setObjectToTarget(this._config,e)}set(e,n){this._setToTarget(this._config,e,n)}define(e,n){this._setToTarget(this._config,e,n,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,n,r,i=!1){if(hr(n)){this._setObjectToTarget(e,n,i);return}const s=n.split(".");n=s.pop();for(const o of s)hr(e[o])||(e[o]={}),e=e[o];if(hr(r)){hr(e[n])||(e[n]={}),e=e[n],this._setObjectToTarget(e,r,i);return}i&&typeof e[n]<"u"||(e[n]=r)}_getFromSource(e,n){const r=n.split(".");n=r.pop();for(const i of r){if(!hr(e[i])){e=null;break}e=e[i]}return e?IS(e[n]):void 0}_setObjectToTarget(e,n,r){Object.keys(n).forEach(i=>{this._setToTarget(e,i,n[i],r)})}}function IS(t){return X2(t,jse)}function jse(t){return ll(t)||typeof t=="function"?t:void 0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ca(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function lg(t){const e=Object.prototype.toString.apply(t);return e=="[object Window]"||e=="[object global]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const V8=Mr(qe());function Mr(t){if(!t)return V8;class e extends t{listenTo(r,i,s,o={}){if(ca(r)||lg(r)){const a={capture:!!o.useCapture,passive:!!o.usePassive},l=this._getProxyEmitter(r,a)||new Gse(r,a);this.listenTo(l,i,s,o)}else super.listenTo(r,i,s,o)}stopListening(r,i,s){if(ca(r)||lg(r)){const o=this._getAllProxyEmitters(r);for(const a of o)this.stopListening(a,i,s)}else super.stopListening(r,i,s)}_getProxyEmitter(r,i){return Ose(this,B8(r,i))}_getAllProxyEmitters(r){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(i=>this._getProxyEmitter(r,i)).filter(i=>!!i)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(t=>{Mr[t]=V8.prototype[t]});class Gse extends qe(){constructor(e,n){super(),M8(this,B8(e,n)),this._domNode=e,this._options=n}attach(e){if(this._domListeners&&this._domListeners[e])return;const n=this._createDomListener(e);this._domNode.addEventListener(e,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=n}detach(e){let n;this._domListeners[e]&&(!(n=this._events[e])||!n.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,n,r){this.attach(e),qe().prototype._addEventListener.call(this,e,n,r)}_removeEventListener(e,n){qe().prototype._removeEventListener.call(this,e,n),this.detach(e)}_createDomListener(e){const n=r=>{this.fire(e,r)};return n.removeListener=()=>{this._domNode.removeEventListener(e,n,this._options),delete this._domListeners[e]},n}}function qse(t){return t["data-ck-expando"]||(t["data-ck-expando"]=ti())}function B8(t,e){let n=qse(t);for(const r of Object.keys(e).sort())e[r]&&(n+="-"+r);return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Yy;try{Yy={window,document}}catch{/* istanbul ignore next -- @preserve */Yy={window:{},document:{}}}const Q=Yy;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Yse(t){const e=[];let n=t;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)e.unshift(n),n=n.parentNode;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Kse(t){return t instanceof HTMLTextAreaElement?t.value:t.innerHTML}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function U8(t){const e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Ut(t){return Object.prototype.toString.call(t)=="[object Text]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function B0(t){return Object.prototype.toString.apply(t)=="[object Range]"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function z8(t){return!t||!t.parentNode||t.offsetParent===Q.document.body?null:t.offsetParent}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const H8=["top","right","bottom","left","width","height"];class ge{constructor(e){const n=B0(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),Ky(e)||n)if(n){const r=ge.getDomRangeRects(e);em(this,ge.getBoundingRect(r))}else em(this,e.getBoundingClientRect());else if(lg(e)){const{innerWidth:r,innerHeight:i}=e;em(this,{top:0,right:r,bottom:i,left:0,width:r,height:i})}else em(this,e)}clone(){return new ge(this)}moveTo(e,n){return this.top=n,this.right=e+this.width,this.bottom=n+this.height,this.left=e,this}moveBy(e,n){return this.top+=n,this.right+=e,this.left+=e,this.bottom+=n,this}getIntersection(e){const n={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0)return null;{const r=new ge(n);return r._source=this._source,r}}getIntersectionArea(e){const n=this.getIntersection(e);return n?n.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let n=this.clone();if(RS(e))return n;let r=e,i=e.parentNode||e.commonAncestorContainer,s;for(;i&&!RS(i);){const o=Zse(i)==="visible";r instanceof HTMLElement&&OS(r)==="absolute"&&(s=r);const a=OS(i);if(o||s&&(a==="relative"&&o||a!=="relative")){r=i,i=i.parentNode;continue}const l=new ge(i),c=n.getIntersection(l);if(c)c.getArea()<n.getArea()&&(n=c);else return null;r=i,i=i.parentNode}return n}isEqual(e){for(const n of H8)if(this[n]!==e[n])return!1;return!0}contains(e){const n=this.getIntersection(e);return!!(n&&n.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:n}=Q.window,r=this.clone().moveBy(e,n);if(Ky(r._source)){const i=z8(r._source);i&&Jse(r,i)}return r}excludeScrollbarsAndBorders(){const e=this._source;let n,r,i;if(lg(e))n=e.innerWidth-e.document.documentElement.clientWidth,r=e.innerHeight-e.document.documentElement.clientHeight,i=e.getComputedStyle(e.document.documentElement).direction;else{const s=U8(e);n=e.offsetWidth-e.clientWidth-s.left-s.right,r=e.offsetHeight-e.clientHeight-s.top-s.bottom,i=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=s.left,this.top+=s.top,this.right-=s.right,this.bottom-=s.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=n,i==="ltr"?this.right-=n:this.left+=n,this.height-=r,this.bottom-=r,this}static getDomRangeRects(e){const n=[],r=Array.from(e.getClientRects());if(r.length)for(const i of r)n.push(new ge(i));else{let i=e.startContainer;Ut(i)&&(i=i.parentNode);const s=new ge(i.getBoundingClientRect());s.right=s.left,s.width=0,n.push(s)}return n}static getBoundingRect(e){const n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let r=0;for(const i of e)r++,n.left=Math.min(n.left,i.left),n.top=Math.min(n.top,i.top),n.right=Math.max(n.right,i.right),n.bottom=Math.max(n.bottom,i.bottom);return r==0?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new ge(n))}}function em(t,e){for(const n of H8)t[n]=e[n]}function RS(t){return Ky(t)?t===t.ownerDocument.body:!1}function Ky(t){return t!==null&&typeof t=="object"&&t.nodeType===1&&typeof t.getBoundingClientRect=="function"}function OS(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).position:"static"}function Zse(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).overflow:"visible"}function Jse(t,e){const n=new ge(e),r=U8(e);let i=0,s=0;i-=n.left,s-=n.top,i+=e.scrollLeft,s+=e.scrollTop,i-=r.left,s-=r.top,t.moveBy(i,s)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let tf=class Dt{constructor(e,n){Dt._observerInstance||Dt._createObserver(),this._element=e,this._callback=n,Dt._addElementCallback(e,n),Dt._observerInstance.observe(e)}get element(){return this._element}destroy(){Dt._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,n){Dt._elementCallbacks||(Dt._elementCallbacks=new Map);let r=Dt._elementCallbacks.get(e);r||(r=new Set,Dt._elementCallbacks.set(e,r)),r.add(n)}static _deleteElementCallback(e,n){const r=Dt._getElementCallbacks(e);r&&(r.delete(n),r.size||(Dt._elementCallbacks.delete(e),Dt._observerInstance.unobserve(e))),Dt._elementCallbacks&&!Dt._elementCallbacks.size&&(Dt._observerInstance=null,Dt._elementCallbacks=null)}static _getElementCallbacks(e){return Dt._elementCallbacks?Dt._elementCallbacks.get(e):null}static _createObserver(){Dt._observerInstance=new Q.window.ResizeObserver(e=>{for(const n of e){const r=Dt._getElementCallbacks(n.target);if(r)for(const i of r)i(n)}})}};tf._observerInstance=null;tf._elementCallbacks=null;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function MS(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mu(t){return e=>e+t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function tm(t){let e=0;for(;t.previousSibling;)t=t.previousSibling,e++;return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function W8(t,e,n){t.insertBefore(n,t.childNodes[e]||null)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function kd(t){return t&&t.nodeType===Node.COMMENT_NODE}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Xse(t){try{Q.document.createAttribute(t)}catch{return!1}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function cl(t){return!!(t&&t.getClientRects&&t.getClientRects().length)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function U0({element:t,target:e,positions:n,limiter:r,fitInViewport:i,viewportOffsetConfig:s}){sl(e)&&(e=e()),sl(r)&&(r=r());const o=z8(t),a=Qse(s),l=new ge(t),c=NS(e,a);let u;if(!c||!a.getIntersection(c))return null;const d={targetRect:c,elementRect:l,positionedElementAncestor:o,viewportRect:a};if(!r&&!i)u=new j8(n[0],d);else{if(r){const h=NS(r,a);h&&(d.limiterRect=h)}u=eoe(n,d)}return u}function NS(t,e){const n=new ge(t).getVisible();return n?n.getIntersection(e):null}function Qse(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new ge(Q.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e}function eoe(t,e){const{elementRect:n}=e,r=n.getArea(),i=t.map(a=>new j8(a,e)).filter(a=>!!a.name);let s=0,o=null;for(const a of i){const{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===r)return a;const u=c**2+l**2;u>s&&(s=u,o=a)}return o}class j8{constructor(e,n){const r=e(n.targetRect,n.elementRect,n.viewportRect,n.limiterRect);if(!r)return;const{left:i,top:s,name:o,config:a}=r;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:i,top:s},this._options=n}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function DS(t){const e=t.parentNode;e&&e.removeChild(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function toe({target:t,viewportOffset:e=0,ancestorOffset:n=0,alignToTop:r,forceScroll:i}){const s=nk(t);let o=s,a=null;for(e=ioe(e);o;){let l;o==s?l=LS(t):l=LS(a),roe({parent:l,getRect:()=>$S(t,o),alignToTop:r,ancestorOffset:n,forceScroll:i});const c=$S(t,o);if(noe({window:o,rect:c,viewportOffset:e,alignToTop:r,forceScroll:i}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function noe({window:t,rect:e,alignToTop:n,forceScroll:r,viewportOffset:i}){const s=e.clone().moveBy(0,i.bottom),o=e.clone().moveBy(0,-i.top),a=new ge(t).excludeScrollbarsAndBorders(),l=[o,s],c=n&&r,u=l.every(g=>a.contains(g));let{scrollX:d,scrollY:h}=t;const f=d,p=h;c?h-=a.top-e.top+i.top:u||(q8(o,a)?h-=a.top-e.top+i.top:G8(s,a)&&(n?h+=e.top-a.top-i.top:h+=e.bottom-a.bottom+i.bottom)),u||(Y8(e,a)?d-=a.left-e.left+i.left:K8(e,a)&&(d+=e.right-a.right+i.right)),(d!=f||h!==p)&&t.scrollTo(d,h)}function roe({parent:t,getRect:e,alignToTop:n,forceScroll:r,ancestorOffset:i=0,limiterElement:s}){const o=nk(t),a=n&&r;let l,c,u;const d=s||o.document.body;for(;t!=d;)c=e(),l=new ge(t).excludeScrollbarsAndBorders(),u=l.contains(c),a?t.scrollTop-=l.top-c.top+i:u||(q8(c,l)?t.scrollTop-=l.top-c.top+i:G8(c,l)&&(n?t.scrollTop+=c.top-l.top-i:t.scrollTop+=c.bottom-l.bottom+i)),u||(Y8(c,l)?t.scrollLeft-=l.left-c.left+i:K8(c,l)&&(t.scrollLeft+=c.right-l.right+i)),t=t.parentNode}function G8(t,e){return t.bottom>e.bottom}function q8(t,e){return t.top<e.top}function Y8(t,e){return t.left<e.left}function K8(t,e){return t.right>e.right}function nk(t){return B0(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function LS(t){if(B0(t)){let e=t.commonAncestorContainer;return Ut(e)&&(e=e.parentNode),e}else return t.parentNode}function $S(t,e){const n=nk(t),r=new ge(t);if(n===e)return r;{let i=n;for(;i!=e;){const s=i.frameElement,o=new ge(s).excludeScrollbarsAndBorders();r.moveBy(o.left,o.top),i=i.parent}}return r}function ioe(t){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const soe={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},ooe={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},FS={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},Ae=doe(),aoe=Object.fromEntries(Object.entries(Ae).map(([t,e])=>{let n;return e in FS?n=FS[e]:n=t.charAt(0).toUpperCase()+t.slice(1),[e,n]}));function Hc(t){let e;if(typeof t=="string"){if(e=Ae[t.toLowerCase()],!e)throw new T("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?Ae.alt:0)+(t.ctrlKey?Ae.ctrl:0)+(t.shiftKey?Ae.shift:0)+(t.metaKey?Ae.cmd:0);return e}function nf(t){return typeof t=="string"&&(t=hoe(t)),t.map(e=>typeof e=="string"?coe(e):e).reduce((e,n)=>n+e,0)}function cg(t){let e=nf(t);return Object.entries(me.isMac||me.isiOS?soe:ooe).reduce((i,[s,o])=>(e&Ae[s]&&(e&=~Ae[s],i+=o),i),"")+(e?aoe[e]:"")}function loe(t){return t==Ae.arrowright||t==Ae.arrowleft||t==Ae.arrowup||t==Ae.arrowdown}function Z8(t,e){const n=e==="ltr";switch(t){case Ae.arrowleft:return n?"left":"right";case Ae.arrowright:return n?"right":"left";case Ae.arrowup:return"up";case Ae.arrowdown:return"down"}}function coe(t){if(t.endsWith("!"))return Hc(t.slice(0,-1));const e=Hc(t);return(me.isMac||me.isiOS)&&e==Ae.ctrl?Ae.cmd:e}function uoe(t,e){const n=Z8(t,e);return n==="down"||n==="right"}function doe(){const t={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const n=String.fromCharCode(e);t[n.toLowerCase()]=e}for(let e=48;e<=57;e++)t[e-48]=e;for(let e=112;e<=123;e++)t["f"+(e-111)]=e;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}function hoe(t){return t.split("+").map(e=>e.trim())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const foe=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function VS(t){return foe.includes(t)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function st(t){return Array.isArray(t)?t:[t]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore else -- @preserve */Q.window.CKEDITOR_TRANSLATIONS||(Q.window.CKEDITOR_TRANSLATIONS={});function moe(t,e,n=1,r){if(typeof n!="number")throw new T("translation-service-quantity-not-a-number",null,{quantity:n});const i=r||Q.window.CKEDITOR_TRANSLATIONS,s=woe(i);s===1&&(t=Object.keys(i)[0]);const o=e.id||e.string;if(s===0||!goe(t,o,i))return n!==1?e.plural:e.string;const a=i[t].dictionary,l=i[t].getPluralForm||(d=>d===1?0:1),c=a[o];if(typeof c=="string")return c;const u=Number(l(n));return c[u]}function poe(t){return Array.isArray(t)?t.reduce((e,n)=>Q2(e,n)):t}function goe(t,e,n){return!!n[t]&&!!n[t].dictionary[e]}function woe(t){return Object.keys(t).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let voe=class{constructor({uiLanguage:e="en",contentLanguage:n,translations:r}={}){this.uiLanguage=e,this.contentLanguage=n||this.uiLanguage,this.uiLanguageDirection=VS(this.uiLanguage),this.contentLanguageDirection=VS(this.contentLanguage),this.translations=poe(r),this.t=(i,s)=>this._t(i,s)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,n=[]){n=st(n),typeof e=="string"&&(e={string:e});const i=!!e.plural?n[0]:1,s=moe(this.uiLanguage,e,i,this.translations);return yoe(s,n)}};function yoe(t,e){return t.replace(/%(\d+)/g,(n,r)=>r<e.length?e[r]:n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Nr extends qe(){constructor(e={},n={}){super();const r=Tr(e);if(r||(n=e),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],r)for(const i of e)this._items.push(i),this._itemMap.set(this._getItemIdBeforeAdding(i),i)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,n){return this.addMany([e],n)}addMany(e,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new T("collection-add-item-invalid-index",this);let r=0;for(const i of e){const s=this._getItemIdBeforeAdding(i),o=n+r;this._items.splice(o,0,i),this._itemMap.set(s,i),this.fire("add",i,o),r++}return this.fire("change",{added:e,removed:[],index:n}),this}get(e){let n;if(typeof e=="string")n=this._itemMap.get(e);else if(typeof e=="number")n=this._items[e];else throw new T("collection-get-invalid-arg",this);return n||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const n=this._idProperty,r=e[n];return r&&this._itemMap.has(r)}}getIndex(e){let n;return typeof e=="string"?n=this._itemMap.get(e):n=e,n?this._items.indexOf(n):-1}remove(e){const[n,r]=this._remove(e);return this.fire("change",{added:[],removed:[n],index:r}),n}map(e,n){return this._items.map(e,n)}forEach(e,n){this._items.forEach(e,n)}find(e,n){return this._items.find(e,n)}filter(e,n){return this._items.filter(e,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new T("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:n=>{this._setUpBindToBinding(r=>new n(r))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(r=>r[n])}}}_setUpBindToBinding(e){const n=this._bindToCollection,r=(i,s,o)=>{const a=n._bindToCollection==this,l=n._bindToInternalToExternalMap.get(s);if(a&&l)this._bindToExternalToInternalMap.set(s,l),this._bindToInternalToExternalMap.set(l,s);else{const c=e(s);if(!c){this._skippedIndexesFromExternal.push(o);return}let u=o;for(const d of this._skippedIndexesFromExternal)o>d&&u--;for(const d of n._skippedIndexesFromExternal)u>=d&&u++;this._bindToExternalToInternalMap.set(s,c),this._bindToInternalToExternalMap.set(c,s),this.add(c,u);for(let d=0;d<n._skippedIndexesFromExternal.length;d++)u<=n._skippedIndexesFromExternal[d]&&n._skippedIndexesFromExternal[d]++}};for(const i of n)r(null,i,n.getIndex(i));this.listenTo(n,"add",r),this.listenTo(n,"remove",(i,s,o)=>{const a=this._bindToExternalToInternalMap.get(s);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(o<c&&l.push(c-1),o>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){const n=this._idProperty;let r;if(n in e){if(r=e[n],typeof r!="string")throw new T("collection-add-invalid-id",this);if(this.get(r))throw new T("collection-add-item-already-exists",this)}else e[n]=r=ti();return r}_remove(e){let n,r,i,s=!1;const o=this._idProperty;if(typeof e=="string"?(r=e,i=this._itemMap.get(r),s=!i,i&&(n=this._items.indexOf(i))):typeof e=="number"?(n=e,i=this._items[n],s=!i,i&&(r=i[o])):(i=e,r=i[o],n=this._items.indexOf(i),s=n==-1||!this._itemMap.get(r)),s)throw new T("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(r);const a=this._bindToInternalToExternalMap.get(i);return this._bindToInternalToExternalMap.delete(i),this._bindToExternalToInternalMap.delete(a),this.fire("remove",i,n),[i,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function vn(t){const e=t.next();return e.done?null:e.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jt extends Mr(Ue()){constructor(){super(),this._elements=new Set,this._nextEventLoopTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}add(e){if(this._elements.has(e))throw new T("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>this._focus(e),{useCapture:!0}),this.listenTo(e,"blur",()=>this._blur(),{useCapture:!0}),this._elements.add(e)}remove(e){e===this.focusedElement&&this._blur(),this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e))}destroy(){this.stopListening()}_focus(e){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=e,this.isFocused=!0}_blur(){clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wn{constructor(){this._listener=new(Mr())}listenTo(e){this._listener.listenTo(e,"keydown",(n,r)=>{this._listener.fire("_keydown:"+Hc(r),r)})}set(e,n,r={}){const i=nf(e),s=r.priority;this._listener.listenTo(this._listener,"_keydown:"+i,(o,a)=>{n(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0},{priority:s})}press(e){return!!this._listener.fire("_keydown:"+Hc(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function boe(t){const e=new Map;for(const n in t)e.set(n,t[n]);return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ss(t){return Tr(t)?new Map(t):boe(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _oe(t,e={}){return new Promise((n,r)=>{const i=e.signal||new AbortController().signal;i.throwIfAborted();const s=setTimeout(o,t);i.addEventListener("abort",a,{once:!0});function o(){i.removeEventListener("abort",a),n()}function a(){clearTimeout(s),r(i.reason)}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */async function koe(t,e={}){const{maxAttempts:n=4,retryDelay:r=Eoe(),signal:i=new AbortController().signal}=e;i.throwIfAborted();for(let s=0;;s++){try{return await t()}catch(o){if(s+1>=n)throw o}await _oe(r(s),{signal:i})}}function Eoe(t={}){const{delay:e=1e3,factor:n=2,maxDelay:r=1e4}=t;return i=>Math.min(n**i*e,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Coe=1e4;function xoe(t,e,n,r){if(Math.max(e.length,t.length)>Coe)return t.slice(0,n).concat(e).concat(t.slice(n+r,t.length));{const i=Array.from(t);return i.splice(n,r,...e),i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function rk(t,e){let n;function r(...i){r.cancel(),n=setTimeout(()=>t(...i),e)}return r.cancel=()=>{clearTimeout(n)},r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Soe(t){function e(d){return d.length>=40&&d.length<=255?"VALID":"INVALID"}if(!t)return"INVALID";let n="";try{n=atob(t)}catch{return"INVALID"}const r=n.split("-"),i=r[0],s=r[1];if(!s)return e(t);try{atob(s)}catch{try{if(atob(i),!atob(i).length)return e(t)}catch{return e(t)}}if(i.length<40||i.length>255)return"INVALID";let o="";try{atob(i),o=atob(s)}catch{return"INVALID"}if(o.length!==8)return"INVALID";const a=Number(o.substring(0,4)),l=Number(o.substring(4,6))-1,c=Number(o.substring(6,8)),u=new Date(a,l,c);return u<Rse||isNaN(Number(u))?"INVALID":"VALID"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Toe(t){return!!t&&t.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(t)}function Poe(t){return!!t&&t.length==1&&/[\ud800-\udbff]/.test(t)}function Aoe(t){return!!t&&t.length==1&&/[\udc00-\udfff]/.test(t)}function ik(t,e){return Poe(t.charAt(e-1))&&Aoe(t.charAt(e))}function sk(t,e){return Toe(t.charAt(e))}const Ioe=Roe();function J8(t,e){const n=String(t).matchAll(Ioe);return Array.from(n).some(r=>r.index<e&&e<r.index+r[0].length)}function Roe(){const t=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,n="(?:"+t.map(i=>i.source).join("|")+")",r=`${e}|${n}(?:‍${n})*`;return new RegExp(r,"ug")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L extends Ue(){constructor(e){super(),this._disableStack=new Set,this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",BS,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",BS),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}}function BS(t){t.return=!1,t.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class He extends Ue(){constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const r=e.model.document.selection,s=!(r.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(r);(e.isReadOnly||this._isEnabledBasedOnSelection&&!s)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",US,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",US),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function US(t){t.return=!1,t.stop()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X8 extends qe(){constructor(e,n=[],r=[]){super(),this._plugins=new Map,this._context=e,this._availablePlugins=new Map;for(const i of n)i.pluginName&&this._availablePlugins.set(i.pluginName,i);this._contextPlugins=new Map;for(const[i,s]of r)this._contextPlugins.set(i,s),this._contextPlugins.set(s,i),i.pluginName&&this._availablePlugins.set(i.pluginName,i)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let r=e;throw typeof e=="function"&&(r=e.pluginName||e.name),new T("plugincollection-plugin-not-loaded",this._context,{plugin:r})}return n}has(e){return this._plugins.has(e)}init(e,n=[],r=[]){const i=this,s=this._context;f(e),g(e);const o=e.filter(C=>!d(C,n)),a=[...p(o)];S(a,r);const l=b(a);return k(l,"init").then(()=>k(l,"afterInit")).then(()=>l);function c(C){return typeof C=="function"}function u(C){return c(C)&&!!C.isContextPlugin}function d(C,E){return E.some(x=>x===C||h(C)===x||h(x)===C)}function h(C){return c(C)?C.pluginName||C.name:C}function f(C,E=new Set){C.forEach(x=>{c(x)&&(E.has(x)||(E.add(x),x.pluginName&&!i._availablePlugins.has(x.pluginName)&&i._availablePlugins.set(x.pluginName,x),x.requires&&f(x.requires,E)))})}function p(C,E=new Set){return C.map(x=>c(x)?x:i._availablePlugins.get(x)).reduce((x,A)=>E.has(A)?x:(E.add(A),A.requires&&(g(A.requires,A),p(A.requires,E).forEach(R=>x.add(R))),x.add(A)),new Set)}function g(C,E=null){C.map(x=>c(x)?x:i._availablePlugins.get(x)||x).forEach(x=>{_(x,E),v(x,E),w(x,E)})}function _(C,E){if(!c(C))throw E?new T("plugincollection-soft-required",s,{missingPlugin:C,requiredBy:h(E)}):new T("plugincollection-plugin-not-found",s,{plugin:C})}function v(C,E){if(u(E)&&!u(C))throw new T("plugincollection-context-required",s,{plugin:h(C),requiredBy:h(E)})}function w(C,E){if(E&&d(C,n))throw new T("plugincollection-required",s,{plugin:h(C),requiredBy:h(E)})}function b(C){return C.map(E=>{let x=i._contextPlugins.get(E);return x=x||new E(s),i._add(E,x),x})}function k(C,E){return C.reduce((x,A)=>!A[E]||i._contextPlugins.has(A)?x:x.then(A[E].bind(A)),Promise.resolve())}function S(C,E){for(const x of E){if(typeof x!="function")throw new T("plugincollection-replace-plugin-invalid-type",null,{pluginItem:x});const A=x.pluginName;if(!A)throw new T("plugincollection-replace-plugin-missing-name",null,{pluginItem:x});if(x.requires&&x.requires.length)throw new T("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:A});const R=i._availablePlugins.get(A);if(!R)throw new T("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:A});const $=C.indexOf(R);if($===-1){if(i._contextPlugins.has(R))return;throw new T("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:A})}if(R.requires&&R.requires.length)throw new T("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:A});C.splice($,1,x),i._availablePlugins.set(A,x)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const r=e.pluginName;if(r){if(this._plugins.has(r))throw new T("plugincollection-plugin-name-conflict",null,{pluginName:r,plugin1:this._plugins.get(r).constructor,plugin2:e});this._plugins.set(r,n)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Q8{constructor(e){this._contextOwner=null;const{translations:n,...r}=e||{};this.config=new F8(r,this.constructor.defaultConfig);const i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new X8(this,i);const s=this.config.get("language")||{};this.locale=new voe({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:n}),this.t=this.locale.t,this.editors=new Nr}initPlugins(){const e=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[];for(const r of e.concat(n)){if(typeof r!="function")throw new T("context-initplugins-constructor-only",null,{Plugin:r});if(r.isContextPlugin!==!0)throw new T("context-initplugins-invalid-plugin",null,{Plugin:r})}return this.plugins.init(e,[],n)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,n){if(this._contextOwner)throw new T("context-addeditor-private-context");this.editors.add(e),n&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const n of this.config.names())["plugins","removePlugins","extraPlugins"].includes(n)||(e[n]=this.config.get(n));return e}static create(e){return new Promise(n=>{const r=new this(e);n(r.initPlugins().then(()=>r))})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z0 extends Ue(){constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jm=new WeakMap;let zS=!1;function ok({view:t,element:e,text:n,isDirectHost:r=!0,keepOnFocus:i=!1}){const s=t.document;jm.has(s)||(jm.set(s,new Map),s.registerPostFixer(a=>Tw(s,a)),s.on("change:isComposing",()=>{t.change(a=>Tw(s,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{o(c)}),e.placeholder?o(e.placeholder):n&&o(n),n&&Moe();function o(a){jm.get(s).set(e,{text:a,isDirectHost:r,keepOnFocus:i,hostElement:r?e:null}),t.change(l=>Tw(s,l))}}function eO(t,e){return e.hasClass("ck-placeholder")?!1:(t.addClass("ck-placeholder",e),!0)}function Zy(t,e){return e.hasClass("ck-placeholder")?(t.removeClass("ck-placeholder",e),!0):!1}function tO(t,e){if(!t.isAttached()||Array.from(t.getChildren()).some(o=>!o.is("uiElement")))return!1;const r=t.document,s=r.selection.anchor;return r.isComposing&&s&&s.parent===t?!1:e||!r.isFocused?!0:!!s&&s.parent!==t}function Tw(t,e){const n=jm.get(t),r=[];let i=!1;for(const[s,o]of n)o.isDirectHost&&(r.push(s),HS(e,s,o)&&(i=!0));for(const[s,o]of n){if(o.isDirectHost)continue;const a=Ooe(s);a&&(r.includes(a)||(o.hostElement=a,HS(e,s,o)&&(i=!0)))}return i}function HS(t,e,n){const{text:r,isDirectHost:i,hostElement:s}=n;let o=!1;return s.getAttribute("data-placeholder")!==r&&(t.setAttribute("data-placeholder",r,s),o=!0),(i||e.childCount==1)&&tO(s,n.keepOnFocus)?eO(t,s)&&(o=!0):Zy(t,s)&&(o=!0),o}function Ooe(t){if(t.childCount){const e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function Moe(){zS||Ie("enableplaceholder-deprecated-text-option"),zS=!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let vl=class{is(){throw new Error("is() method is abstract")}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let yl=class extends qe(vl){constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new T("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.index),n=n.parent;return e}getAncestors(e={}){const n=[];let r=e.includeSelf?this:this.parent;for(;r;)n[e.parentFirst?"push":"unshift"](r),r=r.parent;return n}getCommonAncestor(e,n={}){const r=this.getAncestors(n),i=e.getAncestors(n);let s=0;for(;r[s]==i[s]&&r[s];)s++;return s===0?null:r[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),r=e.getPath(),i=xn(n,r);switch(i){case"prefix":return!0;case"extension":return!1;default:return n[i]<r[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,n){this.fire(`change:${e}`,n),this.parent&&this.parent._fireChange(e,n)}toJSON(){const e=w8(this);return delete e.parent,e}};yl.prototype.is=function(t){return t==="node"||t==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let dt=class Jy extends yl{constructor(e,n){super(e),this._textData=n}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Jy?this===e||this.data===e.data:!1}_clone(){return new Jy(this.document,this.data)}};dt.prototype.is=function(t){return t==="$text"||t==="view:$text"||t==="text"||t==="view:text"||t==="node"||t==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Hi=class extends vl{constructor(e,n,r){if(super(),this.textNode=e,n<0||n>e.data.length)throw new T("view-textproxy-wrong-offsetintext",this);if(r<0||n+r>e.data.length)throw new T("view-textproxy-wrong-length",this);this.data=e.data.substring(n,n+r),this.offsetInText=n}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const n=[];let r=e.includeSelf?this.textNode:this.parent;for(;r!==null;)n[e.parentFirst?"push":"unshift"](r),r=r.parent;return n}};Hi.prototype.is=function(t){return t==="$textProxy"||t==="view:$textProxy"||t==="textProxy"||t==="view:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uh{constructor(...e){this._patterns=[],this.add(...e)}add(...e){for(let n of e)(typeof n=="string"||n instanceof RegExp)&&(n={name:n}),this._patterns.push(n)}match(...e){for(const n of e)for(const r of this._patterns){const i=WS(n,r);if(i)return{element:n,pattern:r,match:i}}return null}matchAll(...e){const n=[];for(const r of e)for(const i of this._patterns){const s=WS(r,i);s&&n.push({element:r,pattern:i,match:s})}return n.length>0?n:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],n=e.name;return typeof e!="function"&&n&&!(n instanceof RegExp)?n:null}}function WS(t,e){if(typeof e=="function")return e(t);const n={};return e.name&&(n.name=Noe(e.name,t.name),!n.name)||e.attributes&&(n.attributes=Foe(e.attributes,t),!n.attributes)||e.classes&&(n.classes=Voe(e.classes,t),!n.classes)||e.styles&&(n.styles=Boe(e.styles,t),!n.styles)?null:n}function Noe(t,e){return t instanceof RegExp?!!e.match(t):t===e}function ak(t,e,n){const r=Doe(t),i=Array.from(e),s=[];if(r.forEach(([o,a])=>{i.forEach(l=>{Loe(o,l)&&$oe(a,l,n)&&s.push(l)})}),!(!r.length||s.length<r.length))return s}function Doe(t){return Array.isArray(t)?t.map(e=>hr(e)?((e.key===void 0||e.value===void 0)&&Ie("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):hr(t)?Object.entries(t):[[t,!0]]}function Loe(t,e){return t===!0||t===e||t instanceof RegExp&&e.match(t)}function $oe(t,e,n){if(t===!0)return!0;const r=n(e);return t===r||t instanceof RegExp&&!!String(r).match(t)}function Foe(t,e){const n=new Set(e.getAttributeKeys());return hr(t)?(t.style!==void 0&&Ie("matcher-pattern-deprecated-attributes-style-key",t),t.class!==void 0&&Ie("matcher-pattern-deprecated-attributes-class-key",t)):(n.delete("style"),n.delete("class")),ak(t,n,r=>e.getAttribute(r))}function Voe(t,e){return ak(t,e.getClassNames(),()=>{})}function Boe(t,e){return ak(t,e.getStyleNames(!0),n=>e.getStyle(n))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xy{constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const n=zoe(e);for(const[r,i]of n)this._styleProcessor.toNormalizedForm(r,i,this._styles)}has(e){if(this.isEmpty)return!1;const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);return Array.isArray(r)}set(e,n){if(ft(e))for(const[r,i]of Object.entries(e))this._styleProcessor.toNormalizedForm(r,i,this._styles);else this._styleProcessor.toNormalizedForm(e,n,this._styles)}remove(e){const n=Qy(e);dse(this._styles,n),delete this._styles[e],this._cleanEmptyObjectsOnPath(n)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!ft(this._styles[e]))return this._styles[e];const r=this._styleProcessor.getReducedForm(e,this._styles).find(([i])=>i===e);if(Array.isArray(r))return r[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([r])=>r)}clear(){this._styles={}}getStylesEntries(){const e=[],n=Object.keys(this._styles);for(const r of n)e.push(...this._styleProcessor.getReducedForm(r,this._styles));return e}_cleanEmptyObjectsOnPath(e){const n=e.split(".");if(!(n.length>1))return;const i=n.splice(0,n.length-1).join("."),s=lh(this._styles,i);if(!s)return;!Object.keys(s).length&&this.remove(i)}}class Uoe{constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,n,r){if(ft(n)){Pw(r,Qy(e),n);return}if(this._normalizers.has(e)){const i=this._normalizers.get(e),{path:s,value:o}=i(n);Pw(r,s,o)}else Pw(r,e,n)}getNormalized(e,n){if(!e)return Q2({},n);if(n[e]!==void 0)return n[e];if(this._extractors.has(e)){const r=this._extractors.get(e);if(typeof r=="string")return lh(n,r);const i=r(e,n);if(i)return i}return lh(n,Qy(e))}getReducedForm(e,n){const r=this.getNormalized(e,n);return r===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(r):[[e,r]]}getStyleNames(e){const n=Array.from(this._consumables.keys()).filter(i=>{const s=this.getNormalized(i,e);return s&&typeof s=="object"?Object.keys(s).length:s}),r=new Set([...n,...Object.keys(e)]);return Array.from(r)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,n){this._normalizers.set(e,n)}setExtractor(e,n){this._extractors.set(e,n)}setReducer(e,n){this._reducers.set(e,n)}setStyleRelation(e,n){this._mapStyleNames(e,n);for(const r of n)this._mapStyleNames(r,[e])}_mapStyleNames(e,n){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...n)}}function zoe(t){let e=null,n=0,r=0,i=null;const s=new Map;if(t==="")return s;t.charAt(t.length-1)!=";"&&(t=t+";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(e===null)switch(a){case":":i||(i=t.substr(n,o-n),r=o+1);break;case'"':case"'":e=a;break;case";":{const l=t.substr(r,o-r);i&&s.set(i.trim(),l.trim()),i=null,n=o+1;break}}else a===e&&(e=null)}return s}function Qy(t){return t.replace("-",".")}function Pw(t,e,n){let r=n;ft(n)&&(r=Q2({},lh(t,e),n)),cse(t,e,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ri=class nO extends yl{constructor(e,n,r,i){if(super(e),this._unsafeAttributesToRender=[],this._customProperties=new Map,this.name=n,this._attrs=Hoe(r),this._children=[],i&&this._insertChild(0,i),this._classes=new Set,this._attrs.has("class")){const s=this._attrs.get("class");jS(this._classes,s),this._attrs.delete("class")}this._styles=new Xy(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*this._attrs.keys()}*getAttributes(){yield*this._attrs.entries(),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){const n=this._styles.toString();return n==""?void 0:n}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof nO))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(const[n,r]of this._attrs)if(!e._attrs.has(n)||e._attrs.get(n)!==r)return!1;for(const n of this._classes)if(!e._classes.has(n))return!1;for(const n of this._styles.getStyleNames())if(!e._styles.has(n)||e._styles.getAsString(n)!==this._styles.getAsString(n))return!1;return!0}hasClass(...e){for(const n of e)if(!this._classes.has(n))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(const n of e)if(!this._styles.has(n))return!1;return!0}findAncestor(...e){const n=new uh(...e);let r=this.parent;for(;r&&!r.is("documentFragment");){if(n.match(r))return r;r=r.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=Array.from(this._classes).sort().join(","),n=this._styles.toString(),r=Array.from(this._attrs).map(i=>`${i[0]}="${i[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(n?` style="${n}"`:"")+(r==""?"":` ${r}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){const n=[];if(e)for(const i of this.getChildren())n.push(i._clone(e));const r=new this.constructor(this.document,this.name,this._attrs,n);return r._classes=new Set(this._classes),r._styles.set(this._styles.getNormalized()),r._customProperties=new Map(this._customProperties),r.getFillerOffset=this.getFillerOffset,r._unsafeAttributesToRender=this._unsafeAttributesToRender,r}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,n){this._fireChange("children",this);let r=0;const i=Woe(this.document,n);for(const s of i)s.parent!==null&&s._remove(),s.parent=this,s.document=this.document,this._children.splice(e,0,s),e++,r++;return r}_removeChildren(e,n=1){this._fireChange("children",this);for(let r=e;r<e+n;r++)this._children[r].parent=null;return this._children.splice(e,n)}_setAttribute(e,n){const r=String(n);this._fireChange("attributes",this),e=="class"?jS(this._classes,r):e=="style"?this._styles.setTo(r):this._attrs.set(e,r)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(const n of st(e))this._classes.add(n)}_removeClass(e){this._fireChange("attributes",this);for(const n of st(e))this._classes.delete(n)}_setStyle(e,n){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,n)}_removeStyle(e){this._fireChange("attributes",this);for(const n of st(e))this._styles.remove(n)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Ri.prototype.is=function(t,e){return e?e===this.name&&(t==="element"||t==="view:element"):t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Hoe(t){const e=ss(t);for(const[n,r]of e)r===null?e.delete(n):typeof r!="string"&&e.set(n,String(r));return e}function jS(t,e){const n=e.split(/\s+/);t.clear(),n.forEach(r=>t.add(r))}function Woe(t,e){return typeof e=="string"?[new dt(t,e)]:(Tr(e)||(e=[e]),Array.from(e).map(n=>typeof n=="string"?new dt(t,n):n instanceof Hi?new dt(t,n.data):n))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dh extends Ri{constructor(e,n,r,i){super(e,n,r,i),this.getFillerOffset=joe}}dh.prototype.is=function(t,e){return e?e===this.name&&(t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function joe(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const n of t)if(!n.is("uiElement"))return null;return this.childCount}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H0 extends Ue(dh){constructor(e,n,r,i){super(e,n,r,i),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",s=>s&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}}H0.prototype.is=function(t,e){return e?e===this.name&&(t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const GS=Symbol("rootName");class rO extends H0{constructor(e,n){super(e,n),this.rootName="main"}get rootName(){return this.getCustomProperty(GS)}set rootName(e){this._setCustomProperty(GS,e)}set _name(e){this.name=e}}rO.prototype.is=function(t,e){return e?e===this.name&&(t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"):t==="rootElement"||t==="view:rootElement"||t==="editableElement"||t==="view:editableElement"||t==="containerElement"||t==="view:containerElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let La=class{constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new T("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new T("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=j._createAt(e.startPosition):this._position=j._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let n,r;do r=this.position,n=this.next();while(!n.done&&e(n.value));n.done||(this._position=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const n=this.position,r=e.parent;if(r.parent===null&&e.offset===r.childCount)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let i;if(r instanceof dt){if(e.isAtEnd)return this._position=j._createAfter(r),this._next();i=r.data[e.offset]}else i=r.getChild(e.offset);if(i instanceof Ri){if(!this.shallow)e=new j(i,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",i,n,e,1)}if(i instanceof dt){if(this.singleCharacters)return e=new j(i,0),this._position=e,this._next();let s=i.data.length,o;return i==this._boundaryEndParent?(s=this.boundaries.end.offset,o=new Hi(i,0,s),e=j._createAfter(o)):(o=new Hi(i,0,i.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,n,e,s)}if(typeof i=="string"){let s;this.singleCharacters?s=1:s=(r===this._boundaryEndParent?this.boundaries.end.offset:r.data.length)-e.offset;const o=new Hi(r,e.offset,s);return e.offset+=s,this._position=e,this._formatReturnValue("text",o,n,e,s)}return e=j._createAfter(r),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",r,n,e)}_previous(){let e=this.position.clone();const n=this.position,r=e.parent;if(r.parent===null&&e.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let i;if(r instanceof dt){if(e.isAtStart)return this._position=j._createBefore(r),this._previous();i=r.data[e.offset-1]}else i=r.getChild(e.offset-1);if(i instanceof Ri)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",i,n,e,1)):(e=new j(i,i.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",i,n,e));if(i instanceof dt){if(this.singleCharacters)return e=new j(i,i.data.length),this._position=e,this._previous();let s=i.data.length,o;if(i==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new Hi(i,a,i.data.length-a),s=o.data.length,e=j._createBefore(o)}else o=new Hi(i,0,i.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,n,e,s)}if(typeof i=="string"){let s;if(this.singleCharacters)s=1;else{const a=r===this._boundaryStartParent?this.boundaries.start.offset:0;s=e.offset-a}e.offset-=s;const o=new Hi(r,e.offset,s);return this._position=e,this._formatReturnValue("text",o,n,e,s)}return e=j._createBefore(r),this._position=e,this._formatReturnValue("elementStart",r,n,e,1)}_formatReturnValue(e,n,r,i,s){return n instanceof Hi&&(n.offsetInText+n.data.length==n.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(i=j._createAfter(n.textNode),this._position=i):r=j._createAfter(n.textNode)),n.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(i=j._createBefore(n.textNode),this._position=i):r=j._createBefore(n.textNode))),{done:!1,value:{type:e,item:n,previousPosition:r,nextPosition:i,length:s}}}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let j=class Cs extends vl{constructor(e,n){super(),this.parent=e,this.offset=n}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof H0);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const n=Cs._createAt(this),r=n.offset+e;return n.offset=r<0?0:r,n}getLastMatchingPosition(e,n={}){n.startPosition=this;const r=new La(n);return r.skip(e),r.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const n=this.getAncestors(),r=e.getAncestors();let i=0;for(;n[i]==r[i]&&n[i];)i++;return i===0?null:n[i-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const n=this.parent.is("node")?this.parent.getPath():[],r=e.parent.is("node")?e.parent.getPath():[];n.push(this.offset),r.push(e.offset);const i=xn(n,r);switch(i){case"prefix":return"before";case"extension":return"after";default:return n[i]<r[i]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new La(e)}clone(){return new Cs(this.parent,this.offset)}static _createAt(e,n){if(e instanceof Cs)return new this(e.parent,e.offset);{const r=e;if(n=="end")n=r.is("$text")?r.data.length:r.childCount;else{if(n=="before")return this._createBefore(r);if(n=="after")return this._createAfter(r);if(n!==0&&!n)throw new T("view-createpositionat-offset-required",r)}return new Cs(r,n)}}static _createAfter(e){if(e.is("$textProxy"))return new Cs(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new T("view-position-after-root",e,{root:e});return new Cs(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Cs(e.textNode,e.offsetInText);if(!e.parent)throw new T("view-position-before-root",e,{root:e});return new Cs(e.parent,e.index)}};j.prototype.is=function(t){return t==="position"||t==="view:position"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ve=class So extends vl{constructor(e,n=null){super(),this.start=e.clone(),this.end=n?n.clone():e.clone()}*[Symbol.iterator](){yield*new La({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(nm,{direction:"backward"}),n=this.end.getLastMatchingPosition(nm);return e.parent.is("$text")&&e.isAtStart&&(e=j._createBefore(e.parent)),n.parent.is("$text")&&n.isAtEnd&&(n=j._createAfter(n.parent)),new So(e,n)}getTrimmed(){let e=this.start.getLastMatchingPosition(nm);if(e.isAfter(this.end)||e.isEqual(this.end))return new So(e,e);let n=this.end.getLastMatchingPosition(nm,{direction:"backward"});const r=e.nodeAfter,i=n.nodeBefore;return r&&r.is("$text")&&(e=new j(r,0)),i&&i.is("$text")&&(n=new j(i,i.data.length)),new So(e,n)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const r=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return r&&i}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new So(this.start,e.start)),this.containsPosition(e.end)&&n.push(new So(e.end,this.end))):n.push(this.clone()),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,r=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(r=e.end),new So(n,r)}return null}getWalker(e={}){return e.boundaries=this,new La(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,n=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(n=this.end.parent.previousSibling),e&&e.is("element")&&e===n?e:null}clone(){return new So(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new La(e);for(const r of n)yield r.item}*getPositions(e={}){e.boundaries=this;const n=new La(e);yield n.position;for(const r of n)yield r.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,n,r,i){return new this(new j(e,n),new j(r,i))}static _createFromPositionAndShift(e,n){const r=e,i=e.getShiftedBy(n);return n>0?new this(r,i):new this(i,r)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const n=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(j._createBefore(e),n)}};ve.prototype.is=function(t){return t==="range"||t==="view:range"};function nm(t){return!!(t.item.is("attributeElement")||t.item.is("uiElement"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Ws=class iO extends qe(vl){constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?e.clone():null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let r=!1;for(const i of e._ranges)if(n.isEqual(i)){r=!0;break}if(!r)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const n=qy(this.getRanges()),r=qy(e.getRanges());if(n!=r)return!1;if(n==0)return!0;for(let i of this.getRanges()){i=i.getTrimmed();let s=!1;for(let o of e.getRanges())if(o=o.getTrimmed(),i.start.isEqual(o.start)&&i.end.isEqual(o.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[n,r,i]=e;if(typeof r=="object"&&(i=r,r=void 0),n===null)this._setRanges([]),this._setFakeOptions(i);else if(n instanceof iO||n instanceof lk)this._setRanges(n.getRanges(),n.isBackward),this._setFakeOptions({fake:n.isFake,label:n.fakeSelectionLabel});else if(n instanceof ve)this._setRanges([n],i&&i.backward),this._setFakeOptions(i);else if(n instanceof j)this._setRanges([new ve(n)]),this._setFakeOptions(i);else if(n instanceof yl){const s=!!i&&!!i.backward;let o;if(r===void 0)throw new T("view-selection-setto-required-second-parameter",this);r=="in"?o=ve._createIn(n):r=="on"?o=ve._createOn(n):o=new ve(j._createAt(n,r)),this._setRanges([o],s),this._setFakeOptions(i)}else if(Tr(n))this._setRanges(n,i&&i.backward),this._setFakeOptions(i);else throw new T("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,n){if(this.anchor===null)throw new T("view-selection-setfocus-no-ranges",this);const r=j._createAt(e,n);if(r.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.pop(),r.compareWith(i)=="before"?this._addRange(new ve(r,i),!0):this._addRange(new ve(i,r)),this.fire("change")}_setRanges(e,n=!1){e=Array.from(e),this._ranges=[];for(const r of e)this._addRange(r);this._lastRangeBackward=!!n}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,n=!1){if(!(e instanceof ve))throw new T("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!n}_pushRange(e){for(const n of this._ranges)if(e.isIntersecting(n))throw new T("view-selection-range-intersects",this,{addedRange:e,intersectingRange:n});this._ranges.push(new ve(e.start,e.end))}};Ws.prototype.is=function(t){return t==="selection"||t==="view:selection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let lk=class extends qe(vl){constructor(...e){super(),this._selection=new Ws,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,n){this._selection.setFocus(e,n)}};lk.prototype.is=function(t){return t==="selection"||t=="documentSelection"||t=="view:selection"||t=="view:documentSelection"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pu extends io{constructor(e,n,r){super(e,n),this.startRange=r,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Aw=Symbol("bubbling contexts");function eb(t){class e extends t{fire(r,...i){try{const s=r instanceof io?r:new io(this,r),o=Iw(this);if(!o.size)return;if(Uu(s,"capturing",this),Nl(o,"$capture",s,...i))return s.return;const a=s.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!sO(o,l):!1;let u=l||Goe(a);if(Uu(s,"atTarget",u),!c){if(Nl(o,"$text",s,...i))return s.return;Uu(s,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(Nl(o,"$root",s,...i))return s.return}else if(u.is("element")&&Nl(o,u.name,s,...i))return s.return;if(Nl(o,u,s,...i))return s.return;u=u.parent,Uu(s,"bubbling",u)}return Uu(s,"bubbling",this),Nl(o,"$document",s,...i),s.return}catch(s){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(s,this)}}_addEventListener(r,i,s){const o=st(s.context||"$document"),a=Iw(this);for(const l of o){let c=a.get(l);c||(c=new(qe()),a.set(l,c)),this.listenTo(c,r,i,s)}}_removeEventListener(r,i){const s=Iw(this);for(const o of s.values())this.stopListening(o,r,i)}}return e}{const t=eb(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{eb[e]=t.prototype[e]})}function Uu(t,e,n){t instanceof pu&&(t._eventPhase=e,t._currentTarget=n)}function Nl(t,e,n,...r){const i=typeof e=="string"?t.get(e):sO(t,e);return i?(i.fire(n,...r),n.stop.called):!1}function sO(t,e){for(const[n,r]of t)if(typeof n=="function"&&n(e))return r;return null}function Iw(t){return t[Aw]||(t[Aw]=new Map),t[Aw]}function Goe(t){if(!t)return null;const e=t.start.parent,n=t.end.parent,r=e.getPath(),i=n.getPath();return r.length>i.length?e:n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let oO=class extends eb(Ue()){constructor(e){super(),this._postFixers=new Set,this.selection=new lk,this.roots=new Nr({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let n=!1;do for(const r of this._postFixers)if(n=r(e),n)break;while(n)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const aO=10;class Ha extends Ri{constructor(e,n,r,i){super(e,n,r,i),this._priority=aO,this._id=null,this._clonesGroup=null,this.getFillerOffset=qoe}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new T("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}_clone(e=!1){const n=super._clone(e);return n._priority=this._priority,n._id=this._id,n}}Ha.DEFAULT_PRIORITY=aO;Ha.prototype.is=function(t,e){return e?e===this.name&&(t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"):t==="attributeElement"||t==="view:attributeElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function qoe(){if(Rw(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Rw(t)>1)return null;t=t.parent}return!t||Rw(t)>1?null:this.childCount}function Rw(t){return Array.from(t.getChildren()).filter(e=>!e.is("uiElement")).length}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ck extends Ri{constructor(e,n,r,i){super(e,n,r,i),this.getFillerOffset=Yoe}_insertChild(e,n){if(n&&(n instanceof yl||Array.from(n).length>0))throw new T("view-emptyelement-cannot-add",[this,n]);return 0}}ck.prototype.is=function(t,e){return e?e===this.name&&(t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"):t==="emptyElement"||t==="view:emptyElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Yoe(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class W0 extends Ri{constructor(e,n,r,i){super(e,n,r,i),this.getFillerOffset=Zoe}_insertChild(e,n){if(n&&(n instanceof yl||Array.from(n).length>0))throw new T("view-uielement-cannot-add",[this,n]);return 0}render(e,n){return this.toDomElement(e)}toDomElement(e){const n=e.createElement(this.name);for(const r of this.getAttributeKeys())n.setAttribute(r,this.getAttribute(r));return n}}W0.prototype.is=function(t,e){return e?e===this.name&&(t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"):t==="uiElement"||t==="view:uiElement"||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Koe(t){t.document.on("arrowKey",(e,n)=>Joe(e,n,t.domConverter),{priority:"low"})}function Zoe(){return null}function Joe(t,e,n){if(e.keyCode==Ae.arrowright){const r=e.domTarget.ownerDocument.defaultView.getSelection(),i=r.rangeCount==1&&r.getRangeAt(0).collapsed;if(i||e.shiftKey){const s=r.focusNode,o=r.focusOffset,a=n.domPositionToView(s,o);if(a===null)return;let l=!1;const c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){const u=n.viewPositionToDom(c);i?r.collapse(u.parent,u.offset):r.extend(u.parent,u.offset)}}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uk extends Ri{constructor(e,n,r,i){super(e,n,r,i),this.getFillerOffset=Xoe}_insertChild(e,n){if(n&&(n instanceof yl||Array.from(n).length>0))throw new T("view-rawelement-cannot-add",[this,n]);return 0}render(e,n){}}uk.prototype.is=function(t,e){return e?e===this.name&&(t==="rawElement"||t==="view:rawElement"||t==="element"||t==="view:element"):t==="rawElement"||t==="view:rawElement"||t===this.name||t==="view:"+this.name||t==="element"||t==="view:element"||t==="node"||t==="view:node"};function Xoe(){return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Wa=class extends qe(vl){constructor(e,n){super(),this._children=[],this._customProperties=new Map,this.document=e,n&&this._insertChild(0,n)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,n){this._fireChange("children",this);let r=0;const i=Qoe(this.document,n);for(const s of i)s.parent!==null&&s._remove(),s.parent=this,this._children.splice(e,0,s),e++,r++;return r}_removeChildren(e,n=1){this._fireChange("children",this);for(let r=e;r<e+n;r++)this._children[r].parent=null;return this._children.splice(e,n)}_fireChange(e,n){this.fire("change:"+e,n)}_setCustomProperty(e,n){this._customProperties.set(e,n)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Wa.prototype.is=function(t){return t==="documentFragment"||t==="view:documentFragment"};function Qoe(t,e){return typeof e=="string"?[new dt(t,e)]:(Tr(e)||(e=[e]),Array.from(e).map(n=>typeof n=="string"?new dt(t,n):n instanceof Hi?new dt(t,n.data):n))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dk{constructor(e){this._cloneGroups=new Map,this._slotFactory=null,this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,n){this.document.selection._setFocus(e,n)}createDocumentFragment(e){return new Wa(this.document,e)}createText(e){return new dt(this.document,e)}createAttributeElement(e,n,r={}){const i=new Ha(this.document,e,n);return typeof r.priority=="number"&&(i._priority=r.priority),r.id&&(i._id=r.id),r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createContainerElement(e,n,r={},i={}){let s=null;hr(r)?i=r:s=r;const o=new dh(this.document,e,n,s);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEditableElement(e,n,r={}){const i=new H0(this.document,e,n);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createEmptyElement(e,n,r={}){const i=new ck(this.document,e,n);return r.renderUnsafeAttributes&&i._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),i}createUIElement(e,n,r){const i=new W0(this.document,e,n);return r&&(i.render=r),i}createRawElement(e,n,r,i={}){const s=new uk(this.document,e,n);return r&&(s.render=r),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}setAttribute(e,n,r){r._setAttribute(e,n)}removeAttribute(e,n){n._removeAttribute(e)}addClass(e,n){n._addClass(e)}removeClass(e,n){n._removeClass(e)}setStyle(e,n,r){hr(e)&&r===void 0?n._setStyle(e):r._setStyle(e,n)}removeStyle(e,n){n._removeStyle(e)}setCustomProperty(e,n,r){r._setCustomProperty(e,n)}removeCustomProperty(e,n){return n._removeCustomProperty(e)}breakAttributes(e){return e instanceof j?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const n=e.parent;if(!n.is("containerElement"))throw new T("view-writer-break-non-container-element",this.document);if(!n.parent)throw new T("view-writer-break-root",this.document);if(e.isAtStart)return j._createBefore(n);if(!e.isAtEnd){const r=n._clone(!1);this.insert(j._createAfter(n),r);const i=new ve(e,j._createAt(n,"end")),s=new j(r,0);this.move(i,s)}return j._createAfter(n)}mergeAttributes(e){const n=e.offset,r=e.parent;if(r.is("$text"))return e;if(r.is("attributeElement")&&r.childCount===0){const o=r.parent,a=r.index;return r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new j(o,a))}const i=r.getChild(n-1),s=r.getChild(n);if(!i||!s)return e;if(i.is("$text")&&s.is("$text"))return YS(i,s);if(i.is("attributeElement")&&s.is("attributeElement")&&i.isSimilar(s)){const o=i.childCount;return i._appendChild(s.getChildren()),s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new j(i,o))}return e}mergeContainers(e){const n=e.nodeBefore,r=e.nodeAfter;if(!n||!r||!n.is("containerElement")||!r.is("containerElement"))throw new T("view-writer-merge-containers-invalid-position",this.document);const i=n.getChild(n.childCount-1),s=i instanceof dt?j._createAt(i,"end"):j._createAt(n,"end");return this.move(ve._createIn(r),j._createAt(n,"end")),this.remove(ve._createOn(r)),s}insert(e,n){n=Tr(n)?[...n]:[n],lO(n,this.document);const r=n.reduce((o,a)=>{const l=o[o.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?o.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),o},[]);let i=null,s=e;for(const{nodes:o,breakAttributes:a}of r){const l=this._insertNodes(s,o,a);i||(i=l.start),s=l.end}return i?new ve(i,s):new ve(e)}remove(e){const n=e instanceof ve?e:ve._createOn(e);if(zu(n,this.document),n.isCollapsed)return new Wa(this.document);const{start:r,end:i}=this._breakAttributesRange(n,!0),s=r.parent,o=i.offset-r.offset,a=s._removeChildren(r.offset,o);for(const c of a)this._removeFromClonedElementsGroup(c);const l=this.mergeAttributes(r);return n.start=l,n.end=l.clone(),new Wa(this.document,a)}clear(e,n){zu(e,this.document);const r=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const i of r){const s=i.item;let o;if(s.is("element")&&n.isSimilar(s))o=ve._createOn(s);else if(!i.nextPosition.isAfter(e.start)&&s.is("$textProxy")){const a=s.getAncestors().find(l=>l.is("element")&&n.isSimilar(l));a&&(o=ve._createIn(a))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,n){let r;if(n.isAfter(e.end)){n=this._breakAttributes(n,!0);const i=n.parent,s=i.childCount;e=this._breakAttributesRange(e,!0),r=this.remove(e),n.offset+=i.childCount-s}else r=this.remove(e);return this.insert(n,r)}wrap(e,n){if(!(n instanceof Ha))throw new T("view-writer-wrap-invalid-attribute",this.document);if(zu(e,this.document),e.isCollapsed){let r=e.start;r.parent.is("element")&&!eae(r.parent)&&(r=r.getLastMatchingPosition(s=>s.item.is("uiElement"))),r=this._wrapPosition(r,n);const i=this.document.selection;return i.isCollapsed&&i.getFirstPosition().isEqual(e.start)&&this.setSelection(r),new ve(r)}else return this._wrapRange(e,n)}unwrap(e,n){if(!(n instanceof Ha))throw new T("view-writer-unwrap-invalid-attribute",this.document);if(zu(e,this.document),e.isCollapsed)return e;const{start:r,end:i}=this._breakAttributesRange(e,!0),s=r.parent,o=this._unwrapChildren(s,r.offset,i.offset,n),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new ve(a,l)}rename(e,n){const r=new dh(this.document,e,n.getAttributes());return this.insert(j._createAfter(n),r),this.move(ve._createIn(n),j._createAt(r,0)),this.remove(ve._createOn(n)),r}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,n){return j._createAt(e,n)}createPositionAfter(e){return j._createAfter(e)}createPositionBefore(e){return j._createBefore(e)}createRange(e,n){return new ve(e,n)}createRangeOn(e){return ve._createOn(e)}createRangeIn(e){return ve._createIn(e)}createSelection(...e){return new Ws(...e)}createSlot(e="children"){if(!this._slotFactory)throw new T("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,n,r){let i;if(r?i=tb(e):i=e.parent.is("$text")?e.parent.parent:e.parent,!i)throw new T("view-writer-invalid-position-container",this.document);let s;r?s=this._breakAttributes(e,!0):s=e.parent.is("$text")?Ow(e):e;const o=i._insertChild(s.offset,n);for(const u of n)this._addToClonedElementsGroup(u);const a=s.getShiftedBy(o),l=this.mergeAttributes(s);l.isEqual(s)||a.offset--;const c=this.mergeAttributes(a);return new ve(l,c)}_wrapChildren(e,n,r,i){let s=n;const o=[];for(;s<r;){const l=e.getChild(s),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(i,l))o.push(new j(e,s));else if(c||!u||tae(i,l)){const d=i._clone();l._remove(),d._appendChild(l),e._insertChild(s,d),this._addToClonedElementsGroup(d),o.push(new j(e,s))}else this._wrapChildren(l,0,l.childCount,i);s++}let a=0;for(const l of o){if(l.offset-=a,l.offset==n)continue;this.mergeAttributes(l).isEqual(l)||(a++,r--)}return ve._createFromParentsAndOffsets(e,n,e,r)}_unwrapChildren(e,n,r,i){let s=n;const o=[];for(;s<r;){const l=e.getChild(s);if(!l.is("attributeElement")){s++;continue}if(l.isSimilar(i)){const c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(s,c),this._removeFromClonedElementsGroup(l),o.push(new j(e,s),new j(e,s+u)),s+=u,r+=u-1;continue}if(this._unwrapAttributeElement(i,l)){o.push(new j(e,s),new j(e,s+1)),s++;continue}this._unwrapChildren(l,0,l.childCount,i),s++}let a=0;for(const l of o){if(l.offset-=a,l.offset==n||l.offset==r)continue;this.mergeAttributes(l).isEqual(l)||(a++,r--)}return ve._createFromParentsAndOffsets(e,n,e,r)}_wrapRange(e,n){const{start:r,end:i}=this._breakAttributesRange(e,!0),s=r.parent,o=this._wrapChildren(s,r.offset,i.offset,n),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const l=this.mergeAttributes(o.end);return new ve(a,l)}_wrapPosition(e,n){if(n.isSimilar(e.parent))return qS(e.clone());e.parent.is("$text")&&(e=Ow(e));const r=this.createAttributeElement("_wrapPosition-fake-element");r._priority=Number.POSITIVE_INFINITY,r.isSimilar=()=>!1,e.parent._insertChild(e.offset,r);const i=new ve(e,e.getShiftedBy(1));this.wrap(i,n);const s=new j(r.parent,r.index);r._remove();const o=s.nodeBefore,a=s.nodeAfter;return o instanceof dt&&a instanceof dt?YS(o,a):qS(s)}_wrapAttributeElement(e,n){if(!KS(e,n)||e.name!==n.name||e.priority!==n.priority)return!1;for(const r of e.getAttributeKeys())if(!(r==="class"||r==="style")&&n.hasAttribute(r)&&n.getAttribute(r)!==e.getAttribute(r))return!1;for(const r of e.getStyleNames())if(n.hasStyle(r)&&n.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r==="class"||r==="style"||n.hasAttribute(r)||this.setAttribute(r,e.getAttribute(r),n);for(const r of e.getStyleNames())n.hasStyle(r)||this.setStyle(r,e.getStyle(r),n);for(const r of e.getClassNames())n.hasClass(r)||this.addClass(r,n);return!0}_unwrapAttributeElement(e,n){if(!KS(e,n)||e.name!==n.name||e.priority!==n.priority)return!1;for(const r of e.getAttributeKeys())if(!(r==="class"||r==="style")&&(!n.hasAttribute(r)||n.getAttribute(r)!==e.getAttribute(r)))return!1;if(!n.hasClass(...e.getClassNames()))return!1;for(const r of e.getStyleNames())if(!n.hasStyle(r)||n.getStyle(r)!==e.getStyle(r))return!1;for(const r of e.getAttributeKeys())r==="class"||r==="style"||this.removeAttribute(r,n);return this.removeClass(Array.from(e.getClassNames()),n),this.removeStyle(Array.from(e.getStyleNames()),n),!0}_breakAttributesRange(e,n=!1){const r=e.start,i=e.end;if(zu(e,this.document),e.isCollapsed){const l=this._breakAttributes(e.start,n);return new ve(l,l)}const s=this._breakAttributes(i,n),o=s.parent.childCount,a=this._breakAttributes(r,n);return s.offset+=s.parent.childCount-o,new ve(a,s)}_breakAttributes(e,n=!1){const r=e.offset,i=e.parent;if(e.parent.is("emptyElement"))throw new T("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new T("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new T("view-writer-cannot-break-raw-element",this.document);if(!n&&i.is("$text")&&nb(i.parent)||nb(i))return e.clone();if(i.is("$text"))return this._breakAttributes(Ow(e),n);const s=i.childCount;if(r==s){const o=new j(i.parent,i.index+1);return this._breakAttributes(o,n)}else if(r===0){const o=new j(i.parent,i.index);return this._breakAttributes(o,n)}else{const o=i.index+1,a=i._clone();i.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const l=i.childCount-r,c=i._removeChildren(r,l);a._appendChild(c);const u=new j(i.parent,o);return this._breakAttributes(u,n)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const i of e.getChildren())this._addToClonedElementsGroup(i);const n=e.id;if(!n)return;let r=this._cloneGroups.get(n);r||(r=new Set,this._cloneGroups.set(n,r)),r.add(e),e._clonesGroup=r}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const i of e.getChildren())this._removeFromClonedElementsGroup(i);const n=e.id;if(!n)return;const r=this._cloneGroups.get(n);r&&r.delete(e)}}function eae(t){return Array.from(t.getChildren()).some(e=>!e.is("uiElement"))}function tb(t){let e=t.parent;for(;!nb(e);){if(!e)return;e=e.parent}return e}function tae(t,e){return t.priority<e.priority?!0:t.priority>e.priority?!1:t.getIdentity()<e.getIdentity()}function qS(t){const e=t.nodeBefore;if(e&&e.is("$text"))return new j(e,e.data.length);const n=t.nodeAfter;return n&&n.is("$text")?new j(n,0):t}function Ow(t){if(t.offset==t.parent.data.length)return new j(t.parent.parent,t.parent.index+1);if(t.offset===0)return new j(t.parent.parent,t.parent.index);const e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new dt(t.root.document,e)),new j(t.parent.parent,t.parent.index+1)}function YS(t,e){const n=t.data.length;return t._data+=e.data,e._remove(),new j(t,n)}const nae=[dt,Ha,dh,ck,uk,W0];function lO(t,e){for(const n of t){if(!nae.some(r=>n instanceof r))throw new T("view-writer-insert-invalid-node-type",e);n.is("$text")||lO(n.getChildren(),e)}}function nb(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function zu(t,e){const n=tb(t.start),r=tb(t.end);if(!n||!r||n!==r)throw new T("view-writer-invalid-range-container",e)}function KS(t,e){return t.id===null&&e.id===null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cO=t=>t.createTextNode(" "),uO=t=>{const e=t.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},dO=t=>{const e=t.createElement("br");return e.dataset.ckeFiller="true",e},_i=7,hh="⁠".repeat(_i);function dr(t){return typeof t=="string"?t.substr(0,_i)===hh:Ut(t)&&t.data.substr(0,_i)===hh}function sd(t){return t.data.length==_i&&dr(t)}function ZS(t){const e=typeof t=="string"?t:t.data;return dr(t)?e.slice(_i):e}function rae(t){t.document.on("arrowKey",iae,{priority:"low"})}function iae(t,e){if(e.keyCode==Ae.arrowleft){const n=e.domTarget.ownerDocument.defaultView.getSelection();if(n.rangeCount==1&&n.getRangeAt(0).collapsed){const r=n.getRangeAt(0).startContainer,i=n.getRangeAt(0).startOffset;dr(r)&&i<=_i&&n.collapse(r,0)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sae extends Ue(){constructor(e,n){super(),this.domDocuments=new Set,this.markedAttributes=new Set,this.markedChildren=new Set,this.markedTexts=new Set,this._inlineFiller=null,this._fakeSelectionContainer=null,this.domConverter=e,this.selection=n,this.set("isFocused",!1),this.set("isSelecting",!1),me.isBlink&&!me.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()}),this.set("isComposing",!1),this.on("change:isComposing",()=>{this.isComposing||this.render()})}markToSync(e,n){if(e==="text")this.domConverter.mapViewToDom(n.parent)&&this.markedTexts.add(n);else{if(!this.domConverter.mapViewToDom(n))return;if(e==="attributes")this.markedAttributes.add(n);else if(e==="children")this.markedChildren.add(n);else throw new T("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!me.isAndroid)return;let e=null;const n=me.isBlink&&!me.isAndroid?!this.isSelecting:!0;for(const r of this.markedChildren)this._updateChildrenMappings(r);n?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=j._createBefore(e.parent)));for(const r of this.markedAttributes)this._updateAttrs(r);for(const r of this.markedChildren)this._updateChildren(r,{inlineFillerPosition:e});for(const r of this.markedTexts)!this.markedChildren.has(r.parent)&&this.domConverter.mapViewToDom(r.parent)&&this._updateText(r,{inlineFillerPosition:e});if(n)if(e){const r=this.domConverter.viewPositionToDom(e),i=r.parent.ownerDocument;dr(r.parent)?this._inlineFiller=r.parent:this._inlineFiller=JS(i,r.parent,r.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const r=Array.from(n.childNodes),i=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),s=this._diffNodeLists(r,i),o=this._findUpdateActions(s,r,i,aae);if(o.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const l of o)if(l==="update"){const c=a.equal+a.insert,u=a.equal+a.delete,d=e.getChild(c);d&&!d.is("uiElement")&&!d.is("rawElement")&&this._updateElementMappings(d,r[u]),DS(i[c]),a.equal++}else a[l]++}}_updateElementMappings(e,n){this.domConverter.unbindDomElement(n),this.domConverter.bindElements(n,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?j._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=this.domConverter.viewPositionToDom(e);return!!(n&&Ut(n.parent)&&dr(n.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!dr(e))throw new T("view-renderer-filler-was-lost",this);sd(e)?e.remove():e.data=e.data.substr(_i),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),n=e.parent,r=e.offset;if(!this.domConverter.mapViewToDom(n.root)||!n.is("element")||!oae(n)||r===n.getFillerOffset())return!1;const i=e.nodeBefore,s=e.nodeAfter;return!(i instanceof dt||s instanceof dt||me.isAndroid&&(i||s))}_updateText(e,n){const r=this.domConverter.findCorrespondingDomText(e);let s=this.domConverter.viewToDom(e).data;const o=n.inlineFillerPosition;o&&o.parent==e.parent&&o.offset==e.index&&(s=hh+s),XS(r,s)}_updateAttrs(e){const n=this.domConverter.mapViewToDom(e);if(!n)return;const r=Array.from(n.attributes).map(s=>s.name),i=e.getAttributeKeys();for(const s of i)this.domConverter.setDomElementAttribute(n,s,e.getAttribute(s),e);for(const s of r)e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(n,s)}_updateChildren(e,n){const r=this.domConverter.mapViewToDom(e);if(!r)return;if(me.isAndroid){let d=null;for(const h of Array.from(r.childNodes)){if(d&&Ut(d)&&Ut(h)){r.normalize();break}d=h}}const i=n.inlineFillerPosition,s=r.childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));i&&i.parent===e&&JS(r.ownerDocument,o,i.offset);const a=this._diffNodeLists(s,o),l=this._findUpdateActions(a,s,o,lae);let c=0;const u=new Set;for(const d of l)d==="delete"?(u.add(s[c]),DS(s[c])):(d==="equal"||d==="update")&&c++;c=0;for(const d of l)d==="insert"?(W8(r,c,o[c]),c++):d==="update"?(XS(s[c],o[c].data),c++):d==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(o[c])),c++);for(const d of u)d.parentNode||this.domConverter.unbindDomElement(d)}_diffNodeLists(e,n){return e=dae(e,this._fakeSelectionContainer),_d(e,n,cae.bind(null,this.domConverter))}_findUpdateActions(e,n,r,i){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let s=[],o=[],a=[];const l={equal:0,insert:0,delete:0};for(const c of e)c==="insert"?a.push(r[l.equal+l.insert]):c==="delete"?o.push(n[l.equal+l.delete]):(s=s.concat(_d(o,a,i).map(u=>u==="equal"?"update":u)),s.push("equal"),o=[],a=[]),l[c]++;return s.concat(_d(o,a,i).map(c=>c==="equal"?"update":c))}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const n of e.getChildren())this._markDescendantTextToSync(n)}}_updateSelection(){if(me.isBlink&&!me.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&me.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){const n=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=hae(n));const r=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(r,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!r.parentElement||r.parentElement!=e)&&e.appendChild(r),r.textContent=this.selection.fakeSelectionLabel||" ";const i=n.getSelection(),s=n.createRange();i.removeAllRanges(),s.selectNodeContents(r),i.addRange(s)}_updateDomSelection(e){const n=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(n))return;const r=this.domConverter.viewPositionToDom(this.selection.anchor),i=this.domConverter.viewPositionToDom(this.selection.focus);n.setBaseAndExtent(r.parent,r.offset,i.parent,i.offset),me.isGecko&&uae(i,n)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const n=e&&this.domConverter.domSelectionToView(e);return!(n&&this.selection.isEqual(n)||!this.selection.isCollapsed&&this.selection.isSimilar(n))}_fakeSelectionNeedsUpdate(e){const n=this._fakeSelectionContainer,r=e.ownerDocument.getSelection();return!n||n.parentElement!==e||r.anchorNode!==n&&!n.contains(r.anchorNode)?!0:n.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const n=e.getSelection();if(n.rangeCount){const r=e.activeElement,i=this.domConverter.mapDomToView(r);r&&i&&n.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function oae(t){if(t.getAttribute("contenteditable")=="false")return!1;const e=t.findAncestor(n=>n.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function JS(t,e,n){const r=e instanceof Array?e:e.childNodes,i=r[n];if(Ut(i))return i.data=hh+i.data,i;{const s=t.createTextNode(hh);return Array.isArray(e)?r.splice(n,0,s):W8(e,n,s),s}}function aae(t,e){return ca(t)&&ca(e)&&!Ut(t)&&!Ut(e)&&!kd(t)&&!kd(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function lae(t,e){return ca(t)&&ca(e)&&Ut(t)&&Ut(e)}function cae(t,e,n){return e===n?!0:Ut(e)&&Ut(n)?e.data===n.data:!!(t.isBlockFiller(e)&&t.isBlockFiller(n))}function uae(t,e){const n=t.parent;if(n.nodeType!=Node.ELEMENT_NODE||t.offset!=n.childNodes.length-1)return;const r=n.childNodes[t.offset];r&&r.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function dae(t,e){const n=Array.from(t);return n.length==0||!e||n[n.length-1]==e&&n.pop(),n}function hae(t){const e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}function XS(t,e){const n=t.data;if(n==e)return;const r=A8(n,e);for(const i of r)i.type==="insert"?t.insertData(i.index,i.values.join("")):t.deleteData(i.index,i.howMany)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fae=dO(Q.document),mae=cO(Q.document),pae=uO(Q.document),rm="data-ck-unsafe-attribute-",QS="data-ck-unsafe-element";class hO{constructor(e,{blockFillerMode:n,renderingMode:r="editing"}={}){this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new uh,this._inlineObjectElementMatcher=new uh,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=r,this.blockFillerMode=n||(r==="editing"?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?Q.document:Q.document.implementation.createHTMLDocument("")}bindFakeSelection(e,n){this._fakeSelectionMapping.set(e,new Ws(n))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,n){this._domToViewMapping.set(e,n),this._viewToDomMapping.set(n,e)}unbindDomElement(e){const n=this._domToViewMapping.get(e);if(n){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(n);for(const r of Array.from(e.children))this.unbindDomElement(r)}}bindDocumentFragments(e,n){this._domToViewMapping.set(e,n),this._viewToDomMapping.set(n,e)}shouldRenderAttribute(e,n,r){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&n.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:r==="img"&&(e==="src"||e==="srcset")||r==="source"&&e==="srcset"?!0:!n.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,n){if(this.renderingMode==="data"){e.innerHTML=n;return}const r=new DOMParser().parseFromString(n,"text/html"),i=r.createDocumentFragment(),s=r.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);const o=r.createTreeWalker(i,NodeFilter.SHOW_ELEMENT),a=[];let l;for(;l=o.nextNode();)a.push(l);for(const c of a){for(const d of c.getAttributeNames())this.setDomElementAttribute(c,d,c.getAttribute(d));const u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(tT(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(i)}viewToDom(e,n={}){if(e.is("$text")){const r=this._processDataFromViewText(e);return this._domDocument.createTextNode(r)}else{const r=e;if(this.mapViewToDom(r))if(r.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(r);else return this.mapViewToDom(r);let i;if(r.is("documentFragment"))i=this._domDocument.createDocumentFragment(),n.bind&&this.bindDocumentFragments(i,r);else{if(r.is("uiElement"))return r.name==="$comment"?i=this._domDocument.createComment(r.getCustomProperty("$rawContent")):i=r.render(this._domDocument,this),n.bind&&this.bindElements(i,r),i;this._shouldRenameElement(r.name)?(tT(r.name),i=this._createReplacementDomElement(r.name)):r.hasAttribute("xmlns")?i=this._domDocument.createElementNS(r.getAttribute("xmlns"),r.name):i=this._domDocument.createElement(r.name),r.is("rawElement")&&r.render(i,this),n.bind&&this.bindElements(i,r);for(const s of r.getAttributeKeys())this.setDomElementAttribute(i,s,r.getAttribute(s),r)}if(n.withChildren!==!1)for(const s of this.viewChildrenToDom(r,n))i.appendChild(s);return i}}setDomElementAttribute(e,n,r,i){const s=this.shouldRenderAttribute(n,r,e.tagName.toLowerCase())||i&&i.shouldRenderUnsafeAttribute(n);if(s||Ie("domconverter-unsafe-attribute-detected",{domElement:e,key:n,value:r}),!Xse(n)){Ie("domconverter-invalid-attribute-detected",{domElement:e,key:n,value:r});return}e.hasAttribute(n)&&!s?e.removeAttribute(n):e.hasAttribute(rm+n)&&s&&e.removeAttribute(rm+n),e.setAttribute(s?n:rm+n,r)}removeDomElementAttribute(e,n){n!=QS&&(e.removeAttribute(n),e.removeAttribute(rm+n))}*viewChildrenToDom(e,n={}){const r=e.getFillerOffset&&e.getFillerOffset();let i=0;for(const s of e.getChildren()){r===i&&(yield this._getBlockFiller());const o=s.is("element")&&!!s.getCustomProperty("dataPipeline:transparentRendering")&&!vn(s.getAttributes());o&&this.renderingMode=="data"?yield*this.viewChildrenToDom(s,n):(o&&Ie("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:s}),yield this.viewToDom(s,n)),i++}r===i&&(yield this._getBlockFiller())}viewRangeToDom(e){const n=this.viewPositionToDom(e.start),r=this.viewPositionToDom(e.end),i=this._domDocument.createRange();return i.setStart(n.parent,n.offset),i.setEnd(r.parent,r.offset),i}viewPositionToDom(e){const n=e.parent;if(n.is("$text")){const r=this.findCorrespondingDomText(n);if(!r)return null;let i=e.offset;return dr(r)&&(i+=_i),{parent:r,offset:i}}else{let r,i,s;if(e.offset===0){if(r=this.mapViewToDom(n),!r)return null;s=r.childNodes[0]}else{const a=e.nodeBefore;if(i=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!i)return null;r=i.parentNode,s=i.nextSibling}if(Ut(s)&&dr(s))return{parent:s,offset:_i};const o=i?tm(i)+1:0;return{parent:r,offset:o}}}domToView(e,n={}){const r=[],i=this._domToView(e,n,r),s=i.next().value;return!s||(i.next(),this._processDomInlineNodes(null,r,n),s.is("$text")&&s.data.length==0)?null:s}*domChildrenToView(e,n={},r=[]){for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i],o=this._domToView(s,n,r),a=o.next().value;a!==null&&(this._isBlockViewElement(a)&&this._processDomInlineNodes(e,r,n),yield a,o.next())}this._processDomInlineNodes(e,r,n)}domSelectionToView(e){if(vae(e))return new Ws([]);if(e.rangeCount===1){let i=e.getRangeAt(0).startContainer;Ut(i)&&(i=i.parentNode);const s=this.fakeSelectionToView(i);if(s)return s}const n=this.isDomSelectionBackward(e),r=[];for(let i=0;i<e.rangeCount;i++){const s=e.getRangeAt(i),o=this.domRangeToView(s);o&&r.push(o)}return new Ws(r,{backward:n})}domRangeToView(e){const n=this.domPositionToView(e.startContainer,e.startOffset),r=this.domPositionToView(e.endContainer,e.endOffset);return n&&r?new ve(n,r):null}domPositionToView(e,n=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,tm(e));const r=this.mapDomToView(e);if(r&&(r.is("uiElement")||r.is("rawElement")))return j._createBefore(r);if(Ut(e)){if(sd(e))return this.domPositionToView(e.parentNode,tm(e));const i=this.findCorrespondingViewText(e);let s=n;return i?(dr(e)&&(s-=_i,s=s<0?0:s),new j(i,s)):null}else{if(n===0){const i=this.mapDomToView(e);if(i)return new j(i,0)}else{const i=e.childNodes[n-1];if(Ut(i)&&sd(i)||i&&this.isBlockFiller(i))return this.domPositionToView(i.parentNode,tm(i));const s=Ut(i)?this.findCorrespondingViewText(i):this.mapDomToView(i);if(s&&s.parent)return new j(s.parent,s.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(sd(e))return null;const n=this.getHostViewElement(e);if(n)return n;const r=e.previousSibling;if(r){if(!this.isElement(r))return null;const i=this.mapDomToView(r);if(i){const s=i.nextSibling;return s instanceof dt?s:null}}else{const i=this.mapDomToView(e.parentNode);if(i){const s=i.getChild(0);return s instanceof dt?s:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const n=e.previousSibling;return n&&this.mapViewToDom(n)?this.mapViewToDom(n).nextSibling:!n&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const n=this.mapViewToDom(e);if(n&&n.ownerDocument.activeElement!==n){const{scrollX:r,scrollY:i}=Q.window,s=[];eT(n,o=>{const{scrollLeft:a,scrollTop:l}=o;s.push([a,l])}),n.focus(),eT(n,o=>{const[a,l]=s.shift();o.scrollLeft=a,o.scrollTop=l}),Q.window.scrollTo(r,i)}}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const n=e.ownerDocument.defaultView.getSelection(),r=this.domSelectionToView(n);r&&r.rangeCount>0&&n.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(fae):e.tagName==="BR"&&fO(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(pae)||wae(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const n=this._domDocument.createRange();try{n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const r=n.collapsed;return n.detach(),r}getHostViewElement(e){const n=Yse(e);for(n.pop();n.length;){const r=n.pop(),i=this._domToViewMapping.get(r);if(i&&(i.is("uiElement")||i.is("rawElement")))return i}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return cO(this._domDocument);case"markedNbsp":return uO(this._domDocument);case"br":return dO(this._domDocument)}}_isDomSelectionPositionCorrect(e,n){if(Ut(e)&&dr(e)&&n<_i||this.isElement(e)&&dr(e.childNodes[n]))return!1;const r=this.mapDomToView(e);return!(r&&(r.is("uiElement")||r.is("rawElement")))}*_domToView(e,n,r){if(this.isBlockFiller(e))return null;const i=this.getHostViewElement(e);if(i)return i;if(kd(e)&&n.skipComments)return null;if(Ut(e)){if(sd(e))return null;{const s=e.data;if(s==="")return null;const o=new dt(this.document,s);return r.push(o),o}}else{let s=this.mapDomToView(e);if(s)return this._isInlineObjectElement(s)&&r.push(s),s;if(this.isDocumentFragment(e))s=new Wa(this.document),n.bind&&this.bindDocumentFragments(e,s);else{s=this._createViewElement(e,n),n.bind&&this.bindElements(e,s);const a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)s._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(s,n))return s._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(s)||r.push(s),s;if(kd(e))return s._setCustomProperty("$rawContent",e.data),s}yield s;const o=[];if(n.withChildren!==!1)for(const a of this.domChildrenToView(e,n,o))s._appendChild(a);if(this._isInlineObjectElement(s))r.push(s);else for(const a of o)r.push(a)}}_processDomInlineNodes(e,n,r){if(!n.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let i=!1;for(let s=0;s<n.length;s++){const o=n[s];if(!o.is("$text")){i=!1;continue}let a,l=!1;if(gae(o,this.preElements))a=ZS(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));const c=s>0?n[s-1]:null,u=s+1<n.length?n[s+1]:null,d=!c||c.is("element")&&c.name=="br"||i,h=u?!1:!dr(o.data);r.withChildren!==!1&&(d&&(a=a.replace(/^ /,"")),h&&(a=a.replace(/ $/,""))),a=ZS(a),a=a.replace(/ \u00A0/g,"  ");const f=u&&u.is("element")&&u.name!="br",p=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||f||p)&&(a=a.replace(/\u00A0$/," ")),(d||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),n.splice(s,1),s--):(o._data=a,i=l)}n.length=0}_processDataFromViewText(e){let n=e.data;if(e.getAncestors().some(r=>this.preElements.includes(r.name)))return n;if(n.charAt(0)==" "){const r=this._getTouchingInlineViewNode(e,!1);(r&&r.is("$textProxy")&&this._nodeEndsWithSpace(r)||!r)&&(n=" "+n.substr(1))}if(n.charAt(n.length-1)==" "){const r=this._getTouchingInlineViewNode(e,!0),i=r&&r.is("$textProxy")&&r.data.charAt(0)==" ";(n.charAt(n.length-2)==" "||!r||i)&&(n=n.substr(0,n.length-1)+" ")}return n.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(e){if(e.getAncestors().some(r=>this.preElements.includes(r.name)))return!1;const n=this._processDataFromViewText(e);return n.charAt(n.length-1)==" "}_getTouchingInlineViewNode(e,n){const r=new La({startPosition:n?j._createAfter(e):j._createBefore(e),direction:n?"forward":"backward"});for(const i of r){if(i.item.is("element","br"))return null;if(this._isInlineObjectElement(i.item))return i.item;if(i.item.is("containerElement"))return null;if(i.item.is("$textProxy"))return i.item}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,n){if(kd(e))return new W0(this.document,"$comment");const r=n.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Ri(this.document,r)}_isViewElementWithRawContent(e,n){return n.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const n=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(n)}_createReplacementDomElement(e,n){const r=this._domDocument.createElement("span");if(r.setAttribute(QS,e),n){for(;n.firstChild;)r.appendChild(n.firstChild);for(const i of n.getAttributeNames())r.setAttribute(i,n.getAttribute(i))}return r}}function gae(t,e){return t.getAncestors().some(n=>n.is("element")&&e.includes(n.name))}function eT(t,e){let n=t;for(;n;)e(n),n=n.parentElement}function wae(t,e){return t.isEqualNode(mae)&&fO(t,e)&&t.parentNode.childNodes.length===1}function fO(t,e){const n=t.parentNode;return!!n&&!!n.tagName&&e.includes(n.tagName.toLowerCase())}function tT(t){t==="script"&&Ie("domconverter-unsafe-script-element-detected"),t==="style"&&Ie("domconverter-unsafe-style-element-detected")}function vae(t){if(!me.isGecko||!t.rangeCount)return!1;const e=t.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hs extends Mr(){constructor(e){super(),this._isEnabled=!1,this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wc{constructor(e,n,r){this.view=e,this.document=e.document,this.domEvent=n,this.domTarget=n.target,ZR(this,r)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bl extends hs{constructor(){super(...arguments),this.useCapture=!1}observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(r=>{this.listenTo(e,r,(i,s)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(s.target)&&this.onDomEvent(s)},{useCapture:this.useCapture})})}stopObserving(e){this.stopListening(e)}fire(e,n,r){this.isEnabled&&this.document.fire(e,new Wc(this.view,n,r))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yae extends bl{constructor(){super(...arguments),this.domEventType=["keydown","keyup"]}onDomEvent(e){const n={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return Hc(this)}};this.fire(e.type,e,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bae extends hs{constructor(e){super(e),this._fireSelectionChangeDoneDebounced=al(n=>{this.document.fire("selectionChangeDone",n)},200)}observe(){const e=this.document;e.on("arrowKey",(n,r)=>{e.selection.isFake&&this.isEnabled&&r.preventDefault()},{context:"$capture"}),e.on("arrowKey",(n,r)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(r.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const n=this.document.selection,r=new Ws(n.getRanges(),{backward:n.isBackward,fake:!1});(e==Ae.arrowleft||e==Ae.arrowup)&&r.setTo(r.getFirstPosition()),(e==Ae.arrowright||e==Ae.arrowdown)&&r.setTo(r.getLastPosition());const i={oldSelection:n,newSelection:r,domSelection:null};this.document.fire("selectionChange",i),this._fireSelectionChangeDoneDebounced(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let mO=class extends hs{constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this.renderer=e._renderer,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const n=this.domConverter,r=new Set,i=new Set;for(const o of e){const a=n.mapDomToView(o.target);a&&(a.is("uiElement")||a.is("rawElement")||o.type==="childList"&&!this._isBogusBrMutation(o)&&i.add(a))}for(const o of e){const a=n.mapDomToView(o.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&o.type==="characterData"){const l=n.findCorrespondingViewText(o.target);l&&!i.has(l.parent)?r.add(l):!l&&dr(o.target)&&i.add(n.mapDomToView(o.target.parentNode))}}let s=!1;for(const o of r)s=!0,this.renderer.markToSync("text",o);for(const o of i){const a=n.mapViewToDom(o),l=Array.from(o.getChildren()),c=Array.from(n.domChildrenToView(a,{withChildren:!1}));sse(l,c,_ae)||(s=!0,this.renderer.markToSync("children",o))}s&&this.view.forceRender()}_isBogusBrMutation(e){let n=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(n=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),n&&n.is("element","br")}};function _ae(t,e){if(!Array.isArray(t))return t===e?!0:t.is("$text")&&e.is("$text")?t.data===e.data:!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ug extends bl{constructor(e){super(e),this._isFocusChanging=!1,this.domEventType=["focus","blur"],this.useCapture=!0;const n=this.document;n.on("focus",()=>{this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this.flush(),e.change(()=>{})},50)}),n.on("blur",(r,i)=>{const s=n.selection.editableElement;(s===null||s===i.target)&&(n.isFocused=!1,this._isFocusChanging=!1,e.change(()=>{}))})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kae extends hs{constructor(e){super(e),this.mutationObserver=e.getObserver(mO),this.focusObserver=e.getObserver(ug),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=al(n=>{this.document.fire("selectionChangeDone",n)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=al(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){const n=e.ownerDocument,r=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},i=()=>{this.document.isSelecting&&(this._handleSelectionChange(null,n),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",r,{priority:"highest"}),this.listenTo(e,"keydown",i,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",i,{priority:"highest",useCapture:!0}),!this._documents.has(n)&&(this.listenTo(n,"mouseup",i,{priority:"highest",useCapture:!0}),this.listenTo(n,"selectionchange",(s,o)=>{this.document.isComposing&&!me.isAndroid||(this._handleSelectionChange(o,n),this._documentIsSelectingInactivityTimeoutDebounced())}),this._documents.add(n))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e,n){if(!this.isEnabled)return;const r=n.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(r.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(r);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(r))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(i))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:i,domSelection:r};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Eae extends bl{constructor(e){super(e),this.domEventType=["compositionstart","compositionupdate","compositionend"];const n=this.document;n.on("compositionstart",()=>{n.isComposing=!0},{priority:"low"}),n.on("compositionend",()=>{n.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pO{constructor(e,n={}){this._files=n.cacheFiles?nT(e):null,this._native=e}get files(){return this._files||(this._files=nT(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,n){this._native.setData(e,n)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,n,r){this._native.setDragImage(e,n,r)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function nT(t){const e=Array.from(t.files||[]),n=Array.from(t.items||[]);return e.length?e:n.filter(r=>r.kind==="file").map(r=>r.getAsFile())}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cae extends bl{constructor(){super(...arguments),this.domEventType="beforeinput"}onDomEvent(e){const n=e.getTargetRanges(),r=this.view,i=r.document;let s=null,o=null,a=[];if(e.dataTransfer&&(s=new pO(e.dataTransfer)),e.data!==null?o=e.data:s&&(o=s.getData("text/plain")),i.selection.isFake)a=Array.from(i.selection.getRanges());else if(n.length)a=n.map(l=>{const c=r.domConverter.domPositionToView(l.startContainer,l.startOffset),u=r.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return r.createRange(c,u);if(u)return r.createRange(u)}).filter(l=>!!l);else if(me.isAndroid){const l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(r.domConverter.domSelectionToView(l).getRanges())}if(me.isAndroid&&e.inputType=="insertCompositionText"&&o&&o.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[r.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&o&&o.includes(`
`)){const l=o.split(/\n{1,2}/g);let c=a;for(let u=0;u<l.length;u++){const d=l[u];d!=""&&(this.fire(e.type,e,{data:d,dataTransfer:s,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[i.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[i.selection.getFirstRange()])}return}this.fire(e.type,e,{data:o,dataTransfer:s,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xae extends hs{constructor(e){super(e),this.document.on("keydown",(n,r)=>{if(this.isEnabled&&loe(r.keyCode)){const i=new pu(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(i,r),i.stop.called&&n.stop()}})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sae extends hs{constructor(e){super(e);const n=this.document;n.on("keydown",(r,i)=>{if(!this.isEnabled||i.keyCode!=Ae.tab||i.ctrlKey)return;const s=new pu(n,"tab",n.selection.getFirstRange());n.fire(s,i),s.stop.called&&r.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let Tae=class extends Ue(){constructor(e){super(),this.domRoots=new Map,this._initialDomRootAttributes=new WeakMap,this._observers=new Map,this._ongoingChange=!1,this._postFixersInProgress=!1,this._renderingDisabled=!1,this._hasChangedSinceTheLastRendering=!1,this.document=new oO(e),this.domConverter=new hO(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new sae(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new dk(this.document),this.addObserver(mO),this.addObserver(ug),this.addObserver(kae),this.addObserver(yae),this.addObserver(bae),this.addObserver(Eae),this.addObserver(xae),this.addObserver(Cae),this.addObserver(Sae),rae(this),Koe(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),me.isiOS&&this.listenTo(this.document,"blur",(n,r)=>{this.domConverter.mapDomToView(r.domEvent.relatedTarget)||this.domConverter._clearDomSelection()})}attachDomRoot(e,n="main"){const r=this.document.getRoot(n);r._name=e.tagName.toLowerCase();const i={};for(const{name:o,value:a}of Array.from(e.attributes))i[o]=a,o==="class"?this._writer.addClass(a.split(" "),r):this._writer.setAttribute(o,a,r);this._initialDomRootAttributes.set(e,i);const s=()=>{this._writer.setAttribute("contenteditable",(!r.isReadOnly).toString(),r),r.isReadOnly?this._writer.addClass("ck-read-only",r):this._writer.removeClass("ck-read-only",r)};s(),this.domRoots.set(n,e),this.domConverter.bindElements(e,r),this._renderer.markToSync("children",r),this._renderer.markToSync("attributes",r),this._renderer.domDocuments.add(e.ownerDocument),r.on("change:children",(o,a)=>this._renderer.markToSync("children",a)),r.on("change:attributes",(o,a)=>this._renderer.markToSync("attributes",a)),r.on("change:text",(o,a)=>this._renderer.markToSync("text",a)),r.on("change:isReadOnly",()=>this.change(s)),r.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(e,n)}detachDomRoot(e){const n=this.domRoots.get(e);Array.from(n.attributes).forEach(({name:i})=>n.removeAttribute(i));const r=this._initialDomRootAttributes.get(n);for(const i in r)n.setAttribute(i,r[i]);this.domRoots.delete(e),this.domConverter.unbindDomElement(n);for(const i of this._observers.values())i.stopObserving(n)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let n=this._observers.get(e);if(n)return n;n=new e(this),this._observers.set(e,n);for(const[r,i]of this.domRoots)n.observe(i,r);return n.enable(),n}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:n,viewportOffset:r=20,ancestorOffset:i=20}={}){const s=this.document.selection.getFirstRange();if(!s)return;const o=$i({alignToTop:e,forceScroll:n,viewportOffset:r,ancestorOffset:i});typeof r=="number"&&(r={top:r,bottom:r,left:r,right:r});const a={target:this.domConverter.viewRangeToDom(s),viewportOffset:r,ancestorOffset:i,alignToTop:e,forceScroll:n};this.fire("scrollToTheSelection",a,o),toe(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new T("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const n=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),n}catch(n){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(n,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(ug).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,n){return j._createAt(e,n)}createPositionAfter(e){return j._createAfter(e)}createPositionBefore(e){return j._createBefore(e)}createRange(e,n){return new ve(e,n)}createRangeOn(e){return ve._createOn(e)}createRangeIn(e){return ve._createIn(e)}createSelection(...e){return new Ws(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ya{is(){throw new Error("is() method is abstract")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let _l=class extends ya{constructor(e){super(),this.parent=null,this._attrs=ss(e)}get document(){return null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))===null)throw new T("model-node-not-found-in-parent",this);return e}get startOffset(){let e;if(!this.parent)return null;if((e=this.parent.getChildStartOffset(this))===null)throw new T("model-node-not-found-in-parent",this);return e}get offsetSize(){return 1}get endOffset(){return this.parent?this.startOffset+this.offsetSize:null}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let n=this;for(;n.parent;)e.unshift(n.startOffset),n=n.parent;return e}getAncestors(e={}){const n=[];let r=e.includeSelf?this:this.parent;for(;r;)n[e.parentFirst?"push":"unshift"](r),r=r.parent;return n}getCommonAncestor(e,n={}){const r=this.getAncestors(n),i=e.getAncestors(n);let s=0;for(;r[s]==i[s]&&r[s];)s++;return s===0?null:r[s-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const n=this.getPath(),r=e.getPath(),i=xn(n,r);switch(i){case"prefix":return!0;case"extension":return!1;default:return n[i]<r[i]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((n,r)=>(n[r[0]]=r[1],n),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,n){this._attrs.set(e,n)}_setAttributesTo(e){this._attrs=ss(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};_l.prototype.is=function(t){return t==="node"||t==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ed{constructor(e){this._nodes=[],e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._nodes.reduce((e,n)=>e+n.offsetSize,0)}getNode(e){return this._nodes[e]||null}getNodeIndex(e){const n=this._nodes.indexOf(e);return n==-1?null:n}getNodeStartOffset(e){const n=this.getNodeIndex(e);return n===null?null:this._nodes.slice(0,n).reduce((r,i)=>r+i.offsetSize,0)}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const n=this._nodes[e];if(!n)throw new T("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(n)}offsetToIndex(e){let n=0;for(const r of this._nodes){if(e>=n&&e<n+r.offsetSize)return this.getNodeIndex(r);n+=r.offsetSize}if(n!=e)throw new T("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.length}_insertNodes(e,n){for(const r of n)if(!(r instanceof _l))throw new T("model-nodelist-insertnodes-not-node",this);this._nodes=xoe(this._nodes,Array.from(n),e,0)}_removeNodes(e,n=1){return this._nodes.splice(e,n)}toJSON(){return this._nodes.map(e=>e.toJSON())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ke extends _l{constructor(e,n){super(n),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Ke(this.data,this.getAttributes())}static fromJSON(e){return new Ke(e.data,e.attributes)}}Ke.prototype.is=function(t){return t==="$text"||t==="model:$text"||t==="text"||t==="model:text"||t==="node"||t==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ki extends ya{constructor(e,n,r){if(super(),this.textNode=e,n<0||n>e.offsetSize)throw new T("model-textproxy-wrong-offsetintext",this);if(r<0||n+r>e.offsetSize)throw new T("model-textproxy-wrong-length",this);this.data=e.data.substring(n,n+r),this.offsetInText=n}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const n=[];let r=e.includeSelf?this:this.parent;for(;r;)n[e.parentFirst?"push":"unshift"](r),r=r.parent;return n}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ki.prototype.is=function(t){return t==="$textProxy"||t==="model:$textProxy"||t==="textProxy"||t==="model:textProxy"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let ct=class Gm extends _l{constructor(e,n,r){super(n),this._children=new Ed,this.name=e,r&&this._insertChild(0,r)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let n=this;for(const r of e)n=n.getChild(n.offsetToIndex(r));return n}findAncestor(e,n={}){let r=n.includeSelf?this:this.parent;for(;r;){if(r.name===e)return r;r=r.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const n of this._children)e.children.push(n.toJSON())}return e}_clone(e=!1){const n=e?Array.from(this._children).map(r=>r._clone(!0)):void 0;return new Gm(this.name,this.getAttributes(),n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const r=Pae(n);for(const i of r)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,n=1){const r=this._children._removeNodes(e,n);for(const i of r)i.parent=null;return r}static fromJSON(e){let n;if(e.children){n=[];for(const r of e.children)r.name?n.push(Gm.fromJSON(r)):n.push(Ke.fromJSON(r))}return new Gm(e.name,e.attributes,n)}};ct.prototype.is=function(t,e){return e?e===this.name&&(t==="element"||t==="model:element"):t==="element"||t==="model:element"||t==="node"||t==="model:node"};function Pae(t){return typeof t=="string"?[new Ke(t)]:(Tr(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new Ke(e):e instanceof ki?new Ke(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vs{constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new T("model-tree-walker-no-start-position",null);const n=e.direction||"forward";if(n!="forward"&&n!="backward")throw new T("model-tree-walker-unknown-direction",e,{direction:n});this.direction=n,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=N._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let n,r,i,s;do i=this.position,s=this._visitedParent,{done:n,value:r}=this.next();while(!n&&e(r));n||(this._position=i,this._visitedParent=s)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,n=this.position.clone(),r=this._visitedParent;if(r.parent===null&&n.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const i=Cd(n,r),s=i||gO(n,r,i);if(s instanceof ct){if(!this.shallow)n.path.push(0),this._visitedParent=s;else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,_a("elementStart",s,e,n,1)}if(s instanceof Ke){let o;if(this.singleCharacters)o=1;else{let c=s.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),o=c-n.offset}const a=n.offset-s.startOffset,l=new ki(s,a,o);return n.offset+=o,this._position=n,_a("text",l,e,n,o)}return n.path.pop(),n.offset++,this._position=n,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():_a("elementEnd",r,e,n)}_previous(){const e=this.position,n=this.position.clone(),r=this._visitedParent;if(r.parent===null&&n.offset===0)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const i=n.parent,s=Cd(n,i),o=s||wO(n,i,s);if(o instanceof ct)return n.offset--,this.shallow?(this._position=n,_a("elementStart",o,e,n,1)):(n.path.push(o.maxOffset),this._position=n,this._visitedParent=o,this.ignoreElementEnd?this._previous():_a("elementEnd",o,e,n));if(o instanceof Ke){let a;if(this.singleCharacters)a=1;else{let u=o.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=n.offset-u}const l=n.offset-o.startOffset,c=new ki(o,l-a,a);return n.offset-=a,this._position=n,_a("text",c,e,n,a)}return n.path.pop(),this._position=n,this._visitedParent=r.parent,_a("elementStart",r,e,n,1)}}function _a(t,e,n,r,i){return{done:!1,value:{type:t,item:e,previousPosition:n,nextPosition:r,length:i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class N extends ya{constructor(e,n,r="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new T("model-position-root-invalid",e);if(!(n instanceof Array)||n.length===0)throw new T("model-position-path-incorrect-format",e,{path:n});e.is("rootElement")?n=n.slice():(n=[...e.getPath(),...n],e=e.root),this.root=e,this.path=n,this.stickiness=r}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let n=0;n<this.path.length-1;n++)if(e=e.getChild(e.offsetToIndex(this.path[n])),!e)throw new T("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new T("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Cd(this,this.parent)}get nodeAfter(){const e=this.parent;return gO(this,e,Cd(this,e))}get nodeBefore(){const e=this.parent;return wO(this,e,Cd(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const n=xn(this.path,e.path);switch(n){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[n]<e.path[n]?"before":"after"}}getLastMatchingPosition(e,n={}){n.startPosition=this;const r=new Vs(n);return r.skip(e),r.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const n=this.parent;return n.is("element")?n.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const n=xn(this.path,e.path),r=typeof n=="string"?Math.min(this.path.length,e.path.length):n;return this.path.slice(0,r)}getCommonAncestor(e){const n=this.getAncestors(),r=e.getAncestors();let i=0;for(;n[i]==r[i]&&n[i];)i++;return i===0?null:n[i-1]}getShiftedBy(e){const n=this.clone(),r=n.offset+e;return n.offset=r<0?0:r,n}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const n=Math.min(this.path.length,e.path.length);for(let r=0;r<n;r++){const i=this.path[r]-e.path[r];if(i<-1||i>1)return!1;if(i===1)return rT(e,this,r);if(i===-1)return rT(this,e,r)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?rb(this.path,n):rb(e.path,n)}hasSameParentAs(e){if(this.root!==e.root)return!1;const n=this.getParentPath(),r=e.getParentPath();return xn(n,r)=="same"}getTransformedByOperation(e){let n;switch(e.type){case"insert":n=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":n=this._getTransformedByMoveOperation(e);break;case"split":n=this._getTransformedBySplitOperation(e);break;case"merge":n=this._getTransformedByMergeOperation(e);break;default:n=N._createAt(this);break}return n}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const n=e.movedRange;return n.containsPosition(this)||n.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const n=e.movedRange,r=n.containsPosition(this)||n.start.isEqual(this);let i;return r?(i=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(i=i._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?i=N._createAt(e.deletionPosition):i=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),i}_getTransformedByDeletion(e,n){const r=N._createAt(this);if(this.root!=e.root)return r;if(xn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+n>this.offset)return null;r.offset-=n}}else if(xn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;if(e.offset<=this.path[i]){if(e.offset+n>this.path[i])return null;r.path[i]-=n}}return r}_getTransformedByInsertion(e,n){const r=N._createAt(this);if(this.root!=e.root)return r;if(xn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(r.offset+=n);else if(xn(e.getParentPath(),this.getParentPath())=="prefix"){const i=e.path.length-1;e.offset<=this.path[i]&&(r.path[i]+=n)}return r}_getTransformedByMove(e,n,r){if(n=n._getTransformedByDeletion(e,r),e.isEqual(n))return N._createAt(this);const i=this._getTransformedByDeletion(e,r);return i===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(r).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,n):i._getTransformedByInsertion(n,r)}_getCombined(e,n){const r=e.path.length-1,i=N._createAt(n);return i.stickiness=this.stickiness,i.offset=i.offset+this.path[r]-e.offset,i.path=[...i.path,...this.path.slice(r+1)],i}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,n,r="toNone"){if(e instanceof N)return new N(e.root,e.path,e.stickiness);{const i=e;if(n=="end")n=i.maxOffset;else{if(n=="before")return this._createBefore(i,r);if(n=="after")return this._createAfter(i,r);if(n!==0&&!n)throw new T("model-createpositionat-offset-required",[this,e])}if(!i.is("element")&&!i.is("documentFragment"))throw new T("model-position-parent-incorrect",[this,e]);const s=i.getPath();return s.push(n),new this(i.root,s,r)}}static _createAfter(e,n){if(!e.parent)throw new T("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,n)}static _createBefore(e,n){if(!e.parent)throw new T("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,n)}static fromJSON(e,n){if(e.root==="$graveyard"){const r=new N(n.graveyard,e.path);return r.stickiness=e.stickiness,r}if(!n.getRoot(e.root))throw new T("model-position-fromjson-no-root",n,{rootName:e.root});return new N(n.getRoot(e.root),e.path,e.stickiness)}}N.prototype.is=function(t){return t==="position"||t==="model:position"};function Cd(t,e){const n=e.getChild(e.offsetToIndex(t.offset));return n&&n.is("$text")&&n.startOffset<t.offset?n:null}function gO(t,e,n){return n!==null?null:e.getChild(e.offsetToIndex(t.offset))}function wO(t,e,n){return n!==null?null:e.getChild(e.offsetToIndex(t.offset)-1)}function rT(t,e,n){return!(n+1===t.path.length||!rb(e.path,n+1)||!Aae(t,n+1))}function rb(t,e){for(;e<t.length;){if(t[e]!==0)return!1;e++}return!0}function Aae(t,e){let n=t.parent,r=t.path.length-1,i=0;for(;r>=e;){if(t.path[r]+i!==n.maxOffset)return!1;i=1,r--,n=n.parent}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O extends ya{constructor(e,n){super(),this.start=N._createAt(e),this.end=n?N._createAt(n):N._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Vs({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),n=this.end.getParentPath();return xn(e,n)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,n=!1){e.isCollapsed&&(n=!1);const r=this.containsPosition(e.start)||n&&this.start.isEqual(e.start),i=this.containsPosition(e.end)||n&&this.end.isEqual(e.end);return r&&i}containsItem(e){const n=N._createBefore(e);return this.containsPosition(n)||this.start.isEqual(n)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const n=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&n.push(new O(this.start,e.start)),this.containsPosition(e.end)&&n.push(new O(e.end,this.end))):n.push(new O(this.start,this.end)),n}getIntersection(e){if(this.isIntersecting(e)){let n=this.start,r=this.end;return this.containsPosition(e.start)&&(n=e.start),this.containsPosition(e.end)&&(r=e.end),new O(n,r)}return null}getJoined(e,n=!1){let r=this.isIntersecting(e);if(r||(this.start.isBefore(e.start)?r=n?this.end.isTouching(e.start):this.end.isEqual(e.start):r=n?e.end.isTouching(this.start):e.end.isEqual(this.start)),!r)return null;let i=this.start,s=this.end;return e.start.isBefore(i)&&(i=e.start),e.end.isAfter(s)&&(s=e.end),new O(i,s)}getMinimalFlatRanges(){const e=[],n=this.start.getCommonPath(this.end).length,r=N._createAt(this.start);let i=r.parent;for(;r.path.length>n+1;){const s=i.maxOffset-r.offset;s!==0&&e.push(new O(r,r.getShiftedBy(s))),r.path=r.path.slice(0,-1),r.offset++,i=i.parent}for(;r.path.length<=this.end.path.length;){const s=this.end.path[r.path.length-1],o=s-r.offset;o!==0&&e.push(new O(r,r.getShiftedBy(o))),r.offset=s,r.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Vs(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const n=new Vs(e);for(const r of n)yield r.item}*getPositions(e={}){e.boundaries=this;const n=new Vs(e);yield n.position;for(const r of n)yield r.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new O(this.start,this.end)]}getTransformedByOperations(e){const n=[new O(this.start,this.end)];for(const r of e)for(let i=0;i<n.length;i++){const s=n[i].getTransformedByOperation(r);n.splice(i,1,...s),i+=s.length-1}for(let r=0;r<n.length;r++){const i=n[r];for(let s=r+1;s<n.length;s++){const o=n[s];(i.containsRange(o)||o.containsRange(i)||i.isEqual(o))&&n.splice(s,1)}}return n}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,n=this.end.nodeBefore;return e&&e.is("element")&&e===n?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,n=!1){return this._getTransformedByInsertion(e.position,e.howMany,n)}_getTransformedByMoveOperation(e,n=!1){const r=e.sourcePosition,i=e.howMany,s=e.targetPosition;return this._getTransformedByMove(r,s,i,n)}_getTransformedBySplitOperation(e){const n=this.start._getTransformedBySplitOperation(e);let r=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(r=this.end.getShiftedBy(1)),n.root!=r.root&&(r=this.end.getShiftedBy(-1)),new O(n,r)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new O(this.start);let n=this.start._getTransformedByMergeOperation(e),r=this.end._getTransformedByMergeOperation(e);return n.root!=r.root&&(r=this.end.getShiftedBy(-1)),n.isAfter(r)?(e.sourcePosition.isBefore(e.targetPosition)?(n=N._createAt(r),n.offset=0):(e.deletionPosition.isEqual(n)||(r=e.deletionPosition),n=e.targetPosition),new O(n,r)):new O(n,r)}_getTransformedByInsertion(e,n,r=!1){if(r&&this.containsPosition(e))return[new O(this.start,e),new O(e.getShiftedBy(n),this.end._getTransformedByInsertion(e,n))];{const i=new O(this.start,this.end);return i.start=i.start._getTransformedByInsertion(e,n),i.end=i.end._getTransformedByInsertion(e,n),[i]}}_getTransformedByMove(e,n,r,i=!1){if(this.isCollapsed){const d=this.start._getTransformedByMove(e,n,r);return[new O(d)]}const s=O._createFromPositionAndShift(e,r),o=n._getTransformedByDeletion(e,r);if(this.containsPosition(n)&&!i&&(s.containsPosition(this.start)||s.containsPosition(this.end))){const d=this.start._getTransformedByMove(e,n,r),h=this.end._getTransformedByMove(e,n,r);return[new O(d,h)]}let a;const l=this.getDifference(s);let c=null;const u=this.getIntersection(s);if(l.length==1?c=new O(l[0].start._getTransformedByDeletion(e,r),l[0].end._getTransformedByDeletion(e,r)):l.length==2&&(c=new O(this.start,this.end._getTransformedByDeletion(e,r))),c?a=c._getTransformedByInsertion(o,r,u!==null||i):a=[],u){const d=new O(u.start._getCombined(s.start,o),u.end._getCombined(s.start,o));a.length==2?a.splice(1,0,d):a.push(d)}return a}_getTransformedByDeletion(e,n){let r=this.start._getTransformedByDeletion(e,n),i=this.end._getTransformedByDeletion(e,n);return r==null&&i==null?null:(r==null&&(r=e),i==null&&(i=e),new O(r,i))}static _createFromPositionAndShift(e,n){const r=e,i=e.getShiftedBy(n);return n>0?new this(r,i):new this(i,r)}static _createIn(e){return new this(N._createAt(e,0),N._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(N._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new T("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const n=e[0];e.sort((s,o)=>s.start.isAfter(o.start)?1:-1);const r=e.indexOf(n),i=new this(n.start,n.end);if(r>0)for(let s=r-1;e[s].end.isEqual(i.start);s++)i.start=N._createAt(e[s].start);for(let s=r+1;s<e.length&&e[s].start.isEqual(i.end);s++)i.end=N._createAt(e[s].end);return i}static fromJSON(e,n){return new this(N.fromJSON(e.start,n),N.fromJSON(e.end,n))}}O.prototype.is=function(t){return t==="range"||t==="model:range"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vO extends qe(){constructor(){super(),this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._viewToModelLengthCallbacks=new Map,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._deferredBindingRemovals=new Map,this._unboundMarkerNames=new Set,this.on("modelToViewPosition",(e,n)=>{if(n.viewPosition)return;const r=this._modelToViewMapping.get(n.modelPosition.parent);if(!r)throw new T("mapping-model-position-view-parent-not-found",this,{modelPosition:n.modelPosition});n.viewPosition=this.findPositionIn(r,n.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,n)=>{if(n.modelPosition)return;const r=this.findMappedViewAncestor(n.viewPosition),i=this._viewToModelMapping.get(r),s=this._toModelOffset(n.viewPosition.parent,n.viewPosition.offset,r);n.modelPosition=N._createAt(i,s)},{priority:"low"})}bindElements(e,n){this._modelToViewMapping.set(e,n),this._viewToModelMapping.set(n,e)}unbindViewElement(e,n={}){const r=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const i of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(i);n.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(r)==e&&this._modelToViewMapping.delete(r))}unbindModelElement(e){const n=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(n)==e&&this._viewToModelMapping.delete(n)}bindElementToMarker(e,n){const r=this._markerNameToElements.get(n)||new Set;r.add(e);const i=this._elementToMarkerNames.get(e)||new Set;i.add(n),this._markerNameToElements.set(n,r),this._elementToMarkerNames.set(e,i)}unbindElementFromMarkerName(e,n){const r=this._markerNameToElements.get(n);r&&(r.delete(e),r.size==0&&this._markerNameToElements.delete(n));const i=this._elementToMarkerNames.get(e);i&&(i.delete(n),i.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,n]of this._deferredBindingRemovals)e.root==n&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new O(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new ve(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const n={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",n),n.modelPosition}toViewPosition(e,n={}){const r={modelPosition:e,mapper:this,isPhantom:n.isPhantom};return this.fire("modelToViewPosition",r),r.viewPosition}markerNameToElements(e){const n=this._markerNameToElements.get(e);if(!n)return null;const r=new Set;for(const i of n)if(i.is("attributeElement"))for(const s of i.getElementsWithSameId())r.add(s);else r.add(i);return r}registerViewToModelLength(e,n){this._viewToModelLengthCallbacks.set(e,n)}findMappedViewAncestor(e){let n=e.parent;for(;!this._viewToModelMapping.has(n);)n=n.parent;return n}_toModelOffset(e,n,r){if(r!=e){const s=this._toModelOffset(e.parent,e.index,r),o=this._toModelOffset(e,n,e);return s+o}if(e.is("$text"))return n;let i=0;for(let s=0;s<n;s++)i+=this.getModelLength(e.getChild(s));return i}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let n=0;for(const r of e.getChildren())n+=this.getModelLength(r);return n}}findPositionIn(e,n){let r,i=0,s=0,o=0;if(e.is("$text"))return new j(e,n);for(;s<n;)r=e.getChild(o),i=this.getModelLength(r),s+=i,o++;return s==n?this._moveViewPositionToTextNode(new j(e,o)):this.findPositionIn(r,n-(s-i))}_moveViewPositionToTextNode(e){const n=e.nodeBefore,r=e.nodeAfter;return n instanceof dt?new j(n,n.data.length):r instanceof dt?new j(r,0):e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Iae{constructor(){this._consumable=new Map,this._textProxyRegistry=new Map}add(e,n){n=im(n),e instanceof ki&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(n,!0)}consume(e,n){return n=im(n),e instanceof ki&&(e=this._getSymbolForTextProxy(e)),this.test(e,n)?(this._consumable.get(e).set(n,!1),!0):!1}test(e,n){n=im(n),e instanceof ki&&(e=this._getSymbolForTextProxy(e));const r=this._consumable.get(e);if(r===void 0)return null;const i=r.get(n);return i===void 0?null:i}revert(e,n){n=im(n),e instanceof ki&&(e=this._getSymbolForTextProxy(e));const r=this.test(e,n);return r===!1?(this._consumable.get(e).set(n,!0),!0):r===!0?!1:null}verifyAllConsumed(e){const n=[];for(const[r,i]of this._consumable)for(const[s,o]of i){const a=s.split(":")[0];o&&e==a&&n.push({event:s,item:r.name||r.description})}if(n.length)throw new T("conversion-model-consumable-not-consumed",null,{items:n})}_getSymbolForTextProxy(e){let n=null;const r=this._textProxyRegistry.get(e.startOffset);if(r){const i=r.get(e.endOffset);i&&(n=i.get(e.parent))}return n||(n=this._addSymbolForTextProxy(e)),n}_addSymbolForTextProxy(e){const n=e.startOffset,r=e.endOffset,i=e.parent,s=Symbol("$textProxy:"+e.data);let o,a;return o=this._textProxyRegistry.get(n),o||(o=new Map,this._textProxyRegistry.set(n,o)),a=o.get(r),a||(a=new Map,o.set(r,a)),a.set(i,s),s}}function im(t){const e=t.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?t:e.length>1?e[0]+":"+e[1]:e[0]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yO extends qe(){constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,n,r){const i=this._createConversionApi(r,e.getRefreshedItems());for(const o of e.getMarkersToRemove())this._convertMarkerRemove(o.name,o.range,i);const s=this._reduceChanges(e.getChanges());for(const o of s)o.type==="insert"?this._convertInsert(O._createFromPositionAndShift(o.position,o.length),i):o.type==="reinsert"?this._convertReinsert(O._createFromPositionAndShift(o.position,o.length),i):o.type==="remove"?this._convertRemove(o.position,o.length,o.name,i):this._convertAttribute(o.range,o.attributeKey,o.attributeOldValue,o.attributeNewValue,i);i.mapper.flushDeferredBindings();for(const o of i.mapper.flushUnboundMarkerNames()){const a=n.get(o).getRange();this._convertMarkerRemove(o,a,i),this._convertMarkerAdd(o,a,i)}for(const o of e.getMarkersToAdd())this._convertMarkerAdd(o.name,o.range,i);i.consumable.verifyAllConsumed("insert")}convert(e,n,r,i={}){const s=this._createConversionApi(r,void 0,i);this._convertInsert(e,s);for(const[o,a]of n)this._convertMarkerAdd(o,a,s);s.consumable.verifyAllConsumed("insert")}convertSelection(e,n,r){const i=this._createConversionApi(r);this.fire("cleanSelection",{selection:e},i);const s=e.getFirstPosition().root;if(!i.mapper.toViewElement(s))return;const o=Array.from(n.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(i.consumable,e,o),this.fire("selection",{selection:e},i),!!e.isCollapsed){for(const a of o)if(i.consumable.test(e,"addMarker:"+a.name)){const l=a.getRange();if(!Rae(e.getFirstPosition(),a,i.mapper))continue;const c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,i)}for(const a of e.getAttributeKeys())if(i.consumable.test(e,"attribute:"+a)){const l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,i)}}}_convertInsert(e,n,r={}){r.doNotAddConsumables||this._addConsumablesForInsert(n.consumable,e);for(const i of Array.from(e.getWalker({shallow:!0})).map(iT))this._testAndFire("insert",i,n)}_convertRemove(e,n,r,i){this.fire(`remove:${r}`,{position:e,length:n},i)}_convertAttribute(e,n,r,i,s){this._addConsumablesForRange(s.consumable,e,`attribute:${n}`);for(const o of e){const a={item:o.item,range:O._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:n,attributeOldValue:r,attributeNewValue:i};this._testAndFire(`attribute:${n}`,a,s)}}_convertReinsert(e,n){const r=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(n.consumable,r);for(const i of r.map(iT))this._testAndFire("insert",{...i,reconversion:!0},n)}_convertMarkerAdd(e,n,r){if(n.root.rootName=="$graveyard")return;const i=`addMarker:${e}`;if(r.consumable.add(n,i),this.fire(i,{markerName:e,markerRange:n},r),!!r.consumable.consume(n,i)){this._addConsumablesForRange(r.consumable,n,i);for(const s of n.getItems()){if(!r.consumable.test(s,i))continue;const o={item:s,range:O._createOn(s),markerName:e,markerRange:n};this.fire(i,o,r)}}}_convertMarkerRemove(e,n,r){n.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:n},r)}_reduceChanges(e){const n={changes:e};return this.fire("reduceChanges",n),n.changes}_addConsumablesForInsert(e,n){for(const r of n){const i=r.item;if(e.test(i,"insert")===null){e.add(i,"insert");for(const s of i.getAttributeKeys())e.add(i,"attribute:"+s)}}return e}_addConsumablesForRange(e,n,r){for(const i of n.getItems())e.add(i,r);return e}_addConsumablesForSelection(e,n,r){e.add(n,"selection");for(const i of r)e.add(n,"addMarker:"+i.name);for(const i of n.getAttributeKeys())e.add(n,"attribute:"+i);return e}_testAndFire(e,n,r){const i=Oae(e,n),s=n.item.is("$textProxy")?r.consumable._getSymbolForTextProxy(n.item):n.item,o=this._firedEventsMap.get(r),a=o.get(s);if(!a)o.set(s,new Set([i]));else if(!a.has(i))a.add(i);else return;this.fire(i,n,r)}_testAndFireAddAttributes(e,n){const r={item:e,range:O._createOn(e)};for(const i of r.item.getAttributeKeys())r.attributeKey=i,r.attributeOldValue=null,r.attributeNewValue=r.item.getAttribute(i),this._testAndFire(`attribute:${i}`,r,n)}_createConversionApi(e,n=new Set,r={}){const i={...this._conversionApi,consumable:new Iae,writer:e,options:r,convertItem:s=>this._convertInsert(O._createOn(s),i),convertChildren:s=>this._convertInsert(O._createIn(s),i,{doNotAddConsumables:!0}),convertAttributes:s=>this._testAndFireAddAttributes(s,i),canReuseView:s=>!n.has(i.mapper.toModelElement(s))};return this._firedEventsMap.set(i,new Map),i}}function Rae(t,e,n){const r=e.getRange(),i=Array.from(t.getAncestors());return i.shift(),i.reverse(),!i.some(o=>{if(r.containsItem(o))return!!n.toViewElement(o).getCustomProperty("addHighlight")})}function Oae(t,e){const n=e.item.is("element")?e.item.name:"$text";return`${t}:${n}`}function iT(t){const e=t.item,n=O._createFromPositionAndShift(t.previousPosition,t.length);return{item:e,range:n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fr extends qe(ya){constructor(...e){super(),this._lastRangeBackward=!1,this._attrs=new Map,this._ranges=[],e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const n of this._ranges){let r=!1;for(const i of e._ranges)if(n.isEqual(i)){r=!0;break}if(!r)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new O(e.start,e.end)}getFirstRange(){let e=null;for(const n of this._ranges)(!e||n.start.isBefore(e.start))&&(e=n);return e?new O(e.start,e.end):null}getLastRange(){let e=null;for(const n of this._ranges)(!e||n.end.isAfter(e.end))&&(e=n);return e?new O(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[n,r,i]=e;if(typeof r=="object"&&(i=r,r=void 0),n===null)this._setRanges([]);else if(n instanceof fr)this._setRanges(n.getRanges(),n.isBackward);else if(n&&typeof n.getRanges=="function")this._setRanges(n.getRanges(),n.isBackward);else if(n instanceof O)this._setRanges([n],!!i&&!!i.backward);else if(n instanceof N)this._setRanges([new O(n)]);else if(n instanceof _l){const s=!!i&&!!i.backward;let o;if(r=="in")o=O._createIn(n);else if(r=="on")o=O._createOn(n);else if(r!==void 0)o=new O(N._createAt(n,r));else throw new T("model-selection-setto-required-second-parameter",[this,n]);this._setRanges([o],s)}else if(Tr(n))this._setRanges(n,i&&!!i.backward);else throw new T("model-selection-setto-not-selectable",[this,n])}_setRanges(e,n=!1){const r=Array.from(e),i=r.some(s=>{if(!(s instanceof O))throw new T("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(o=>!o.isEqual(s))});r.length===this._ranges.length&&!i||(this._replaceAllRanges(r),this._lastRangeBackward=!!n,this.fire("change:range",{directChange:!0}))}setFocus(e,n){if(this.anchor===null)throw new T("model-selection-setfocus-no-ranges",[this,e]);const r=N._createAt(e,n);if(r.compareWith(this.focus)=="same")return;const i=this.anchor;this._ranges.length&&this._popRange(),r.compareWith(i)=="before"?(this._pushRange(new O(r,i)),this._lastRangeBackward=!0):(this._pushRange(new O(i,r)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,n){this.getAttribute(e)!==n&&(this._attrs.set(e,n),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const n of this.getRanges()){const r=sT(n.start,e);Nae(r,n)&&(yield r);for(const s of n.getWalker()){const o=s.item;s.type=="elementEnd"&&Mae(o,e,n)&&(yield o)}const i=sT(n.end,e);Dae(i,n)&&(yield i)}}containsEntireContent(e=this.anchor.root){const n=N._createAt(e,0),r=N._createAt(e,"end");return n.isTouching(this.getFirstPosition())&&r.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new O(e.start,e.end))}_checkRange(e){for(let n=0;n<this._ranges.length;n++)if(e.isIntersecting(this._ranges[n]))throw new T("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[n]})}_replaceAllRanges(e){this._removeAllRanges();for(const n of e)this._pushRange(n)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}fr.prototype.is=function(t){return t==="selection"||t==="model:selection"};function bO(t,e){return e.has(t)?!1:(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Mae(t,e,n){return bO(t,e)&&hk(t,n)}function sT(t,e){const r=t.parent.root.document.model.schema,i=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let s=!1;const o=i.find(a=>s?!1:(s=r.isLimit(a),!s&&bO(a,e)));return i.forEach(a=>e.add(a)),o}function hk(t,e){const n=Lae(t);return n?!e.containsRange(O._createOn(n),!0):!0}function Nae(t,e){return t?e.isCollapsed||t.isEmpty?!0:e.start.isTouching(N._createAt(t,t.maxOffset))?!1:hk(t,e):!1}function Dae(t,e){return t?e.isCollapsed||t.isEmpty?!0:e.end.isTouching(N._createAt(t,0))?!1:hk(t,e):!1}function Lae(t){const e=t.root.document.model.schema;let n=t.parent;for(;n;){if(e.isBlock(n))return n;n=n.parent}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gr extends qe(O){constructor(e,n){super(e,n),$ae.call(this)}detach(){this.stopListening()}toRange(){return new O(this.start,this.end)}static fromRange(e){return new Gr(e.start,e.end)}}Gr.prototype.is=function(t){return t==="liveRange"||t==="model:liveRange"||t=="range"||t==="model:range"};function $ae(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&Fae.call(this,n)},{priority:"low"})}function Fae(t){const e=this.getTransformedByOperation(t),n=O._createFromRanges(e),r=!n.isEqual(this),i=Vae(this,t);let s=null;if(r){n.root.rootName=="$graveyard"&&(t.type=="remove"?s=t.sourcePosition:s=t.deletionPosition);const o=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",o,{deletionPosition:s})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:s})}function Vae(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fh="selection:";class Oi extends qe(ya){constructor(e){super(),this._selection=new Bae(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,n){this._selection.setFocus(e,n)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,n){this._selection.setAttribute(e,n)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return fh+e}static _isStoreAttributeKey(e){return e.startsWith(fh)}}Oi.prototype.is=function(t){return t==="selection"||t=="model:selection"||t=="documentSelection"||t=="model:documentSelection"};class Bae extends fr{constructor(e){super(),this.markers=new Nr({idProperty:"name"}),this._attributePriority=new Map,this._selectionRestorePosition=null,this._hasChangedRange=!1,this._overriddenGravityRegister=new Set,this._observedMarkers=new Set,this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(n,r)=>{const i=r[0];!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(n,r,i,s)=>{this._updateMarker(r,s)}),this.listenTo(this._document,"change",(n,r)=>{Uae(this._model,r)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,n){super.setFocus(e,n),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,n){if(this._setAttribute(e,n)){const r=[e];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const n=[e];this.fire("change:attribute",{attributeKeys:n,directChange:!0})}}overrideGravity(){const e=ti();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new T("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const n=this._prepareRange(e);n&&this._ranges.push(n)}_validateSelectionRanges(e){for(const n of e)if(!this._document._validateSelectionRange(n))throw new T("document-selection-wrong-position",this,{range:n})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const n=Gr.fromRange(e);return n.on("change:range",(r,i,s)=>{if(this._hasChangedRange=!0,n.root==this._document.graveyard){this._selectionRestorePosition=s.deletionPosition;const o=this._ranges.indexOf(n);this._ranges.splice(o,1),n.detach()}}),n}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let n=!1;for(const i of this._model.markers){const s=i.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const o=i.getRange();for(const a of this.getRanges())o.containsRange(a,!a.isCollapsed)&&e.push(i)}const r=Array.from(this.markers);for(const i of e)this.markers.has(i)||(this.markers.add(i),n=!0);for(const i of Array.from(this.markers))e.includes(i)||(this.markers.remove(i),n=!0);n&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateMarker(e,n){const r=e.name.split(":",1)[0];if(!this._observedMarkers.has(r))return;let i=!1;const s=Array.from(this.markers),o=this.markers.has(e);if(!n)o&&(this.markers.remove(e),i=!0);else{let a=!1;for(const l of this.getRanges())if(n.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!o?(this.markers.add(e),i=!0):!a&&o&&(this.markers.remove(e),i=!0)}i&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateAttributes(e){const n=ss(this._getSurroundingAttributes()),r=ss(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[s,o]of this._attributePriority)o=="low"&&(this._attrs.delete(s),this._attributePriority.delete(s));this._setAttributesTo(n);const i=[];for(const[s,o]of this.getAttributes())(!r.has(s)||r.get(s)!==o)&&i.push(s);for(const[s]of r)this.hasAttribute(s)||i.push(s);i.length>0&&this.fire("change:attribute",{attributeKeys:i,directChange:!1})}_setAttribute(e,n,r=!0){const i=r?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===n?!1:(this._attrs.set(e,n),this._attributePriority.set(e,i),!0)}_removeAttribute(e,n=!0){const r=n?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,r),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const n=new Set;for(const[r,i]of this.getAttributes())e.get(r)!==i&&this._removeAttribute(r,!1);for(const[r,i]of e)this._setAttribute(r,i,!1)&&n.add(r);return n}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const n of e.getAttributeKeys())n.startsWith(fh)&&(yield[n.substr(fh.length),e.getAttribute(n)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),n=this._model.schema;if(e.root.rootName=="$graveyard")return null;let r=null;if(this.isCollapsed){const i=e.textNode?e.textNode:e.nodeBefore,s=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(r=Hu(i,n)),r||(r=Hu(s,n)),!this.isGravityOverridden&&!r){let o=i;for(;o&&!r;)o=o.previousSibling,r=Hu(o,n)}if(!r){let o=s;for(;o&&!r;)o=o.nextSibling,r=Hu(o,n)}r||(r=this.getStoredAttributes())}else{const i=this.getFirstRange();for(const s of i){if(s.item.is("element")&&n.isObject(s.item)){r=Hu(s.item,n);break}if(s.type=="text"){r=s.item.getAttributes();break}}}return r}_fixGraveyardSelection(e){const n=this._model.schema.getNearestSelectionRange(e);n&&this._pushRange(n)}}function Hu(t,e){if(!t)return null;if(t instanceof ki||t instanceof Ke)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const n=[];for(const[r,i]of t.getAttributes())e.checkAttribute("$text",r)&&e.getAttributeProperties(r).copyFromObject!==!1&&n.push([r,i]);return n}function Uae(t,e){const n=t.document.differ;for(const r of n.getChanges()){if(r.type!="insert")continue;const i=r.position.parent;r.length===i.maxOffset&&t.enqueueChange(e,o=>{const a=Array.from(i.getAttributeKeys()).filter(l=>l.startsWith(fh));for(const l of a)o.removeAttribute(l,i)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _O{constructor(e){this._dispatchers=e}add(e){for(const n of this._dispatchers)e(n);return this}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zae extends _O{elementToElement(e){return this.add(ole(e))}elementToStructure(e){return this.add(ale(e))}attributeToElement(e){return this.add(lle(e))}attributeToAttribute(e){return this.add(cle(e))}markerToElement(e){return this.add(ule(e))}markerToHighlight(e){return this.add(hle(e))}markerToData(e){return this.add(dle(e))}}function kO(){return(t,e,n)=>{if(!n.consumable.consume(e.item,t.name))return;const r=n.writer,i=n.mapper.toViewPosition(e.range.start),s=r.createText(e.item.data);r.insert(i,s)}}function EO(){return(t,e,n)=>{n.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&n.convertChildren(e.item)}}function Hae(){return(t,e,n)=>{const r=n.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),s=n.mapper.toViewPosition(i,{isPhantom:!0}),o=n.writer.createRange(r,s),a=n.writer.remove(o.getTrimmed());for(const l of n.writer.createRangeIn(a).getItems())n.mapper.unbindViewElement(l,{defer:!0})}}function CO(t,e){const n=t.createAttributeElement("span",e.attributes);return e.classes&&n._addClass(e.classes),typeof e.priority=="number"&&(n._priority=e.priority),n._id=e.id,n}function Wae(){return(t,e,n)=>{const r=e.selection;if(r.isCollapsed||!n.consumable.consume(r,"selection"))return;const i=[];for(const s of r.getRanges())i.push(n.mapper.toViewRange(s));n.writer.setSelection(i,{backward:r.isBackward})}}function jae(){return(t,e,n)=>{const r=e.selection;if(!r.isCollapsed||!n.consumable.consume(r,"selection"))return;const i=n.writer,s=r.getFirstPosition(),o=n.mapper.toViewPosition(s),a=i.breakAttributes(o);i.setSelection(a)}}function Gae(){return(t,e,n)=>{const r=n.writer,i=r.document.selection;for(const s of i.getRanges())s.isCollapsed&&s.end.parent.isAttached()&&n.writer.mergeAttributes(s.start);r.setSelection(null)}}function qae(t){return(e,n,r)=>{if(!r.consumable.test(n.item,e.name))return;const i=t(n.attributeOldValue,r,n),s=t(n.attributeNewValue,r,n);if(!i&&!s)return;r.consumable.consume(n.item,e.name);const o=r.writer,a=o.document.selection;if(n.item instanceof fr||n.item instanceof Oi)o.wrap(a.getFirstRange(),s);else{let l=r.mapper.toViewRange(n.range);n.attributeOldValue!==null&&i&&(l=o.unwrap(l,i)),n.attributeNewValue!==null&&s&&o.wrap(l,s)}}}function Yae(t,e=yle){return(n,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const s=t(r.item,i,r);if(!s)return;e(r.item,i.consumable);const o=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,s),i.writer.insert(o,s),i.convertAttributes(r.item),AO(s,r.item.getChildren(),i,{reconversion:r.reconversion})}}function Kae(t,e){return(n,r,i)=>{if(!e(r.item,i.consumable,{preflight:!0}))return;const s=new Map;i.writer._registerSlotFactory(ple(r.item,s,i));const o=t(r.item,i,r);if(i.writer._clearSlotFactory(),!o)return;gle(r.item,s,i),e(r.item,i.consumable);const a=i.mapper.toViewPosition(r.range.start);i.mapper.bindElements(r.item,o),i.writer.insert(a,o),i.convertAttributes(r.item),wle(o,s,i,{reconversion:r.reconversion})}}function Zae(t){return(e,n,r)=>{n.isOpening=!0;const i=t(n,r);n.isOpening=!1;const s=t(n,r);if(!i||!s)return;const o=n.markerRange;if(o.isCollapsed&&!r.consumable.consume(o,e.name))return;for(const c of o)if(!r.consumable.consume(c.item,e.name))return;const a=r.mapper,l=r.writer;l.insert(a.toViewPosition(o.start),i),r.mapper.bindElementToMarker(i,n.markerName),o.isCollapsed||(l.insert(a.toViewPosition(o.end),s),r.mapper.bindElementToMarker(s,n.markerName)),e.stop()}}function Jae(){return(t,e,n)=>{const r=n.mapper.markerNameToElements(e.markerName);if(r){for(const i of r)n.mapper.unbindElementFromMarkerName(i,e.markerName),n.writer.clear(n.writer.createRangeOn(i),i);n.writer.clearClonedElementsGroup(e.markerName),t.stop()}}}function Xae(t){return(e,n,r)=>{const i=t(n.markerName,r);if(!i)return;const s=n.markerRange;r.consumable.consume(s,e.name)&&(oT(s,!1,r,n,i),oT(s,!0,r,n,i),e.stop())}}function oT(t,e,n,r,i){const s=e?t.start:t.end,o=s.nodeAfter&&s.nodeAfter.is("element")?s.nodeAfter:null,a=s.nodeBefore&&s.nodeBefore.is("element")?s.nodeBefore:null;if(o||a){let c,u;e&&o||!e&&!a?(c=o,u=!0):(c=a,u=!1);const d=n.mapper.toViewElement(c);if(d){Qae(d,e,u,n,r,i);return}}const l=n.mapper.toViewPosition(s);ele(l,e,n,r,i)}function Qae(t,e,n,r,i,s){const o=`data-${s.group}-${e?"start":"end"}-${n?"before":"after"}`,a=t.hasAttribute(o)?t.getAttribute(o).split(","):[];a.unshift(s.name),r.writer.setAttribute(o,a.join(","),t),r.mapper.bindElementToMarker(t,i.markerName)}function ele(t,e,n,r,i){const s=`${i.group}-${e?"start":"end"}`,o=i.name?{name:i.name}:null,a=n.writer.createUIElement(s,o);n.writer.insert(t,a),n.mapper.bindElementToMarker(a,r.markerName)}function tle(t){return(e,n,r)=>{const i=t(n.markerName,r);if(!i)return;const s=r.mapper.markerNameToElements(n.markerName);if(!s)return;for(const a of s)r.mapper.unbindElementFromMarkerName(a,n.markerName),a.is("containerElement")?(o(`data-${i.group}-start-before`,a),o(`data-${i.group}-start-after`,a),o(`data-${i.group}-end-before`,a),o(`data-${i.group}-end-after`,a)):r.writer.clear(r.writer.createRangeOn(a),a);r.writer.clearClonedElementsGroup(n.markerName),e.stop();function o(a,l){if(l.hasAttribute(a)){const c=new Set(l.getAttribute(a).split(","));c.delete(i.name),c.size==0?r.writer.removeAttribute(a,l):r.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function nle(t){return(e,n,r)=>{if(!r.consumable.test(n.item,e.name))return;const i=t(n.attributeOldValue,r,n),s=t(n.attributeNewValue,r,n);if(!i&&!s)return;r.consumable.consume(n.item,e.name);const o=r.mapper.toViewElement(n.item),a=r.writer;if(!o)throw new T("conversion-attribute-to-attribute-on-text",r.dispatcher,n);if(n.attributeOldValue!==null&&i)if(i.key=="class"){const l=typeof i.value=="string"?i.value.split(/\s+/):i.value;for(const c of l)a.removeClass(c,o)}else if(i.key=="style")if(typeof i.value=="string"){const l=new Xy(a.document.stylesProcessor);l.setTo(i.value);for(const[c]of l.getStylesEntries())a.removeStyle(c,o)}else{const l=Object.keys(i.value);for(const c of l)a.removeStyle(c,o)}else a.removeAttribute(i.key,o);if(n.attributeNewValue!==null&&s)if(s.key=="class"){const l=typeof s.value=="string"?s.value.split(/\s+/):s.value;for(const c of l)a.addClass(c,o)}else if(s.key=="style")if(typeof s.value=="string"){const l=new Xy(a.document.stylesProcessor);l.setTo(s.value);for(const[c,u]of l.getStylesEntries())a.setStyle(c,u,o)}else{const l=Object.keys(s.value);for(const c of l)a.setStyle(c,s.value[c],o)}else a.setAttribute(s.key,s.value,o)}}function rle(t){return(e,n,r)=>{if(!n.item||!(n.item instanceof fr||n.item instanceof Oi)&&!n.item.is("$textProxy"))return;const i=fk(t,n,r);if(!i||!r.consumable.consume(n.item,e.name))return;const s=r.writer,o=CO(s,i),a=s.document.selection;if(n.item instanceof fr||n.item instanceof Oi)s.wrap(a.getFirstRange(),o);else{const l=r.mapper.toViewRange(n.range),c=s.wrap(l,o);for(const u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(o)){r.mapper.bindElementToMarker(u,n.markerName);break}}}}function ile(t){return(e,n,r)=>{if(!n.item||!(n.item instanceof ct))return;const i=fk(t,n,r);if(!i||!r.consumable.test(n.item,e.name))return;const s=r.mapper.toViewElement(n.item);if(s&&s.getCustomProperty("addHighlight")){r.consumable.consume(n.item,e.name);for(const a of O._createIn(n.item))r.consumable.consume(a.item,e.name);s.getCustomProperty("addHighlight")(s,i,r.writer),r.mapper.bindElementToMarker(s,n.markerName)}}}function sle(t){return(e,n,r)=>{if(n.markerRange.isCollapsed)return;const i=fk(t,n,r);if(!i)return;const s=CO(r.writer,i),o=r.mapper.markerNameToElements(n.markerName);if(o){for(const a of o)r.mapper.unbindElementFromMarkerName(a,n.markerName),a.is("attributeElement")?r.writer.unwrap(r.writer.createRangeOn(a),s):a.getCustomProperty("removeHighlight")(a,i.id,r.writer);r.writer.clearClonedElementsGroup(n.markerName),e.stop()}}}function ole(t){const e=xO(t.model),n=mh(t.view,"container");return e.attributes.length&&(e.children=!0),r=>{r.on(`insert:${e.name}`,Yae(n,PO(e)),{priority:t.converterPriority||"normal"}),(e.children||e.attributes.length)&&r.on("reduceChanges",TO(e),{priority:"low"})}}function ale(t){const e=xO(t.model),n=mh(t.view,"container");return e.children=!0,r=>{if(r._conversionApi.schema.checkChild(e.name,"$text"))throw new T("conversion-element-to-structure-disallowed-text",r,{elementName:e.name});r.on(`insert:${e.name}`,Kae(n,PO(e)),{priority:t.converterPriority||"normal"}),r.on("reduceChanges",TO(e),{priority:"low"})}}function lle(t){t=$i(t);let e=t.model;typeof e=="string"&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const i of e.values)t.view[i]=mh(t.view[i],"attribute");else t.view=mh(t.view,"attribute");const r=SO(t);return i=>{i.on(n,qae(r),{priority:t.converterPriority||"normal"})}}function cle(t){t=$i(t);let e=t.model;typeof e=="string"&&(e={key:e});let n=`attribute:${e.key}`;if(e.name&&(n+=":"+e.name),e.values)for(const i of e.values)t.view[i]=aT(t.view[i]);else t.view=aT(t.view);const r=SO(t);return i=>{i.on(n,nle(r),{priority:t.converterPriority||"normal"})}}function ule(t){const e=mh(t.view,"ui");return n=>{n.on(`addMarker:${t.model}`,Zae(e),{priority:t.converterPriority||"normal"}),n.on(`removeMarker:${t.model}`,Jae(),{priority:t.converterPriority||"normal"})}}function dle(t){t=$i(t);const e=t.model;let n=t.view;return n||(n=r=>({group:e,name:r.substr(t.model.length+1)})),r=>{r.on(`addMarker:${e}`,Xae(n),{priority:t.converterPriority||"normal"}),r.on(`removeMarker:${e}`,tle(n),{priority:t.converterPriority||"normal"})}}function hle(t){return e=>{e.on(`addMarker:${t.model}`,rle(t.view),{priority:t.converterPriority||"normal"}),e.on(`addMarker:${t.model}`,ile(t.view),{priority:t.converterPriority||"normal"}),e.on(`removeMarker:${t.model}`,sle(t.view),{priority:t.converterPriority||"normal"})}}function xO(t){return typeof t=="string"&&(t={name:t}),{name:t.name,attributes:t.attributes?st(t.attributes):[],children:!!t.children}}function mh(t,e){return typeof t=="function"?t:(n,r)=>fle(t,r,e)}function fle(t,e,n){typeof t=="string"&&(t={name:t});let r;const i=e.writer,s=Object.assign({},t.attributes);if(n=="container")r=i.createContainerElement(t.name,s);else if(n=="attribute"){const o={priority:t.priority||Ha.DEFAULT_PRIORITY};r=i.createAttributeElement(t.name,s,o)}else r=i.createUIElement(t.name,s);if(t.styles){const o=Object.keys(t.styles);for(const a of o)i.setStyle(a,t.styles[a],r)}if(t.classes){const o=t.classes;if(typeof o=="string")i.addClass(o,r);else for(const a of o)i.addClass(a,r)}return r}function SO(t){return t.model.values?(e,n,r)=>{const i=t.view[e];return i?i(e,n,r):null}:t.view}function aT(t){return typeof t=="string"?e=>({key:t,value:e}):typeof t=="object"?t.value?()=>t:e=>({key:t.key,value:e}):t}function fk(t,e,n){const r=typeof t=="function"?t(e,n):t;return r?(r.priority||(r.priority=10),r.id||(r.id=e.markerName),r):null}function mle(t){return(e,n)=>{if(!e.is("element",t.name))return!1;if(n.type=="attribute"){if(t.attributes.includes(n.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(t.children)return!0}return!1}}function TO(t){const e=mle(t);return(n,r)=>{const i=[];r.reconvertedElements||(r.reconvertedElements=new Set);for(const s of r.changes){const o=s.type=="attribute"?s.range.start.nodeAfter:s.position.parent;if(!o||!e(o,s)){i.push(s);continue}if(!r.reconvertedElements.has(o)){r.reconvertedElements.add(o);const a=N._createBefore(o);let l=i.length;for(let c=i.length-1;c>=0;c--){const u=i[c],h=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(h=="before"||u.type=="remove"&&h=="same")break;l=c}i.splice(l,0,{type:"remove",name:o.name,position:a,length:1},{type:"reinsert",name:o.name,position:a,length:1})}}r.changes=i}}function PO(t){return(e,n,r={})=>{const i=["insert"];for(const s of t.attributes)e.hasAttribute(s)&&i.push(`attribute:${s}`);return i.every(s=>n.test(e,s))?(r.preflight||i.forEach(s=>n.consume(e,s)),!0):!1}}function ple(t,e,n){return(r,i)=>{const s=r.createContainerElement("$slot");let o=null;if(i==="children")o=Array.from(t.getChildren());else if(typeof i=="function")o=Array.from(t.getChildren()).filter(a=>i(a));else throw new T("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:i});return e.set(s,o),s}}function gle(t,e,n){const r=Array.from(e.values()).flat(),i=new Set(r);if(i.size!=r.length)throw new T("conversion-slot-filter-overlap",n.dispatcher,{element:t});if(i.size!=t.childCount)throw new T("conversion-slot-filter-incomplete",n.dispatcher,{element:t})}function wle(t,e,n,r){n.mapper.on("modelToViewPosition",o,{priority:"highest"});let i=null,s=null;for([i,s]of e)AO(t,s,n,r),n.writer.move(n.writer.createRangeIn(i),n.writer.createPositionBefore(i)),n.writer.remove(i);n.mapper.off("modelToViewPosition",o);function o(a,l){const c=l.modelPosition.nodeAfter,u=s.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(i,u))}}function AO(t,e,n,r){for(const i of e)vle(t.root,i,n,r)||n.convertItem(i)}function vle(t,e,n,r){const{writer:i,mapper:s}=n;if(!r.reconversion)return!1;const o=s.toViewElement(e);return!o||o.root==t||!n.canReuseView(o)?!1:(i.move(i.createRangeOn(o),s.toViewPosition(N._createBefore(e))),!0)}function yle(t,e,{preflight:n}={}){return n?e.test(t,"insert"):e.consume(t,"insert")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function IO(t){const{schema:e,document:n}=t.model;for(const r of n.getRoots())if(r.isEmpty&&!e.checkChild(r,"$text")&&e.checkChild(r,"paragraph"))return t.insertElement("paragraph",r),!0;return!1}function RO(t,e,n){const r=n.createContext(t);return!(!n.checkChild(r,"paragraph")||!n.checkChild(r.push("paragraph"),e))}function OO(t,e){const n=e.createElement("paragraph");return e.insert(n,t),e.createPositionAt(n,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ble extends _O{elementToElement(e){return this.add(MO(e))}elementToAttribute(e){return this.add(Ele(e))}attributeToAttribute(e){return this.add(Cle(e))}elementToMarker(e){return this.add(xle(e))}dataToMarker(e){return this.add(Sle(e))}}function lT(){return(t,e,n)=>{if(!e.modelRange&&n.consumable.consume(e.viewItem,{name:!0})){const{modelRange:r,modelCursor:i}=n.convertChildren(e.viewItem,e.modelCursor);e.modelRange=r,e.modelCursor=i}}}function _le(){return(t,e,{schema:n,consumable:r,writer:i})=>{let s=e.modelCursor;if(!r.test(e.viewItem))return;if(!n.checkChild(s,"$text")){if(!RO(s,"$text",n)||e.viewItem.data.trim().length==0)return;const a=s.nodeBefore;s=OO(s,i),a&&a.is("element","$marker")&&(i.move(i.createRangeOn(a),s),s=i.createPositionAfter(a))}r.consume(e.viewItem);const o=i.createText(e.viewItem.data);i.insert(o,s),e.modelRange=i.createRange(s,s.getShiftedBy(o.offsetSize)),e.modelCursor=e.modelRange.end}}function kle(t,e){return(n,r)=>{const i=r.newSelection,s=[];for(const a of i.getRanges())s.push(e.toModelRange(a));const o=t.createSelection(s,{backward:i.isBackward});o.isEqual(t.document.selection)||t.change(a=>{a.setSelection(o)})}}function MO(t){t=$i(t);const e=ib(t),n=mk(t.view),r=n?`element:${n}`:"element";return i=>{i.on(r,e,{priority:t.converterPriority||"normal"})}}function Ele(t){t=$i(t),NO(t);const e=DO(t,!1),n=mk(t.view),r=n?`element:${n}`:"element";return i=>{i.on(r,e,{priority:t.converterPriority||"low"})}}function Cle(t){t=$i(t);let e=null;(typeof t.view=="string"||t.view.key)&&(e=Ale(t)),NO(t,e);const n=DO(t,!0);return r=>{r.on("element",n,{priority:t.converterPriority||"low"})}}function xle(t){const e=Ole(t.model);return MO({...t,model:e})}function Sle(t){t=$i(t),t.model||(t.model=i=>i?t.view+":"+i:t.view);const e={view:t.view,model:t.model},n=ib(cT(e,"start")),r=ib(cT(e,"end"));return i=>{i.on(`element:${t.view}-start`,n,{priority:t.converterPriority||"normal"}),i.on(`element:${t.view}-end`,r,{priority:t.converterPriority||"normal"});const s=ea.low,o=ea.highest,a=ea.get(t.converterPriority)/o;i.on("element",Tle(e),{priority:s+a})}}function Tle(t){return(e,n,r)=>{const i=`data-${t.view}`;if(!r.consumable.test(n.viewItem,{attributes:i+"-end-after"})&&!r.consumable.test(n.viewItem,{attributes:i+"-start-after"})&&!r.consumable.test(n.viewItem,{attributes:i+"-end-before"})&&!r.consumable.test(n.viewItem,{attributes:i+"-start-before"}))return;n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor)),r.consumable.consume(n.viewItem,{attributes:i+"-end-after"})&&s(n.modelRange.end,n.viewItem.getAttribute(i+"-end-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-after"})&&s(n.modelRange.end,n.viewItem.getAttribute(i+"-start-after").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-end-before"})&&s(n.modelRange.start,n.viewItem.getAttribute(i+"-end-before").split(",")),r.consumable.consume(n.viewItem,{attributes:i+"-start-before"})&&s(n.modelRange.start,n.viewItem.getAttribute(i+"-start-before").split(","));function s(o,a){for(const l of a){const c=t.model(l,r),u=r.writer.createElement("$marker",{"data-name":c});r.writer.insert(u,o),n.modelCursor.isEqual(o)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(o,1),n.modelRange=n.modelRange._getTransformedByInsertion(o,1)[0]}}}}function mk(t){return typeof t=="string"?t:typeof t=="object"&&typeof t.name=="string"?t.name:null}function ib(t){const e=new uh(t.view);return(n,r,i)=>{const s=e.match(r.viewItem);if(!s)return;const o=s.match;if(o.name=!0,!i.consumable.test(r.viewItem,o))return;const a=Ple(t.model,r.viewItem,i);a&&i.safeInsert(a,r.modelCursor)&&(i.consumable.consume(r.viewItem,o),i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r))}}function Ple(t,e,n){return t instanceof Function?t(e,n):n.writer.createElement(t)}function Ale(t){typeof t.view=="string"&&(t.view={key:t.view});const e=t.view.key,n=typeof t.view.value>"u"?/[\s\S]*/:t.view.value;let r;return e=="class"||e=="style"?r={[e=="class"?"classes":"styles"]:n}:r={attributes:{[e]:n}},t.view.name&&(r.name=t.view.name),t.view=r,e}function NO(t,e=null){const n=e===null?!0:s=>s.getAttribute(e),r=typeof t.model!="object"?t.model:t.model.key,i=typeof t.model!="object"||typeof t.model.value>"u"?n:t.model.value;t.model={key:r,value:i}}function DO(t,e){const n=new uh(t.view);return(r,i,s)=>{if(!i.modelRange&&e)return;const o=n.match(i.viewItem);if(!o||(Ile(t.view,i.viewItem)?o.match.name=!0:delete o.match.name,!s.consumable.test(i.viewItem,o.match)))return;const a=t.model.key,l=typeof t.model.value=="function"?t.model.value(i.viewItem,s):t.model.value;if(l===null)return;i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor)),Rle(i.modelRange,{key:a,value:l},e,s)&&(s.consumable.test(i.viewItem,{name:!0})&&(o.match.name=!0),s.consumable.consume(i.viewItem,o.match))}}function Ile(t,e){const n=typeof t=="function"?t(e):t;return typeof n=="object"&&!mk(n)?!1:!n.classes&&!n.attributes&&!n.styles}function Rle(t,e,n,r){let i=!1;for(const s of Array.from(t.getItems({shallow:n})))r.schema.checkAttribute(s,e.key)&&(i=!0,!s.hasAttribute(e.key)&&r.writer.setAttribute(e.key,e.value,s));return i}function Ole(t){return(e,n)=>{const r=typeof t=="string"?t:t(e,n);return n.writer.createElement("$marker",{"data-name":r})}}function cT(t,e){const n=(r,i)=>{const s=r.getAttribute("name"),o=t.model(s,i);return i.writer.createElement("$marker",{"data-name":o})};return{view:`${t.view}-${e}`,model:n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Mle(t){t.document.registerPostFixer(e=>Nle(e,t))}function Nle(t,e){const n=e.document.selection,r=e.schema,i=[];let s=!1;for(const o of n.getRanges()){const a=LO(o,r);a&&!a.isEqual(o)?(i.push(a),s=!0):i.push(o)}return s&&t.setSelection(Fle(i),{backward:n.isBackward}),!1}function LO(t,e){return t.isCollapsed?Dle(t,e):Lle(t,e)}function Dle(t,e){const n=t.start,r=e.getNearestSelectionRange(n);if(!r){const s=n.getAncestors().reverse().find(o=>e.isObject(o));return s?O._createOn(s):null}if(!r.isCollapsed)return r;const i=r.start;return n.isEqual(i)?null:new O(i)}function Lle(t,e){const{start:n,end:r}=t,i=e.checkChild(n,"$text"),s=e.checkChild(r,"$text"),o=e.getLimitElement(n),a=e.getLimitElement(r);if(o===a){if(i&&s)return null;if($le(n,r,e)){const d=n.nodeAfter&&e.isSelectable(n.nodeAfter)?null:e.getNearestSelectionRange(n,"forward"),f=r.nodeBefore&&e.isSelectable(r.nodeBefore)?null:e.getNearestSelectionRange(r,"backward"),p=d?d.start:n,g=f?f.end:r;return new O(p,g)}}const l=o&&!o.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){const u=n.nodeAfter&&r.nodeBefore&&n.nodeAfter.parent===r.nodeBefore.parent,d=l&&(!u||!dT(n.nodeAfter,e)),h=c&&(!u||!dT(r.nodeBefore,e));let f=n,p=r;return d&&(f=N._createBefore(uT(o,e))),h&&(p=N._createAfter(uT(a,e))),new O(f,p)}return null}function uT(t,e){let n=t,r=n;for(;e.isLimit(r)&&r.parent;)n=r,r=r.parent;return n}function $le(t,e,n){const r=t.nodeAfter&&!n.isLimit(t.nodeAfter)||n.checkChild(t,"$text"),i=e.nodeBefore&&!n.isLimit(e.nodeBefore)||n.checkChild(e,"$text");return r||i}function Fle(t){const e=[...t],n=new Set;let r=1;for(;r<e.length;){const s=e[r],o=e.slice(0,r);for(const[a,l]of o.entries())if(!n.has(a)){if(s.isEqual(l))n.add(a);else if(s.isIntersecting(l)){n.add(a),n.add(r);const c=s.getJoined(l);e.push(c)}}r++}return e.filter((s,o)=>!n.has(o))}function dT(t,e){return t&&e.isSelectable(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vle extends Ue(){constructor(e,n){super(),this.model=e,this.view=new Tae(n),this.mapper=new vO,this.downcastDispatcher=new yO({mapper:this.mapper,schema:e.schema});const r=this.model.document,i=r.selection,s=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(r,"change",()=>{this.view.change(o=>{this.downcastDispatcher.convertChanges(r.differ,s,o),this.downcastDispatcher.convertSelection(i,s,o)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",kle(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Ble(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",kO(),{priority:"lowest"}),this.downcastDispatcher.on("insert",EO(),{priority:"lowest"}),this.downcastDispatcher.on("remove",Hae(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Gae()),this.downcastDispatcher.on("selection",Wae(),{priority:"low"}),this.downcastDispatcher.on("selection",jae(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(o=>{if(o.rootName=="$graveyard")return null;const a=new rO(this.view.document,o.name);return a.rootName=o.rootName,this.mapper.bindElements(o,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const n=typeof e=="string"?e:e.name,r=this.model.markers.get(n);if(!r)throw new T("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:n});this.model.change(()=>{this.model.markers._refresh(r)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}function Ble(t,e,n){return(r,i)=>{if(!(n.document.isComposing&&!me.isAndroid))for(let s=0;s<i.targetRanges.length;s++){const o=i.targetRanges[s],a=t.toModelRange(o),l=LO(a,e);!l||l.isEqual(a)||(i.targetRanges[s]=t.toViewRange(l))}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xd{constructor(){this._consumables=new Map}add(e,n){let r;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?r=this._consumables.get(e):(r=new Ule(e),this._consumables.set(e,r)),r.add(n)}test(e,n){const r=this._consumables.get(e);return r===void 0?null:e.is("$text")||e.is("documentFragment")?r:r.test(n)}consume(e,n){return this.test(e,n)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(n),!0):!1}revert(e,n){const r=this._consumables.get(e);r!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):r.revert(n))}static consumablesFromElement(e){const n={element:e,name:!0,attributes:[],classes:[],styles:[]},r=e.getAttributeKeys();for(const o of r)o=="style"||o=="class"||n.attributes.push(o);const i=e.getClassNames();for(const o of i)n.classes.push(o);const s=e.getStyleNames();for(const o of s)n.styles.push(o);return n}static createFrom(e,n){if(n||(n=new xd),e.is("$text"))return n.add(e),n;e.is("element")&&n.add(e,xd.consumablesFromElement(e)),e.is("documentFragment")&&n.add(e);for(const r of e.getChildren())n=xd.createFrom(r,n);return n}}const sm=["attributes","classes","styles"];class Ule{constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(const n of sm)n in e&&this._add(n,e[n])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const n of sm)if(n in e){const r=this._test(n,e[n]);if(r!==!0)return r}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(const n of sm)n in e&&this._consume(n,e[n])}revert(e){e.name&&(this._canConsumeName=!0);for(const n of sm)n in e&&this._revert(n,e[n])}_add(e,n){const r=st(n),i=this._consumables[e];for(const s of r){if(e==="attributes"&&(s==="class"||s==="style"))throw new T("viewconsumable-invalid-attribute",this);if(i.set(s,!0),e==="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(s))i.set(o,!0)}}_test(e,n){const r=st(n),i=this._consumables[e];for(const s of r)if(e==="attributes"&&(s==="class"||s==="style")){const o=s=="class"?"classes":"styles",a=this._test(o,[...this._consumables[o].keys()]);if(a!==!0)return a}else{const o=i.get(s);if(o===void 0)return null;if(!o)return!1}return!0}_consume(e,n){const r=st(n),i=this._consumables[e];for(const s of r)if(e==="attributes"&&(s==="class"||s==="style")){const o=s=="class"?"classes":"styles";this._consume(o,[...this._consumables[o].keys()])}else if(i.set(s,!1),e=="styles")for(const o of this.element.document.stylesProcessor.getRelatedStyles(s))i.set(o,!1)}_revert(e,n){const r=st(n),i=this._consumables[e];for(const s of r)if(e==="attributes"&&(s==="class"||s==="style")){const o=s=="class"?"classes":"styles";this._revert(o,[...this._consumables[o].keys()])}else i.get(s)===!1&&i.set(s,!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zle extends Ue(){constructor(){super(),this._sourceDefinitions={},this._attributeProperties={},this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,n)=>{n[0]=new ja(n[0])},{priority:"highest"}),this.on("checkChild",(e,n)=>{n[0]=new ja(n[0]),n[1]=this.getDefinition(n[1])},{priority:"highest"})}register(e,n){if(this._sourceDefinitions[e])throw new T("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},n)],this._clearCache()}extend(e,n){if(!this._sourceDefinitions[e])throw new T("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},n)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let n;return typeof e=="string"?n=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?n="$text":n=e.name,this.getDefinitions()[n]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const n=this.getDefinition(e);return!!(n&&n.isBlock)}isLimit(e){const n=this.getDefinition(e);return n?!!(n.isLimit||n.isObject):!1}isObject(e){const n=this.getDefinition(e);return n?!!(n.isObject||n.isLimit&&n.isSelectable&&n.isContent):!1}isInline(e){const n=this.getDefinition(e);return!!(n&&n.isInline)}isSelectable(e){const n=this.getDefinition(e);return n?!!(n.isSelectable||n.isObject):!1}isContent(e){const n=this.getDefinition(e);return n?!!(n.isContent||n.isObject):!1}checkChild(e,n){return n?this._checkContextMatch(n,e):!1}checkAttribute(e,n){const r=this.getDefinition(e.last);return r?r.allowAttributes.includes(n):!1}checkMerge(e,n){if(e instanceof N){const r=e.nodeBefore,i=e.nodeAfter;if(!(r instanceof ct))throw new T("schema-check-merge-no-element-before",this);if(!(i instanceof ct))throw new T("schema-check-merge-no-element-after",this);return this.checkMerge(r,i)}for(const r of n.getChildren())if(!this.checkChild(e,r))return!1;return!0}addChildCheck(e){this.on("checkChild",(n,[r,i])=>{if(!i)return;const s=e(r,i);typeof s=="boolean"&&(n.stop(),n.return=s)},{priority:"high"})}addAttributeCheck(e){this.on("checkAttribute",(n,[r,i])=>{const s=e(r,i);typeof s=="boolean"&&(n.stop(),n.return=s)},{priority:"high"})}setAttributeProperties(e,n){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),n)}getAttributeProperties(e){return this._attributeProperties[e]||{}}getLimitElement(e){let n;for(e instanceof N?n=e.parent:n=(e instanceof O?[e]:Array.from(e.getRanges())).reduce((i,s)=>{const o=s.getCommonAncestor();return i?i.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(n)&&n.parent;)n=n.parent;return n}checkAttributeInSelection(e,n){if(e.isCollapsed){const i=[...e.getFirstPosition().getAncestors(),new Ke("",e.getAttributes())];return this.checkAttribute(i,n)}else{const r=e.getRanges();for(const i of r)for(const s of i)if(this.checkAttribute(s.item,n))return!0}return!1}*getValidRanges(e,n){e=ice(e);for(const r of e)yield*this._getValidRangesForRange(r,n)}getNearestSelectionRange(e,n="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new O(e);let r,i;const s=e.getAncestors().reverse().find(o=>this.isLimit(o))||e.root;(n=="both"||n=="backward")&&(r=new Vs({boundaries:O._createIn(s),startPosition:e,direction:"backward"})),(n=="both"||n=="forward")&&(i=new Vs({boundaries:O._createIn(s),startPosition:e}));for(const o of rce(r,i)){const a=o.walker==r?"elementEnd":"elementStart",l=o.value;if(l.type==a&&this.isObject(l.item))return O._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new O(l.nextPosition)}return null}findAllowedParent(e,n){let r=e.parent;for(;r;){if(this.checkChild(r,n))return r;if(this.isLimit(r))return null;r=r.parent}return null}setAllowedAttributes(e,n,r){const i=r.model;for(const[s,o]of Object.entries(n))i.schema.checkAttribute(e,s)&&r.setAttribute(s,o,e)}removeDisallowedAttributes(e,n){for(const r of e)if(r.is("$text"))hT(this,r,n);else{const s=O._createIn(r).getPositions();for(const o of s){const a=o.nodeBefore||o.parent;hT(this,a,n)}}}getAttributesWithProperty(e,n,r){const i={};for(const[s,o]of e.getAttributes()){const a=this.getAttributeProperties(s);a[n]!==void 0&&(r===void 0||r===a[n])&&(i[s]=o)}return i}createContext(e){return new ja(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},n=this._sourceDefinitions,r=Object.keys(n);for(const i of r)e[i]=Hle(n[i],i);for(const i of r)Wle(e,i);for(const i of r)jle(e,i);for(const i of r)Gle(e,i);for(const i of r)qle(e,i),Yle(e,i);for(const i of r)Kle(e,i),Zle(e,i),Jle(e,i);this._compiledDefinitions=e}_checkContextMatch(e,n,r=n.length-1){const i=n.getItem(r);if(e.allowIn.includes(i.name)){if(r==0)return!0;{const s=this.getDefinition(i);return this._checkContextMatch(s,n,r-1)}}else return!1}*_getValidRangesForRange(e,n){let r=e.start,i=e.start;for(const s of e.getItems({shallow:!0}))s.is("element")&&(yield*this._getValidRangesForRange(O._createIn(s),n)),this.checkAttribute(s,n)||(r.isEqual(i)||(yield new O(r,i)),r=N._createAfter(s)),i=N._createAfter(s);r.isEqual(i)||(yield new O(r,i))}findOptimalInsertionRange(e,n){const r=e.getSelectedElement();if(r&&this.isObject(r)&&!this.isInline(r))return n=="before"||n=="after"?new O(N._createAt(r,n)):O._createOn(r);const i=vn(e.getSelectedBlocks());if(!i)return new O(e.focus);if(i.isEmpty)return new O(N._createAt(i,0));const s=N._createAfter(i);return e.focus.isTouching(s)?new O(s):new O(N._createBefore(i))}}class ja{constructor(e){if(e instanceof ja)return e;let n;typeof e=="string"?n=[e]:Array.isArray(e)?n=e:n=e.getAncestors({includeSelf:!0}),this._items=n.map(nce)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const n=new ja([e]);return n._items=[...this._items,...n._items],n}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Hle(t,e){const n={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return Xle(t,n),ka(t,n,"allowIn"),ka(t,n,"allowContentOf"),ka(t,n,"allowWhere"),ka(t,n,"allowAttributes"),ka(t,n,"allowAttributesOf"),ka(t,n,"allowChildren"),ka(t,n,"inheritTypesFrom"),Qle(t,n),n}function Wle(t,e){const n=t[e];for(const r of n.allowChildren){const i=t[r];i&&i.allowIn.push(e)}n.allowChildren.length=0}function jle(t,e){for(const n of t[e].allowContentOf)t[n]&&ece(t,n).forEach(i=>{i.allowIn.push(e)});delete t[e].allowContentOf}function Gle(t,e){for(const n of t[e].allowWhere){const r=t[n];if(r){const i=r.allowIn;t[e].allowIn.push(...i)}}delete t[e].allowWhere}function qle(t,e){for(const n of t[e].allowAttributesOf){const r=t[n];if(r){const i=r.allowAttributes;t[e].allowAttributes.push(...i)}}delete t[e].allowAttributesOf}function Yle(t,e){const n=t[e];for(const r of n.inheritTypesFrom){const i=t[r];if(i){const s=Object.keys(i).filter(o=>o.startsWith("is"));for(const o of s)o in n||(n[o]=i[o])}}delete n.inheritTypesFrom}function Kle(t,e){const n=t[e],r=n.allowIn.filter(i=>t[i]);n.allowIn=Array.from(new Set(r))}function Zle(t,e){const n=t[e];for(const r of n.allowIn)t[r].allowChildren.push(e)}function Jle(t,e){const n=t[e];n.allowAttributes=Array.from(new Set(n.allowAttributes))}function Xle(t,e){for(const n of t){const r=Object.keys(n).filter(i=>i.startsWith("is"));for(const i of r)e[i]=!!n[i]}}function ka(t,e,n){for(const r of t){const i=r[n];typeof i=="string"?e[n].push(i):Array.isArray(i)&&e[n].push(...i)}}function Qle(t,e){for(const n of t){const r=n.inheritAllFrom;r&&(e.allowContentOf.push(r),e.allowWhere.push(r),e.allowAttributesOf.push(r),e.inheritTypesFrom.push(r))}}function ece(t,e){const n=t[e];return tce(t).filter(r=>r.allowIn.includes(n.name))}function tce(t){return Object.keys(t).map(e=>t[e])}function nce(t){return typeof t=="string"||t.is("documentFragment")?{name:typeof t=="string"?t:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:t.is("element")?t.name:"$text",*getAttributeKeys(){yield*t.getAttributeKeys()},getAttribute(e){return t.getAttribute(e)}}}function*rce(t,e){let n=!1;for(;!n;){if(n=!0,t){const r=t.next();r.done||(n=!1,yield{walker:t,value:r.value})}if(e){const r=e.next();r.done||(n=!1,yield{walker:e,value:r.value})}}}function*ice(t){for(const e of t)yield*e.getMinimalFlatRanges()}function hT(t,e,n){for(const r of e.getAttributeKeys())t.checkAttribute(e,r)||n.removeAttribute(r,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sce extends qe(){constructor(e){super(),this._splitParts=new Map,this._cursorParents=new Map,this._modelCursor=null,this._emptyElementsToKeep=new Set,this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(n,r)=>this._convertItem(n,r),convertChildren:(n,r)=>this._convertChildren(n,r),safeInsert:(n,r)=>this._safeInsert(n,r),updateConversionResult:(n,r)=>this._updateConversionResult(n,r),splitToAllowedParent:(n,r)=>this._splitToAllowedParent(n,r),getSplitParts:n=>this._getSplitParts(n),keepEmptyElement:n=>this._keepEmptyElement(n)}}convert(e,n,r=["$root"]){this.fire("viewCleanup",e),this._modelCursor=ace(r,n),this.conversionApi.writer=n,this.conversionApi.consumable=xd.createFrom(e),this.conversionApi.store={};const{modelRange:i}=this._convertItem(e,this._modelCursor),s=n.createDocumentFragment();if(i){this._removeEmptyElements();for(const o of Array.from(this._modelCursor.parent.getChildren()))n.append(o,s);s.markers=oce(s,n)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,s}_convertItem(e,n){const r={viewItem:e,modelCursor:n,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,r,this.conversionApi):e.is("$text")?this.fire("text",r,this.conversionApi):this.fire("documentFragment",r,this.conversionApi),r.modelRange&&!(r.modelRange instanceof O))throw new T("view-conversion-dispatcher-incorrect-result",this);return{modelRange:r.modelRange,modelCursor:r.modelCursor}}_convertChildren(e,n){let r=n.is("position")?n:N._createAt(n,0);const i=new O(r);for(const s of Array.from(e.getChildren())){const o=this._convertItem(s,r);o.modelRange instanceof O&&(i.end=o.modelRange.end,r=o.modelCursor)}return{modelRange:i,modelCursor:r}}_safeInsert(e,n){const r=this._splitToAllowedParent(e,n);return r?(this.conversionApi.writer.insert(e,r.position),!0):!1}_updateConversionResult(e,n){const r=this._getSplitParts(e),i=this.conversionApi.writer;n.modelRange||(n.modelRange=i.createRange(i.createPositionBefore(e),i.createPositionAfter(r[r.length-1])));const s=this._cursorParents.get(e);s?n.modelCursor=i.createPositionAt(s,0):n.modelCursor=n.modelRange.end}_splitToAllowedParent(e,n){const{schema:r,writer:i}=this.conversionApi;let s=r.findAllowedParent(n,e);if(s){if(s===n.parent)return{position:n};this._modelCursor.parent.getAncestors().includes(s)&&(s=null)}if(!s)return RO(n,e,r)?{position:OO(n,i)}:null;const o=this.conversionApi.writer.split(n,s),a=[];for(const c of o.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{const u=a.pop(),d=c.item;this._registerSplitPair(u,d)}const l=o.range.end.parent;return this._cursorParents.set(e,l),{position:o.position,cursorParent:l}}_registerSplitPair(e,n){this._splitParts.has(e)||this._splitParts.set(e,[e]);const r=this._splitParts.get(e);this._splitParts.set(n,r),r.push(n)}_getSplitParts(e){let n;return this._splitParts.has(e)?n=this._splitParts.get(e):n=[e],n}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(const n of this._splitParts.keys())n.isEmpty&&!this._emptyElementsToKeep.has(n)&&(this.conversionApi.writer.remove(n),this._splitParts.delete(n),e=!0);e&&this._removeEmptyElements()}}function oce(t,e){const n=new Set,r=new Map,i=O._createIn(t).getItems();for(const s of i)s.is("element","$marker")&&n.add(s);for(const s of n){const o=s.getAttribute("data-name"),a=e.createPositionBefore(s);r.has(o)?r.get(o).end=a.clone():r.set(o,new O(a.clone())),e.remove(s)}return r}function ace(t,e){let n;for(const r of new ja(t)){const i={};for(const o of r.getAttributeKeys())i[o]=r.getAttribute(o);const s=e.createElement(r.name,i);n&&e.insert(s,n),n=N._createAt(s,0)}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lce{getHtml(e){const r=Q.document.implementation.createHTMLDocument("").createElement("div");return r.appendChild(e),r.innerHTML}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class cce{constructor(e){this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new hO(e,{renderingMode:"data"}),this.htmlWriter=new lce}toData(e){const n=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(n)}toView(e){const n=this._toDom(e);return this.domConverter.domToView(n,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(e=`<body>${e}</body>`);const n=this.domParser.parseFromString(e,"text/html"),r=n.createDocumentFragment(),i=n.body.childNodes;for(;i.length>0;)r.appendChild(i[0]);return r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class uce extends qe(){constructor(e,n){super(),this.model=e,this.mapper=new vO,this.downcastDispatcher=new yO({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",kO(),{priority:"lowest"}),this.downcastDispatcher.on("insert",EO(),{priority:"lowest"}),this.upcastDispatcher=new sce({schema:e.schema}),this.viewDocument=new oO(n),this.stylesProcessor=n,this.htmlProcessor=new cce(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new dk(this.viewDocument),this.upcastDispatcher.on("text",_le(),{priority:"lowest"}),this.upcastDispatcher.on("element",lT(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",lT(),{priority:"lowest"}),Ue().prototype.decorate.call(this,"init"),Ue().prototype.decorate.call(this,"set"),Ue().prototype.decorate.call(this,"get"),Ue().prototype.decorate.call(this,"toView"),Ue().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},IO)},{priority:"lowest"})}get(e={}){const{rootName:n="main",trim:r="empty"}=e;if(!this._checkIfRootsExists([n]))throw new T("datacontroller-get-non-existent-root",this);const i=this.model.document.getRoot(n);return i.isAttached()||Ie("datacontroller-get-detached-root",this),r==="empty"&&!this.model.hasContent(i,{ignoreWhitespaces:!0})?"":this.stringify(i,e)}stringify(e,n={}){const r=this.toView(e,n);return this.processor.toData(r)}toView(e,n={}){const r=this.viewDocument,i=this._viewWriter;this.mapper.clearBindings();const s=O._createIn(e),o=new Wa(r);this.mapper.bindElements(e,o);const a=e.is("documentFragment")?e.markers:dce(e);return this.downcastDispatcher.convert(s,a,i,n),o}init(e){if(this.model.document.version)throw new T("datacontroller-init-document-not-empty",this);let n={};if(typeof e=="string"?n.main=e:n=e,!this._checkIfRootsExists(Object.keys(n)))throw new T("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},r=>{for(const i of Object.keys(n)){const s=this.model.document.getRoot(i);r.insert(this.parse(n[i],s),s,0)}}),Promise.resolve()}set(e,n={}){let r={};if(typeof e=="string"?r.main=e:r=e,!this._checkIfRootsExists(Object.keys(r)))throw new T("datacontroller-set-non-existent-root",this);this.model.enqueueChange(n.batchType||{},i=>{i.setSelection(null),i.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const s of Object.keys(r)){const o=this.model.document.getRoot(s);i.remove(i.createRangeIn(o)),i.insert(this.parse(r[s],o),o,0)}})}parse(e,n="$root"){const r=this.processor.toView(e);return this.toModel(r,n)}toModel(e,n="$root"){return this.model.change(r=>this.upcastDispatcher.convert(e,r,n))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const n of e)if(!this.model.document.getRoot(n))return!1;return!0}}function dce(t){const e=[],n=t.root.document;if(!n)return new Map;const r=O._createIn(t);for(const i of n.model.markers){const s=i.getRange(),o=s.isCollapsed,a=s.start.isEqual(r.start)||s.end.isEqual(r.end);if(o&&a)e.push([i.name,s]);else{const l=r.getIntersection(s);l&&e.push([i.name,l])}}return e.sort(([i,s],[o,a])=>{if(s.end.compareWith(a.start)!=="after")return 1;if(s.start.compareWith(a.end)!=="before")return-1;switch(s.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(s.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(i)}}}),new Map(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hce{constructor(e,n){this._helpers=new Map,this._downcast=st(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=st(n),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,n){const r=this._downcast.includes(n);if(!this._upcast.includes(n)&&!r)throw new T("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[n],isDowncast:r})}for(e){if(!this._helpers.has(e))throw new T("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:n,view:r}of Mw(e))this.for("upcast").elementToElement({model:n,view:r,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:n,view:r}of Mw(e))this.for("upcast").elementToAttribute({view:r,model:n,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:n,view:r}of Mw(e))this.for("upcast").attributeToAttribute({view:r,model:n})}_createConversionHelpers({name:e,dispatchers:n,isDowncast:r}){if(this._helpers.has(e))throw new T("conversion-group-exists",this);const i=r?new zae(n):new ble(n);this._helpers.set(e,i)}}function*Mw(t){if(t.model.values)for(const e of t.model.values){const n={key:t.model.key,value:e},r=t.view[e],i=t.upcastAlso?t.upcastAlso[e]:void 0;yield*fT(n,r,i)}else yield*fT(t.model,t.view,t.upcastAlso)}function*fT(t,e,n){if(yield{model:t,view:e},n)for(const r of st(n))yield{model:t,view:r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pr{constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,n){return new this(e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function pk(t,e){const n=FO(e),r=n.reduce((o,a)=>o+a.offsetSize,0),i=t.parent;wh(t);const s=t.index;return i._insertChild(s,n),gh(i,s+n.length),gh(i,s),new O(t,t.getShiftedBy(r))}function $O(t){if(!t.isFlat)throw new T("operation-utils-remove-range-not-flat",this);const e=t.start.parent;wh(t.start),wh(t.end);const n=e._removeChildren(t.start.index,t.end.index-t.start.index);return gh(e,t.start.index),n}function ph(t,e){if(!t.isFlat)throw new T("operation-utils-move-range-not-flat",this);const n=$O(t);return e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),pk(e,n)}function fce(t,e,n){wh(t.start),wh(t.end);for(const r of t.getItems({shallow:!0})){const i=r.is("$textProxy")?r.textNode:r;n!==null?i._setAttribute(e,n):i._removeAttribute(e),gh(i.parent,i.index)}gh(t.end.parent,t.end.index)}function FO(t){const e=[];function n(r){if(typeof r=="string")e.push(new Ke(r));else if(r instanceof ki)e.push(new Ke(r.data,r.getAttributes()));else if(r instanceof _l)e.push(r);else if(Tr(r))for(const i of r)n(i)}n(t);for(let r=1;r<e.length;r++){const i=e[r],s=e[r-1];i instanceof Ke&&s instanceof Ke&&VO(i,s)&&(e.splice(r-1,2,new Ke(s.data+i.data,s.getAttributes())),r--)}return e}function gh(t,e){const n=t.getChild(e-1),r=t.getChild(e);if(n&&r&&n.is("$text")&&r.is("$text")&&VO(n,r)){const i=new Ke(n.data+r.data,n.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function wh(t){const e=t.textNode,n=t.parent;if(e){const r=t.offset-e.startOffset,i=e.index;n._removeChildren(i,1);const s=new Ke(e.data.substr(0,r),e.getAttributes()),o=new Ke(e.data.substr(r),e.getAttributes());n._insertChild(i,[s,o])}}function VO(t,e){const n=t.getAttributes(),r=e.getAttributes();for(const i of n){if(i[1]!==e.getAttribute(i[0]))return!1;r.next()}return r.next().done}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class De extends Pr{constructor(e,n,r,i){super(i),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=n,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[O._createFromPositionAndShift(this.sourcePosition,this.howMany),O._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new De(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new De(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent,r=this.sourcePosition.offset,i=this.targetPosition.offset;if(r+this.howMany>e.maxOffset)throw new T("move-operation-nodes-do-not-exist",this);if(e===n&&r<i&&i<r+this.howMany)throw new T("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&xn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const s=this.sourcePosition.path.length-1;if(this.targetPosition.path[s]>=r&&this.targetPosition.path[s]<r+this.howMany)throw new T("move-operation-node-into-itself",this)}}_execute(){ph(O._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,n){const r=N.fromJSON(e.sourcePosition,n),i=N.fromJSON(e.targetPosition,n);return new this(r,e.howMany,i,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rn extends Pr{constructor(e,n,r){super(r),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Ed(FO(n)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new Ed([...this.nodes].map(r=>r._clone(!0))),n=new rn(this.position,e,this.baseVersion);return n.shouldReceiveAttributes=this.shouldReceiveAttributes,n}getReversed(){const e=this.position.root.document.graveyard,n=new N(e,[0]);return new De(this.position,this.nodes.maxOffset,n,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new T("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new Ed([...e].map(n=>n._clone(!0))),pk(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,n){const r=[];for(const s of e.nodes)s.name?r.push(ct.fromJSON(s)):r.push(Ke.fromJSON(s));const i=new rn(N.fromJSON(e.position,n),r,e.baseVersion);return i.shouldReceiveAttributes=e.shouldReceiveAttributes,i}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ze extends Pr{constructor(e,n,r,i,s){super(s),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=n,this.insertionPosition=r,this.graveyardPosition=i?i.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new N(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new O(this.splitPosition,e)}get affectedSelectable(){const e=[O._createFromPositionAndShift(this.splitPosition,0),O._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(O._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Ze(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,n=new N(e,[0]);return new Rt(this.moveTargetPosition,this.howMany,this.splitPosition,n,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,n=this.splitPosition.offset;if(!e||e.maxOffset<n)throw new T("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new T("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new T("split-operation-graveyard-position-invalid",this)}else throw new T("split-operation-split-in-root",this)}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)ph(O._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const r=e._clone();pk(this.insertionPosition,r)}const n=new O(N._createAt(e,this.splitPosition.offset),N._createAt(e,e.maxOffset));ph(n,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const n=e.path.slice(0,-1);return n[n.length-1]++,new N(e.root,n,"toPrevious")}static fromJSON(e,n){const r=N.fromJSON(e.splitPosition,n),i=N.fromJSON(e.insertionPosition,n),s=e.graveyardPosition?N.fromJSON(e.graveyardPosition,n):null;return new this(r,e.howMany,i,s,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rt extends Pr{constructor(e,n,r,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=n,this.targetPosition=r.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=i.clone()}get type(){return"merge"}get deletionPosition(){return new N(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new O(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[O._createOn(e),O._createFromPositionAndShift(this.targetPosition,0),O._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Rt(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),n=this.sourcePosition.path.slice(0,-1),r=new N(this.sourcePosition.root,n)._getTransformedByMergeOperation(this);return new Ze(e,this.howMany,r,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,n=this.targetPosition.parent;if(e.parent)if(n.parent){if(this.howMany!=e.maxOffset)throw new T("merge-operation-how-many-invalid",this)}else throw new T("merge-operation-target-position-invalid",this);else throw new T("merge-operation-source-position-invalid",this)}_execute(){const e=this.sourcePosition.parent,n=O._createIn(e);ph(n,this.targetPosition),ph(O._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,n){const r=N.fromJSON(e.sourcePosition,n),i=N.fromJSON(e.targetPosition,n),s=N.fromJSON(e.graveyardPosition,n);return new this(r,e.howMany,i,s,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class er extends Pr{constructor(e,n,r,i,s,o){super(o),this.name=e,this.oldRange=n?n.clone():null,this.newRange=r?r.clone():null,this.affectsData=s,this._markers=i}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new er(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new er(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,n){return new er(e.name,e.oldRange?O.fromJSON(e.oldRange,n):null,e.newRange?O.fromJSON(e.newRange,n):null,n.model.markers,e.affectsData,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ft extends Pr{constructor(e,n,r,i,s){super(s),this.range=e.clone(),this.key=n,this.oldValue=r===void 0?null:r,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Ft(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Ft(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new T("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!Hy(e.getAttribute(this.key),this.oldValue))throw new T("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new T("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){Hy(this.oldValue,this.newValue)||fce(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,n){return new Ft(O.fromJSON(e.range,n),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zt extends Pr{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Zt(this.baseVersion)}getReversed(){return new Zt(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tr extends Pr{constructor(e,n,r,i){super(i),this.position=e,this.position.stickiness="toNext",this.oldName=n,this.newName=r}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new tr(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new tr(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof ct){if(e.name!==this.oldName)throw new T("rename-operation-wrong-name",this)}else throw new T("rename-operation-wrong-position",this)}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,n){return new tr(N.fromJSON(e.position,n),e.oldName,e.newName,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class js extends Pr{constructor(e,n,r,i,s){super(s),this.root=e,this.key=n,this.oldValue=r===void 0?null:r,this.newValue=i===void 0?null:i}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new js(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new js(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new T("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new T("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new T("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,n){if(!n.getRoot(e.root))throw new T("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new js(n.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ts extends Pr{constructor(e,n,r,i,s){if(super(s),this.rootName=e,this.elementName=n,this.isAdd=r,this._document=i,!this._document.getRoot(this.rootName)){const o=this._document.createRoot(this.elementName,this.rootName);o._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new ts(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new ts(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,n){return new ts(e.rootName,e.elementName,e.isAdd,n,e.baseVersion)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const ii={};ii[Ft.className]=Ft;ii[rn.className]=rn;ii[er.className]=er;ii[De.className]=De;ii[Zt.className]=Zt;ii[Pr.className]=Pr;ii[tr.className]=tr;ii[js.className]=js;ii[ts.className]=ts;ii[Ze.className]=Ze;ii[Rt.className]=Rt;class mce{static fromJSON(e,n){return ii[e.__className].fromJSON(e,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sb=new Map;function Re(t,e,n){let r=sb.get(t);r||(r=new Map,sb.set(t,r)),r.set(e,n)}function pce(t,e){const n=sb.get(t);return n&&n.has(e)?n.get(e):gce}function gce(t){return[t]}function mT(t,e,n={}){const r=pce(t.constructor,e.constructor);try{return t=t.clone(),r(t,e,n)}catch(i){throw i}}function wce(t,e,n){t=t.slice(),e=e.slice();const r=new vce(n.document,n.useRelations,n.forceWeakRemove);r.setOriginalOperations(t),r.setOriginalOperations(e);const i=r.originalOperations;if(t.length==0||e.length==0)return{operationsA:t,operationsB:e,originalOperations:i};const s=new WeakMap;for(const l of t)s.set(l,0);const o={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length};let a=0;for(;a<t.length;){const l=t[a],c=s.get(l);if(c==e.length){a++;continue}const u=e[c],d=mT(l,u,r.getContext(l,u,!0)),h=mT(u,l,r.getContext(u,l,!1));r.updateRelation(l,u),r.setOriginalOperations(d,l),r.setOriginalOperations(h,u);for(const f of d)s.set(f,c+h.length);t.splice(a,1,...d),e.splice(c,1,...h)}return pT(t,o.nextBaseVersionB),pT(e,o.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:i}}class vce{constructor(e,n,r=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=n,this._forceWeakRemove=!!r,this._relations=new Map}setOriginalOperations(e,n=null){const r=n?this.originalOperations.get(n):null;for(const i of e)this.originalOperations.set(i,r||i)}updateRelation(e,n){if(e instanceof De)n instanceof Rt?e.targetPosition.isEqual(n.sourcePosition)||n.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,n,"insertAtSource"):e.targetPosition.isEqual(n.deletionPosition)?this._setRelation(e,n,"insertBetween"):e.targetPosition.isAfter(n.sourcePosition)&&this._setRelation(e,n,"moveTargetAfter"):n instanceof De&&(e.targetPosition.isEqual(n.sourcePosition)||e.targetPosition.isBefore(n.sourcePosition)?this._setRelation(e,n,"insertBefore"):this._setRelation(e,n,"insertAfter"));else if(e instanceof Ze){if(n instanceof Rt)e.splitPosition.isBefore(n.sourcePosition)&&this._setRelation(e,n,"splitBefore");else if(n instanceof De)if(e.splitPosition.isEqual(n.sourcePosition)||e.splitPosition.isBefore(n.sourcePosition))this._setRelation(e,n,"splitBefore");else{const r=O._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.splitPosition.hasSameParentAs(n.sourcePosition)&&r.containsPosition(e.splitPosition)){const i=r.end.offset-e.splitPosition.offset,s=e.splitPosition.offset-r.start.offset;this._setRelation(e,n,{howMany:i,offset:s})}}}else if(e instanceof Rt)n instanceof Rt?(e.targetPosition.isEqual(n.sourcePosition)||this._setRelation(e,n,"mergeTargetNotMoved"),e.sourcePosition.isEqual(n.targetPosition)&&this._setRelation(e,n,"mergeSourceNotMoved"),e.sourcePosition.isEqual(n.sourcePosition)&&this._setRelation(e,n,"mergeSameElement")):n instanceof Ze?e.sourcePosition.isEqual(n.splitPosition)&&this._setRelation(e,n,"splitAtSource"):n instanceof De&&n.howMany>0&&(e.sourcePosition.isEqual(n.sourcePosition.getShiftedBy(n.howMany))&&this._setRelation(e,n,"mergeSourceAffected"),e.targetPosition.isEqual(n.sourcePosition)&&this._setRelation(e,n,"mergeTargetWasBefore"));else if(e instanceof er){const r=e.newRange;if(!r)return;if(n instanceof De){const i=O._createFromPositionAndShift(n.sourcePosition,n.howMany),s=i.containsPosition(r.start)||i.start.isEqual(r.start),o=i.containsPosition(r.end)||i.end.isEqual(r.end);(s||o)&&!i.containsRange(r)&&this._setRelation(e,n,{side:s?"left":"right",path:s?r.start.path.slice():r.end.path.slice()})}else if(n instanceof Rt){const i=r.start.isEqual(n.targetPosition),s=r.start.isEqual(n.deletionPosition),o=r.end.isEqual(n.deletionPosition),a=r.end.isEqual(n.sourcePosition);(i||s||o||a)&&this._setRelation(e,n,{wasInLeftElement:i,wasStartBeforeMergedElement:s,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(e,n,r){return{aIsStrong:r,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(n),abRelation:this._useRelations?this._getRelation(e,n):null,baRelation:this._useRelations?this._getRelation(n,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const n=this.originalOperations.get(e);return n.wasUndone||this._history.isUndoneOperation(n)}_getRelation(e,n){const r=this.originalOperations.get(n),i=this._history.getUndoneOperation(r);if(!i)return null;const s=this.originalOperations.get(e),o=this._relations.get(s);return o&&o.get(i)||null}_setRelation(e,n,r){const i=this.originalOperations.get(e),s=this.originalOperations.get(n);let o=this._relations.get(i);o||(o=new Map,this._relations.set(i,o)),o.set(s,r)}}function pT(t,e){for(const n of t)n.baseVersion=e++}Re(Ft,Ft,(t,e,n)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const r=t.range.getDifference(e.range).map(s=>new Ft(s,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&n.aIsStrong&&r.push(new Ft(i,e.key,e.newValue,t.newValue,0)),r.length==0?[new Zt(0)]:r}else return[t]});Re(Ft,rn,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const r=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(i=>new Ft(i,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const i=BO(e,t.key,t.oldValue);i&&r.unshift(i)}return r}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]});function BO(t,e,n){const i=t.nodes.getNode(0).getAttribute(e);if(i==n)return null;const s=new O(t.position,t.position.getShiftedBy(t.howMany));return new Ft(s,e,i,n,0)}Re(Ft,Rt,(t,e)=>{const n=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&n.push(O._createFromPositionAndShift(e.graveyardPosition,1));const r=t.range._getTransformedByMergeOperation(e);return r.isCollapsed||n.push(r),n.map(i=>new Ft(i,t.key,t.oldValue,t.newValue,t.baseVersion))});Re(Ft,De,(t,e)=>yce(t.range,e).map(r=>new Ft(r,t.key,t.oldValue,t.newValue,t.baseVersion)));function yce(t,e){const n=O._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=null,i=[];n.containsRange(t,!0)?r=t:t.start.hasSameParentAs(n.start)?(i=t.getDifference(n),r=t.getIntersection(n)):i=[t];const s=[];for(let o of i){o=o._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),l=o.start.hasSameParentAs(a),c=o._getTransformedByInsertion(a,e.howMany,l);s.push(...c)}return r&&s.push(r._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),s}Re(Ft,Ze,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const n=t.clone();return n.range=new O(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,n]}return t.range=t.range._getTransformedBySplitOperation(e),[t]});Re(rn,Ft,(t,e)=>{const n=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const r=BO(t,e.key,e.newValue);r&&n.push(r)}return n});Re(rn,rn,(t,e,n)=>t.position.isEqual(e.position)&&n.aIsStrong?[t]:(t.position=t.position._getTransformedByInsertOperation(e),[t]));Re(rn,De,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t]));Re(rn,Ze,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t]));Re(rn,Rt,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t]));Re(er,rn,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t]));Re(er,er,(t,e,n)=>{if(t.name==e.name)if(n.aIsStrong)t.oldRange=e.newRange?e.newRange.clone():null;else return[new Zt(0)];return[t]});Re(er,Rt,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t]));Re(er,De,(t,e,n)=>{if(t.oldRange&&(t.oldRange=O._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(n.abRelation){const r=O._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if(n.abRelation.side=="left"&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.end=r.end,t.newRange.start.path=n.abRelation.path,[t];if(n.abRelation.side=="right"&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=r.start,t.newRange.end.path=n.abRelation.path,[t]}t.newRange=O._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]});Re(er,Ze,(t,e,n)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(n.abRelation){const r=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?t.newRange.start=N._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!n.abRelation.wasInLeftElement&&(t.newRange.start=N._createAt(e.moveTargetPosition)),t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasInRightElement?t.newRange.end=N._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?t.newRange.end=N._createAt(e.insertionPosition):t.newRange.end=r.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]});Re(Rt,rn,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t]));Re(Rt,Rt,(t,e,n)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition))if(n.bWasUndone){const r=e.graveyardPosition.path.slice();return r.push(0),t.sourcePosition=new N(e.graveyardPosition.root,r),t.howMany=0,[t]}else return[new Zt(0)];if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!n.bWasUndone&&n.abRelation!="splitAtSource"){const r=t.targetPosition.root.rootName=="$graveyard",i=e.targetPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&n.aIsStrong){const l=e.targetPosition._getTransformedByMergeOperation(e),c=t.targetPosition._getTransformedByMergeOperation(e);return[new De(l,t.howMany,c,0)]}else return[new Zt(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),(!t.graveyardPosition.isEqual(e.graveyardPosition)||!n.aIsStrong)&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]});Re(Rt,De,(t,e,n)=>{const r=O._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!n.bWasUndone&&!n.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.sourcePosition)?[new Zt(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&n.abRelation=="mergeSourceAffected"?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&n.abRelation=="mergeTargetWasBefore"?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])});Re(Rt,Ze,(t,e,n)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){const r=e.howMany!=0,i=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(r||i||n.abRelation=="mergeTargetNotMoved")return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if(n.abRelation=="mergeSourceNotMoved")return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if(n.abRelation=="mergeSameElement"||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]});Re(De,rn,(t,e)=>{const r=O._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]});Re(De,De,(t,e,n)=>{const r=O._createFromPositionAndShift(t.sourcePosition,t.howMany),i=O._createFromPositionAndShift(e.sourcePosition,e.howMany);let s=n.aIsStrong,o=!n.aIsStrong;n.abRelation=="insertBefore"||n.baRelation=="insertAfter"?o=!0:(n.abRelation=="insertAfter"||n.baRelation=="insertBefore")&&(o=!1);let a;if(t.targetPosition.isEqual(e.targetPosition)&&o?a=t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),gT(t,e)&&gT(e,t))return[e.getReversed()];if(r.containsPosition(e.targetPosition)&&r.containsRange(i,!0))return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),sc([r],a);if(i.containsPosition(t.targetPosition)&&i.containsRange(r,!0))return r.start=r.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),r.end=r.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),sc([r],a);const u=xn(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return r.start=r.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),r.end=r.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),sc([r],a);t.type=="remove"&&e.type!="remove"&&!n.aWasUndone&&!n.forceWeakRemove?s=!0:t.type!="remove"&&e.type=="remove"&&!n.bWasUndone&&!n.forceWeakRemove&&(s=!1);const d=[],h=r.getDifference(i);for(const p of h){p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const g=xn(p.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",_=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,g);d.push(..._)}const f=r.getIntersection(i);return f!==null&&s&&(f.start=f.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.end=f.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.length===0?d.push(f):d.length==1?i.start.isBefore(r.start)||i.start.isEqual(r.start)?d.unshift(f):d.push(f):d.splice(1,0,f)),d.length===0?[new Zt(t.baseVersion)]:sc(d,a)});Re(De,Ze,(t,e,n)=>{let r=t.targetPosition.clone();(!t.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||n.abRelation=="moveTargetAfter")&&(r=t.targetPosition._getTransformedBySplitOperation(e));const i=O._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=r,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let a=new O(e.splitPosition,i.end);a=a._getTransformedBySplitOperation(e);const l=[new O(i.start,e.splitPosition),a];return sc(l,r)}t.targetPosition.isEqual(e.splitPosition)&&n.abRelation=="insertAtSource"&&(r=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&n.abRelation=="insertBetween"&&(r=t.targetPosition);const o=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&a&&!n.aWasUndone&&o.push(O._createFromPositionAndShift(e.insertionPosition,1))}return sc(o,r)});Re(De,Rt,(t,e,n)=>{const r=O._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&r.containsPosition(e.sourcePosition)){if(t.type=="remove"&&!n.forceWeakRemove){if(!n.aWasUndone){const o=[];let a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(o.push(new De(t.sourcePosition,t.howMany-1,t.targetPosition,0)),a=a._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),l=l._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));const c=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),u=new De(a,1,c,0),d=u.getMovedRangeStart().path.slice();d.push(0);const h=new N(u.targetPosition.root,d);l=l._getTransformedByMove(a,c,1);const f=new De(l,e.howMany,h,0);return o.push(u),o.push(f),o}}else if(t.howMany==1)return n.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Zt(0)]}const s=O._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]});Re(tr,rn,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t]));Re(tr,Rt,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t]));Re(tr,De,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t]));Re(tr,tr,(t,e,n)=>{if(t.position.isEqual(e.position))if(n.aIsStrong)t.oldName=e.newName;else return[new Zt(0)];return[t]});Re(tr,Ze,(t,e)=>{const n=t.position.path,r=e.splitPosition.getParentPath();if(xn(n,r)=="same"&&!e.graveyardPosition){const i=new tr(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,i]}return t.position=t.position._getTransformedBySplitOperation(e),[t]});Re(js,js,(t,e,n)=>{if(t.root===e.root&&t.key===e.key){if(!n.aIsStrong||t.newValue===e.newValue)return[new Zt(0)];t.oldValue=e.newValue}return[t]});Re(ts,ts,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new Zt(0)]:[t]);Re(Ze,rn,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t]));Re(Ze,Rt,(t,e,n)=>{if(!t.graveyardPosition&&!n.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const r=e.graveyardPosition.path.slice();r.push(0);const i=new N(e.graveyardPosition.root,r),s=Ze.getInsertionPosition(new N(e.graveyardPosition.root,r)),o=new Ze(i,0,s,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),t.graveyardPosition=o.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[o,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]});Re(Ze,De,(t,e,n)=>{const r=O._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const s=r.start.isEqual(t.graveyardPosition)||r.containsPosition(t.graveyardPosition);if(!n.bWasUndone&&s){const o=t.splitPosition._getTransformedByMoveOperation(e),a=t.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);const c=new N(a.root,l);return[new De(o,t.howMany,c,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&(n.baRelation=="insertAtSource"||n.abRelation=="splitBefore"))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),[t];if(i&&n.abRelation&&n.abRelation.howMany){const{howMany:s,offset:o}=n.abRelation;return t.howMany+=s,t.splitPosition=t.splitPosition.getShiftedBy(o),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),[t]});Re(Ze,Ze,(t,e,n)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Zt(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Zt(0)];if(n.abRelation=="splitBefore")return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const r=t.splitPosition.root.rootName=="$graveyard",i=e.splitPosition.root.rootName=="$graveyard";if(i&&!r||!(r&&!i)&&n.aIsStrong){const l=[];return e.howMany&&l.push(new De(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&l.push(new De(t.splitPosition,t.howMany,t.moveTargetPosition,0)),l}else return[new Zt(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&n.abRelation=="splitBefore")return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&n.baRelation=="splitBefore"){const r=e.insertionPosition.path.slice();r.push(0);const i=new N(e.insertionPosition.root,r),s=new De(t.insertionPosition,1,i,0);return[t,s]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Ze.getInsertionPosition(t.splitPosition),[t]});function gT(t,e){return t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function sc(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],s=new De(i.start,i.end.offset-i.start.offset,e,0);n.push(s);for(let o=r+1;o<t.length;o++)t[o]=t[o]._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)[0];e=e._getTransformedByMove(s.sourcePosition,s.targetPosition,s.howMany)}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hn extends qe(N){constructor(e,n,r="toNone"){if(super(e,n,r),!this.root.is("rootElement"))throw new T("model-liveposition-root-not-rootelement",e);bce.call(this)}detach(){this.stopListening()}toPosition(){return new N(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,n){return new this(e.root,e.path.slice(),n||e.stickiness)}}Hn.prototype.is=function(t){return t==="livePosition"||t==="model:livePosition"||t=="position"||t==="model:position"};function bce(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const n=e[0];n.isDocumentOperation&&_ce.call(this,n)},{priority:"low"})}function _ce(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const n=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dl{constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Ie("batch-constructor-deprecated-string-type"));const{isUndoable:n=!0,isLocal:r=!0,isUndo:i=!1,isTyping:s=!1}=e;this.operations=[],this.isUndoable=n,this.isLocal=r,this.isUndo=i,this.isTyping=s}get type(){return Ie("batch-type-deprecated"),"default"}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kce{constructor(e){this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const n=e;switch(n.type){case"insert":{if(this._isInInsertedElement(n.position.parent))return;this._markInsert(n.position.parent,n.position.offset,n.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const r of n.range.getItems({shallow:!0}))this._isInInsertedElement(r.parent)||this._markAttribute(r);break}case"remove":case"move":case"reinsert":{if(n.sourcePosition.isEqual(n.targetPosition)||n.sourcePosition.getShiftedBy(n.howMany).isEqual(n.targetPosition))return;const r=this._isInInsertedElement(n.sourcePosition.parent),i=this._isInInsertedElement(n.targetPosition.parent);r||this._markRemove(n.sourcePosition.parent,n.sourcePosition.offset,n.howMany),i||this._markInsert(n.targetPosition.parent,n.getMovedRangeStart().offset,n.howMany);break}case"rename":{if(this._isInInsertedElement(n.position.parent))return;this._markRemove(n.position.parent,n.position.offset,1),this._markInsert(n.position.parent,n.position.offset,1);const r=O._createFromPositionAndShift(n.position,1);for(const i of this._markerCollection.getMarkersIntersectingRange(r)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}break}case"split":{const r=n.splitPosition.parent;this._isInInsertedElement(r)||this._markRemove(r,n.splitPosition.offset,n.howMany),this._isInInsertedElement(n.insertionPosition.parent)||this._markInsert(n.insertionPosition.parent,n.insertionPosition.offset,1),n.graveyardPosition&&this._markRemove(n.graveyardPosition.parent,n.graveyardPosition.offset,1);break}case"merge":{const r=n.sourcePosition.parent;this._isInInsertedElement(r.parent)||this._markRemove(r.parent,r.startOffset,1);const i=n.graveyardPosition.parent;this._markInsert(i,n.graveyardPosition.offset,1);const s=n.targetPosition.parent;this._isInInsertedElement(s)||this._markInsert(s,n.targetPosition.offset,r.maxOffset);break}case"detachRoot":case"addRoot":{const r=n.affectedSelectable;if(!r._isLoaded||r.isAttached()==n.isAdd)return;this._bufferRootStateChange(n.rootName,n.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!n.root._isLoaded)return;const r=n.root.rootName;this._bufferRootAttributeChange(r,n.key,n.oldValue,n.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,n,r){n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null),r.range&&r.range.root.is("rootElement")&&!r.range.root._isLoaded&&(r.range=null);let i=this._changedMarkers.get(e);i?i.newMarkerData=r:(i={newMarkerData:r,oldMarkerData:n},this._changedMarkers.set(e,i)),i.oldMarkerData.range==null&&r.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[n,r]of this._changedMarkers)r.oldMarkerData.range!=null&&e.push({name:n,range:r.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[n,r]of this._changedMarkers)r.newMarkerData.range!=null&&e.push({name:n,range:r.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,n])=>({name:e,data:{oldRange:n.oldMarkerData.range,newRange:n.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:n}of this._changedMarkers.values()){if(e.affectsData!==n.affectsData)return!0;if(e.affectsData){const r=e.range&&!n.range,i=!e.range&&n.range,s=e.range&&n.range&&!e.range.isEqual(n.range);if(r||i||s)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let n=[];for(const r of this._changesInElement.keys()){const i=this._changesInElement.get(r).sort((u,d)=>u.offset===d.offset?u.type!=d.type?u.type=="remove"?-1:1:0:u.offset<d.offset?-1:1),s=this._elementSnapshots.get(r),o=wT(r.getChildren()),a=Ece(s.length,i);let l=0,c=0;for(const u of a)if(u==="i")n.push(this._getInsertDiff(r,l,o[l])),l++;else if(u==="r")n.push(this._getRemoveDiff(r,l,s[c])),c++;else if(u==="a"){const d=o[l].attributes,h=s[c].attributes;let f;if(o[l].name=="$text")f=new O(N._createAt(r,l),N._createAt(r,l+1));else{const p=r.offsetToIndex(l);f=new O(N._createAt(r,l),N._createAt(r.getChild(p),0))}n.push(...this._getAttributesDiff(f,h,d)),l++,c++}else l++,c++}n.sort((r,i)=>r.position.root!=i.position.root?r.position.root.rootName<i.position.root.rootName?-1:1:r.position.isEqual(i.position)?r.changeCount-i.changeCount:r.position.isBefore(i.position)?-1:1);for(let r=1,i=0;r<n.length;r++){const s=n[i],o=n[r],a=s.type=="remove"&&o.type=="remove"&&s.name=="$text"&&o.name=="$text"&&s.position.isEqual(o.position),l=s.type=="insert"&&o.type=="insert"&&s.name=="$text"&&o.name=="$text"&&s.position.parent==o.position.parent&&s.position.offset+s.length==o.position.offset,c=s.type=="attribute"&&o.type=="attribute"&&s.position.parent==o.position.parent&&s.range.isFlat&&o.range.isFlat&&s.position.offset+s.length==o.position.offset&&s.attributeKey==o.attributeKey&&s.attributeOldValue==o.attributeOldValue&&s.attributeNewValue==o.attributeNewValue;a||l||c?(s.length++,c&&(s.range.end=s.range.end.getShiftedBy(1)),n[r]=null):i=r}n=n.filter(r=>r);for(const r of n)delete r.changeCount,r.type=="attribute"&&(delete r.position,delete r.length);return this._changeCount=0,this._cachedChangesWithGraveyard=n,this._cachedChanges=n.filter(Cce),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const n={...e};return n.state!==void 0&&delete n.attributes,n})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}_bufferRootStateChange(e,n){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:n?"attached":"detached"});return}const r=this._changedRoots.get(e);r.state!==void 0?(delete r.state,r.attributes===void 0&&this._changedRoots.delete(e)):r.state=n?"attached":"detached"}_bufferRootAttributeChange(e,n,r,i){const s=this._changedRoots.get(e)||{name:e},o=s.attributes||{};if(o[n]){const a=o[n];i===a.oldValue?delete o[n]:a.newValue=i}else o[n]={oldValue:r,newValue:i};Object.entries(o).length===0?(delete s.attributes,s.state===void 0&&this._changedRoots.delete(e)):(s.attributes=o,this._changedRoots.set(e,s))}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e);const n=O._createOn(e);for(const r of this._markerCollection.getMarkersIntersectingRange(n)){const i=r.getData();this.bufferMarkerChange(r.name,i,i)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const n of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,n,null,e.getAttribute(n));for(const n of this._markerCollection)if(n.getRange().root==e){const r=n.getData();this.bufferMarkerChange(n.name,{...r,range:null},r)}}}_markInsert(e,n,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"insert",offset:n,howMany:r,count:this._changeCount++};this._markChange(e,i)}_markRemove(e,n,r){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const i={type:"remove",offset:n,howMany:r,count:this._changeCount++};this._markChange(e,i),this._removeAllNestedChanges(e,n,r)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const n={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,n)}_markChange(e,n){this._makeSnapshot(e);const r=this._getChangesForElement(e);this._handleChange(n,r),r.push(n);for(let i=0;i<r.length;i++)r[i].howMany<1&&(r.splice(i,1),i--)}_getChangesForElement(e){let n;return this._changesInElement.has(e)?n=this._changesInElement.get(e):(n=[],this._changesInElement.set(e,n)),n}_makeSnapshot(e){this._elementSnapshots.has(e)||this._elementSnapshots.set(e,wT(e.getChildren()))}_handleChange(e,n){e.nodesToHandle=e.howMany;for(const r of n){const i=e.offset+e.howMany,s=r.offset+r.howMany;if(e.type=="insert"&&(r.type=="insert"&&(e.offset<=r.offset?r.offset+=e.howMany:e.offset<s&&(r.howMany+=e.nodesToHandle,e.nodesToHandle=0)),r.type=="remove"&&e.offset<r.offset&&(r.offset+=e.howMany),r.type=="attribute")){if(e.offset<=r.offset)r.offset+=e.howMany;else if(e.offset<s){const o=r.howMany;r.howMany=e.offset-r.offset,n.unshift({type:"attribute",offset:i,howMany:o-r.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(r.type=="insert"){if(i<=r.offset)r.offset-=e.howMany;else if(i<=s)if(e.offset<r.offset){const o=i-r.offset;r.offset=e.offset,r.howMany-=o,e.nodesToHandle-=o}else r.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=r.offset)e.nodesToHandle-=r.howMany,r.howMany=0;else if(e.offset<s){const o=s-e.offset;r.howMany-=o,e.nodesToHandle-=o}}if(r.type=="remove"&&(i<=r.offset?r.offset-=e.howMany:e.offset<r.offset&&(e.nodesToHandle+=r.howMany,r.howMany=0)),r.type=="attribute"){if(i<=r.offset)r.offset-=e.howMany;else if(e.offset<r.offset){const o=i-r.offset;r.offset=e.offset,r.howMany-=o}else if(e.offset<s)if(i<=s){const o=r.howMany;r.howMany=e.offset-r.offset;const a=o-r.howMany-e.nodesToHandle;n.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else r.howMany-=s-e.offset}}if(e.type=="attribute"){if(r.type=="insert")if(e.offset<r.offset&&i>r.offset){if(i>s){const o={type:"attribute",offset:s,howMany:i-s,count:this._changeCount++};this._handleChange(o,n),n.push(o)}e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=r.offset&&e.offset<s&&(i>s?(e.nodesToHandle=i-s,e.offset=s):e.nodesToHandle=0);if(r.type=="remove"&&e.offset<r.offset&&i>r.offset){const o={type:"attribute",offset:r.offset,howMany:i-r.offset,count:this._changeCount++};this._handleChange(o,n),n.push(o),e.nodesToHandle=r.offset-e.offset,e.howMany=e.nodesToHandle}r.type=="attribute"&&(e.offset>=r.offset&&i<=s?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=r.offset&&i>=s&&(r.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,n,r){return{type:"insert",position:N._createAt(e,n),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}_getRemoveDiff(e,n,r){return{type:"remove",position:N._createAt(e,n),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}_getAttributesDiff(e,n,r){const i=[];r=new Map(r);for(const[s,o]of n){const a=r.has(s)?r.get(s):null;a!==o&&i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),r.delete(s)}for(const[s,o]of r)i.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:s,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return i}_isInInsertedElement(e){const n=e.parent;if(!n)return!1;const r=this._changesInElement.get(n),i=e.startOffset;if(r){for(const s of r)if(s.type=="insert"&&i>=s.offset&&i<s.offset+s.howMany)return!0}return this._isInInsertedElement(n)}_removeAllNestedChanges(e,n,r){const i=new O(N._createAt(e,n),N._createAt(e,n+r));for(const s of i.getItems({shallow:!0}))s.is("element")&&(this._elementSnapshots.delete(s),this._changesInElement.delete(s),this._removeAllNestedChanges(s,0,s.maxOffset))}}function wT(t){const e=[];for(const n of t)if(n.is("$text"))for(let r=0;r<n.data.length;r++)e.push({name:"$text",attributes:new Map(n.getAttributes())});else e.push({name:n.name,attributes:new Map(n.getAttributes()),element:n});return e}function Ece(t,e){const n=[];let r=0,i=0;for(const s of e){if(s.offset>r){for(let o=0;o<s.offset-r;o++)n.push("e");i+=s.offset-r}if(s.type=="insert"){for(let o=0;o<s.howMany;o++)n.push("i");r=s.offset+s.howMany}else if(s.type=="remove"){for(let o=0;o<s.howMany;o++)n.push("r");r=s.offset,i+=s.howMany}else n.push(..."a".repeat(s.howMany).split("")),r=s.offset+s.howMany,i+=s.howMany}if(i<t)for(let s=0;s<t-i-r;s++)n.push("e");return n}function Cce(t){const e="position"in t&&t.position.root.rootName=="$graveyard",n="range"in t&&t.range.root.rootName=="$graveyard";return!e&&!n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xce{constructor(){this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map}get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new T("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,n=this.version){if(!this._operations.length)return[];const r=this._operations[0];e===void 0&&(e=r.baseVersion);let i=n-1;for(const[a,l]of this._gaps)e>a&&e<l&&(e=l),i>a&&i<l&&(i=a-1);if(i<r.baseVersion||e>this.lastOperation.baseVersion)return[];let s=this._baseVersionToOperationIndex.get(e);s===void 0&&(s=0);let o=this._baseVersionToOperationIndex.get(i);return o===void 0&&(o=this._operations.length-1),this._operations.slice(s,o+1)}getOperation(e){const n=this._baseVersionToOperationIndex.get(e);if(n!==void 0)return this._operations[n]}setOperationAsUndone(e,n){this._undoPairs.set(n,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dg extends ct{constructor(e,n,r="main"){super(n),this._isAttached=!0,this._isLoaded=!0,this._document=e,this.rootName=r}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}dg.prototype.is=function(t,e){return e?e===this.name&&(t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"):t==="rootElement"||t==="model:rootElement"||t==="element"||t==="model:element"||t==="node"||t==="model:node"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const vT="$graveyard";class Sce extends qe(){constructor(e){super(),this.model=e,this.history=new xce,this.selection=new Oi(this),this.roots=new Nr({idProperty:"rootName"}),this.differ=new kce(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",vT),this.listenTo(e,"applyOperation",(n,r)=>{const i=r[0];i.isDocumentOperation&&this.differ.bufferOperation(i)},{priority:"high"}),this.listenTo(e,"applyOperation",(n,r)=>{const i=r[0];i.isDocumentOperation&&this.history.addOperation(i)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(n,r,i,s,o)=>{const a={...r.getData(),range:s};this.differ.bufferMarkerChange(r.name,o,a),i===null&&r.on("change",(l,c)=>{const u=r.getData();this.differ.bufferMarkerChange(r.name,{...u,range:c},u)})}),this.registerPostFixer(n=>{let r=!1;for(const i of this.roots)!i.isAttached()&&!i.isEmpty&&(n.remove(n.createRangeIn(i)),r=!0);for(const i of this.model.markers)i.getRange().root.isAttached()||(n.removeMarker(i),r=!0);return r})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(vT)}createRoot(e="$root",n="main"){if(this.roots.get(n))throw new T("model-document-createroot-name-exists",this,{name:n});const r=new dg(this,e,n);return this.roots.add(r),r}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(n=>n.rootName)}getRoots(e=!1){return this.roots.filter(n=>n!=this.graveyard&&(e||n.isAttached())&&n._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=w8(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),n=this.model,r=n.schema,i=n.createPositionFromPath(e,[0]);return r.getNearestSelectionRange(i)||n.createRange(i)}_validateSelectionRange(e){return yT(e.start)&&yT(e.end)}_callPostFixers(e){let n=!1;do for(const r of this._postFixers)if(this.selection.refresh(),n=r(e),n)break;while(n)}}function yT(t){const e=t.textNode;if(e){const n=e.data,r=t.offset-e.startOffset;return!ik(n,r)&&!sk(n,r)}return!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tce extends qe(){constructor(){super(...arguments),this._markers=new Map}[Symbol.iterator](){return this._markers.values()}has(e){const n=e instanceof Hl?e.name:e;return this._markers.has(n)}get(e){return this._markers.get(e)||null}_set(e,n,r=!1,i=!1){const s=e instanceof Hl?e.name:e;if(s.includes(","))throw new T("markercollection-incorrect-marker-name",this);const o=this._markers.get(s);if(o){const c=o.getData(),u=o.getRange();let d=!1;return u.isEqual(n)||(o._attachLiveRange(Gr.fromRange(n)),d=!0),r!=o.managedUsingOperations&&(o._managedUsingOperations=r,d=!0),typeof i=="boolean"&&i!=o.affectsData&&(o._affectsData=i,d=!0),d&&this.fire(`update:${s}`,o,u,n,c),o}const a=Gr.fromRange(n),l=new Hl(s,a,r,i);return this._markers.set(s,l),this.fire(`update:${s}`,l,null,n,{...l.getData(),range:null}),l}_remove(e){const n=e instanceof Hl?e.name:e,r=this._markers.get(n);return r?(this._markers.delete(n),this.fire(`update:${n}`,r,r.getRange(),null,r.getData()),this._destroyMarker(r),!0):!1}_refresh(e){const n=e instanceof Hl?e.name:e,r=this._markers.get(n);if(!r)throw new T("markercollection-refresh-marker-not-exists",this);const i=r.getRange();this.fire(`update:${n}`,r,i,i,r.getData())}*getMarkersAtPosition(e){for(const n of this)n.getRange().containsPosition(e)&&(yield n)}*getMarkersIntersectingRange(e){for(const n of this)n.getRange().getIntersection(e)!==null&&(yield n)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const n of this._markers.values())n.name.startsWith(e+":")&&(yield n)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Hl extends qe(ya){constructor(e,n,r,i){super(),this.name=e,this._liveRange=this._attachLiveRange(n),this._managedUsingOperations=r,this._affectsData=i}get managedUsingOperations(){if(!this._liveRange)throw new T("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new T("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new T("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new T("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new T("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Hl.prototype.is=function(t){return t==="marker"||t==="model:marker"};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pce extends Pr{constructor(e,n){super(null),this.sourcePosition=e.clone(),this.howMany=n}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new T("detach-operation-on-document-node",this)}_execute(){$O(O._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Is extends ya{constructor(e){super(),this.markers=new Map,this._children=new Ed,e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let n=this;for(const r of e)n=n.getChild(n.offsetToIndex(r));return n}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const n of this._children)e.push(n.toJSON());return e}static fromJSON(e){const n=[];for(const r of e)r.name?n.push(ct.fromJSON(r)):n.push(Ke.fromJSON(r));return new Is(n)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,n){const r=Ace(n);for(const i of r)i.parent!==null&&i._remove(),i.parent=this;this._children._insertNodes(e,r)}_removeChildren(e,n=1){const r=this._children._removeNodes(e,n);for(const i of r)i.parent=null;return r}}Is.prototype.is=function(t){return t==="documentFragment"||t==="model:documentFragment"};function Ace(t){return typeof t=="string"?[new Ke(t)]:(Tr(t)||(t=[t]),Array.from(t).map(e=>typeof e=="string"?new Ke(e):e instanceof ki?new Ke(e.data,e.getAttributes()):e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ice{constructor(e,n){this.model=e,this.batch=n}createText(e,n){return new Ke(e,n)}createElement(e,n){return new ct(e,n)}createDocumentFragment(){return new Is}cloneElement(e,n=!0){return e._clone(n)}insert(e,n,r=0){if(this._assertWriterUsedCorrectly(),e instanceof Ke&&e.data=="")return;const i=N._createAt(n,r);if(e.parent)if(kT(e.root,i.root)){this.move(O._createOn(e),i);return}else{if(e.root.document)throw new T("model-writer-insert-forbidden-move",this);this.remove(e)}const s=i.root.document?i.root.document.version:null,o=new rn(i,e,s);if(e instanceof Ke&&(o.shouldReceiveAttributes=!0),this.batch.addOperation(o),this.model.applyOperation(o),e instanceof Is)for(const[a,l]of e.markers){const c=N._createAt(l.root,0),d={range:new O(l.start._getCombined(c,i),l.end._getCombined(c,i)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,d):this.addMarker(a,d)}}insertText(e,n,r,i){n instanceof Is||n instanceof ct||n instanceof N?this.insert(this.createText(e),n,r):this.insert(this.createText(e,n),r,i)}insertElement(e,n,r,i){n instanceof Is||n instanceof ct||n instanceof N?this.insert(this.createElement(e),n,r):this.insert(this.createElement(e,n),r,i)}append(e,n){this.insert(e,n,"end")}appendText(e,n,r){n instanceof Is||n instanceof ct?this.insert(this.createText(e),n,"end"):this.insert(this.createText(e,n),r,"end")}appendElement(e,n,r){n instanceof Is||n instanceof ct?this.insert(this.createElement(e),n,"end"):this.insert(this.createElement(e,n),r,"end")}setAttribute(e,n,r){if(this._assertWriterUsedCorrectly(),r instanceof O){const i=r.getMinimalFlatRanges();for(const s of i)bT(this,e,n,s)}else _T(this,e,n,r)}setAttributes(e,n){for(const[r,i]of ss(e))this.setAttribute(r,i,n)}removeAttribute(e,n){if(this._assertWriterUsedCorrectly(),n instanceof O){const r=n.getMinimalFlatRanges();for(const i of r)bT(this,e,null,i)}else _T(this,e,null,n)}clearAttributes(e){this._assertWriterUsedCorrectly();const n=r=>{for(const i of r.getAttributeKeys())this.removeAttribute(i,r)};if(!(e instanceof O))n(e);else for(const r of e.getItems())n(r)}move(e,n,r){if(this._assertWriterUsedCorrectly(),!(e instanceof O))throw new T("writer-move-invalid-range",this);if(!e.isFlat)throw new T("writer-move-range-not-flat",this);const i=N._createAt(n,r);if(i.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!kT(e.root,i.root))throw new T("writer-move-different-document",this);const s=e.root.document?e.root.document.version:null,o=new De(e.start,e.end.offset-e.start.offset,i,s);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const r=(e instanceof O?e:O._createOn(e)).getMinimalFlatRanges().reverse();for(const i of r)this._addOperationForAffectedMarkers("move",i),Rce(i.start,i.end.offset-i.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const n=e.nodeBefore,r=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(n instanceof ct))throw new T("writer-merge-no-element-before",this);if(!(r instanceof ct))throw new T("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,n,r){return this.model.createPositionFromPath(e,n,r)}createPositionAt(e,n){return this.model.createPositionAt(e,n)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,n){return this.model.createRange(e,n)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const n=e.nodeBefore,r=e.nodeAfter;this.move(O._createIn(r),N._createAt(n,"end")),this.remove(r)}_merge(e){const n=N._createAt(e.nodeBefore,"end"),r=N._createAt(e.nodeAfter,0),i=e.root.document.graveyard,s=new N(i,[0]),o=e.root.document.version,a=new Rt(r,e.nodeAfter.maxOffset,n,s,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,n){if(this._assertWriterUsedCorrectly(),!(e instanceof ct))throw new T("writer-rename-not-element-instance",this);const r=e.root.document?e.root.document.version:null,i=new tr(N._createBefore(e),e.name,n,r);this.batch.addOperation(i),this.model.applyOperation(i)}split(e,n){this._assertWriterUsedCorrectly();let r=e.parent;if(!r.parent)throw new T("writer-split-element-no-parent",this);if(n||(n=r.parent),!e.parent.getAncestors({includeSelf:!0}).includes(n))throw new T("writer-split-invalid-limit-element",this);let i,s;do{const o=r.root.document?r.root.document.version:null,a=r.maxOffset-e.offset,l=Ze.getInsertionPosition(e),c=new Ze(e,a,l,null,o);this.batch.addOperation(c),this.model.applyOperation(c),!i&&!s&&(i=r,s=e.parent.nextSibling),e=this.createPositionAfter(e.parent),r=e.parent}while(r!==n);return{position:e,range:new O(N._createAt(i,"end"),N._createAt(s,0))}}wrap(e,n){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new T("writer-wrap-range-not-flat",this);const r=n instanceof ct?n:new ct(n);if(r.childCount>0)throw new T("writer-wrap-element-not-empty",this);if(r.parent!==null)throw new T("writer-wrap-element-attached",this);this.insert(r,e.start);const i=new O(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(i,N._createAt(r,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new T("writer-unwrap-element-no-parent",this);this.move(O._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,n){if(this._assertWriterUsedCorrectly(),!n||typeof n.usingOperation!="boolean")throw new T("writer-addmarker-no-usingoperation",this);const r=n.usingOperation,i=n.range,s=n.affectsData===void 0?!1:n.affectsData;if(this.model.markers.has(e))throw new T("writer-addmarker-marker-exists",this);if(!i)throw new T("writer-addmarker-no-range",this);return r?(Wu(this,e,null,i,s),this.model.markers.get(e)):this.model.markers._set(e,i,r,s)}updateMarker(e,n){this._assertWriterUsedCorrectly();const r=typeof e=="string"?e:e.name,i=this.model.markers.get(r);if(!i)throw new T("writer-updatemarker-marker-not-exists",this);if(!n){Ie("writer-updatemarker-reconvert-using-editingcontroller",{markerName:r}),this.model.markers._refresh(i);return}const s=typeof n.usingOperation=="boolean",o=typeof n.affectsData=="boolean",a=o?n.affectsData:i.affectsData;if(!s&&!n.range&&!o)throw new T("writer-updatemarker-wrong-options",this);const l=i.getRange(),c=n.range?n.range:l;if(s&&n.usingOperation!==i.managedUsingOperations){n.usingOperation?Wu(this,r,null,c,a):(Wu(this,r,l,null,a),this.model.markers._set(r,c,void 0,a));return}i.managedUsingOperations?Wu(this,r,l,c,a):this.model.markers._set(r,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const n=typeof e=="string"?e:e.name;if(!this.model.markers.has(n))throw new T("writer-removemarker-no-marker",this);const r=this.model.markers.get(n);if(!r.managedUsingOperations){this.model.markers._remove(n);return}const i=r.getRange();Wu(this,n,i,null,r.affectsData)}addRoot(e,n="$root"){this._assertWriterUsedCorrectly();const r=this.model.document.getRoot(e);if(r&&r.isAttached())throw new T("writer-addroot-root-exists",this);const i=this.model.document,s=new ts(e,n,!0,i,i.version);return this.batch.addOperation(s),this.model.applyOperation(s),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const n=typeof e=="string"?this.model.document.getRoot(e):e;if(!n||!n.isAttached())throw new T("writer-detachroot-no-root",this);for(const s of this.model.markers)s.getRange().root===n&&this.removeMarker(s);for(const s of n.getAttributeKeys())this.removeAttribute(s,n);this.remove(this.createRangeIn(n));const r=this.model.document,i=new ts(n.rootName,n.name,!1,r,r.version);this.batch.addOperation(i),this.model.applyOperation(i)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,n)}setSelectionAttribute(e,n){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,n);else for(const[r,i]of ss(e))this._setSelectionAttribute(r,i)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const n of e)this._removeSelectionAttribute(n)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,n){const r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){const i=Oi._getStoreAttributeKey(e);this.setAttribute(i,n,r.anchor.parent)}r._setAttribute(e,n)}_removeSelectionAttribute(e){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const r=Oi._getStoreAttributeKey(e);this.removeAttribute(r,n.anchor.parent)}n._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new T("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,n){for(const r of this.model.markers){if(!r.managedUsingOperations)continue;const i=r.getRange();let s=!1;if(e==="move"){const o=n;s=o.containsPosition(i.start)||o.start.isEqual(i.start)||o.containsPosition(i.end)||o.end.isEqual(i.end)}else{const o=n,a=o.nodeBefore,l=o.nodeAfter,c=i.start.parent==a&&i.start.isAtEnd,u=i.end.parent==l&&i.end.offset==0,d=i.end.nodeAfter==l,h=i.start.nodeAfter==l;s=c||u||d||h}s&&this.updateMarker(r.name,{range:i})}}}function bT(t,e,n,r){const i=t.model,s=i.document;let o=r.start,a,l,c;for(const d of r.getWalker({shallow:!0}))c=d.item.getAttribute(e),a&&l!=c&&(l!=n&&u(),o=a),a=d.nextPosition,l=c;a instanceof N&&a!=o&&l!=n&&u();function u(){const d=new O(o,a),h=d.root.document?s.version:null,f=new Ft(d,e,l,n,h);t.batch.addOperation(f),i.applyOperation(f)}}function _T(t,e,n,r){const i=t.model,s=i.document,o=r.getAttribute(e);let a,l;if(o!=n){if(r.root===r){const u=r.document?s.version:null;l=new js(r,e,o,n,u)}else{a=new O(N._createBefore(r),t.createPositionAfter(r));const u=a.root.document?s.version:null;l=new Ft(a,e,o,n,u)}t.batch.addOperation(l),i.applyOperation(l)}}function Wu(t,e,n,r,i){const s=t.model,o=s.document,a=new er(e,n,r,s.markers,!!i,o.version);t.batch.addOperation(a),s.applyOperation(a)}function Rce(t,e,n,r){let i;if(t.root.document){const s=r.document,o=new N(s.graveyard,[0]);i=new De(t,e,o,s.version)}else i=new Pce(t,e);n.addOperation(i),r.applyOperation(i)}function kT(t,e){return t===e||t instanceof dg&&e instanceof dg}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Oce(t,e,n={}){if(e.isCollapsed)return;const r=e.getFirstRange();if(r.root.rootName=="$graveyard")return;const i=t.schema;t.change(s=>{if(!n.doNotResetEntireContent&&Uce(i,e)){Bce(s,e);return}const o={};if(!n.doNotAutoparagraph){const c=e.getSelectedElement();c&&Object.assign(o,i.getAttributesWithProperty(c,"copyOnReplace",!0))}const[a,l]=Mce(r);a.isTouching(l)||s.remove(s.createRange(a,l)),n.leaveUnmerged||(Dce(s,a,l),i.removeDisallowedAttributes(a.parent.getChildren(),s)),WO(s,e,a),!n.doNotAutoparagraph&&Fce(i,a)&&HO(s,a,e,o),a.detach(),l.detach()})}function Mce(t){const e=t.root.document.model,n=t.start;let r=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){const i=Nce(r);if(i&&r.isTouching(e.createPositionAt(i,0))){const s=e.createSelection(t);e.modifySelection(s,{direction:"backward"});const o=s.getLastPosition(),a=e.createRange(o,r);e.hasContent(a,{ignoreMarkers:!0})||(r=o)}}return[Hn.fromPosition(n,"toPrevious"),Hn.fromPosition(r,"toNext")]}function Nce(t){const e=t.parent,n=e.root.document.model.schema,r=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const i of r){if(n.isLimit(i))return null;if(n.isBlock(i))return i}}function Dce(t,e,n){const r=t.model;if(!gk(t.model.schema,e,n))return;const[i,s]=$ce(e,n);!i||!s||(!r.hasContent(i,{ignoreMarkers:!0})&&r.hasContent(s,{ignoreMarkers:!0})?zO(t,e,n,i.parent):UO(t,e,n,i.parent))}function UO(t,e,n,r){const i=e.parent,s=n.parent;if(!(i==r||s==r)){for(e=t.createPositionAfter(i),n=t.createPositionBefore(s),n.isEqual(e)||t.insert(s,e),t.merge(e);n.parent.isEmpty;){const o=n.parent;n=t.createPositionBefore(o),t.remove(o)}gk(t.model.schema,e,n)&&UO(t,e,n,r)}}function zO(t,e,n,r){const i=e.parent,s=n.parent;if(!(i==r||s==r)){for(e=t.createPositionAfter(i),n=t.createPositionBefore(s),n.isEqual(e)||t.insert(i,n);e.parent.isEmpty;){const o=e.parent;e=t.createPositionBefore(o),t.remove(o)}n=t.createPositionBefore(s),Lce(t,n),gk(t.model.schema,e,n)&&zO(t,e,n,r)}}function Lce(t,e){const n=e.nodeBefore,r=e.nodeAfter;n.name!=r.name&&t.rename(n,r.name),t.clearAttributes(n),t.setAttributes(Object.fromEntries(r.getAttributes()),n),t.merge(e)}function gk(t,e,n){const r=e.parent,i=n.parent;return r==i||t.isLimit(r)||t.isLimit(i)?!1:Vce(e,n,t)}function $ce(t,e){const n=t.getAncestors(),r=e.getAncestors();let i=0;for(;n[i]&&n[i]==r[i];)i++;return[n[i],r[i]]}function Fce(t,e){const n=t.checkChild(e,"$text"),r=t.checkChild(e,"paragraph");return!n&&r}function Vce(t,e,n){const r=new O(t,e);for(const i of r.getWalker())if(n.isLimit(i.item))return!1;return!0}function HO(t,e,n,r={}){const i=t.createElement("paragraph");t.model.schema.setAllowedAttributes(i,r,t),t.insert(i,e),WO(t,n,t.createPositionAt(i,0))}function Bce(t,e){const n=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(n)),HO(t,t.createPositionAt(n,0),e)}function Uce(t,e){const n=t.getLimitElement(e);if(!e.containsEntireContent(n))return!1;const r=e.getFirstRange();return r.start.parent==r.end.parent?!1:t.checkChild(n,"paragraph")}function WO(t,e,n){e instanceof Oi?t.setSelection(n):e.setTo(n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function zce(t,e){return t.change(n=>{const r=n.createDocumentFragment(),i=e.getFirstRange();if(!i||i.isCollapsed)return r;const s=i.start.root,o=i.start.getCommonPath(i.end),a=s.getNodeByPath(o);let l;i.start.parent==i.end.parent?l=i:l=n.createRange(n.createPositionAt(a,i.start.path[o.length]),n.createPositionAt(a,i.end.path[o.length]+1));const c=l.end.offset-l.start.offset;for(const u of l.getItems({shallow:!0}))u.is("$textProxy")?n.appendText(u.data,u.getAttributes(),r):n.append(n.cloneElement(u,!0),r);if(l!=i){const u=i._getTransformedByMove(l.start,n.createPositionAt(r,0),c)[0],d=n.createRange(n.createPositionAt(r,0),u.start),h=n.createRange(u.end,n.createPositionAt(r,"end"));ET(h,n),ET(d,n)}return r})}function ET(t,e){const n=[];Array.from(t.getItems({direction:"backward"})).map(r=>e.createRangeOn(r)).filter(r=>(r.start.isAfter(t.start)||r.start.isEqual(t.start))&&(r.end.isBefore(t.end)||r.end.isEqual(t.end))).forEach(r=>{n.push(r.start.parent),e.remove(r)}),n.forEach(r=>{let i=r;for(;i.parent&&i.isEmpty;){const s=e.createRangeOn(i);i=i.parent,e.remove(s)}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Hce(t,e,n){return t.change(r=>{const i=n||t.document.selection;i.isCollapsed||t.deleteContent(i,{doNotAutoparagraph:!0});const s=new Wce(t,r,i.anchor),o=[];let a;if(e.is("documentFragment")){if(e.markers.size){const u=[];for(const[d,h]of e.markers){const{start:f,end:p}=h,g=f.isEqual(p);u.push({position:f,name:d,isCollapsed:g},{position:p,name:d,isCollapsed:g})}u.sort(({position:d},{position:h})=>d.isBefore(h)?1:-1);for(const{position:d,name:h,isCollapsed:f}of u){let p=null,g=null;const _=d.parent===e&&d.isAtStart,v=d.parent===e&&d.isAtEnd;!_&&!v?(p=r.createElement("$marker"),r.insert(p,d)):f&&(g=_?"start":"end"),o.push({name:h,element:p,collapsed:g})}}a=e.getChildren()}else a=[e];s.handleNodes(a);let l=s.getSelectionRange();if(e.is("documentFragment")&&o.length){const u=l?Gr.fromRange(l):null,d={};for(let h=o.length-1;h>=0;h--){const{name:f,element:p,collapsed:g}=o[h],_=!d[f];if(_&&(d[f]=[]),p){const v=r.createPositionAt(p,"before");d[f].push(v),r.remove(p)}else{const v=s.getAffectedRange();if(!v){g&&d[f].push(s.position);continue}g?d[f].push(v[g]):d[f].push(_?v.start:v.end)}}for(const[h,[f,p]]of Object.entries(d))f&&p&&f.root===p.root&&f.root.document&&!r.model.markers.has(h)&&r.addMarker(h,{usingOperation:!0,affectsData:!0,range:new O(f,p)});u&&(l=u.toRange(),u.detach())}/* istanbul ignore else -- @preserve */l&&(i instanceof Oi?r.setSelection(l):i.setTo(l));const c=s.getAffectedRange()||t.createRange(i.anchor);return s.destroy(),c})}class Wce{constructor(e,n,r){this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=n,this.position=r,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=n.createDocumentFragment(),this._documentFragmentPosition=n.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const n of Array.from(e))this._handleNode(n);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){const n=this.writer.createPositionAfter(this._lastNode),r=this.writer.createPositionAfter(e);if(r.isAfter(n)){this._lastNode=e;/* istanbul ignore if -- @preserve */if(this.position.parent!=e||!this.position.isAtEnd)throw new T("insertcontent-invalid-insertion-position",this);this.position=r,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?O._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new O(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(this.schema.isObject(e)){this._handleObject(e);return}let n=this._checkAndAutoParagraphToAllowedPosition(e);if(!n&&(n=this._checkAndSplitToAllowedPosition(e),!n)){this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Hn.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleObject(e){this._checkAndSplitToAllowedPosition(e)?this._appendToFragment(e):this._tryAutoparagraphing(e)}_handleDisallowedNode(e){e.is("element")?this.handleNodes(e.getChildren()):this._tryAutoparagraphing(e)}_appendToFragment(e){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,e))throw new T("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Hn.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Hn.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof ct)||!this._canMergeLeft(e))return;const n=Hn._createBefore(e);n.stickiness="toNext";const r=Hn.fromPosition(this.position,"toNext");this._affectedStart.isEqual(n)&&(this._affectedStart.detach(),this._affectedStart=Hn._createAt(n.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Hn._createAt(n.nodeBefore,"end","toNext")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof ct)||!this._canMergeRight(e))return;const n=Hn._createAfter(e);n.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(n))throw new T("insertcontent-invalid-insertion-position",this);this.position=N._createAt(n.nodeBefore,"end");const r=Hn.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(n)&&(this._affectedEnd.detach(),this._affectedEnd=Hn._createAt(n.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Hn._createAt(n.nodeBefore,0,"toPrevious")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_canMergeLeft(e){const n=e.previousSibling;return n instanceof ct&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,e)}_canMergeRight(e){const n=e.nextSibling;return n instanceof ct&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(e,n)}_tryAutoparagraphing(e){const n=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,n)&&this.schema.checkChild(n,e)&&(n._appendChild(e),this._handleNode(n))}_checkAndAutoParagraphToAllowedPosition(e){if(this.schema.checkChild(this.position.parent,e))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",e))return!1;this._insertPartialFragment();const n=this.writer.createElement("paragraph");return this.writer.insert(n,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=n,this.position=this.writer.createPositionAt(n,0),!0}_checkAndSplitToAllowedPosition(e){const n=this._getAllowedIn(this.position.parent,e);if(!n)return!1;for(n!=this.position.parent&&this._insertPartialFragment();n!=this.position.parent;)if(this.position.isAtStart){const r=this.position.parent;this.position=this.writer.createPositionBefore(r),r.isEmpty&&r.parent===n&&this.writer.remove(r)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const r=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=r,this.canMergeWith.add(this.position.nodeAfter)}return!0}_getAllowedIn(e,n){return this.schema.checkChild(e,n)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jce(t,e,n,r={}){if(!t.schema.isObject(e))throw new T("insertobject-element-not-an-object",t,{object:e});const i=n||t.document.selection;let s=i;r.findOptimalPosition&&t.schema.isBlock(e)&&(s=t.createSelection(t.schema.findOptimalInsertionRange(i,r.findOptimalPosition)));const o=vn(i.getSelectedBlocks()),a={};return o&&Object.assign(a,t.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),t.change(l=>{s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0});let c=e;const u=s.anchor.parent;!t.schema.checkChild(u,e)&&t.schema.checkChild(u,"paragraph")&&t.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),t.schema.setAllowedAttributes(c,a,l);const d=t.insertContent(c,s);return d.isCollapsed||r.setSelection&&Gce(l,e,r.setSelection,a),d})}function Gce(t,e,n,r){const i=t.model;if(n=="on"){t.setSelection(e,"on");return}if(n!="after")throw new T("insertobject-invalid-place-parameter-value",i);let s=e.nextSibling;if(i.schema.isInline(e)){t.setSelection(e,"after");return}!(s&&i.schema.checkChild(s,"$text"))&&i.schema.checkChild(e.parent,"paragraph")&&(s=t.createElement("paragraph"),i.schema.setAllowedAttributes(s,r,t),i.insertContent(s,t.createPositionAfter(e))),s&&t.setSelection(s,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qce=' ,.?!:;"-()';function Yce(t,e,n={}){const r=t.schema,i=n.direction!="backward",s=n.unit?n.unit:"character",o=!!n.treatEmojiAsSingleUnit,a=e.focus,l=new Vs({boundaries:Xce(a,i),singleCharacters:!0,direction:i?"forward":"backward"}),c={walker:l,schema:r,isForward:i,unit:s,treatEmojiAsSingleUnit:o};let u;for(;u=l.next();){if(u.done)return;const d=Kce(c,u.value);if(d){e instanceof Oi?t.change(h=>{h.setSelectionFocus(d)}):e.setFocus(d);return}}}function Kce(t,e){const{isForward:n,walker:r,unit:i,schema:s,treatEmojiAsSingleUnit:o}=t,{type:a,item:l,nextPosition:c}=e;if(a=="text")return t.unit==="word"?Jce(r,n):Zce(r,i,o);if(a==(n?"elementStart":"elementEnd")){if(s.isSelectable(l))return N._createAt(l,n?"after":"before");if(s.checkChild(c,"$text"))return c}else{if(s.isLimit(l)){r.skip(()=>!0);return}if(s.checkChild(c,"$text"))return c}}function Zce(t,e,n){const r=t.position.textNode;if(r){const i=r.data;let s=t.position.offset-r.startOffset;for(;ik(i,s)||e=="character"&&sk(i,s)||n&&J8(i,s);)t.next(),s=t.position.offset-r.startOffset}return t.position}function Jce(t,e){let n=t.position.textNode;for(n||(n=e?t.position.nodeAfter:t.position.nodeBefore);n&&n.is("$text");){const r=t.position.offset-n.startOffset;if(eue(n,r,e))n=e?t.position.nodeAfter:t.position.nodeBefore;else{if(Qce(n.data,r,e))break;t.next()}}return t.position}function Xce(t,e){const n=t.root,r=N._createAt(n,e?"end":0);return e?new O(t,r):new O(r,t)}function Qce(t,e,n){const r=e+(n?0:-1);return qce.includes(t.charAt(r))}function eue(t,e,n){return e===(n?t.offsetSize:0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */let tue=class extends Ue(){constructor(){super(),this.markers=new Tce,this.document=new Sce(this),this.schema=new zle,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,n)=>{n[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck((e,n)=>{if(n.name==="$marker")return!0}),Mle(this),this.document.registerPostFixer(IO),this.on("insertContent",(e,[n,r])=>{e.return=Hce(this,n,r)}),this.on("insertObject",(e,[n,r,i])=>{e.return=jce(this,n,r,i)}),this.on("canEditAt",e=>{const n=!this.document.isReadOnly;e.return=n,n||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Dl,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(n){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(n,this)}}enqueueChange(e,n){try{e?typeof e=="function"?(n=e,e=new Dl):e instanceof Dl||(e=new Dl(e)):e=new Dl,this._pendingChanges.push({batch:e,callback:n}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(r){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(r,this)}}applyOperation(e){e._execute()}insertContent(e,n,r,...i){const s=Nw(n,r);return this.fire("insertContent",[e,s,r,...i])}insertObject(e,n,r,i,...s){const o=Nw(n,r);return this.fire("insertObject",[e,o,i,i,...s])}deleteContent(e,n){Oce(this,e,n)}modifySelection(e,n){Yce(this,e,n)}getSelectedContent(e){return zce(this,e)}hasContent(e,n={}){const r=e instanceof O?e:O._createIn(e);if(r.isCollapsed)return!1;const{ignoreWhitespaces:i=!1,ignoreMarkers:s=!1}=n;if(!s){for(const o of this.markers.getMarkersIntersectingRange(r))if(o.affectsData)return!0}for(const o of r.getItems())if(this.schema.isContent(o))if(o.is("$textProxy"))if(i){if(o.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const n=Nw(e);return this.fire("canEditAt",[n])}createPositionFromPath(e,n,r){return new N(e,n,r)}createPositionAt(e,n){return N._createAt(e,n)}createPositionAfter(e){return N._createAfter(e)}createPositionBefore(e){return N._createBefore(e)}createRange(e,n){return new O(e,n)}createRangeIn(e){return O._createIn(e)}createRangeOn(e){return O._createOn(e)}createSelection(...e){return new fr(...e)}createBatch(e){return new Dl(e)}createOperationFromJSON(e){return mce.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const n=this._pendingChanges[0].batch;this._currentWriter=new Ice(this,n);const r=this._pendingChanges[0].callback(this._currentWriter);e.push(r),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Nw(t,e){if(t)return t instanceof fr||t instanceof Oi?t:t instanceof _l?e||e===0?new fr(t,e):t.is("rootElement")?new fr(t,"in"):new fr(t,"on"):new fr(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nue extends bl{constructor(){super(...arguments),this.domEventType="click"}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j0 extends bl{constructor(){super(...arguments),this.domEventType=["mousedown","mouseup","mouseover","mouseout"]}onDomEvent(e){this.fire(e.type,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G0{constructor(e){this.document=e}createDocumentFragment(e){return new Wa(this.document,e)}createElement(e,n,r){return new Ri(this.document,e,n,r)}createText(e){return new dt(this.document,e)}clone(e,n=!1){return e._clone(n)}appendChild(e,n){return n._appendChild(e)}insertChild(e,n,r){return r._insertChild(e,n)}removeChildren(e,n,r){return r._removeChildren(e,n)}remove(e){const n=e.parent;return n?this.removeChildren(n.getChildIndex(e),1,n):[]}replace(e,n){const r=e.parent;if(r){const i=r.getChildIndex(e);return this.removeChildren(i,1,r),this.insertChild(i,n,r),!0}return!1}unwrapElement(e){const n=e.parent;if(n){const r=n.getChildIndex(e);this.remove(e),this.insertChild(r,e.getChildren(),n)}}rename(e,n){const r=new Ri(this.document,e,n.getAttributes(),n.getChildren());return this.replace(n,r)?r:null}setAttribute(e,n,r){r._setAttribute(e,n)}removeAttribute(e,n){n._removeAttribute(e)}addClass(e,n){n._addClass(e)}removeClass(e,n){n._removeClass(e)}setStyle(e,n,r){hr(e)&&r===void 0?n._setStyle(e):r._setStyle(e,n)}removeStyle(e,n){n._removeStyle(e)}setCustomProperty(e,n,r){r._setCustomProperty(e,n)}removeCustomProperty(e,n){return n._removeCustomProperty(e)}createPositionAt(e,n){return j._createAt(e,n)}createPositionAfter(e){return j._createAfter(e)}createPositionBefore(e){return j._createBefore(e)}createRange(e,n){return new ve(e,n)}createRangeOn(e){return ve._createOn(e)}createRangeIn(e){return ve._createIn(e)}createSelection(...e){return new Ws(...e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const rue=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,iue=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,sue=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,oue=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,aue=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,lue=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,cue=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function uue(t){return t.startsWith("#")?rue.test(t):t.startsWith("rgb")?iue.test(t)||sue.test(t):t.startsWith("hsl")?oue.test(t)||aue.test(t):cue.has(t.toLowerCase())}const due=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function hue(t){return due.test(t)}const fue=/^[+-]?[0-9]*([.][0-9]+)?%$/;function mue(t){return fue.test(t)}const pue=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function gue(t){return pue.includes(t)}const wue=["center","top","bottom","left","right"];function vue(t){return wue.includes(t)}const yue=["fixed","scroll","local"];function bue(t){return yue.includes(t)}const _ue=/^url\(/;function kue(t){return _ue.test(t)}function Eue(t){const e=t.matchAll(lue);return Array.from(e).map(n=>n[0])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Cue(t){t.setNormalizer("background",xue()),t.setNormalizer("background-color",Sue()),t.setReducer("background",Tue()),t.setStyleRelation("background",["background-color"])}function xue(){return t=>{const e={},n=Eue(t);for(const r of n)gue(r)?(e.repeat=e.repeat||[],e.repeat.push(r)):vue(r)?(e.position=e.position||[],e.position.push(r)):bue(r)?e.attachment=r:uue(r)?e.color=r:kue(r)&&(e.image=r);return{path:"background",value:e}}}function Sue(){return t=>({path:"background.color",value:t})}function Tue(){return t=>{const e=[];return e.push(["background-color",t.color]),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Pue{constructor(){this._commands=new Map}add(e,n){this._commands.set(e,n)}get(e){return this._commands.get(e)}execute(e,...n){const r=this.get(e);if(!r)throw new T("commandcollection-command-not-found",this,{commandName:e});return r.execute(...n)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Aue extends wn{constructor(e){super(),this.editor=e}set(e,n,r={}){if(typeof n=="string"){const i=n;n=(s,o)=>{this.editor.execute(i),o()}}super.set(e,n,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dw="contentEditing",CT="common";class Iue{constructor(e){this.keystrokeInfos=new Map,this._editor=e;const n=e.config.get("menuBar.isVisible"),r=e.locale.t;this.addKeystrokeInfoCategory({id:Dw,label:r("Content editing keystrokes"),description:r("These keyboard shortcuts allow for quick access to content editing features.")});const i=[{label:r("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:r("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:r("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:r("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:r("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:r("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];n&&i.push({label:r("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:r("User interface and content navigation keystrokes"),description:r("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:i}]})}addKeystrokeInfoCategory({id:e,label:n,description:r,groups:i}){this.keystrokeInfos.set(e,{id:e,label:n,description:r,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:CT}),i&&i.forEach(s=>{this.addKeystrokeInfoGroup({categoryId:e,...s})})}addKeystrokeInfoGroup({categoryId:e=Dw,id:n,label:r,keystrokes:i}){const s=this.keystrokeInfos.get(e);if(!s)throw new T("accessibility-unknown-keystroke-info-category",this._editor,{groupId:n,categoryId:e});s.groups.set(n,{id:n,label:r,keystrokes:i||[]})}addKeystrokeInfos({categoryId:e=Dw,groupId:n=CT,keystrokes:r}){if(!this.keystrokeInfos.has(e))throw new T("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:r});const i=this.keystrokeInfos.get(e);if(!i.groups.has(n))throw new T("accessibility-unknown-keystroke-info-group",this._editor,{groupId:n,categoryId:e,keystrokes:r});i.groups.get(n).keystrokes.push(...r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Rue extends Ue(){constructor(e={}){super();const n=this.constructor,{translations:r,...i}=n.defaultConfig||{},{translations:s=r,...o}=e,a=e.language||i.language;this._context=e.context||new Q8({language:a,translations:s}),this._context._addEditor(this,!e.context);const l=Array.from(n.builtinPlugins||[]);this.config=new F8(o,i),this.config.define("plugins",l),this.config.define(this._context._getEditorConfig()),this.plugins=new X8(this,l,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Pue,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new tue,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const c=new Uoe;this.data=new uce(this.model,c),this.editing=new Vle(this.model,c),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new hce([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Aue(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Iue(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new T("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new T("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new T("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),r=e.get("removePlugins")||[],i=e.get("extraPlugins")||[],s=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(i),r,s)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(r){/* istanbul ignore next -- @preserve */T.rethrowUnexpectedError(r,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Oue(t){if(!sl(t.updateSourceElement))throw new T("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(Mue(e)&&e.form){let n;const r=e.form,i=()=>t.updateSourceElement();sl(r.submit)&&(n=r.submit,r.submit=()=>{i(),n.apply(r)}),r.addEventListener("submit",i),t.on("destroy",()=>{r.removeEventListener("submit",i),n&&(r.submit=n)})}}function Mue(t){return!!t&&t.tagName.toLowerCase()==="textarea"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ob(t){class e extends t{updateSourceElement(r){if(!this.sourceElement)throw new T("editor-missing-sourceelement",this);const i=this.config.get("updateSourceElementOnDestroy"),s=this.sourceElement instanceof HTMLTextAreaElement;if(!i&&!s){MS(this.sourceElement,"");return}const o=typeof r=="string"?r:this.data.get();MS(this.sourceElement,o)}}return e}ob.updateSourceElement=ob(Object).prototype.updateSourceElement;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hg extends z0{static get pluginName(){return"PendingActions"}init(){this.set("hasAny",!1),this._actions=new Nr({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new T("pendingactions-add-invalid-message",this);const n=new(Ue());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}const Nue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Due='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Lue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',$ue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',Fue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Vue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Bue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',Uue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',zue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',Hue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',Wue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',jue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Gue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',que='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',Yue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',Kue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Zue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Jue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Xue='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Que='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',ede='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',tde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',nde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',rde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ide='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',sde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',ode='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',ade='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',lde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',cde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',ude='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',dde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',hde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',fde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',mde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',gde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',wde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',vde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',yde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',bde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',_de='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',kde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Ede='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Cde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',xde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Sde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',Tde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Pde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ade='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',Ide='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',Rde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',Ode='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',Mde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',Nde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',Dde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',Lde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',$de='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',Fde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Vde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Bde='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Ude='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const pe={bold:yde,cancel:Nue,caption:Due,check:Lue,cog:$ue,colorPalette:Fue,eraser:Vue,history:Bue,image:Gue,imageUpload:que,imageAssetManager:Yue,imageUrl:Kue,lowVision:Uue,textAlternative:zue,loupe:Hue,previousArrow:Wue,nextArrow:jue,importExport:Ede,paragraph:bde,plus:_de,text:kde,alignBottom:Zue,alignMiddle:Jue,alignTop:Xue,alignLeft:Que,alignCenter:ede,alignRight:tde,alignJustify:nde,objectLeft:lde,objectCenter:ide,objectRight:cde,objectFullWidth:ode,objectInline:ade,objectBlockLeft:rde,objectBlockRight:sde,objectSizeFull:ude,objectSizeLarge:dde,objectSizeSmall:hde,objectSizeMedium:fde,pencil:mde,pilcrow:pde,quote:gde,threeVerticalDots:wde,dragIndicator:vde,redo:Cde,undo:xde,bulletedList:Sde,numberedList:Tde,todoList:Pde,codeBlock:Ade,browseFiles:Ide,heading1:Rde,heading2:Ode,heading3:Mde,heading4:Nde,heading5:Dde,heading6:Lde,horizontalLine:$de,html:Fde,indent:Vde,outdent:Bde,table:Ude};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Dr extends Nr{constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(n,r,i)=>{this._renderViewIntoCollectionParent(r,i)}),this.on("remove",(n,r)=>{r.element&&this._parentElement&&r.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const n of this)this._renderViewIntoCollectionParent(n)}delegate(...e){if(!e.length||!zde(e))throw new T("ui-viewcollection-delegate-wrong-events",this);return{to:n=>{for(const r of this)for(const i of e)r.delegate(i).to(n);this.on("add",(r,i)=>{for(const s of e)i.delegate(s).to(n)}),this.on("remove",(r,i)=>{for(const s of e)i.stopDelegating(s,n)})}}}_renderViewIntoCollectionParent(e,n){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[n])}remove(e){return super.remove(e)}}function zde(t){return t.every(e=>typeof e=="string")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Hde="http://www.w3.org/1999/xhtml";class _r extends qe(){constructor(e){super(),Object.assign(this,ST(xT(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=AT(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new T("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(n){if(n.children)for(const r of n.children)fg(r)?yield r:wk(r)&&(yield*e(r))}yield*e(this)}static bind(e,n){return{to(r,i){return new Wde({eventNameOrFunction:r,attribute:r,observable:e,emitter:n,callback:i})},if(r,i,s){return new jO({observable:e,emitter:n,attribute:r,valueIfTrue:i,callback:s})}}}static extend(e,n){if(e._isRendered)throw new T("template-extend-render",[this,e]);KO(e,ST(xT(n)))}_renderNode(e){let n;if(e.node?n=this.tag&&this.text:n=this.tag?this.text:!this.text,n)throw new T("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let n=e.node;return n||(n=e.node=document.createElementNS(this.ns||Hde,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),n}_renderText(e){let n=e.node;return n?e.revertData.text=n.textContent:n=e.node=document.createTextNode(""),qm(this.text)?this._bindToObservable({schema:this.text,updater:Gde(n),data:e}):n.textContent=this.text.join(""),n}_renderAttributes(e){if(!this.attributes)return;const n=e.node,r=e.revertData;for(const i in this.attributes){const s=n.getAttribute(i),o=this.attributes[i];r&&(r.attributes[i]=s);const a=PT(o)?o[0].ns:null;if(qm(o)){const l=PT(o)?o[0].value:o;r&&IT(i)&&l.unshift(s),this._bindToObservable({schema:l,updater:qde(n,i,a),data:e})}else if(i=="style"&&typeof o[0]!="string")this._renderStyleAttribute(o[0],e);else{r&&s&&IT(i)&&o.unshift(s);const l=o.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(YO,"");jc(l)||n.setAttributeNS(a,i,l)}}}_renderStyleAttribute(e,n){const r=n.node;for(const i in e){const s=e[i];qm(s)?this._bindToObservable({schema:[s],updater:Yde(r,i),data:n}):r.style[i]=s}}_renderElementChildren(e){const n=e.node,r=e.intoFragment?document.createDocumentFragment():n,i=e.isApplying;let s=0;for(const o of this.children)if(vk(o)){if(!i){o.setParent(n);for(const a of o)r.appendChild(a.element)}}else if(fg(o))i||(o.isRendered||o.render(),r.appendChild(o.element));else if(ca(o))r.appendChild(o);else if(i){const a=e.revertData,l=AT();a.children.push(l),o._renderNode({intoFragment:!1,node:r.childNodes[s++],isApplying:!0,revertData:l})}else r.appendChild(o.render());e.intoFragment&&n.appendChild(r)}_setUpListeners(e){if(this.eventListeners)for(const n in this.eventListeners){const r=this.eventListeners[n].map(i=>{const[s,o]=n.split("@");return i.activateDomEventListener(s,o,e)});e.revertData&&e.revertData.bindings.push(r)}}_bindToObservable({schema:e,updater:n,data:r}){const i=r.revertData;GO(e,n,r);const s=e.filter(o=>!jc(o)).filter(o=>o.observable).map(o=>o.activateAttributeListener(e,n,r));i&&i.bindings.push(s)}_revertTemplateFromNode(e,n){for(const i of n.bindings)for(const s of i)s();if(n.text){e.textContent=n.text;return}const r=e;for(const i in n.attributes){const s=n.attributes[i];s===null?r.removeAttribute(i):r.setAttribute(i,s)}for(let i=0;i<n.children.length;++i)this._revertTemplateFromNode(r.childNodes[i],n.children[i])}}class rf{constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const n=this.observable[this.attribute];return this.callback?this.callback(n,e):n}activateAttributeListener(e,n,r){const i=()=>GO(e,n,r);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,i),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,i)}}}class Wde extends rf{constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,n,r){const i=(s,o)=>{(!n||o.target.matches(n))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(o):this.observable.fire(this.eventNameOrFunction,o))};return this.emitter.listenTo(r.node,e,i),()=>{this.emitter.stopListening(r.node,e,i)}}}class jO extends rf{constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const n=super.getValue(e);return jc(n)?!1:this.valueIfTrue||!0}}function qm(t){return t?(t.value&&(t=t.value),Array.isArray(t)?t.some(qm):t instanceof rf):!1}function jde(t,e){return t.map(n=>n instanceof rf?n.getValue(e):n)}function GO(t,e,{node:n}){const r=jde(t,n);let i;t.length==1&&t[0]instanceof jO?i=r[0]:i=r.reduce(YO,""),jc(i)?e.remove():e.set(i)}function Gde(t){return{set(e){t.textContent=e},remove(){t.textContent=""}}}function qde(t,e,n){return{set(r){t.setAttributeNS(n,e,r)},remove(){t.removeAttributeNS(n,e)}}}function Yde(t,e){return{set(n){t.style[e]=n},remove(){t.style[e]=null}}}function xT(t){return X2(t,n=>{if(n&&(n instanceof rf||wk(n)||fg(n)||vk(n)))return n})}function ST(t){if(typeof t=="string"?t=Jde(t):t.text&&Xde(t),t.on&&(t.eventListeners=Zde(t.on),delete t.on),!t.text){t.attributes&&Kde(t.attributes);const e=[];if(t.children)if(vk(t.children))e.push(t.children);else for(const n of t.children)wk(n)||fg(n)||ca(n)?e.push(n):e.push(new _r(n));t.children=e}return t}function Kde(t){for(const e in t)t[e].value&&(t[e].value=st(t[e].value)),qO(t,e)}function Zde(t){for(const e in t)qO(t,e);return t}function Jde(t){return{text:[t]}}function Xde(t){t.text=st(t.text)}function qO(t,e){t[e]=st(t[e])}function YO(t,e){return jc(e)?t:jc(t)?e:`${t} ${e}`}function TT(t,e){for(const n in e)t[n]?t[n].push(...e[n]):t[n]=e[n]}function KO(t,e){if(e.attributes&&(t.attributes||(t.attributes={}),TT(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),TT(t.eventListeners,e.eventListeners)),e.text&&t.text.push(...e.text),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new T("ui-template-extend-children-mismatch",t);let n=0;for(const r of e.children)KO(t.children[n++],r)}}function jc(t){return!t&&t!==0}function fg(t){return t instanceof ee}function wk(t){return t instanceof _r}function vk(t){return t instanceof Dr}function PT(t){return ft(t[0])&&t[0].ns}function AT(){return{children:[],bindings:[],attributes:{}}}function IT(t){return t=="class"||t=="style"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ee extends Mr(Ue()){constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Nr,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(n,r)=>{r.locale=e,r.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=_r.bind(this,this)}createCollection(e){const n=new Dr(e);return this._viewCollections.add(n),n}registerChild(e){Tr(e)||(e=[e]);for(const n of e)this._unboundChildren.add(n)}deregisterChild(e){Tr(e)||(e=[e]);for(const n of e)this._unboundChildren.remove(n)}setTemplate(e){this.template=new _r(e)}extendTemplate(e){_r.extend(this.template,e)}render(){if(this.isRendered)throw new T("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class sf extends ee{constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${ti()}`;const n=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:n.to("for")},children:[{text:n.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qde extends ee{constructor(e,n){super(e);const r=e.t,i=new sf;i.text=r("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[cr(document,"p",{},r("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(n.values())),i]})}focus(){this.element.focus()}_createCategories(e){return e.map(n=>{const r=[cr(document,"h3",{},n.label),...Array.from(n.groups.values()).map(i=>this._createGroup(i)).flat()];return n.description&&r.splice(1,0,cr(document,"p",{},n.description)),cr(document,"section",{},r)})}_createGroup(e){const n=e.keystrokes.sort((i,s)=>i.label.localeCompare(s.label)).map(i=>this._createGroupRow(i)).flat(),r=[cr(document,"dl",{},n)];return e.label&&r.unshift(cr(document,"h4",{},e.label)),r}_createGroupRow(e){const n=this.locale.t,r=cr(document,"dt"),i=cr(document,"dd"),s=the(e.keystroke),o=[];for(const a of s)o.push(a.map(ehe).join(""));return r.innerHTML=e.label,i.innerHTML=o.join(", ")+(e.mayRequireFn&&me.isMac?` ${n("(may require <kbd>Fn</kbd>)")}`:""),[r,i]}}function ehe(t){return cg(t).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function the(t){return typeof t=="string"?[[t]]:typeof t[0]=="string"?[t]:t}const RT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nhe extends L{constructor(){super(...arguments),this.contentView=null}static get requires(){return[Ts]}static get pluginName(){return"AccessibilityHelp"}init(){const e=this.editor,n=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const r=this._createButton(Se);return r.set({tooltip:!0,withText:!1,label:n("Accessibility help")}),r}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const r=this._createButton(rr);return r.label=n("Accessibility"),r}),e.keystrokes.set("Alt+0",(r,i)=>{this._showDialog(),i()}),this._setupRootLabels()}_createButton(e){const r=this.editor.locale,i=new e(r);return i.set({keystroke:"Alt+0",icon:RT}),i.on("execute",()=>this._showDialog()),i}_setupRootLabels(){const e=this.editor,n=e.editing.view,r=e.t;e.ui.on("ready",()=>{n.change(s=>{for(const o of n.document.roots)i(s,o)}),e.on("addRoot",(s,o)=>{const a=e.editing.view.document.getRoot(o.rootName);n.change(l=>i(l,a))},{priority:"low"})});function i(s,o){const l=`${o.getAttribute("aria-label")}. ${r("Press %0 for help.",[cg("Alt+0")])}`;s.setAttribute("aria-label",l,o)}}_showDialog(){const e=this.editor,n=e.plugins.get("Dialog"),r=e.locale.t;this.contentView||(this.contentView=new Qde(e.locale,e.accessibility.keystrokeInfos)),n.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:r("Accessibility help"),icon:RT,hasCloseButton:!0,content:this.contentView})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rhe extends Dr{constructor(e,n=[]){super(n),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new _r({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=cr(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();const e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fs extends ee{constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",n=>!n),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const n=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=n.getAttribute("viewBox");r&&(this.viewBox=r);for(const{name:i,value:s}of Array.from(n.attributes))fs.presentationalAttributeNames.includes(i)&&this.element.setAttribute(i,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;n.childNodes.length>0;)this.element.appendChild(n.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}fs.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ihe extends ee{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Se extends ee{constructor(e,n=new ihe){super(e),this._focusDelayed=null;const r=this.bindTemplate,i=ti();this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${i}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(n),this.iconView=new fs,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const s={tag:"button",attributes:{class:["ck","ck-button",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o),r.if("isVisible","ck-hidden",o=>!o),r.to("isOn",o=>o?"ck-on":"ck-off"),r.if("withText","ck-button_with-text"),r.if("withKeystroke","ck-button_with-keystroke")],role:r.to("role"),type:r.to("type",o=>o||"button"),tabindex:r.to("tabindex"),"aria-checked":r.to("ariaChecked"),"aria-label":r.to("ariaLabel"),"aria-labelledby":r.to("ariaLabelledBy"),"aria-disabled":r.if("isEnabled",!0,o=>!o),"aria-pressed":r.to("isOn",o=>this.isToggleable?String(!!o):!1),"data-cke-tooltip-text":r.to("_tooltipString"),"data-cke-tooltip-position":r.to("tooltipPosition")},children:this.children,on:{click:r.to(o=>{this.isEnabled?this.fire("execute"):o.preventDefault()})}};me.isSafari&&(this._focusDelayed||(this._focusDelayed=rk(()=>this.focus(),0)),s.on.mousedown=r.to(()=>{this._focusDelayed()}),s.on.mouseup=r.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(s)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new ee;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",n=>cg(n))}]}),e}_getTooltipString(e,n,r){return e?typeof e=="string"?e:(r&&(r=cg(r)),e instanceof Function?e(n,r):`${n}${r?` (${r})`:""}`):""}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q0 extends Se{constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new ee;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ZO extends Se{constructor(e){super(e),this.buttonView=this,this._fileInputView=new she(e),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}class she extends ee{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:n.to("acceptedType"),multiple:n.to("allowMultipleFiles")},on:{change:n.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}const Y0='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JO extends ee{constructor(e,n){super(e);const r=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),n&&this.children.addMany(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",r.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:r.if("isCollapsed","hidden"),"aria-labelledby":r.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Se(this.locale),n=e.bindTemplate;return e.set({withText:!0,icon:Y0}),e.extendTemplate({attributes:{"aria-expanded":n.to("isOn",r=>String(r))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",r=>!r),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ohe(t,e){const n=t.t,r={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return e.map(i=>{const s=r[i.label];return s&&s!=i.label&&(i.label=s),i})}function ahe(t){return t.map(lhe).filter(e=>!!e)}function lhe(t){return typeof t=="string"?{model:t,label:t,hasBorder:!1,view:{name:"span",styles:{color:t}}}:{model:t.color,label:t.label||t.color,hasBorder:t.hasBorder===void 0?!1:t.hasBorder,view:{name:"span",styles:{color:`${t.color}`}}}}const che='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XO extends Se{constructor(e){super(e);const n=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=che,this.extendTemplate({attributes:{style:{backgroundColor:n.to("color")},class:["ck","ck-color-grid__tile",n.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OT extends ee{constructor(e,n){super(e);const r=n&&n.colorDefinitions?n.colorDefinitions:[];this.columns=n&&n.columns?n.columns:5;const i={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new jt,this.keystrokes=new wn,this.items.on("add",(s,o)=>{o.isOn=o.color===this.selectedColor}),r.forEach(s=>{const o=new XO;o.set({color:s.color,label:s.label,tooltip:!0,hasBorder:s.options.hasBorder}),o.on("execute",()=>{this.fire("execute",{value:s.color,hasBorder:s.options.hasBorder,label:s.label})}),this.items.add(o)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:i}}),this.on("change:selectedColor",(s,o,a)=>{for(const l of this.items)l.isOn=l.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,n)=>{this.focusTracker.add(n.element)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),T8({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}var QO={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const MT=Pg(QO);var NT={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function DT(t){var e,n=[],r=1,i;if(typeof t=="string")if(MT[t])n=MT[t].slice(),i="rgb";else if(t==="transparent")r=0,i="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var s=t.slice(1),o=s.length,a=o<=4;r=1,a?(n=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(r=parseInt(s[3]+s[3],16)/255)):(n=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(r=parseInt(s[6]+s[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),i="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var l=e[1],c=l==="rgb",s=l.replace(/a$/,"");i=s;var o=s==="cmyk"?4:s==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,f){if(/%$/.test(h))return f===o?parseFloat(h)/100:s==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(s[f]==="h"){if(/deg$/.test(h))return parseFloat(h);if(NT[h]!==void 0)return NT[h]}return parseFloat(h)}),l===s&&n.push(1),r=c||n[o]===void 0?1:n[o],n=n.slice(0,o)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),i=t.match(/([a-z])/ig).join("").toLowerCase());else isNaN(t)?Array.isArray(t)||t.length?(n=[t[0],t[1],t[2]],i="rgb",r=t.length===4?t[3]:1):t instanceof Object&&(t.r!=null||t.red!=null||t.R!=null?(i="rgb",n=[t.r||t.red||t.R||0,t.g||t.green||t.G||0,t.b||t.blue||t.B||0]):(i="hsl",n=[t.h||t.hue||t.H||0,t.s||t.saturation||t.S||0,t.l||t.lightness||t.L||t.b||t.brightness]),r=t.a||t.alpha||t.opacity||1,t.opacity!=null&&(r/=100)):(i="rgb",n=[t>>>16,(t&65280)>>>8,t&255]);return{space:i,values:n,alpha:r}}const vh=QO,e9={};for(const t of Object.keys(vh))e9[vh[t]]=t;const te={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var t9=te;for(const t of Object.keys(te)){if(!("channels"in te[t]))throw new Error("missing channels property: "+t);if(!("labels"in te[t]))throw new Error("missing channel labels property: "+t);if(te[t].labels.length!==te[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=te[t];delete te[t].channels,delete te[t].labels,Object.defineProperty(te[t],"channels",{value:e}),Object.defineProperty(te[t],"labels",{value:n})}te.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=s-i;let a,l;s===i?a=0:e===s?a=(n-r)/o:n===s?a=2+(r-e)/o:r===s&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360);const c=(i+s)/2;return s===i?l=0:c<=.5?l=o/(s+i):l=o/(2-s-i),[a,l*100,c*100]};te.rgb.hsv=function(t){let e,n,r,i,s;const o=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(o,a,l),u=c-Math.min(o,a,l),d=function(h){return(c-h)/6/u+1/2};return u===0?(i=0,s=0):(s=u/c,e=d(o),n=d(a),r=d(l),o===c?i=r-n:a===c?i=1/3+e-r:l===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};te.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=te.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,s*100,r*100]};te.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r),s=(1-e-i)/(1-i)||0,o=(1-n-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[s*100,o*100,a*100,i*100]};function uhe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}te.rgb.keyword=function(t){const e=e9[t];if(e)return e;let n=1/0,r;for(const i of Object.keys(vh)){const s=vh[i],o=uhe(t,s);o<n&&(n=o,r=i)}return r};te.keyword.rgb=function(t){return vh[t]};te.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=e*.4124+n*.3576+r*.1805,s=e*.2126+n*.7152+r*.0722,o=e*.0193+n*.1192+r*.9505;return[i*100,s*100,o*100]};te.rgb.lab=function(t){const e=te.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const s=116*r-16,o=500*(n-r),a=200*(r-i);return[s,o,a]};te.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,s,o;if(n===0)return o=r*255,[o,o,o];r<.5?i=r*(1+n):i=r+n-r*n;const a=2*r-i,l=[0,0,0];for(let c=0;c<3;c++)s=e+1/3*-(c-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,l[c]=o*255;return l};te.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const s=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=s<=1?s:2-s;const o=(r+n)/2,a=r===0?2*i/(s+i):2*n/(r+n);return[e,a*100,o*100]};te.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-n),a=255*r*(1-n*s),l=255*r*(1-n*(1-s));switch(r*=255,i){case 0:return[r,l,o];case 1:return[a,r,o];case 2:return[o,r,l];case 3:return[o,a,r];case 4:return[l,o,r];case 5:return[r,o,a]}};te.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let s,o;o=(2-n)*r;const a=(2-n)*i;return s=n*i,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};te.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let s;i>1&&(n/=i,r/=i);const o=Math.floor(6*e),a=1-r;s=6*e-o,o&1&&(s=1-s);const l=n+s*(a-n);let c,u,d;switch(o){default:case 6:case 0:c=a,u=l,d=n;break;case 1:c=l,u=a,d=n;break;case 2:c=n,u=a,d=l;break;case 3:c=n,u=l,d=a;break;case 4:c=l,u=n,d=a;break;case 5:c=a,u=n,d=l;break}return[c*255,u*255,d*255]};te.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100,s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,n*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[s*255,o*255,a*255]};te.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,s,o;return i=e*3.2406+n*-1.5372+r*-.4986,s=e*-.9689+n*1.8758+r*.0415,o=e*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};te.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,s=500*(e-n),o=200*(n-r);return[i,s,o]};te.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let i,s,o;s=(e+16)/116,i=n/500+s,o=s-r/200;const a=s**3,l=i**3,c=o**3;return s=a>.008856?a:(s-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};te.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const o=Math.sqrt(n*n+r*r);return[e,o,i]};te.lch.lab=function(t){const e=t[0],n=t[1],i=t[2]/360*2*Math.PI,s=n*Math.cos(i),o=n*Math.sin(i);return[e,s,o]};te.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let s=e===null?te.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return s===2&&(o+=60),o};te.hsv.ansi16=function(t){return te.rgb.ansi16(te.hsv.rgb(t),t[2])};te.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};te.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(~~(t>50)+1)*.5,r=(e&1)*n*255,i=(e>>1&1)*n*255,s=(e>>2&1)*n*255;return[r,i,s]};te.ansi256.rgb=function(t){if(t>=232){const s=(t-232)*10+8;return[s,s,s]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,i=e%6/5*255;return[n,r,i]};te.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};te.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16),i=r>>16&255,s=r>>8&255,o=r&255;return[i,s,o]};te.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),s=Math.min(Math.min(e,n),r),o=i-s;let a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:i===e?l=(n-r)/o%6:i===n?l=2+(r-e)/o:l=4+(e-n)/o,l/=6,l%=1,[l*360,o*100,a*100]};te.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],r*100,i*100]};te.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],r*100,i*100]};te.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],s=e%1*6,o=s%1,a=1-o;let l=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return l=(1-n)*r,[(n*i[0]+l)*255,(n*i[1]+l)*255,(n*i[2]+l)*255]};te.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let i=0;return r>0&&(i=e/r),[t[0],i*100,r*100]};te.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let i=0;return r>0&&r<.5?i=e/(2*r):r>=.5&&r<1&&(i=e/(2*(1-r))),[t[0],i*100,r*100]};te.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};te.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,i=r-e;let s=0;return i<1&&(s=(r-i)/(1-i)),[t[0],i*100,s*100]};te.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};te.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};te.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};te.gray.hsl=function(t){return[0,0,t[0]]};te.gray.hsv=te.gray.hsl;te.gray.hwb=function(t){return[0,100,t[0]]};te.gray.cmyk=function(t){return[0,0,0,t[0]]};te.gray.lab=function(t){return[t[0],0,0]};te.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r};te.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const mg=t9;function dhe(){const t={},e=Object.keys(mg);for(let n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function hhe(t){const e=dhe(),n=[t];for(e[t].distance=0;n.length;){const r=n.pop(),i=Object.keys(mg[r]);for(let s=i.length,o=0;o<s;o++){const a=i[o],l=e[a];l.distance===-1&&(l.distance=e[r].distance+1,l.parent=r,n.unshift(a))}}return e}function fhe(t,e){return function(n){return e(t(n))}}function mhe(t,e){const n=[e[t].parent,t];let r=mg[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)n.unshift(e[i].parent),r=fhe(mg[e[i].parent][i],r),i=e[i].parent;return r.conversion=n,r}var phe=function(t){const e=hhe(t),n={},r=Object.keys(e);for(let i=r.length,s=0;s<i;s++){const o=r[s];e[o].parent!==null&&(n[o]=mhe(o,e))}return n};const ab=t9,ghe=phe,Wl={},whe=Object.keys(ab);function vhe(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function yhe(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=t(n);if(typeof i=="object")for(let s=i.length,o=0;o<s;o++)i[o]=Math.round(i[o]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}whe.forEach(t=>{Wl[t]={},Object.defineProperty(Wl[t],"channels",{value:ab[t].channels}),Object.defineProperty(Wl[t],"labels",{value:ab[t].labels});const e=ghe(t);Object.keys(e).forEach(r=>{const i=e[r];Wl[t][r]=yhe(i),Wl[t][r].raw=vhe(i)})});var n9=Wl;const bhe=Pg(n9),r9=E3({__proto__:null,default:bhe},[n9]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function i9(t,e){if(!t)return"";const n=s9(t);if(!n)return"";if(n.space===e)return t;if(!Che(n))return"";const i=r9[n.space][e];if(!i)return"";const s=i(n.space==="hex"?n.hexValue:n.values);return Ehe(s,e)}function _he(t){if(!t)return"";const e=s9(t);return e?e.space==="hex"?e.hexValue:i9(t,"hex"):"#000"}function khe(t,e){customElements.get(t)===void 0&&customElements.define(t,e)}function Ehe(t,e){switch(e){case"hex":return`#${t}`;case"rgb":return`rgb( ${t[0]}, ${t[1]}, ${t[2]} )`;case"hsl":return`hsl( ${t[0]}, ${t[1]}%, ${t[2]}% )`;case"hwb":return`hwb( ${t[0]}, ${t[1]}, ${t[2]} )`;case"lab":return`lab( ${t[0]}% ${t[1]} ${t[2]} )`;case"lch":return`lch( ${t[0]}% ${t[1]} ${t[2]} )`;default:return""}}function s9(t){if(t.startsWith("#")){const n=DT(t);return{space:"hex",values:n.values,hexValue:t,alpha:n.alpha}}const e=DT(t);return e.space?e:null}function Che(t){return Object.keys(r9).includes(t.space)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class of extends ee{constructor(e,n){super(e);const r=`ck-labeled-field-view-${ti()}`,i=`ck-labeled-field-view-status-${ti()}`;this.fieldView=n(this,r,i),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(r),this.statusView=this._createStatusView(i),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(o,a)=>o||a);const s=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",s.to("class"),s.if("isEnabled","ck-disabled",o=>!o),s.if("isEmpty","ck-labeled-field-view_empty"),s.if("isFocused","ck-labeled-field-view_focused"),s.if("placeholder","ck-labeled-field-view_placeholder"),s.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const n=new sf(this.locale);return n.for=e,n.bind("text").to(this,"label"),n}_createStatusView(e){const n=new ee(this.locale),r=this.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",r.if("errorText","ck-labeled-field-view__status_error"),r.if("_statusText","ck-hidden",i=>!i)],id:e,role:r.if("errorText","alert")},children:[{text:r.to("_statusText")}]}),n}focus(e){this.fieldView.focus(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xhe extends ee{constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new jt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),tabindex:n.to("tabIndex"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById"),"aria-label":n.to("ariaLabel")},on:{input:n.to((...r)=>{this.fire("input",...r),this._updateIsEmpty()}),change:n.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,n,r)=>{this._setDomElementValue(r),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=She(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function She(t){return!t.value}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class o9 extends xhe{constructor(e){super(e),this.set("inputMode","text");const n=this.bindTemplate;this.extendTemplate({attributes:{inputmode:n.to("inputMode")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class The extends o9{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Phe extends o9{constructor(e,{min:n,max:r,step:i}={}){super(e);const s=this.bindTemplate;this.set("min",n),this.set("max",r),this.set("step",i),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:s.to("min"),max:s.to("max"),step:s.to("step")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ahe extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",r=>`ck-dropdown__panel_${r}`),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:n.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():Ie("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gc extends ee{constructor(e,n,r){super(e);const i=this.bindTemplate;this.buttonView=n,this.panelView=r,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new wn,this.focusTracker=new jt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s)],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[n,r]}),n.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(n,r,i)=>{if(i)if(this.panelPosition==="auto"){const s=Gc._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(n,r)=>{this.isOpen&&(this.isOpen=!1,r())};this.keystrokes.set("arrowdown",(n,r)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,r())}),this.keystrokes.set("arrowright",(n,r)=>{this.isOpen&&r()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:n,southEast:r,southWest:i,northEast:s,northWest:o,southMiddleEast:a,southMiddleWest:l,northMiddleEast:c,northMiddleWest:u}=Gc.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[r,i,a,l,e,s,o,c,u,n]:[i,r,l,a,e,o,s,u,c,n]}}Gc.defaultPanelPositions={south:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),southMiddleEast:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}),southMiddleWest:(t,e)=>({top:t.bottom,left:t.left-(e.width-t.width)*3/4,name:"smw"}),north:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),northMiddleEast:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}),northMiddleWest:(t,e)=>({top:t.top-e.height,left:t.left-(e.width-t.width)*3/4,name:"nmw"})};Gc._getOptimalPosition=U0;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ihe extends Se{constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",n=>String(n))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new fs;return e.content=Y0,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lr extends qe(){constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const n in e.actions){let r=e.actions[n];typeof r=="string"&&(r=[r]);for(const i of r)e.keystrokeHandler.set(i,(s,o)=>{this[n](),o()})}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(Lw)||null}get last(){return this.focusables.filter(Lw).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((n,r)=>{const i=n.element===this.focusTracker.focusedElement;return i&&(e=r),i}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}_focus(e,n){e&&this.focusTracker.focusedElement!==e.element&&e.focus(n)}_getDomFocusableItem(e){const n=this.focusables.length;if(!n)return null;const r=this.current;if(r===null)return this[e===1?"first":"last"];let i=this.focusables.get(r),s=(r+n+e)%n;do{const o=this.focusables.get(s);if(Lw(o)){i=o;break}s=(s+n+e)%n}while(s!==r);return i}}function Lw(t){return af(t)&&cl(t.element)}function af(t){return"focus"in t&&typeof t.focus=="function"}function Rhe(t){return af(t)&&"focusCycler"in t&&t.focusCycler instanceof Lr}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class a9 extends ee{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ohe extends ee{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Mhe(t){return t.bindTemplate.to(e=>{e.target===t.element&&e.preventDefault()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function l9(t){if(Array.isArray(t))return{items:t,removeItems:[]};const e={items:[],removeItems:[]};return t?{...e,...t}:e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{threeVerticalDots:c9}=pe,Nhe={alignLeft:pe.alignLeft,bold:pe.bold,importExport:pe.importExport,paragraph:pe.paragraph,plus:pe.plus,text:pe.text,threeVerticalDots:pe.threeVerticalDots,pilcrow:pe.pilcrow,dragIndicator:pe.dragIndicator};class yk extends ee{constructor(e,n){super(e);const r=this.bindTemplate,i=this.t;this.options=n||{},this.set("ariaLabel",i("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new jt,this.keystrokes=new wn,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new Dhe(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const s=e.uiLanguageDirection==="rtl";this._focusCycler=new Lr({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[s?"arrowright":"arrowleft","arrowup"],focusNext:[s?"arrowleft":"arrowright","arrowdown"]}});const o=["ck","ck-toolbar",r.to("class"),r.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:"toolbar","aria-label":r.to("ariaLabel"),style:{maxWidth:r.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Mhe(this)}}),this._behavior=this.options.shouldGroupWhenFull?new $he(this):new Lhe(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,n)=>{this.focusTracker.add(n.element)}),this.items.on("remove",(e,n)=>{this.focusTracker.remove(n.element)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,n,r){this.items.addMany(this._buildItemsFromConfig(e,n,r))}_buildItemsFromConfig(e,n,r){const i=l9(e),s=r||i.removeItems;return this._cleanItemsConfiguration(i.items,n,s).map(a=>ft(a)?this._createNestedToolbarDropdown(a,n,s):a==="|"?new a9:a==="-"?new Ohe:n.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,n,r){const i=e.filter((s,o,a)=>s==="|"?!0:r.indexOf(s)!==-1?!1:s==="-"?this.options.shouldGroupWhenFull?(Ie("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!ft(s)&&!n.has(s)?(Ie("toolbarview-item-unavailable",{item:s}),!1):!0);return this._cleanSeparatorsAndLineBreaks(i)}_cleanSeparatorsAndLineBreaks(e){const n=o=>o!=="-"&&o!=="|",r=e.length,i=e.findIndex(n);if(i===-1)return[];const s=r-e.slice().reverse().findIndex(n);return e.slice(i,s).filter((o,a,l)=>n(o)?!0:!(a>0&&l[a-1]===o))}_createNestedToolbarDropdown(e,n,r){let{label:i,icon:s,items:o,tooltip:a=!0,withText:l=!1}=e;if(o=this._cleanItemsConfiguration(o,n,r),!o.length)return null;const c=this.locale,u=ho(c);return i||Ie("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:i,tooltip:a,withText:!!l}),s!==!1?u.buttonView.icon=Nhe[s]||s||c9:u.buttonView.withText=!0,Ek(u,()=>u.toolbarView._buildItemsFromConfig(o,n,r)),u}}class Dhe extends ee{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class Lhe{constructor(e){const n=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(r=>r),e.focusables.bindTo(e.items).using(r=>af(r)?r:null),e.extendTemplate({attributes:{class:[n.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class $he{constructor(e){this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(n=>n),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(n,r)=>{const i=r.index,s=Array.from(r.added);for(const o of r.removed)i>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=i;o<i+s.length;o++){const a=s[o-i];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!cl(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let n;for(;this._areItemsOverflowing;)this._groupLastItem(),n=!0;if(!n&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,n=this.viewLocale.uiLanguageDirection,r=new ge(e.lastChild),i=new ge(e);if(!this.cachedPadding){const s=Q.window.getComputedStyle(e),o=n==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(s[o])}return n==="ltr"?r.right>i.right-this.cachedPadding:r.left<i.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new tf(this.viewElement,n=>{(!e||e!==n.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=n.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new a9),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,n=e.t,r=ho(e);return r.class="ck-toolbar__grouped-dropdown",r.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",Ek(r,this.groupedItems),r.buttonView.set({label:n("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:c9}),r}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{af(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class qc extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",r=>!r)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bk extends ee{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ym extends ee{constructor(e,n=new sf){super(e);const r=this.bindTemplate,i=new _k(e);this.set({label:"",isVisible:!0}),this.labelView=n,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,i]),i.set({role:"group",ariaLabelledBy:n.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),this.items=i.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",r.if("isVisible","ck-hidden",s=>!s)]},children:this.children})}focus(){if(this.items){const e=this.items.find(n=>!(n instanceof bk));e&&e.focus()}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _k extends ee{constructor(e){super(e),this._listItemGroupToChangeListeners=new WeakMap;const n=this.bindTemplate;this.focusables=new Dr,this.items=this.createCollection(),this.focusTracker=new jt,this.keystrokes=new wn,this._focusCycler=new Lr({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof Ym?this._registerFocusableItemsGroup(e):e instanceof qc&&this._registerFocusableListItem(e);this.items.on("change",(e,n)=>{for(const r of n.removed)r instanceof Ym?this._deregisterFocusableItemsGroup(r):r instanceof qc&&this._deregisterFocusableListItem(r);for(const r of Array.from(n.added).reverse())r instanceof Ym?this._registerFocusableItemsGroup(r,n.index):this._registerFocusableListItem(r,n.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,n){this.focusTracker.add(e.element),this.focusables.add(e,n)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(n,r)=>{for(const i of r.removed)this._deregisterFocusableListItem(i);for(const i of Array.from(r.added).reverse())this._registerFocusableListItem(i,this.items.getIndex(e)+r.index)}}_registerFocusableItemsGroup(e,n){Array.from(e.items).forEach((i,s)=>{const o=typeof n<"u"?n+s:void 0;this._registerFocusableListItem(i,o)});const r=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,r),e.items.on("change",r)}_deregisterFocusableItemsGroup(e){for(const n of e.items)this._deregisterFocusableListItem(n);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kk extends ee{constructor(e,n){super(e);const r=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(n),this.arrowView=this._createArrowView(),this.keystrokes=new wn,this.focusTracker=new jt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",r.to("class"),r.if("isVisible","ck-hidden",i=>!i),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,n)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),n())}),this.keystrokes.set("arrowleft",(e,n)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),n())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const n=e||new Se;return e||n.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),n.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),n.delegate("execute").to(this),n}_createArrowView(){const e=new Se,n=e.bindTemplate;return e.icon=Y0,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":n.to("isOn"),"aria-haspopup":!0,"aria-expanded":n.to("isOn",r=>String(r))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function ho(t,e=Ihe){const n=typeof e=="function"?new e(t):e,r=new Ahe(t),i=new Gc(t,n,r);return n.bind("isEnabled").to(i),n instanceof kk?n.arrowView.bind("isOn").to(i,"isOpen"):n.bind("isOn").to(i,"isOpen"),Fhe(i),i}function Ek(t,e,n={}){t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.isOpen?LT(t,e,n):t.once("change:isOpen",()=>LT(t,e,n),{priority:"highest"}),n.enableActiveItemFocusOnDropdownOpen&&K0(t,()=>t.toolbarView.items.find(r=>r.isOn))}function LT(t,e,n){const r=t.locale,i=r.t,s=t.toolbarView=new yk(r),o=typeof e=="function"?e():e;s.ariaLabel=n.ariaLabel||i("Dropdown toolbar"),n.maxWidth&&(s.maxWidth=n.maxWidth),n.class&&(s.class=n.class),n.isCompact&&(s.isCompact=n.isCompact),n.isVertical&&(s.isVertical=!0),o instanceof Dr?s.items.bindTo(o).using(a=>a):s.items.addMany(o),t.panelView.children.add(s),s.items.delegate("execute").to(t)}function Ck(t,e,n={}){t.isOpen?$T(t,e,n):t.once("change:isOpen",()=>$T(t,e,n),{priority:"highest"}),K0(t,()=>t.listView.items.find(r=>r instanceof qc?r.children.first.isOn:!1))}function $T(t,e,n){const r=t.locale,i=t.listView=new _k(r),s=typeof e=="function"?e():e;i.ariaLabel=n.ariaLabel,i.role=n.role,u9(t,i.items,s,r),t.panelView.children.add(i),i.items.delegate("execute").to(t)}function K0(t,e){t.on("change:isOpen",()=>{if(!t.isOpen)return;const n=e();n&&(typeof n.focus=="function"?n.focus():Ie("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))},{priority:ea.low-10})}function Fhe(t){Vhe(t),Bhe(t),Uhe(t),zhe(t),Hhe(t),Whe(t)}function Vhe(t){t.on("render",()=>{F0({emitter:t,activator:()=>t.isOpen,callback:()=>{t.isOpen=!1},contextElements:()=>[t.element,...t.focusTracker._elements]})})}function Bhe(t){t.on("execute",e=>{e.source instanceof q0||(t.isOpen=!1)})}function Uhe(t){t.focusTracker.on("change:isFocused",(e,n,r)=>{t.isOpen&&!r&&(t.isOpen=!1)})}function zhe(t){t.keystrokes.set("arrowdown",(e,n)=>{t.isOpen&&(t.panelView.focus(),n())}),t.keystrokes.set("arrowup",(e,n)=>{t.isOpen&&(t.panelView.focusLast(),n())})}function Hhe(t){t.on("change:isOpen",(e,n,r)=>{if(r)return;const i=t.panelView.element;i&&i.contains(Q.document.activeElement)&&t.buttonView.focus()})}function Whe(t){t.on("change:isOpen",(e,n,r)=>{r&&t.panelView.focus()},{priority:"low"})}function u9(t,e,n,r){e.bindTo(n).using(i=>{if(i.type==="separator")return new bk(r);if(i.type==="group"){const s=new Ym(r);return s.set({label:i.label}),u9(t,s.items,i.items,r),s.items.delegate("execute").to(t),s}else if(i.type==="button"||i.type==="switchbutton"){const s=new qc(r);let o;return i.type==="button"?(o=new Se(r),o.bind("ariaChecked").to(o,"isOn")):o=new q0(r),o.bind(...Object.keys(i.model)).to(i.model),o.delegate("execute").to(s),s.children.add(o),s}return null})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Z0=(t,e,n)=>{const r=new The(t.locale);return r.set({id:e,ariaDescribedById:n}),r.bind("isReadOnly").to(t,"isEnabled",i=>!i),r.bind("hasError").to(t,"errorText",i=>!!i),r.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(r),r},jhe=(t,e,n)=>{const r=new Phe(t.locale);return r.set({id:e,ariaDescribedById:n,inputMode:"numeric"}),r.bind("isReadOnly").to(t,"isEnabled",i=>!i),r.bind("hasError").to(t,"errorText",i=>!!i),r.on("input",()=>{t.errorText=null}),t.bind("isEmpty","isFocused","placeholder").to(r),r},yh=(t,e=0,n=1)=>t>n?n:t<e?e:t,mn=(t,e=0,n=Math.pow(10,e))=>Math.round(n*t)/n,Ghe=t=>Jhe(lb(t)),lb=t=>(t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?mn(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?mn(parseInt(t.substring(6,8),16)/255,2):1}),qhe=t=>Zhe(Khe(t)),Yhe=({h:t,s:e,v:n,a:r})=>{const i=(200-e)*n/100;return{h:mn(t),s:mn(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:mn(i/2),a:mn(r,2)}},cb=t=>{const{h:e,s:n,l:r}=Yhe(t);return`hsl(${e}, ${n}%, ${r}%)`},Khe=({h:t,s:e,v:n,a:r})=>{t=t/360*6,e=e/100,n=n/100;const i=Math.floor(t),s=n*(1-e),o=n*(1-(t-i)*e),a=n*(1-(1-t+i)*e),l=i%6;return{r:mn([n,o,s,s,a,n][l]*255),g:mn([a,n,n,o,s,s][l]*255),b:mn([s,s,a,n,n,o][l]*255),a:mn(r,2)}},om=t=>{const e=t.toString(16);return e.length<2?"0"+e:e},Zhe=({r:t,g:e,b:n,a:r})=>{const i=r<1?om(mn(r*255)):"";return"#"+om(t)+om(e)+om(n)+i},Jhe=({r:t,g:e,b:n,a:r})=>{const i=Math.max(t,e,n),s=i-Math.min(t,e,n),o=s?i===t?(e-n)/s:i===e?2+(n-t)/s:4+(t-e)/s:0;return{h:mn(60*(o<0?o+6:o)),s:mn(i?s/i*100:0),v:mn(i/255*100),a:r}},d9=(t,e)=>{if(t===e)return!0;for(const n in t)if(t[n]!==e[n])return!1;return!0},Xhe=(t,e)=>t.toLowerCase()===e.toLowerCase()?!0:d9(lb(t),lb(e)),FT={},h9=t=>{let e=FT[t];return e||(e=document.createElement("template"),e.innerHTML=t,FT[t]=e),e},xk=(t,e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))};let kc=!1;const ub=t=>"touches"in t,Qhe=t=>kc&&!ub(t)?!1:(kc||(kc=ub(t)),!0),VT=(t,e)=>{const n=ub(e)?e.touches[0]:e,r=t.el.getBoundingClientRect();xk(t.el,"move",t.getMove({x:yh((n.pageX-(r.left+window.pageXOffset))/r.width),y:yh((n.pageY-(r.top+window.pageYOffset))/r.height)}))},efe=(t,e)=>{const n=e.keyCode;n>40||t.xy&&n<37||n<33||(e.preventDefault(),xk(t.el,"move",t.getMove({x:n===39?.01:n===37?-.01:n===34?.05:n===33?-.05:n===35?1:n===36?-1:0,y:n===40?.01:n===38?-.01:0},!0)))};class f9{constructor(e,n,r,i){const s=h9(`<div role="slider" tabindex="0" part="${n}" ${r}><div part="${n}-pointer"></div></div>`);e.appendChild(s.content.cloneNode(!0));const o=e.querySelector(`[part=${n}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=i,this.nodes=[o.firstChild,o]}set dragging(e){const n=e?document.addEventListener:document.removeEventListener;n(kc?"touchmove":"mousemove",this),n(kc?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!Qhe(e)||!kc&&e.button!=0)return;this.el.focus(),VT(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),VT(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":efe(this,e);break}}style(e){e.forEach((n,r)=>{for(const i in n)this.nodes[r].style.setProperty(i,n[i])})}}class tfe extends f9{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:cb({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${mn(e)}`)}getMove(e,n){return{h:n?yh(this.h+e.x*360,0,360):360*e.x}}}class nfe extends f9{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:cb(e)},{"background-color":cb({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${mn(e.s)}%, Brightness ${mn(e.v)}%`)}getMove(e,n){return{s:n?yh(this.hsva.s+e.x*100,0,100):e.x*100,v:n?yh(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const rfe=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',ife="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",sfe="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",am=Symbol("same"),$w=Symbol("color"),BT=Symbol("hsva"),Fw=Symbol("update"),UT=Symbol("parts"),zT=Symbol("css"),HT=Symbol("sliders");class ofe extends HTMLElement{static get observedAttributes(){return["color"]}get[zT](){return[rfe,ife,sfe]}get[HT](){return[nfe,tfe]}get color(){return this[$w]}set color(e){if(!this[am](e)){const n=this.colorModel.toHsva(e);this[Fw](n),this[$w]=e}}constructor(){super();const e=h9(`<style>${this[zT].join("")}</style>`),n=this.attachShadow({mode:"open"});n.appendChild(e.content.cloneNode(!0)),n.addEventListener("move",this),this[UT]=this[HT].map(r=>new r(n))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,n,r){const i=this.colorModel.fromAttr(r);this[am](i)||(this.color=i)}handleEvent(e){const n=this[BT],r={...n,...e.detail};this[Fw](r);let i;!d9(r,n)&&!this[am](i=this.colorModel.fromHsva(r))&&(this[$w]=i,xk(this,"color-changed",{value:i}))}[am](e){return this.color&&this.colorModel.equal(e,this.color)}[Fw](e){this[BT]=e,this[UT].forEach(n=>n.update(e))}}const afe={defaultColor:"#000",toHsva:Ghe,fromHsva:({h:t,s:e,v:n})=>qhe({h:t,s:e,v:n,a:1}),equal:Xhe,fromAttr:t=>t};class lfe extends ofe{get colorModel(){return afe}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cfe=150;class ufe extends ee{constructor(e,n={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const r=this.createCollection();n.hideInput||r.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:r}),this._config=n,this._debounceColorPickerEvent=al(i=>{this.set("color",i),this.fire("colorSelected",{color:this.color})},cfe,{leading:!0}),this.on("set:color",(i,s,o)=>{i.return=i9(o,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=Vw(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),Vw(this.color)!=Vw(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),khe("hex-color-picker",lfe),this.picker=Q.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const n=e.detail.value;this._debounceColorPickerEvent(n)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(me.isGecko||me.isiOS||me.isSafari)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const r=[...this.picker.shadowRoot.children].filter(i=>i.getAttribute("role")==="slider").map(i=>new dfe(i));this.slidersView=this.createCollection(),r.forEach(i=>{this.slidersView.add(i)})}_createInputRow(){const e=new hfe,n=this._createColorInput();return new ffe(this.locale,[e,n])}_createColorInput(){const e=new of(this.locale,Z0),{t:n}=this.locale;return e.set({label:n("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",r=>e.isFocused?e.fieldView.value:r.startsWith("#")?r.substring(1):r),e.fieldView.on("input",()=>{const r=e.fieldView.element.value;if(r){const i=r.trim(),s=i.startsWith("#")?i.substring(1):i;[3,4,6,8].includes(s.length)&&/(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})/.test(s)&&this._debounceColorPickerEvent("#"+s)}}),e}}function Vw(t){let e=_he(t);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class dfe extends ee{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class hfe extends ee{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class ffe extends ee{constructor(e,n){super(e),this.children=this.createCollection(n),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mfe extends Ue(Nr){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,n){return this.find(r=>r.color===e.color)?this:super.add(e,n)}hasColor(e){return!!this.find(n=>n.color===e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const{eraser:pfe,colorPalette:gfe}=pe;class wfe extends ee{constructor(e,{colors:n,columns:r,removeButtonLabel:i,documentColorsLabel:s,documentColorsCount:o,colorPickerLabel:a,focusTracker:l,focusables:c}){super(e);const u=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=l,this.items=this.createCollection(),this.colorDefinitions=n,this.columns=r,this.documentColors=new mfe,this.documentColorsCount=o,this._focusables=c,this._removeButtonLabel=i,this._colorPickerLabel=a,this._documentColorsLabel=s,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",u.if("isVisible","ck-hidden",d=>!d)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,n){const r=e.document,i=this.documentColorsCount;this.documentColors.clear();for(const s of r.getRoots()){const o=e.createRangeIn(s);for(const a of o.getItems())if(a.is("$textProxy")&&a.hasAttribute(n)&&(this._addColorToDocumentColors(a.getAttribute(n)),this.documentColors.length>=i))return}}updateSelectedColors(){const e=this.documentColorsGrid,n=this.staticColorsGrid,r=this.selectedColor;n.selectedColor=r,e&&(e.selectedColor=r)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=_r.bind(this.documentColors,this.documentColors),n=new sf(this.locale);n.text=this._documentColorsLabel,n.extendTemplate({attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]}}),this.items.add(n),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Se,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:gfe,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Se;return e.set({withText:!0,icon:pfe,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new OT(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(n,r)=>{this.fire("execute",{value:r.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=_r.bind(this.documentColors,this.documentColors),n=new OT(this.locale,{columns:this.columns});return n.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),n.items.bindTo(this.documentColors).using(r=>{const i=new XO;return i.set({color:r.color,hasBorder:r.options&&r.options.hasBorder}),r.label&&i.set({label:r.label,tooltip:!0}),i.on("execute",()=>{this.fire("execute",{value:r.color,source:"documentColorsGrid"})}),i}),this.documentColors.on("change:isEmpty",(r,i,s)=>{s&&(n.selectedColor=null)}),n}_addColorToDocumentColors(e){const n=this.colorDefinitions.find(r=>r.color===e);n?this.documentColors.add(Object.assign({},n)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vfe extends ee{constructor(e,{focusTracker:n,focusables:r,keystrokes:i,colorPickerViewConfig:s}){super(e),this.items=this.createCollection(),this.focusTracker=n,this.keystrokes=i,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=r,this._colorPickerViewConfig=s;const o=this.bindTemplate,{saveButtonView:a,cancelButtonView:l}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=l,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:l}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",o.if("isVisible","ck-hidden",c=>!c)]},children:this.items})}render(){super.render();const e=new ufe(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(n,r,i)=>{e.color=i}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const n of this.colorPickerView.slidersView)this.focusTracker.add(n.element),this._focusables.add(n);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:n}){const r=new ee,i=this.createCollection();return i.add(e),i.add(n),r.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:i}),r}_createActionButtons(){const e=this.locale,n=e.t,r=new Se(e),i=new Se(e);return r.set({icon:pe.check,class:"ck-button-save",type:"button",withText:!1,label:n("Accept")}),i.set({icon:pe.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:n("Cancel")}),r.on("execute",()=>{this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),i.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:r,cancelButtonView:i}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,n)=>{this.fire("execute",{value:n.color,source:"colorPicker"}),this.set("selectedColor",n.color)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class m9 extends ee{constructor(e,{colors:n,columns:r,removeButtonLabel:i,documentColorsLabel:s,documentColorsCount:o,colorPickerLabel:a,colorPickerViewConfig:l}){super(e),this.items=this.createCollection(),this.focusTracker=new jt,this.keystrokes=new wn,this._focusables=new Dr,this._colorPickerViewConfig=l,this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new wfe(e,{colors:n,columns:r,removeButtonLabel:i,documentColorsLabel:s,documentColorsCount:o,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new vfe(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:l}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(c,u,d)=>{this.colorGridsFragmentView.set("selectedColor",d),this.colorPickerFragmentView.set("selectedColor",d)}),this.colorGridsFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.colorPickerFragmentView.on("change:selectedColor",(c,u,d)=>{this.set("selectedColor",d)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,n){this.colorGridsFragmentView.updateDocumentColors(e,n)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yfe{constructor(e){this._components=new Map,this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,n){this._components.set(Bw(e),{callback:n,originalName:e})}create(e){if(!this.has(e))throw new T("componentfactory-item-missing",this,{name:e});return this._components.get(Bw(e)).callback(this.editor.locale)}has(e){return this._components.has(Bw(e))}}function Bw(t){return String(t).toLowerCase()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bfe extends ee{constructor(e,n={}){super(e);const r=this.bindTemplate;this.set("label",n.label||""),this.set("class",n.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",r.to("class")]},children:this.children}),n.icon&&(this.iconView=new fs,this.iconView.content=n.icon,this.children.add(this.iconView));const i=new ee(e);i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:r.to("label")}]}),this.children.add(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function _fe(t){class e extends t{constructor(...r){super(...r),this._onDragBound=this._onDrag.bind(this),this._onDragEndBound=this._onDragEnd.bind(this),this._lastDraggingCoordinates={x:0,y:0},this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(Q.document,"mouseup",this._onDragEndBound),this.listenTo(Q.document,"touchend",this._onDragEndBound),this.listenTo(Q.document,"mousemove",this._onDragBound),this.listenTo(Q.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(Q.document,"mouseup",this._onDragEndBound),this.stopListening(Q.document,"touchend",this._onDragEndBound),this.stopListening(Q.document,"mousemove",this._onDragBound),this.stopListening(Q.document,"touchmove",this._onDragBound)}_onDragStart(r,i){if(!this._isHandleElementPressed(i))return;this._attachDragListeners();let s=0,o=0;i instanceof MouseEvent?(s=i.clientX,o=i.clientY):(s=i.touches[0].clientX,o=i.touches[0].clientY),this._lastDraggingCoordinates={x:s,y:o},this.isDragging=!0}_onDrag(r,i){if(!this.isDragging){this._detachDragListeners();return}let s=0,o=0;i instanceof MouseEvent?(s=i.clientX,o=i.clientY):(s=i.touches[0].clientX,o=i.touches[0].clientY),i.preventDefault(),this.fire("drag",{deltaX:Math.round(s-this._lastDraggingCoordinates.x),deltaY:Math.round(o-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:s,y:o}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(r){return this.dragHandleElement?this.dragHandleElement===r.target||r.target instanceof HTMLElement&&this.dragHandleElement.contains(r.target):!1}}return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kfe extends ee{constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new wn,this._focusTracker=new jt,this._focusables=new Dr,this.focusCycler=new Lr({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const n of e){const r=new Se(this.locale);let i;r.on("execute",()=>n.onExecute()),n.onCreate&&n.onCreate(r);for(i in n)i!="onExecute"&&i!="onCreate"&&r.set(i,n[i]);this.children.add(r)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Efe extends ee{constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const di={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},WT=mu("px");class Yc extends _fe(ee){constructor(e,{getCurrentDomRoot:n,getViewportOffset:r}){super(e),this.wasMoved=!1;const i=this.bindTemplate,s=e.t;this.set("className",""),this.set("ariaLabel",s("Editor dialog")),this.set("isModal",!1),this.set("position",di.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=n,this._getViewportOffset=r,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new wn,this.focusTracker=new jt,this._focusables=new Dr,this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",i.if("isModal","ck-dialog-overlay__transparent",o=>!o),i.if("_isVisible","ck-hidden",o=>!o)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",i.to("className")],role:"dialog","aria-label":i.to("ariaLabel"),style:{top:i.to("_top",o=>WT(o)),left:i.to("_left",o=>WT(o)),visibility:i.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,n)=>{this.fire("close",{source:"escKeyPress"}),n()}),this.on("drag",(e,{deltaX:n,deltaY:r})=>{this.wasMoved=!0,this.moveBy(n,r)}),this.listenTo(Q.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(Q.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,n,r)=>{r&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView?this.headerView.element:null}setupParts({icon:e,title:n,hasCloseButton:r=!0,content:i,actionButtons:s}){n&&(this.headerView=new bfe(this.locale,{icon:e}),r&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=n,this.ariaLabel=n,this.parts.add(this.headerView,0)),i&&(i instanceof ee&&(i=[i]),this.contentView=new Efe(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),s&&(this.actionsView=new kfe(this.locale),this.actionsView.setButtons(s),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,n){const r=this._getViewportRect(),i=this._getDialogRect();e+i.width>r.right&&(e=r.right-i.width),e<r.left&&(e=r.left),n<r.top&&(n=r.top),this._moveTo(e,n)}_moveTo(e,n){this._left=e,this._top=n}moveBy(e,n){this.moveTo(this._left+e,this._top+n)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let n=this.position,r;this._getCurrentDomRoot()?r=this._getVisibleDomRootRect(e):n=di.SCREEN_CENTER;const i=Yc.defaultOffset,s=this._getDialogRect();switch(n){case di.EDITOR_TOP_SIDE:{if(r){const o=this.locale.contentLanguageDirection==="ltr"?r.right-s.width-i:r.left+i;this.moveTo(o,r.top+i)}else this._moveOffScreen();break}case di.EDITOR_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),Math.round(r.top+r.height/2-s.height/2)):this._moveOffScreen();break}case di.SCREEN_CENTER:{this.moveTo(Math.round((e.width-s.width)/2),Math.round((e.height-s.height)/2));break}case di.EDITOR_TOP_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.top+i):this._moveOffScreen();break}case di.EDITOR_BOTTOM_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.bottom-s.height-i):this._moveOffScreen();break}case di.EDITOR_ABOVE_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.top-s.height-i):this._moveOffScreen();break}case di.EDITOR_BELOW_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.bottom+i):this._moveOffScreen();break}}}_getVisibleDomRootRect(e){let n=new ge(this._getCurrentDomRoot()).getVisible();if(n){if(n=e.getIntersection(n),!n)return null}else return null;return n}_getDialogRect(){return new ge(this.element.firstElementChild)}_getViewportRect(){return Cfe(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const n of this.contentView.children)af(n)&&e.push(n);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element),Rhe(n)&&(this.listenTo(n.focusCycler,"forwardCycle",r=>{this._focusCycler.focusNext(),this._focusCycler.next!==this._focusCycler.focusables.get(this._focusCycler.current)&&r.stop()}),this.listenTo(n.focusCycler,"backwardCycle",r=>{this._focusCycler.focusPrevious(),this._focusCycler.previous!==this._focusCycler.focusables.get(this._focusCycler.current)&&r.stop()}))})}_createCloseButton(){const e=new Se(this.locale),n=this.locale.t;return e.set({label:n("Close"),tooltip:!0,icon:pe.cancel}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}Yc.defaultOffset=15;function Cfe(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);const e=new ge(Q.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ts extends L{static get pluginName(){return"Dialog"}constructor(e){super(e);const n=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set("id",null),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}_initShowHideListeners(){this.on("show",(e,n)=>{this._show(n)}),this.on("show",(e,n)=>{n.onShow&&n.onShow(this)},{priority:"low"}),this.on("hide",()=>{Ts._visibleDialogPlugin&&Ts._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(n,r)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),r())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const n=e.document.differ.getChangedRoots();for(const r of n)r.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:n,title:r,hasCloseButton:i=!0,content:s,actionButtons:o,className:a,isModal:l,position:c,onHide:u}){const d=this.editor;this.view=new Yc(d.locale,{getCurrentDomRoot:()=>d.editing.view.getDomRoot(d.model.document.selection.anchor.root.rootName),getViewportOffset:()=>d.ui.viewportOffset});const h=this.view;h.on("close",()=>{this.hide()}),d.ui.view.body.add(h),d.ui.focusTracker.add(h.element),d.keystrokes.listenTo(h.element),c||(c=l?di.SCREEN_CENTER:di.EDITOR_CENTER),h.set({position:c,_isVisible:!0,className:a,isModal:l}),h.setupParts({icon:n,title:r,hasCloseButton:i,content:s,actionButtons:o}),this.id=e,u&&(this._onHide=u),this.isOpen=!0,Ts._visibleDialogPlugin=this}hide(){Ts._visibleDialogPlugin&&Ts._visibleDialogPlugin.fire(`hide:${Ts._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,n=this.view;n.contentView&&n.contentView.reset(),e.ui.view.body.remove(n),e.ui.focusTracker.remove(n.element),e.keystrokes.stopListening(n.element),n.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,Ts._visibleDialogPlugin=null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const jT=mu("px"),GT=Q.document.body,xfe={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class An extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",r=>`ck-balloon-panel_${r}`),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",jT),left:n.to("left",jT)}},children:this.content})}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){this.show();const n=An.defaultPositions,r=Object.assign({},{element:this.element,positions:[n.southArrowNorth,n.southArrowNorthMiddleWest,n.southArrowNorthMiddleEast,n.southArrowNorthWest,n.southArrowNorthEast,n.northArrowSouth,n.northArrowSouthMiddleWest,n.northArrowSouthMiddleEast,n.northArrowSouthWest,n.northArrowSouthEast,n.viewportStickyNorth],limiter:GT,fitInViewport:!0},e),i=An._getOptimalPosition(r)||xfe,s=parseInt(i.left),o=parseInt(i.top),a=i.name,l=i.config||{},{withArrow:c=!0}=l;this.top=o,this.left=s,this.position=a,this.withArrow=c}pin(e){this.unpin(),this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this._startPinning(e),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){this.attachTo(e);const n=db(e.target),r=e.limiter?db(e.limiter):GT;this.listenTo(Q.document,"scroll",(i,s)=>{const o=s.target,a=n&&o.contains(n),l=r&&o.contains(r);(a||l||!n||!r)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(Q.window,"resize",()=>{this.attachTo(e)})}_stopPinning(){this.stopListening(Q.document,"scroll"),this.stopListening(Q.window,"resize")}}An.arrowSideOffset=25;An.arrowHeightOffset=10;An.stickyVerticalOffset=20;An._getOptimalPosition=U0;An.defaultPositions=p9();function db(t){return ll(t)?t:B0(t)?t.commonAncestorContainer:typeof t=="function"?db(t()):null}function p9(t={}){const{sideOffset:e=An.arrowSideOffset,heightOffset:n=An.arrowHeightOffset,stickyVerticalOffset:r=An.stickyVerticalOffset,config:i}=t;return{northWestArrowSouthWest:(a,l)=>({top:s(a,l),left:a.left-e,name:"arrow_sw",...i&&{config:i}}),northWestArrowSouthMiddleWest:(a,l)=>({top:s(a,l),left:a.left-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northWestArrowSouth:(a,l)=>({top:s(a,l),left:a.left-l.width/2,name:"arrow_s",...i&&{config:i}}),northWestArrowSouthMiddleEast:(a,l)=>({top:s(a,l),left:a.left-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northWestArrowSouthEast:(a,l)=>({top:s(a,l),left:a.left-l.width+e,name:"arrow_se",...i&&{config:i}}),northArrowSouthWest:(a,l)=>({top:s(a,l),left:a.left+a.width/2-e,name:"arrow_sw",...i&&{config:i}}),northArrowSouthMiddleWest:(a,l)=>({top:s(a,l),left:a.left+a.width/2-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northArrowSouth:(a,l)=>({top:s(a,l),left:a.left+a.width/2-l.width/2,name:"arrow_s",...i&&{config:i}}),northArrowSouthMiddleEast:(a,l)=>({top:s(a,l),left:a.left+a.width/2-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northArrowSouthEast:(a,l)=>({top:s(a,l),left:a.left+a.width/2-l.width+e,name:"arrow_se",...i&&{config:i}}),northEastArrowSouthWest:(a,l)=>({top:s(a,l),left:a.right-e,name:"arrow_sw",...i&&{config:i}}),northEastArrowSouthMiddleWest:(a,l)=>({top:s(a,l),left:a.right-l.width*.25-e,name:"arrow_smw",...i&&{config:i}}),northEastArrowSouth:(a,l)=>({top:s(a,l),left:a.right-l.width/2,name:"arrow_s",...i&&{config:i}}),northEastArrowSouthMiddleEast:(a,l)=>({top:s(a,l),left:a.right-l.width*.75+e,name:"arrow_sme",...i&&{config:i}}),northEastArrowSouthEast:(a,l)=>({top:s(a,l),left:a.right-l.width+e,name:"arrow_se",...i&&{config:i}}),southWestArrowNorthWest:a=>({top:o(a),left:a.left-e,name:"arrow_nw",...i&&{config:i}}),southWestArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.left-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southWestArrowNorth:(a,l)=>({top:o(a),left:a.left-l.width/2,name:"arrow_n",...i&&{config:i}}),southWestArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.left-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southWestArrowNorthEast:(a,l)=>({top:o(a),left:a.left-l.width+e,name:"arrow_ne",...i&&{config:i}}),southArrowNorthWest:a=>({top:o(a),left:a.left+a.width/2-e,name:"arrow_nw",...i&&{config:i}}),southArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southArrowNorth:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width/2,name:"arrow_n",...i&&{config:i}}),southArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southArrowNorthEast:(a,l)=>({top:o(a),left:a.left+a.width/2-l.width+e,name:"arrow_ne",...i&&{config:i}}),southEastArrowNorthWest:a=>({top:o(a),left:a.right-e,name:"arrow_nw",...i&&{config:i}}),southEastArrowNorthMiddleWest:(a,l)=>({top:o(a),left:a.right-l.width*.25-e,name:"arrow_nmw",...i&&{config:i}}),southEastArrowNorth:(a,l)=>({top:o(a),left:a.right-l.width/2,name:"arrow_n",...i&&{config:i}}),southEastArrowNorthMiddleEast:(a,l)=>({top:o(a),left:a.right-l.width*.75+e,name:"arrow_nme",...i&&{config:i}}),southEastArrowNorthEast:(a,l)=>({top:o(a),left:a.right-l.width+e,name:"arrow_ne",...i&&{config:i}}),westArrowEast:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.left-l.width-n,name:"arrow_e",...i&&{config:i}}),eastArrowWest:(a,l)=>({top:a.top+a.height/2-l.height/2,left:a.right+n,name:"arrow_w",...i&&{config:i}}),viewportStickyNorth:(a,l,c,u)=>{const d=u||c;return!a.getIntersection(d)||d.height-a.height>r?null:{top:d.top+r,left:a.left+a.width/2-l.width/2,name:"arrowless",config:{withArrow:!1,...i}}}};function s(a,l){return a.top-l.height-n}function o(a){return a.bottom+n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const qT="ck-tooltip";class Qt extends Mr(){constructor(e){if(super(),this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver=null,this._mutationObserver=null,Qt._editors.add(e),Qt._instance)return Qt._instance;Qt._instance=this,this.tooltipTextView=new ee(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new An(e.locale),this.balloonPanelView.class=qT,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=Sfe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=al(this._pinTooltip,600),this._unpinTooltipDebounced=al(this._unpinTooltip,400),this.listenTo(Q.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(Q.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Q.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Q.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(Q.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(Q.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const n=e.ui.view&&e.ui.view.body;Qt._editors.delete(e),this.stopListening(e.ui),n&&n.has(this.balloonPanelView)&&n.remove(this.balloonPanelView),Qt._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Qt._instance=null)}static getPositioningFunctions(e){const n=Qt.defaultBalloonPositions;return{s:[n.southArrowNorth,n.southArrowNorthEast,n.southArrowNorthWest],n:[n.northArrowSouth],e:[n.eastArrowWest],w:[n.westArrowEast],sw:[n.southArrowNorthEast],se:[n.southArrowNorthWest]}[e]}_onKeyDown(e,n){n.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),n.stopPropagation())}_onEnterOrFocus(e,{target:n}){const r=Uw(n);if(!r){e.name==="focus"&&this._unpinTooltip();return}r!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(r,YT(r)))}_onLeaveOrBlur(e,{target:n,relatedTarget:r}){if(e.name==="mouseleave"){if(!ll(n))return;const i=this.balloonPanelView.element,s=i&&(i===r||i.contains(r)),o=!s&&n===i;if(s){this._unpinTooltipDebounced.cancel();return}if(!o&&this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;const a=Uw(n),l=Uw(r);(o||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&n!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:n}){this._currentElementWithTooltip&&(n.contains(this.balloonPanelView.element)&&n.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:n,position:r,cssClass:i}){this._unpinTooltip();const s=vn(Qt._editors.values()).ui.view.body;s.has(this.balloonPanelView)||s.add(this.balloonPanelView),this.tooltipTextView.text=n,this.balloonPanelView.pin({target:e,positions:Qt.getPositioningFunctions(r)}),this._resizeObserver=new tf(e,()=>{cl(e)||this._unpinTooltip()}),this._mutationObserver.attach(e),this.balloonPanelView.class=[qT,i].filter(o=>o).join(" ");for(const o of Qt._editors)this.listenTo(o.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=r}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Qt._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}_updateTooltipPosition(){const e=YT(this._currentElementWithTooltip);if(!cl(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Qt.getPositioningFunctions(e.position)})}}Qt.defaultBalloonPositions=p9({heightOffset:5,sideOffset:13});Qt._editors=new Set;Qt._instance=null;function Uw(t){return ll(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function YT(t){return{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}}function Sfe(t){const e=new MutationObserver(()=>{t()});return{attach(n){e.observe(n,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}const Tfe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pfe=53,Afe=10,Ife=50,Rfe=350,Ofe="Powered by";class Mfe extends Mr(){constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=ch(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor,n=!!e.config.get("ui.poweredBy.forceVisible");/* istanbul ignore next -- @preserve */!n&&Soe(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(r,i,s)=>{this._updateLastFocusedEditableElement(),s?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(r,i,s)=>{this._updateLastFocusedEditableElement(),s&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){const e=this.editor,n=this._balloonView=new An,r=w9(e),i=new Nfe(e.locale,r.label);n.content.add(i),n.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(n),e.ui.focusTracker.add(n.element),this._balloonView=n}_showBalloon(){if(!this._lastFocusedEditableElement)return;const e=Dfe(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){const e=this.editor,n=e.ui.focusTracker.isFocused,r=e.ui.focusTracker.focusedElement;if(!n||!r){this._lastFocusedEditableElement=null;return}const i=Array.from(e.ui.getEditableElementsNames()).map(s=>e.ui.getEditableElement(s));i.includes(r)?this._lastFocusedEditableElement=r:this._lastFocusedEditableElement=i[0]}}class Nfe extends ee{constructor(e,n){super(e);const r=new fs,i=this.bindTemplate;r.set({content:Tfe,isColorInherited:!1}),r.extendTemplate({attributes:{style:{width:Pfe+"px",height:Afe+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...n?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[n]}]:[],r],on:{dragstart:i.to(s=>s.preventDefault())}}]})}}function Dfe(t,e){const n=w9(t),r=n.side==="right"?Lfe(e,n):$fe(e,n);return{target:e,positions:[r]}}function Lfe(t,e){return g9(t,e,(n,r)=>n.left+n.width-r.width-e.horizontalOffset)}function $fe(t,e){return g9(t,e,n=>n.left+e.horizontalOffset)}function g9(t,e,n){return(r,i)=>{const s=new ge(t);if(s.width<Rfe||s.height<Ife)return null;let o;e.position==="inside"?o=s.bottom-i.height:o=s.bottom-i.height/2,o-=e.verticalOffset;const a=n(s,i),c=r.clone().moveTo(a,o).getIntersection(i.clone().moveTo(a,o)).getVisible();return!c||c.getArea()<i.getArea()?null:{top:o,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function w9(t){const e=t.config.get("ui.poweredBy"),n=e&&e.position||"border";return{position:n,label:Ofe,verticalOffset:n==="inside"?5:0,horizontalOffset:5,side:t.locale.contentLanguageDirection==="ltr"?"right":"left",...e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const v9={POLITE:"polite",ASSERTIVE:"assertive"};class Ffe{constructor(e){this.editor=e}announce(e,n,r=v9.POLITE){const i=this.editor;this.view||(this.view=new Vfe(i.locale),i.ui.view.body.add(this.view));let s=this.view.regionViews.find(o=>o.regionName===e);s||(s=new Bfe(this.view.locale),this.view.regionViews.add(s)),s.set({regionName:e,text:n,politeness:r})}}class Vfe extends ee{constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class Bfe extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("regionName",""),this.set("text",""),this.set("politeness",v9.POLITE),this.setTemplate({tag:"div",attributes:{role:"region","data-region":n.to("regionName"),"aria-live":n.to("politeness")},children:[{text:n.to("text")}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ufe extends Ue(){constructor(e){super(),this.isReady=!1,this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[];const n=e.editing.view;this.editor=e,this.componentFactory=new yfe(e),this.focusTracker=new jt,this.tooltipManager=new Qt(e),this.poweredBy=new Mfe(e),this.ariaLiveAnnouncer=new Ffe(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this.isReady=!0}),this.listenTo(n.document,"layoutChanged",this.update.bind(this)),this.listenTo(n,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,n){this._editableElementsMap.set(e,n),n.ckeditorInstance||(n.ckeditorInstance=this.editor),this.focusTracker.add(n);const r=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(n)};this.isReady?r():this.once("ready",r)}removeEditableElement(e){const n=this._editableElementsMap.get(e);n&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(n),this.focusTracker.remove(n),n.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,n={}){e.isRendered?(this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e.element),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:n})}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_readViewportOffsetFromConfig(){const e=this.editor,n=e.config.get("ui.viewportOffset");if(n)return n;const r=e.config.get("toolbar.viewportTopOffset");return r?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:r}):{top:0}}_initFocusTracking(){const e=this.editor,n=e.editing.view;let r,i;e.keystrokes.set("Alt+F10",(s,o)=>{const a=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(a)&&!Array.from(n.domRoots.values()).includes(a)&&(r=a);const l=this._getCurrentFocusedToolbarDefinition();(!l||!i)&&(i=this._getFocusableCandidateToolbarDefinitions());for(let c=0;c<i.length;c++){const u=i.shift();if(i.push(u),u!==l&&this._focusFocusableCandidateToolbar(u)){l&&l.options.afterBlur&&l.options.afterBlur();break}}o()}),e.keystrokes.set("Esc",(s,o)=>{const a=this._getCurrentFocusedToolbarDefinition();a&&(r?(r.focus(),r=null):e.editing.view.focus(),a.options.afterBlur&&a.options.afterBlur(),o())})}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const n of this._focusableToolbarDefinitions){const{toolbarView:r,options:i}=n;(cl(r.element)||i.beforeFocus)&&e.push(n)}return e.sort((n,r)=>KT(n)-KT(r)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:n,options:{beforeFocus:r}}=e;return r&&r(),cl(n.element)?(n.focus(),!0):!1}_handleScrollToTheSelection(e,n){const r={top:0,bottom:0,left:0,right:0,...this.viewportOffset};n.viewportOffset.top+=r.top,n.viewportOffset.bottom+=r.bottom,n.viewportOffset.left+=r.left,n.viewportOffset.right+=r.right}}function KT(t){const{toolbarView:e,options:n}=t;let r=10;return cl(e.element)&&r--,n.isContextual&&r--,r}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class zfe extends ee{constructor(e){super(e),this.body=new rhe(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hfe extends zfe{constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,n=new sf;return n.text=e("Rich Text Editor"),n.extendTemplate({attributes:{class:"ck-voice-label"}}),n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wfe extends ee{constructor(e,n,r){super(e),this.name=null,this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=r,this._hasExternalElement=!!this._editableElement,this._editingView=n}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?r(this):n(this);function n(i){e.change(s=>{const o=e.document.getRoot(i.name);s.addClass(i.isFocused?"ck-focused":"ck-blurred",o),s.removeClass(i.isFocused?"ck-blurred":"ck-focused",o)})}function r(i){e.once("change:isRenderingInProgress",(s,o,a)=>{a?r(i):n(i)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jfe extends Wfe{constructor(e,n,r,i={}){super(e,n,r);const s=e.t;this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),this._generateLabel=i.label||(()=>s("Editor editing area: %0",this.name))}render(){super.render();const e=this._editingView;e.change(n=>{const r=e.document.getRoot(this.name);n.setAttribute("aria-label",this._generateLabel(this),r)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class bh extends z0{static get pluginName(){return"Notification"}init(){this.on("show:warning",(e,n)=>{window.alert(n.message)},{priority:"lowest"})}showSuccess(e,n={}){this._showNotification({message:e,type:"success",namespace:n.namespace,title:n.title})}showInfo(e,n={}){this._showNotification({message:e,type:"info",namespace:n.namespace,title:n.title})}showWarning(e,n={}){this._showNotification({message:e,type:"warning",namespace:n.namespace,title:n.title})}_showNotification(e){const n=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(n,{message:e.message,type:e.type,title:e.title||""})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sk extends Ue(){constructor(e,n){super(),n&&ZR(this,n),e&&this.set(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const lm=mu("px");class pg extends L{static get pluginName(){return"ContextualBalloon"}constructor(e){super(e),this._viewToStack=new Map,this._idToStack=new Map,this._view=null,this._rotatorView=null,this._fakePanelsView=null,this.positionLimiter=()=>{const n=this.editor.editing.view,i=n.document.selection.editableElement;return i?n.domConverter.mapViewToDom(i.root):null},this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new T("contextualballoon-add-view-exist",[this,e]);const n=e.stackId||"main";if(!this._idToStack.has(n)){this._idToStack.set(n,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(n)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(n);return}const r=this._idToStack.get(n);e.singleViewMode&&this.showStack(n),r.set(e.view,e),this._viewToStack.set(e.view,r),r===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new T("contextualballoon-remove-view-not-exist",[this,e]);const n=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(n.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(n.values())[n.size-2])),n.size===1?(this._idToStack.delete(this._getStackId(n)),this._numberOfStacks=this._idToStack.size):n.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}showStack(e){this.visibleStack=e;const n=this._idToStack.get(e);if(!n)throw new T("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==n&&this._showView(Array.from(n.values()).pop())}_createPanelView(){this._view=new An(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(r=>r[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)+1;e[n]||(n=0),this.showStack(this._getStackId(e[n]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let n=e.indexOf(this._visibleStack)-1;e[n]||(n=e.length-1),this.showStack(this._getStackId(e[n]))}_createRotatorView(){const e=new Gfe(this.editor.locale),n=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(r,i)=>!i&&r>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(r,i)=>{if(i<2)return"";const s=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return n("%0 of %1",[s,i])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new qfe(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(n,r)=>!r&&n>=2?Math.min(n-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:n="",withArrow:r=!0,singleViewMode:i=!1}){this.view.class=n,this.view.withArrow=r,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),i&&(this._singleViewMode=!0)}_getBalloonPosition(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}}class Gfe extends ee{constructor(e){super(e);const n=e.t,r=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new jt,this.buttonPrevView=this._createButtonView(n("Previous"),pe.previousArrow),this.buttonNextView=this._createButtonView(n("Next"),pe.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",r.to("isNavigationVisible",i=>i?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:r.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,n){const r=new Se(this.locale);return r.set({label:e,icon:n,tooltip:!0}),r}}class qfe extends ee{constructor(e,n){super(e);const r=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=n,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",r.to("numberOfPanels",i=>i?"":"ck-hidden")],style:{top:r.to("top",lm),left:r.to("left",lm),width:r.to("width",lm),height:r.to("height",lm)}},children:this.content}),this.on("change:numberOfPanels",(i,s,o,a)=>{o>a?this._addPanels(o-a):this._removePanels(a-o),this.updatePosition()})}_addPanels(e){for(;e--;){const n=new ee;n.setTemplate({tag:"div"}),this.content.add(n),this.registerChild(n)}}_removePanels(e){for(;e--;){const n=this.content.last;this.content.remove(n),this.deregisterChild(n),n.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:n}=this._balloonPanelView,{width:r,height:i}=new ge(this._balloonPanelView.element);Object.assign(this,{top:e,left:n,width:r,height:i})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ll=mu("px");class Yfe extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new _r({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",r=>r?"block":"none"),height:n.to("isSticky",r=>r?Ll(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new _r({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",r=>r?Ll(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:n.to("_stickyTopOffset",r=>r&&Ll(r)),bottom:n.to("_stickyBottomOffset",r=>r&&Ll(r)),marginLeft:n.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(Q.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new ge(this.limiterElement);let n=e.getVisible();if(n){const r=new ge(Q.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,n=n.getIntersection(r)}if(n&&e.top<n.top){const r=n.top;if(r+this._contentPanelRect.height+this.limiterBottomOffset>n.bottom){const i=Math.max(e.bottom-n.bottom,0)+this.limiterBottomOffset;e.bottom-i>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(i):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(r):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Ll(-Q.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Ll(-Q.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new ge(this.contentPanelElement)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kfe extends of{constructor(e,n){const r=e.t,i=Object.assign({},{showResetButton:!0,showIcon:!0,creator:Z0},n);super(e,i.creator),this.label=n.label,this._viewConfig=i,this._viewConfig.showIcon&&(this.iconView=new fs,this.iconView.content=pe.loupe,this.fieldWrapperChildren.add(this.iconView,0),this.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),this._viewConfig.showResetButton&&(this.resetButtonView=new Se(e),this.resetButtonView.set({label:r("Clear"),icon:pe.cancel,class:"ck-search__reset",isVisible:!1,tooltip:!0}),this.resetButtonView.on("execute",()=>{this.reset(),this.focus(),this.fire("reset")}),this.resetButtonView.bind("isVisible").to(this.fieldView,"isEmpty",s=>!s),this.fieldWrapperChildren.add(this.resetButtonView),this.extendTemplate({attributes:{class:"ck-search__query_with-reset"}}))}reset(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zfe extends ee{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,primaryText:"",secondaryText:""}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",e.if("isVisible","ck-hidden",n=>!n)],tabindex:-1},children:[{tag:"span",children:[{text:[e.to("primaryText")]}]},{tag:"span",children:[{text:[e.to("secondaryText")]}]}]})}focus(){this.element.focus()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jfe extends ee{constructor(e){super(e),this.children=this.createCollection(),this.focusTracker=new jt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:this.children}),this._focusCycler=new Lr({focusables:this.children,focusTracker:this.focusTracker})}render(){super.render();for(const e of this.children)this.focusTracker.add(e.element)}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xfe extends ee{constructor(e,n){super(e),this._config=n,this.filteredView=n.filteredView,this.queryView=this._createSearchTextQueryView(),this.focusTracker=new jt,this.keystrokes=new wn,this.resultsView=new Jfe(e),this.children=this.createCollection(),this.focusableChildren=this.createCollection([this.queryView,this.resultsView]),this.set("isEnabled",!0),this.set("resultsCount",0),this.set("totalItemsCount",0),n.infoView&&n.infoView.instance?this.infoView=n.infoView.instance:(this.infoView=new Zfe,this._enableDefaultInfoViewBehavior(),this.on("render",()=>{this.search("")})),this.resultsView.children.addMany([this.infoView,this.filteredView]),this.focusCycler=new Lr({focusables:this.focusableChildren,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.on("search",(r,{resultsCount:i,totalItemsCount:s})=>{this.resultsCount=i,this.totalItemsCount=s}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-search",n.class||null],tabindex:"-1"},children:this.children})}render(){super.render(),this.children.addMany([this.queryView,this.resultsView]);const e=n=>n.stopPropagation();for(const n of this.focusableChildren)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}focus(){this.queryView.focus()}reset(){this.queryView.reset(),this.search("")}search(e){const n=e?new RegExp(nse(e),"ig"):null,r=this.filteredView.filter(n);this.fire("search",{query:e,...r})}_createSearchTextQueryView(){const e=new Kfe(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",()=>{this.search(e.fieldView.element.value)}),e.on("reset",()=>this.reset()),e.bind("isEnabled").to(this),e}_enableDefaultInfoViewBehavior(){const e=this.locale.t,n=this.infoView;this.on("search",(i,s)=>{if(s.resultsCount)n.set({isVisible:!1});else{const o=this._config.infoView&&this._config.infoView.text;let a,l;s.totalItemsCount?o&&o.notFound?(a=o.notFound.primary,l=o.notFound.secondary):(a=e("No results found"),l=""):o&&o.noSearchableItems?(a=o.noSearchableItems.primary,l=o.noSearchableItems.secondary):(a=e("No searchable items"),l=""),n.set({primaryText:r(a,s),secondaryText:r(l,s),isVisible:!0})}});function r(i,{query:s,resultsCount:o,totalItemsCount:a}){return typeof i=="function"?i(s,o,a):i}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _h extends Xfe{constructor(e,n){super(e,n),this._config=n;const r=mu("px");this.extendTemplate({attributes:{class:["ck-autocomplete"]}});const i=this.resultsView.bindTemplate;this.resultsView.set("isVisible",!1),this.resultsView.set("_position","s"),this.resultsView.set("_width",0),this.resultsView.extendTemplate({attributes:{class:[i.if("isVisible","ck-hidden",s=>!s),i.to("_position",s=>`ck-search__results_${s}`)],style:{width:i.to("_width",r)}}}),this.focusTracker.on("change:isFocused",(s,o,a)=>{this._updateResultsVisibility(),a?this.resultsView.element.scrollTop=0:n.resetOnBlur&&this.queryView.reset()}),this.on("search",()=>{this._updateResultsVisibility(),this._updateResultsViewWidthAndPosition()}),this.keystrokes.set("esc",(s,o)=>{this.resultsView.isVisible&&(this.queryView.focus(),this.resultsView.isVisible=!1,o())}),this.listenTo(Q.document,"scroll",()=>{this._updateResultsViewWidthAndPosition()}),this.on("change:isEnabled",()=>{this._updateResultsVisibility()}),this.filteredView.on("execute",(s,{value:o})=>{this.focus(),this.reset(),this.queryView.fieldView.value=this.queryView.fieldView.element.value=o,this.resultsView.isVisible=!1}),this.resultsView.on("change:isVisible",()=>{this._updateResultsViewWidthAndPosition()})}_updateResultsViewWidthAndPosition(){if(!this.resultsView.isVisible)return;this.resultsView._width=new ge(this.queryView.fieldView.element).width;const e=_h._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:_h.defaultResultsPositions});this.resultsView._position=e?e.name:"s"}_updateResultsVisibility(){const e=typeof this._config.queryMinChars>"u"?0:this._config.queryMinChars,n=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&n>=e}}_h.defaultResultsPositions=[t=>({top:t.bottom,left:t.left,name:"s"}),(t,e)=>({top:t.top-e.height,left:t.left,name:"n"})];_h._getOptimalPosition=U0;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qfe extends Se{constructor(e){super(e);const n=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",r=>String(r)),"data-cke-tooltip-disabled":n.to("isOn")},on:{mouseenter:n.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new fs;return e.content=Y0,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class gu extends qc{constructor(e,n){super(e);const r=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:r.to("mouseenter")}}),this.delegate("mouseenter").to(n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const cm=5,ju={toggleMenusAndFocusItemsOnHover(t){t.on("menu:mouseenter",e=>{if(t.isOpen){for(const n of t.menus){const r=e.path[0],i=r instanceof gu&&r.children.first===n;n.isOpen=(e.path.includes(n)||i)&&n.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(t){const e=t.locale.uiLanguageDirection==="rtl";t.on("menu:arrowright",r=>{n(r.source,e?-1:1)}),t.on("menu:arrowleft",r=>{n(r.source,e?1:-1)});function n(r,i){const s=t.children.getIndex(r),o=r.isOpen,a=t.children.length,l=t.children.get((s+a+i)%a);r.isOpen=!1,o&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(t){t.on("change:isOpen",()=>{t.isOpen||t.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(t){t.on("menu:change:isOpen",(e,n,r)=>{r&&t.menus.filter(i=>e.source.parentMenuView===i.parentMenuView&&e.source!==i&&i.isOpen).forEach(i=>{i.isOpen=!1})})},closeOnClickOutside(t){F0({emitter:t,activator:()=>t.isOpen,callback:()=>t.close(),contextElements:()=>t.children.map(e=>e.element)})}},Ea={openAndFocusPanelOnArrowDownKey(t){t.keystrokes.set("arrowdown",(e,n)=>{t.focusTracker.focusedElement===t.buttonView.element&&(t.isOpen||(t.isOpen=!0),t.panelView.focus(),n())})},openOnArrowRightKey(t){const e=t.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";t.keystrokes.set(e,(n,r)=>{t.focusTracker.focusedElement!==t.buttonView.element||!t.isEnabled||(t.isOpen||(t.isOpen=!0),t.panelView.focus(),r())})},openOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!0,t.panelView.focus()})},toggleOnButtonClick(t){t.buttonView.on("execute",()=>{t.isOpen=!t.isOpen,t.isOpen&&t.panelView.focus()})},closeOnArrowLeftKey(t){const e=t.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";t.keystrokes.set(e,(n,r)=>{t.isOpen&&(t.isOpen=!1,t.focus(),r())})},closeOnEscKey(t){t.keystrokes.set("esc",(e,n)=>{t.isOpen&&(t.isOpen=!1,t.focus(),n())})},closeOnParentClose(t){t.parentMenuView.on("change:isOpen",(e,n,r)=>{!r&&e.source===t.parentMenuView&&(t.isOpen=!1)})}},eme={southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,e)=>({top:t.bottom,left:t.left-e.width+t.width,name:"sw"}),northEast:(t,e)=>({top:t.top-e.height,left:t.left,name:"ne"}),northWest:(t,e)=>({top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}),eastSouth:t=>({top:t.top,left:t.right-cm,name:"es"}),eastNorth:(t,e)=>({top:t.top-e.height,left:t.right-cm,name:"en"}),westSouth:(t,e)=>({top:t.top,left:t.left-e.width+cm,name:"ws"}),westNorth:(t,e)=>({top:t.top-e.height,left:t.left-e.width+cm,name:"wn"})},tme=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:uploadImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment"]},{groupId:"insertMinorWidgets",items:["menuBar:insertTemplate","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function nme(t){let e;return!("items"in t)||!t.items?e={items:$i(tme),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...t}:e={items:t.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...t},e}function rme({normalizedConfig:t,locale:e,componentFactory:n}){const r=$i(t);return ime(t,r),sme(t,r),ome(t,r,n),y9(t,r),ame(r,e),r}function ime(t,e){const n=e.removeItems,r=[];e.items=e.items.filter(({menuId:i})=>n.includes(i)?(r.push(i),!1):!0),wu(e.items,i=>{i.groups=i.groups.filter(({groupId:s})=>n.includes(s)?(r.push(s),!1):!0);for(const s of i.groups)s.items=s.items.filter(o=>{const a=b9(o);return n.includes(a)?(r.push(a),!1):!0})});for(const i of n)r.includes(i)||Ie("menu-bar-item-could-not-be-removed",{menuBarConfig:t,itemName:i})}function sme(t,e){const n=e.addItems,r=[];for(const i of n){const s=ume(i.position),o=dme(i.position);if(lme(i))if(!o)s==="start"?(e.items.unshift(i.menu),r.push(i)):s==="end"&&(e.items.push(i.menu),r.push(i));else{const a=e.items.findIndex(l=>l.menuId===o);a!=-1?s==="before"?(e.items.splice(a,0,i.menu),r.push(i)):s==="after"&&(e.items.splice(a+1,0,i.menu),r.push(i)):ZT(e,i.menu,o,s)&&r.push(i)}else cme(i)?wu(e.items,a=>{if(a.menuId===o)s==="start"?(a.groups.unshift(i.group),r.push(i)):s==="end"&&(a.groups.push(i.group),r.push(i));else{const l=a.groups.findIndex(c=>c.groupId===o);l!==-1&&(s==="before"?(a.groups.splice(l,0,i.group),r.push(i)):s==="after"&&(a.groups.splice(l+1,0,i.group),r.push(i)))}}):ZT(e,i.item,o,s)&&r.push(i)}for(const i of n)r.includes(i)||Ie("menu-bar-item-could-not-be-added",{menuBarConfig:t,addedItemConfig:i})}function ZT(t,e,n,r){let i=!1;return wu(t.items,s=>{for(const{groupId:o,items:a}of s.groups){if(i)return;if(o===n)r==="start"?(a.unshift(e),i=!0):r==="end"&&(a.push(e),i=!0);else{const l=a.findIndex(c=>b9(c)===n);l!==-1&&(r==="before"?(a.splice(l,0,e),i=!0):r==="after"&&(a.splice(l+1,0,e),i=!0))}}}),i}function ome(t,e,n){wu(e.items,r=>{for(const i of r.groups)i.items=i.items.filter(s=>{const o=typeof s=="string"&&!n.has(s);return o&&!e.isUsingDefaultConfig&&Ie("menu-bar-item-unavailable",{menuBarConfig:t,parentMenuConfig:$i(r),componentName:s}),!o})})}function y9(t,e){const n=e.isUsingDefaultConfig;let r=!1;if(e.items=e.items.filter(i=>i.groups.length?!0:(zw(t,i,n),!1)),!e.items.length){zw(t,t,n);return}wu(e.items,i=>{i.groups=i.groups.filter(s=>s.items.length?!0:(r=!0,!1));for(const s of i.groups)s.items=s.items.filter(o=>_9(o)&&!o.groups.length?(zw(t,o,n),r=!0,!1):!0)}),r&&y9(t,e)}function zw(t,e,n){n||Ie("menu-bar-menu-empty",{menuBarConfig:t,emptyMenuConfig:e})}function ame(t,e){const n=e.t,r={File:n({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:n({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:n({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:n({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:n({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:n({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:n({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:n({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:n({string:"Font",id:"MENU_BAR_MENU_FONT"})};wu(t.items,i=>{i.label in r&&(i.label=r[i.label])})}function wu(t,e){if(Array.isArray(t))for(const r of t)n(r);function n(r){e(r);for(const i of r.groups)for(const s of i.items)_9(s)&&n(s)}}function lme(t){return typeof t=="object"&&"menu"in t}function cme(t){return typeof t=="object"&&"group"in t}function ume(t){return t.startsWith("start")?"start":t.startsWith("end")?"end":t.startsWith("after")?"after":"before"}function dme(t){const e=t.match(/^[^:]+:(.+)/);return e?e[1]:null}function b9(t){return typeof t=="string"?t:t.menuId}function _9(t){return typeof t=="object"&&"menuId"in t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hme extends ee{constructor(e){super(e);const n=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",n.to("position",r=>`ck-menu-bar__menu__panel_position_${r}`),n.if("isVisible","ck-hidden",r=>!r)],tabindex:"-1"},children:this.children,on:{selectstart:n.to(r=>{r.target.tagName.toLocaleLowerCase()!=="input"&&r.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kr extends ee{constructor(e){super(e);const n=this.bindTemplate;this.buttonView=new Qfe(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new hme(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new wn,this.focusTracker=new jt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",n.to("class"),n.if("isEnabled","ck-disabled",r=>!r),n.if("parentMenuView","ck-menu-bar__menu_top-level",r=>!r)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Ea.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Ea.openOnButtonClick(this),Ea.openOnArrowRightKey(this),Ea.closeOnArrowLeftKey(this),Ea.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Ea.openAndFocusPanelOnArrowDownKey(this),Ea.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,n)=>{this.fire("arrowright"),n()}),this.keystrokes.set("arrowleft",(e,n)=>{this.fire("arrowleft"),n()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,n,r)=>{if(!r)return;const i=Kr._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=i?i.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:n,northEast:r,northWest:i,westSouth:s,eastSouth:o,westNorth:a,eastNorth:l}=eme;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[o,l,s,a]:[e,n,r,i]:this.parentMenuView?[s,a,o,l]:[n,e,i,r]}}Kr._getOptimalPosition=U0;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kc extends _k{constructor(e){super(e),this.role="menu"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class rr extends Se{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k9 extends ZO{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const JT=["mouseenter","arrowleft","arrowright","change:isOpen"];class fme extends ee{constructor(e){super(e),this.menus=[];const n=e.t;this.set("isOpen",!1),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar"],"aria-label":n("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,n){const r=this.locale,s=rme({normalizedConfig:e,locale:r,componentFactory:n}).items.map(o=>this._createMenu({componentFactory:n,menuDefinition:o}));this.children.addMany(s)}render(){super.render(),ju.toggleMenusAndFocusItemsOnHover(this),ju.closeMenusWhenTheBarCloses(this),ju.closeMenuWhenAnotherOnTheSameLevelOpens(this),ju.focusCycleMenusOnArrows(this),ju.closeOnClickOutside(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}registerMenu(e,n=null){n?(e.delegate(...JT).to(n),e.parentMenuView=n):e.delegate(...JT).to(this,r=>"menu:"+r),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:n,parentMenuView:r}){const i=this.locale,s=new Kr(i);return this.registerMenu(s,r),s.buttonView.set({label:n.label}),s.once("change:isOpen",()=>{const o=new Kc(i);o.ariaLabel=n.label,s.panelView.children.add(o),o.items.addMany(this._createMenuItems({menuDefinition:n,parentMenuView:s,componentFactory:e}))}),s}_createMenuItems({menuDefinition:e,parentMenuView:n,componentFactory:r}){const i=this.locale,s=[];for(const o of e.groups){for(const a of o.items){const l=new gu(i,n);if(ft(a))l.children.add(this._createMenu({componentFactory:r,menuDefinition:a,parentMenuView:n}));else{const c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:r,parentMenuView:n});if(!c)continue;l.children.add(c)}s.push(l)}o!==e.groups[e.groups.length-1]&&s.push(new bk(i))}return s}_createMenuItemContentFromFactory({componentName:e,parentMenuView:n,componentFactory:r}){const i=r.create(e);return i instanceof Kr||i instanceof rr||i instanceof k9?(this._registerMenuTree(i,n),i.on("execute",()=>{this.close()}),i):(Ie("menu-bar-component-unsupported",{componentName:e,componentView:i}),null)}_registerMenuTree(e,n){if(!(e instanceof Kr)){e.delegate("mouseenter").to(n);return}this.registerMenu(e,n);const r=e.panelView.children.filter(s=>s instanceof Kc)[0];if(!r){e.delegate("mouseenter").to(n);return}const i=r.items.filter(s=>s instanceof qc);for(const s of i)this._registerMenuTree(s.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(n,r,i)=>{clearTimeout(e),i?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(s=>s.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mme extends Ufe{constructor(e,n){super(e),this.view=n,this._toolbarConfig=l9(e.config.get("toolbar")),this._menuBarConfig=nme(e.config.get("menuBar")||{}),this._elementReplacer=new Hse,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const n=this.editor,r=this.view,i=n.editing.view,s=r.editable,o=i.document.getRoot();s.name=o.rootName,r.render();const a=s.element;this.setEditableElement(s.name,a),r.editable.bind("isFocused").to(this.focusTracker),i.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),this._initMenuBar(),this._initDialogPluginIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,n=this.editor.editing.view;this._elementReplacer.restore(),n.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:n})=>n||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initMenuBar(){const e=this.view;e.menuBarView&&(this._setupMenuBarBehaviors(e.menuBarView.element),e.menuBarView.fillFromConfig(this._menuBarConfig,this.componentFactory))}_initPlaceholder(){const e=this.editor,n=e.editing.view,r=n.document.getRoot(),i=e.sourceElement;let s;const o=e.config.get("placeholder");o&&(s=typeof o=="string"?o:o[this.view.editable.name]),!s&&i&&i.tagName.toLowerCase()==="textarea"&&(s=i.getAttribute("placeholder")),s&&(r.placeholder=s),ok({view:n,element:r,isDirectHost:!1,keepOnFocus:!0})}_handleScrollToTheSelectionWithStickyPanel(e,n,r){const i=this.view.stickyPanel;if(i.isSticky){const s=new ge(i.element).height;n.viewportOffset.top+=s}else{const s=()=>{this.editor.editing.view.scrollToTheSelection(r)};this.listenTo(i,"change:isSticky",s),setTimeout(()=>{this.stopListening(i,"change:isSticky",s)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,n=this.editor.plugins.get("Dialog");n.on("show",()=>{const r=n.view;r.on("moveTo",(i,s)=>{if(!e.isSticky||r.wasMoved)return;const o=new ge(e.contentPanelElement);s[1]<o.bottom+Yc.defaultOffset&&(s[1]=o.bottom+Yc.defaultOffset)},{priority:"high"})},{priority:"low"})}_setupMenuBarBehaviors(e){const n=this.editor;this.focusTracker.add(e),n.keystrokes.listenTo(e),n.keystrokes.set("Esc",(r,i)=>{e.contains(this.focusTracker.focusedElement)&&(n.editing.view.focus(),i())}),n.keystrokes.set("Alt+F9",(r,i)=>{e.contains(this.focusTracker.focusedElement)||(this.view.menuBarView.focus(),i())})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pme extends Hfe{constructor(e,n,r={}){super(e),this.stickyPanel=new Yfe(e),this.toolbar=new yk(e,{shouldGroupWhenFull:r.shouldToolbarGroupWhenFull}),r.useMenuBar&&(this.menuBarView=new fme(e)),this.editable=new jfe(e,n)}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lf extends ob(Rue){constructor(e,n={}){if(!Km(e)&&n.initialData!==void 0)throw new T("editor-create-initial-data",null);super(n),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",gme(e)),Km(e)&&(this.sourceElement=e),this.model.document.createRoot();const r=!this.config.get("toolbar.shouldNotGroupWhenFull"),i=this.config.get("menuBar"),s=new pme(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:r,useMenuBar:i.isVisible});this.ui=new mme(this,s),Oue(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,n={}){return new Promise(r=>{const i=new this(e,n);r(i.initPlugins().then(()=>i.ui.init(Km(e)?e:null)).then(()=>i.data.init(i.config.get("initialData"))).then(()=>i.fire("ready")).then(()=>i))})}}lf.Context=Q8;lf.EditorWatchdog=ek;lf.ContextWatchdog=C8;function gme(t){return Km(t)?Kse(t):t}function Km(t){return ll(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tk extends He{constructor(e,n){super(e),this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,i=n.document.selection,s=e.forceValue===void 0?!this.value:e.forceValue;n.change(o=>{if(i.isCollapsed)s?o.setSelectionAttribute(this.attributeKey,!0):o.removeSelectionAttribute(this.attributeKey);else{const a=n.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const l of a)s?o.setAttribute(this.attributeKey,s,l):o.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,n=e.schema,r=e.document.selection;if(r.isCollapsed)return r.hasAttribute(this.attributeKey);for(const i of r.getRanges())for(const s of i.getItems())if(n.checkAttribute(s,this.attributeKey))return s.hasAttribute(this.attributeKey);return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const $l="bold";class wme extends L{static get pluginName(){return"BoldEditing"}init(){const e=this.editor,n=this.editor.t;e.model.schema.extend("$text",{allowAttributes:$l}),e.model.schema.setAttributeProperties($l,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:$l,view:"strong",upcastAlso:["b",r=>{const i=r.getStyle("font-weight");return i&&(i=="bold"||Number(i)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add($l,new Tk(e,$l)),e.keystrokes.set("CTRL+B",$l),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Bold text"),keystroke:"CTRL+B"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pk({editor:t,commandName:e,plugin:n,icon:r,label:i,keystroke:s}){return o=>{const a=t.commands.get(e),l=new o(t.locale);return l.set({label:i,icon:r,keystroke:s,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),n.listenTo(l,"execute",()=>{t.execute(e),t.editing.view.focus()}),l}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const um="bold";class vme extends L{static get pluginName(){return"BoldUI"}init(){const e=this.editor,n=e.locale.t,r=e.commands.get(um),i=Pk({editor:e,commandName:um,plugin:this,icon:pe.bold,label:n("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(um,()=>{const s=i(Se);return s.set({tooltip:!0}),s.bind("isOn").to(r,"value"),s}),e.ui.componentFactory.add("menuBar:"+um,()=>i(rr))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E9 extends L{static get requires(){return[wme,vme]}static get pluginName(){return"Bold"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C9{constructor(e,n=20){this._batch=null,this.model=e,this._size=0,this.limit=n,this._isLocked=!1,this._changeCallback=(r,i)=>{i.isLocal&&i.isUndoable&&i!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yme extends He{constructor(e,n){super(e),this._buffer=new C9(e.model,n),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const n=this.editor.model,r=n.document,i=e.text||"",s=i.length;let o=r.selection;if(e.selection?o=e.selection:e.range&&(o=n.createSelection(e.range)),!n.canEditAt(o))return;const a=e.resultRange;n.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();const c=Array.from(r.selection.getAttributes());n.deleteContent(o),i&&n.insertContent(l.createText(i,c),o),a?l.setSelection(a):o.is("documentSelection")||l.setSelection(o),this._buffer.unlock(),this._buffer.input(s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const XT=["insertText","insertReplacementText"];class bme extends hs{constructor(e){super(e),this.focusObserver=e.getObserver(ug),me.isAndroid&&XT.push("insertCompositionText");const n=e.document;n.on("beforeinput",(r,i)=>{if(!this.isEnabled)return;const{data:s,targetRanges:o,inputType:a,domEvent:l}=i;if(!XT.includes(a))return;this.focusObserver.flush();const c=new io(n,"insertText");n.fire(c,new Wc(e,l,{text:s,selection:e.createSelection(o)})),c.stop.called&&r.stop()}),n.on("compositionend",(r,{data:i,domEvent:s})=>{!this.isEnabled||me.isAndroid||i&&n.fire("insertText",new Wc(e,s,{text:i,selection:n.selection}))},{priority:"lowest"})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x9 extends L{static get pluginName(){return"Input"}init(){const e=this.editor,n=e.model,r=e.editing.view,i=n.document.selection;r.addObserver(bme);const s=new yme(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",s),e.commands.add("input",s),this.listenTo(r.document,"insertText",(o,a)=>{r.document.isComposing||a.preventDefault();const{text:l,selection:c,resultRange:u}=a,d=Array.from(c.getRanges()).map(p=>e.editing.mapper.toModelRange(p));let h=l;if(me.isAndroid){const p=Array.from(d[0].getItems()).reduce((g,_)=>g+(_.is("$textProxy")?_.data:""),"");p&&(p.length<=h.length?h.startsWith(p)&&(h=h.substring(p.length),d[0].start=d[0].start.getShiftedBy(p.length)):p.startsWith(h)&&(d[0].start=d[0].start.getShiftedBy(h.length),h=""))}const f={text:h,selection:n.createSelection(d)};u&&(f.resultRange=e.editing.mapper.toModelRange(u)),e.execute("insertText",f),r.scrollToTheSelection()}),me.isAndroid?this.listenTo(r.document,"keydown",(o,a)=>{i.isCollapsed||a.keyCode!=229||!r.document.isComposing||QT(n,s)}):this.listenTo(r.document,"compositionstart",()=>{i.isCollapsed||QT(n,s)})}}function QT(t,e){if(!e.isEnabled)return;const n=e.buffer;n.lock(),t.enqueueChange(n.batch,()=>{t.deleteContent(t.document.selection)}),n.unlock()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class eP extends He{constructor(e,n){super(e),this.direction=n,this._buffer=new C9(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const n=this.editor.model,r=n.document;n.enqueueChange(this._buffer.batch,i=>{this._buffer.lock();const s=i.createSelection(e.selection||r.selection);if(!n.canEditAt(s))return;const o=e.sequence||1,a=s.isCollapsed;if(s.isCollapsed&&n.modifySelection(s,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(o)){this._replaceEntireContentWithParagraph(i);return}if(this._shouldReplaceFirstBlockWithParagraph(s,o)){this.editor.execute("paragraph",{selection:s});return}if(s.isCollapsed)return;let l=0;s.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=qy(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),n.deleteContent(s,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),i.setSelection(s),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const n=this.editor.model,i=n.document.selection,s=n.schema.getLimitElement(i);if(!(i.isCollapsed&&i.containsEntireContent(s))||!n.schema.checkChild(s,"paragraph"))return!1;const a=s.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const n=this.editor.model,i=n.document.selection,s=n.schema.getLimitElement(i),o=e.createElement("paragraph");e.remove(e.createRangeIn(s)),e.insert(o,s),e.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(e,n){const r=this.editor.model;if(n>1||this.direction!="backward"||!e.isCollapsed)return!1;const i=e.getFirstPosition(),s=r.schema.getLimitElement(i),o=s.getChild(0);return!(i.parent!=o||!e.containsEntireContent(o)||!r.schema.checkChild(s,"paragraph")||o.name=="paragraph")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const _me="character",tP="word",kme="codePoint",Lo="selection",jl="backward",od="forward",S9={deleteContent:{unit:Lo,direction:jl},deleteContentBackward:{unit:kme,direction:jl},deleteWordBackward:{unit:tP,direction:jl},deleteHardLineBackward:{unit:Lo,direction:jl},deleteSoftLineBackward:{unit:Lo,direction:jl},deleteContentForward:{unit:_me,direction:od},deleteWordForward:{unit:tP,direction:od},deleteHardLineForward:{unit:Lo,direction:od},deleteSoftLineForward:{unit:Lo,direction:od}};class Eme extends hs{constructor(e){super(e);const n=e.document;let r=0;n.on("keydown",()=>{r++}),n.on("keyup",()=>{r=0}),n.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:l}=s,c=S9[l];if(!c)return;const u={direction:c.direction,unit:c.unit,sequence:r};u.unit==Lo&&(u.selectionToRemove=e.createSelection(o[0])),l==="deleteContentBackward"&&(me.isAndroid&&(u.sequence=1),xme(o)&&(u.unit=Lo,u.selectionToRemove=e.createSelection(o)));const d=new pu(n,"delete",o[0]);n.fire(d,new Wc(e,a,u)),d.stop.called&&i.stop()}),me.isBlink&&Cme(this)}observe(){}stopObserving(){}}function Cme(t){const e=t.view,n=e.document;let r=null,i=!1;n.on("keydown",(a,{keyCode:l})=>{r=l,i=!1}),n.on("keyup",(a,{keyCode:l,domEvent:c})=>{const u=n.selection,d=t.isEnabled&&l==r&&s(l)&&!u.isCollapsed&&!i;if(r=null,d){const h=u.getFirstRange(),f=new pu(n,"delete",h),p={unit:Lo,direction:o(l),selectionToRemove:u};n.fire(f,new Wc(e,c,p))}}),n.on("beforeinput",(a,{inputType:l})=>{const c=S9[l];s(r)&&c&&c.direction==o(r)&&(i=!0)},{priority:"high"}),n.on("beforeinput",(a,{inputType:l,data:c})=>{r==Ae.delete&&l=="insertText"&&c==""&&a.stop()},{priority:"high"});function s(a){return a==Ae.backspace||a==Ae.delete}function o(a){return a==Ae.backspace?jl:od}}function xme(t){if(t.length!=1||t[0].isCollapsed)return!1;const e=t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let n=0;for(const{nextPosition:r}of e){if(!r.parent.is("$text"))n++;else{const i=r.parent.data,s=r.offset;if(ik(i,s)||sk(i,s)||J8(i,s))continue;n++}if(n>1)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vu extends L{static get pluginName(){return"Delete"}init(){const e=this.editor,n=e.editing.view,r=n.document,i=e.model.document;n.addObserver(Eme),this._undoOnBackspace=!1;const s=new eP(e,"forward");e.commands.add("deleteForward",s),e.commands.add("forwardDelete",s),e.commands.add("delete",new eP(e,"backward")),this.listenTo(r,"delete",(o,a)=>{r.isComposing||a.preventDefault();const{direction:l,sequence:c,selectionToRemove:u,unit:d}=a,h=l==="forward"?"deleteForward":"delete",f={sequence:c};if(d=="selection"){const p=Array.from(u.getRanges()).map(g=>e.editing.mapper.toModelRange(g));f.selection=e.model.createSelection(p)}else f.unit=d;e.execute(h,f),n.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(r,"delete",(o,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),o.stop())},{context:"$capture"}),this.listenTo(i,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Sme extends L{static get requires(){return[x9,vu]}static get pluginName(){return"Typing"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function T9(t,e){let n=t.start;return{text:Array.from(t.getWalker({ignoreElementEnd:!1})).reduce((i,{item:s})=>s.is("$text")||s.is("$textProxy")?i+s.data:(n=e.createPositionAfter(s),""),""),range:e.createRange(n,t.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Tme extends Ue(){constructor(e,n){super(),this.model=e,this.testCallback=n,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const n=this.model.document;this.listenTo(n.selection,"change:range",(r,{directChange:i})=>{if(i){if(!n.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(n,"change:data",(r,i)=>{i.isUndo||!i.isLocal||this._evaluateTextBeforeSelection("data",{batch:i})})}_evaluateTextBeforeSelection(e,n={}){const r=this.model,s=r.document.selection,o=r.createRange(r.createPositionAt(s.focus.parent,0),s.focus),{text:a,range:l}=T9(o,r),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){const u=Object.assign(n,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nP extends L{static get pluginName(){return"TwoStepCaretMovement"}constructor(e){super(e),this._isNextGravityRestorationSkipped=!1,this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,n=e.model,r=e.editing.view,i=e.locale,s=n.document.selection;this.listenTo(r.document,"arrowKey",(o,a)=>{if(!s.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const l=a.keyCode==Ae.arrowright,c=a.keyCode==Ae.arrowleft;if(!l&&!c)return;const u=i.contentLanguageDirection;let d=!1;u==="ltr"&&l||u==="rtl"&&c?d=this._handleForwardMovement(a):d=this._handleBackwardMovement(a),d===!0&&o.stop()},{context:"$text",priority:"highest"}),this.listenTo(s,"change:range",(o,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&Ur(s.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const n=this.attributes,r=this.editor.model,i=r.document.selection,s=i.getFirstPosition();return this._isGravityOverridden||s.isAtStart&&_s(i,n)?!1:Ur(s,n)?(qu(e),_s(i,n)&&Ur(s,n,!0)?Gu(r,n):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const n=this.attributes,r=this.editor.model,i=r.document.selection,s=i.getFirstPosition();return this._isGravityOverridden?(qu(e),this._restoreGravity(),Ur(s,n,!0)?Gu(r,n):dm(r,n,s),!0):s.isAtStart?_s(i,n)?(qu(e),dm(r,n,s),!0):!1:!_s(i,n)&&Ur(s,n,!0)?(qu(e),dm(r,n,s),!0):rP(s,n)?s.isAtEnd&&!_s(i,n)&&Ur(s,n)?(qu(e),dm(r,n,s),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,n=e.model,r=n.document.selection,i=e.editing.view.document;e.editing.view.addObserver(j0);let s=!1;this.listenTo(i,"mousedown",()=>{s=!0}),this.listenTo(i,"selectionChange",()=>{const o=this.attributes;if(!s||(s=!1,!r.isCollapsed)||!_s(r,o))return;const a=r.getFirstPosition();Ur(a,o)&&(a.isAtStart||Ur(a,o,!0)?Gu(n,o):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const n=this.editor.model,r=n.document.selection,i=this.attributes;this.listenTo(n,"insertContent",()=>{const s=r.getFirstPosition();_s(r,i)&&Ur(s,i)&&Gu(n,i)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,n=e.model,r=n.document.selection,i=e.editing.view;let s=!1,o=!1;this.listenTo(i.document,"delete",(a,l)=>{s=l.direction==="backward"},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{if(!s)return;const a=r.getFirstPosition();o=_s(r,this.attributes)&&!rP(a,this.attributes)},{priority:"high"}),this.listenTo(n,"deleteContent",()=>{s&&(s=!1,!o&&e.model.enqueueChange(()=>{const a=r.getFirstPosition();_s(r,this.attributes)&&Ur(a,this.attributes)&&(a.isAtStart||Ur(a,this.attributes,!0)?Gu(n,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function _s(t,e){for(const n of e)if(t.hasAttribute(n))return!0;return!1}function dm(t,e,n){const r=n.nodeBefore;t.change(i=>{if(r){const s=[],o=t.schema.isObject(r)&&t.schema.isInline(r);for(const[a,l]of r.getAttributes())t.schema.checkAttribute("$text",a)&&(!o||t.schema.getAttributeProperties(a).copyFromObject!==!1)&&s.push([a,l]);i.setSelectionAttribute(s)}else i.removeSelectionAttribute(e)})}function Gu(t,e){t.change(n=>{n.removeSelectionAttribute(e)})}function qu(t){t.preventDefault()}function rP(t,e){const n=t.getShiftedBy(-1);return Ur(n,e)}function Ur(t,e,n=!1){const{nodeBefore:r,nodeAfter:i}=t;for(const s of e){const o=r?r.getAttribute(s):void 0,a=i?i.getAttribute(s):void 0;if(!(n&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function J0(t,e,n,r){return r.createRange(iP(t,e,n,!0,r),iP(t,e,n,!1,r))}function iP(t,e,n,r,i){let s=t.textNode||(r?t.nodeBefore:t.nodeAfter),o=null;for(;s&&s.getAttribute(e)==n;)o=s,s=r?s.previousSibling:s.nextSibling;return o?i.createPositionAt(o,r?"before":"after"):t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Pme(t,e,n,r){const i=t.editing.view,s=new Set;i.document.registerPostFixer(o=>{const a=t.model.document.selection;let l=!1;if(a.hasAttribute(e)){const c=J0(a.getFirstPosition(),e,a.getAttribute(e),t.model),u=t.editing.mapper.toViewRange(c);for(const d of u.getItems())d.is("element",n)&&!d.hasClass(r)&&(o.addClass(r,d),s.add(d),l=!0)}return l}),t.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){i.change(l=>{for(const c of s.values())l.removeClass(r,c),s.delete(c)})}})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Fl="italic";class Ame extends L{static get pluginName(){return"ItalicEditing"}init(){const e=this.editor,n=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Fl}),e.model.schema.setAttributeProperties(Fl,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Fl,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Fl,new Tk(e,Fl)),e.keystrokes.set("CTRL+I",Fl),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Italic text"),keystroke:"CTRL+I"}]})}}const Ime='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hm="italic";class Rme extends L{static get pluginName(){return"ItalicUI"}init(){const e=this.editor,n=e.commands.get(hm),r=e.locale.t,i=Pk({editor:e,commandName:hm,plugin:this,icon:Ime,keystroke:"CTRL+I",label:r("Italic")});e.ui.componentFactory.add(hm,()=>{const s=i(Se);return s.set({tooltip:!0}),s.bind("isOn").to(n,"value"),s}),e.ui.componentFactory.add("menuBar:"+hm,()=>i(rr))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P9 extends L{static get requires(){return[Ame,Rme]}static get pluginName(){return"Italic"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yu="underline";class Ome extends L{static get pluginName(){return"UnderlineEditing"}init(){const e=this.editor,n=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Yu}),e.model.schema.setAttributeProperties(Yu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Yu,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(Yu,new Tk(e,Yu)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Underline text"),keystroke:"CTRL+U"}]})}}const Mme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const fm="underline";class Nme extends L{static get pluginName(){return"UnderlineUI"}init(){const e=this.editor,n=e.commands.get(fm),r=e.locale.t,i=Pk({editor:e,commandName:fm,plugin:this,icon:Mme,label:r("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(fm,()=>{const s=i(Se);return s.set({tooltip:!0}),s.bind("isOn").to(n,"value"),s}),e.ui.componentFactory.add("menuBar:"+fm,()=>i(rr))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class A9 extends L{static get requires(){return[Ome,Nme]}static get pluginName(){return"Underline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kh extends bl{constructor(e){super(e),this.domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];const n=this.document;this.listenTo(n,"paste",r("clipboardInput"),{priority:"low"}),this.listenTo(n,"drop",r("clipboardInput"),{priority:"low"}),this.listenTo(n,"dragover",r("dragging"),{priority:"low"});function r(i){return(s,o)=>{o.preventDefault();const a=o.dropRange?[o.dropRange]:null,l=new io(n,i);n.fire(l,{dataTransfer:o.dataTransfer,method:s.name,targetRanges:a,target:o.target,domEvent:o.domEvent}),l.stop.called&&o.stopPropagation()}}}onDomEvent(e){const n="clipboardData"in e?e.clipboardData:e.dataTransfer,r=e.type=="drop"||e.type=="paste",i={dataTransfer:new pO(n,{cacheFiles:r})};(e.type=="drop"||e.type=="dragover")&&(i.dropRange=Dme(this.view,e)),this.fire(e.type,e,i)}}function Dme(t,e){const n=e.target.ownerDocument,r=e.clientX,i=e.clientY;let s;return n.caretRangeFromPoint&&n.caretRangeFromPoint(r,i)?s=n.caretRangeFromPoint(r,i):e.rangeParent&&(s=n.createRange(),s.setStart(e.rangeParent,e.rangeOffset),s.collapse(!0)),s?t.domConverter.domRangeToView(s):null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lme(t){return t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(t.includes("</p><p>")||t.includes("<br>"))&&(t=`<p>${t}</p>`),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function $me(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,n)=>n.length==1?" ":n).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const sP=["figcaption","li"],oP=["ol","ul"];function I9(t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return`
`;let e="",n=null;for(const r of t.getChildren())e+=Fme(r,n)+I9(r),n=r;return e}function Fme(t,e){return e?t.is("element","li")&&!t.isEmpty&&t.getChild(0).is("containerElement")||oP.includes(t.name)&&oP.includes(e.name)?`

`:!t.is("containerElement")&&!e.is("containerElement")?"":sP.includes(t.name)||sP.includes(e.name)?`
`:`

`:""}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R9 extends L{constructor(){super(...arguments),this._markersToCopy=new Map}static get pluginName(){return"ClipboardMarkersUtils"}_registerMarkerToCopy(e,n){this._markersToCopy.set(e,n)}_copySelectedFragmentWithMarkers(e,n,r=i=>i.model.getSelectedContent(i.model.document.selection)){return this.editor.model.change(i=>{const s=i.model.document.selection;i.setSelection(n);const o=this._insertFakeMarkersIntoSelection(i,i.model.document.selection,e),a=r(i),l=this._removeFakeMarkersInsideElement(i,a);for(const[c,u]of Object.entries(o)){l[c]||(l[c]=i.createRangeIn(a));for(const d of u)i.remove(d)}a.markers.clear();for(const[c,u]of Object.entries(l))a.markers.set(c,u);return i.setSelection(s),a})}_pasteMarkersIntoTransformedElement(e,n){const r=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(i=>{const s=this._insertFakeMarkersElements(i,r),o=n(i),a=this._removeFakeMarkersInsideElement(i,o);for(const l of Object.values(s).flat())i.remove(l);for(const[l,c]of Object.entries(a))i.model.markers.has(l)||i.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return o})}_pasteFragmentWithMarkers(e){const n=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const r of n)e.markers.set(r.name,r.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,n,r={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const i=this._markersToCopy.get(e);this._markersToCopy.set(e,r),n(),i?this._markersToCopy.set(e,i):this._markersToCopy.delete(e)}_isMarkerCopyable(e,n){const r=this._getMarkerClipboardConfig(e);if(!r)return!1;if(!n)return!0;const{allowedActions:i}=r;return i==="all"||i.includes(n)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[n]=e.split(":");return this._markersToCopy.get(n)||null}_insertFakeMarkersIntoSelection(e,n,r){const i=this._getCopyableMarkersFromSelection(e,n,r);return this._insertFakeMarkersElements(e,i)}_getCopyableMarkersFromSelection(e,n,r){const i=Array.from(n.getRanges()),s=new Set(i.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),o=a=>{if(!this._isMarkerCopyable(a.name,r))return!1;const{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){const u=a.getRange();return i.some(d=>d.containsRange(u,!0))}return!0};return Array.from(s).filter(o).map(a=>({name:r==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,n=null){const{model:r}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([s,o])=>{if(!this._hasMarkerConfiguration(s))return[{name:s,range:o}];if(this._isMarkerCopyable(s,n)){const a=this._getMarkerClipboardConfig(s),l=r.markers.has(s)&&r.markers.get(s).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(s=this._getUniqueMarkerName(s)),[{name:s,range:o}]}return[]})}_insertFakeMarkersElements(e,n){const r={},i=n.flatMap(s=>{const{start:o,end:a}=s.range;return[{position:o,marker:s,type:"start"},{position:a,marker:s,type:"end"}]}).sort(({position:s},{position:o})=>s.isBefore(o)?1:-1);for(const{position:s,marker:o,type:a}of i){const l=e.createElement("$marker",{"data-name":o.name,"data-type":a});r[o.name]||(r[o.name]=[]),r[o.name].push(l),e.insert(l,s)}return r}_removeFakeMarkersInsideElement(e,n){const i=this._getAllFakeMarkersFromElement(e,n).reduce((s,o)=>{const a=o.markerElement&&e.createPositionBefore(o.markerElement);let l=s[o.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(o.name).duplicateOnPaste?s[this._getUniqueMarkerName(o.name)]=s[o.name]:c=!0,l=null),c||(s[o.name]={...l,[o.type]:a}),o.markerElement&&e.remove(o.markerElement),s},{});return ose(i,s=>new O(s.start||e.createPositionFromPath(n,[0]),s.end||e.createPositionAt(n,"end")))}_getAllFakeMarkersFromElement(e,n){const r=Array.from(e.createRangeIn(n)).flatMap(({item:o})=>{if(!o.is("element","$marker"))return[];const a=o.getAttribute("data-name"),l=o.getAttribute("data-type");return[{markerElement:o,name:a,type:l}]}),i=[],s=[];for(const o of r)o.type==="end"&&(r.some(l=>l.name===o.name&&l.type==="start")||i.push({markerElement:null,name:o.name,type:"start"})),o.type==="start"&&(r.some(l=>l.name===o.name&&l.type==="end")||s.unshift({markerElement:null,name:o.name,type:"end"}));return[...i,...r,...s]}_getUniqueMarkerName(e){const n=e.split(":"),r=ti().substring(1,6);return n.length===3?`${n.slice(0,2).join(":")}:${r}`:`${n.join(":")}:${r}`}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class os extends L{static get pluginName(){return"ClipboardPipeline"}static get requires(){return[R9]}init(){this.editor.editing.view.addObserver(kh),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,n,r){const i=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:r==="cut"},()=>{const s=i._copySelectedFragmentWithMarkers(r,n);this.fire("outputTransformation",{dataTransfer:e,content:s,method:r})})}_setupPasteDrop(){const e=this.editor,n=e.model,r=e.editing.view,i=r.document,s=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(i,"clipboardInput",(o,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(i,"clipboardInput",(o,a)=>{const l=a.dataTransfer;let c;if(a.content)c=a.content;else{let d="";l.getData("text/html")?d=$me(l.getData("text/html")):l.getData("text/plain")&&(d=Lme(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(d)}const u=new io(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&o.stop(),r.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(o.stop(),n.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=s._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,n=e.model.document,i=e.editing.view.document,s=(o,a)=>{const l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,n.selection,o.name)};this.listenTo(i,"copy",s,{priority:"low"}),this.listenTo(i,"cut",(o,a)=>{e.model.canEditAt(e.model.document.selection)?s(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const l=e.data.toView(a.content);i.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(i,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",I9(a.content))),a.method=="cut"&&e.model.deleteContent(n.selection)},{priority:"low"})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function*O9(t,e){for(const n of e)n&&t.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vme extends He{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const n=this.editor.model,r=n.document.selection,i=n.schema,s=r.isCollapsed,o=r.getFirstRange(),a=o.start.parent,l=o.end.parent;if(i.isLimit(a)||i.isLimit(l))return!s&&a==l&&n.deleteContent(r),!1;if(s){const c=O9(e.model.schema,r.getAttributes());return aP(e,o.start),e.setSelectionAttribute(c),!0}else{const c=!(o.start.isAtStart&&o.end.isAtEnd),u=a==l;if(n.deleteContent(r,{leaveUnmerged:c}),c){if(u)return aP(e,r.focus),!0;e.setSelection(l,0)}}return!1}}function aP(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bme={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class M9 extends hs{constructor(e){super(e);const n=this.document;let r=!1;n.on("keydown",(i,s)=>{r=s.shiftKey}),n.on("beforeinput",(i,s)=>{if(!this.isEnabled)return;let o=s.inputType;me.isSafari&&r&&o=="insertParagraph"&&(o="insertLineBreak");const a=s.domEvent,l=Bme[o];if(!l)return;const c=new pu(n,"enter",s.targetRanges[0]);n.fire(c,new Wc(e,a,{isSoft:l.isSoft})),c.stop.called&&i.stop()})}observe(){}stopObserving(){}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ak extends L{static get pluginName(){return"Enter"}init(){const e=this.editor,n=e.editing.view,r=n.document,i=this.editor.t;n.addObserver(M9),e.commands.add("enter",new Vme(e)),this.listenTo(r,"enter",(s,o)=>{r.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),n.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ume extends He{execute(){const e=this.editor.model,n=e.document;e.change(r=>{Hme(e,r,n.selection),this.fire("afterExecute",{writer:r})})}refresh(){const e=this.editor.model,n=e.document;this.isEnabled=zme(e.schema,n.selection)}}function zme(t,e){if(e.rangeCount>1)return!1;const n=e.anchor;if(!n||!t.checkChild(n,"softBreak"))return!1;const r=e.getFirstRange(),i=r.start.parent,s=r.end.parent;return!((hb(i,t)||hb(s,t))&&i!==s)}function Hme(t,e,n){const r=n.isCollapsed,i=n.getFirstRange(),s=i.start.parent,o=i.end.parent,a=s==o;if(r){const l=O9(t.schema,n.getAttributes());lP(t,e,i.end),e.removeSelectionAttribute(n.getAttributeKeys()),e.setSelectionAttribute(l)}else{const l=!(i.start.isAtStart&&i.end.isAtEnd);t.deleteContent(n,{leaveUnmerged:l}),a?lP(t,e,n.focus):l&&e.setSelection(o,0)}}function lP(t,e,n){const r=e.createElement("softBreak");t.insertContent(r,n),e.setSelection(r,"after")}function hb(t,e){return t.is("rootElement")?!1:e.isLimit(t)||hb(t.parent,e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Wme extends L{static get pluginName(){return"ShiftEnter"}init(){const e=this.editor,n=e.model.schema,r=e.conversion,i=e.editing.view,s=i.document,o=this.editor.t;n.register("softBreak",{allowWhere:"$text",isInline:!0}),r.for("upcast").elementToElement({model:"softBreak",view:"br"}),r.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),i.addObserver(M9),e.commands.add("shiftEnter",new Ume(e)),this.listenTo(s,"enter",(a,l)=>{s.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),i.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jme extends qe(){constructor(){super(...arguments),this._stack=[]}add(e,n){const r=this._stack,i=r[0];this._insertDescriptor(e);const s=r[0];i!==s&&!Hw(i,s)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:s,writer:n})}remove(e,n){const r=this._stack,i=r[0];this._removeDescriptor(e);const s=r[0];i!==s&&!Hw(i,s)&&this.fire("change:top",{oldDescriptor:i,newDescriptor:s,writer:n})}_insertDescriptor(e){const n=this._stack,r=n.findIndex(s=>s.id===e.id);if(Hw(e,n[r]))return;r>-1&&n.splice(r,1);let i=0;for(;n[i]&&Gme(n[i],e);)i++;n.splice(i,0,e)}_removeDescriptor(e){const n=this._stack,r=n.findIndex(i=>i.id===e);r>-1&&n.splice(r,1)}}function Hw(t,e){return t&&e&&t.priority==e.priority&&gg(t.classes)==gg(e.classes)}function Gme(t,e){return t.priority>e.priority?!0:t.priority<e.priority?!1:gg(t.classes)>gg(e.classes)}function gg(t){return Array.isArray(t)?t.sort().join(","):t}const qme='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Yme="ck-widget",cP="ck-widget_selected";function zt(t){return t.is("element")?!!t.getCustomProperty("widget"):!1}function Kme(t,e,n={}){if(!t.is("containerElement"))throw new T("widget-to-widget-wrong-element-type",null,{element:t});return e.setAttribute("contenteditable","false",t),e.addClass(Yme,t),e.setCustomProperty("widget",!0,t),t.getFillerOffset=npe,e.setCustomProperty("widgetLabel",[],t),n.label&&Xme(t,n.label),n.hasSelectionHandle&&rpe(t,e),N9(t,e),t}function Zme(t,e,n){if(e.classes&&n.addClass(st(e.classes),t),e.attributes)for(const r in e.attributes)n.setAttribute(r,e.attributes[r],t)}function Jme(t,e,n){if(e.classes&&n.removeClass(st(e.classes),t),e.attributes)for(const r in e.attributes)n.removeAttribute(r,t)}function N9(t,e,n=Zme,r=Jme){const i=new jme;i.on("change:top",(a,l)=>{l.oldDescriptor&&r(t,l.oldDescriptor,l.writer),l.newDescriptor&&n(t,l.newDescriptor,l.writer)});const s=(a,l,c)=>i.add(l,c),o=(a,l,c)=>i.remove(l,c);e.setCustomProperty("addHighlight",s,t),e.setCustomProperty("removeHighlight",o,t)}function Xme(t,e){t.getCustomProperty("widgetLabel").push(e)}function Qme(t){return t.getCustomProperty("widgetLabel").reduce((n,r)=>typeof r=="function"?n?n+". "+r():r():n?n+". "+r:r,"")}function epe(t,e,n={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],t),e.setAttribute("role","textbox",t),e.setAttribute("tabindex","-1",t),n.label&&e.setAttribute("aria-label",n.label,t),e.setAttribute("contenteditable",t.isReadOnly?"false":"true",t),t.on("change:isReadOnly",(r,i,s)=>{e.setAttribute("contenteditable",s?"false":"true",t)}),t.on("change:isFocused",(r,i,s)=>{s?e.addClass("ck-editor__nested-editable_focused",t):e.removeClass("ck-editor__nested-editable_focused",t)}),N9(t,e),t}function tpe(t,e){const n=t.getSelectedElement();if(n){const r=To(t);if(r)return e.createRange(e.createPositionAt(n,r))}return e.schema.findOptimalInsertionRange(t)}function npe(){return null}function rpe(t,e){const n=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(r){const i=this.toDomElement(r),s=new fs;return s.set("content",qme),s.render(),i.appendChild(s.element),i});e.insert(e.createPositionAt(t,0),n),e.addClass(["ck-widget_with-selection-handle"],t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xs="widget-type-around";function Ca(t,e,n){return!!t&&zt(t)&&!n.isInline(e)}function ipe(t){return t.closest(".ck-widget__type-around__button")}function spe(t){return t.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function ope(t,e){const n=t.closest(".ck-widget");return e.mapDomToView(n)}function To(t){return t.getAttribute(xs)}const ape='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const D9=["before","after"],lpe=new DOMParser().parseFromString(ape,"image/svg+xml").firstChild,uP="ck-widget__type-around_disabled";class cpe extends L{constructor(){super(...arguments),this._currentFakeCaretModelElement=null}static get pluginName(){return"WidgetTypeAround"}static get requires(){return[Ak,vu]}init(){const e=this.editor,n=e.editing.view;this.on("change:isEnabled",(r,i,s)=>{n.change(o=>{for(const a of n.document.roots)s?o.removeClass(uP,a):o.addClass(uP,a)}),s||e.model.change(o=>{o.removeSelectionAttribute(xs)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,n){const r=this.editor,i=r.editing.view,s=r.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);r.execute("insertParagraph",{position:r.model.createPositionAt(e,n),attributes:s}),i.focus(),i.scrollToTheSelection()}_listenToIfEnabled(e,n,r,i){this.listenTo(e,n,(...s)=>{this.isEnabled&&r(...s)},i)}_insertParagraphAccordingToFakeCaretPosition(){const r=this.editor.model.document.selection,i=To(r);if(!i)return!1;const s=r.getSelectedElement();return this._insertParagraph(s,i),!0}_enableTypeAroundUIInjection(){const e=this.editor,n=e.model.schema,r=e.locale.t,i={before:r("Insert paragraph before block"),after:r("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(s,o,a)=>{const l=a.mapper.toViewElement(o.item);l&&Ca(l,o.item,n)&&(upe(a.writer,i,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?r("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,n=e.model,r=n.document.selection,i=n.schema,s=e.editing.view;this._listenToIfEnabled(s.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[zt,"$text"],priority:"high"}),this._listenToIfEnabled(r,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(xs)})}),this._listenToIfEnabled(n.document,"change:data",()=>{const a=r.getSelectedElement();if(a){const l=e.editing.mapper.toViewElement(a);if(Ca(l,a,i))return}e.model.change(l=>{l.removeSelectionAttribute(xs)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{const u=c.writer;if(this._currentFakeCaretModelElement){const p=c.mapper.toViewElement(this._currentFakeCaretModelElement);p&&(u.removeClass(D9.map(o),p),this._currentFakeCaretModelElement=null)}const d=l.selection.getSelectedElement();if(!d)return;const h=c.mapper.toViewElement(d);if(!Ca(h,d,i))return;const f=To(l.selection);f&&(u.addClass(o(f),h),this._currentFakeCaretModelElement=d)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(xs)})});function o(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,n){const r=this.editor,i=r.model,s=i.document.selection,o=i.schema,a=r.editing.view,l=n.keyCode,c=uoe(l,r.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),d=r.editing.mapper.toModelElement(u);let h;Ca(u,d,o)?h=this._handleArrowKeyPressOnSelectedWidget(c):s.isCollapsed?h=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):n.shiftKey||(h=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),h&&(n.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const r=this.editor.model,i=r.document.selection,s=To(i);return r.change(o=>{if(s){if(!(s===(e?"after":"before")))return o.removeSelectionAttribute(xs),!0}else return o.setSelectionAttribute(xs,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const n=this.editor,r=n.model,i=r.schema,s=n.plugins.get("Widget"),o=s._getObjectElementNextToSelection(e),a=n.editing.mapper.toViewElement(o);return Ca(a,o,i)?(r.change(l=>{s._setSelectionOverElement(o),l.setSelectionAttribute(xs,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const n=this.editor,r=n.model,i=r.schema,s=n.editing.mapper,o=r.document.selection,a=e?o.getLastPosition().nodeBefore:o.getFirstPosition().nodeAfter,l=s.toViewElement(a);return Ca(l,a,i)?(r.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(xs,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,n=e.editing.view;this._listenToIfEnabled(n.document,"mousedown",(r,i)=>{const s=ipe(i.domTarget);if(!s)return;const o=spe(s),a=ope(s,n.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,o),i.preventDefault(),r.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,n=e.model.document.selection,r=e.editing.view;this._listenToIfEnabled(r.document,"enter",(i,s)=>{if(i.eventPhase!="atTarget")return;const o=n.getSelectedElement(),a=e.editing.mapper.toViewElement(o),l=e.model.schema;let c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:Ca(a,o,l)&&(this._insertParagraph(o,s.isSoft?"before":"after"),c=!0),c&&(s.preventDefault(),i.stop())},{context:zt})}_enableInsertingParagraphsOnTypingKeystroke(){const n=this.editor.editing.view.document;this._listenToIfEnabled(n,"insertText",(r,i)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(i.selection=n.selection)},{priority:"high"}),me.isAndroid?this._listenToIfEnabled(n,"keydown",(r,i)=>{i.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(n,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const e=this.editor,n=e.editing.view,r=e.model,i=r.schema;this._listenToIfEnabled(n.document,"delete",(s,o)=>{if(s.eventPhase!="atTarget")return;const a=To(r.document.selection);if(!a)return;const l=o.direction,c=r.document.selection.getSelectedElement(),u=a==="before",d=l=="forward";if(u===d)e.execute("delete",{selection:r.createSelection(c,"on")});else{const f=i.getNearestSelectionRange(r.createPositionAt(c,a),l);if(f)if(!f.isCollapsed)r.change(p=>{p.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const p=r.createSelection(f.start);if(r.modifySelection(p,{direction:l}),!p.focus.isEqual(f.start))r.change(g=>{g.setSelection(f),e.execute(d?"deleteForward":"delete")});else{const g=fpe(i,f.start.parent);r.deleteContent(r.createSelection(g,"on"),{doNotAutoparagraph:!0})}}}o.preventDefault(),s.stop()},{context:zt})}_enableInsertContentIntegration(){const e=this.editor,n=this.editor.model,r=n.document.selection;this._listenToIfEnabled(e.model,"insertContent",(i,[s,o])=>{if(o&&!o.is("documentSelection"))return;const a=To(r);if(a)return i.stop(),n.change(l=>{const c=r.getSelectedElement(),u=n.createPositionAt(c,a),d=l.createSelection(u),h=n.insertContent(s,d);return l.setSelection(d),h})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(i,s)=>{const[,o,a={}]=s;if(o&&!o.is("documentSelection"))return;const l=To(r);l&&(a.findOptimalPosition=l,s[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,r=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(i,[s])=>{if(s&&!s.is("documentSelection"))return;To(r)&&i.stop()},{priority:"high"})}}function upe(t,e,n){const r=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(i){const s=this.toDomElement(i);return dpe(s,e),hpe(s),s});t.insert(t.createPositionAt(n,"end"),r)}function dpe(t,e){for(const n of D9){const r=new _r({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:e[n],"aria-hidden":"true"},children:[t.ownerDocument.importNode(lpe,!0)]});t.appendChild(r.render())}}function hpe(t){const e=new _r({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}function fpe(t,e){let n=e;for(const r of e.getAncestors({parentFirst:!0})){if(r.childCount>1||t.isLimit(r))break;n=r}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function mpe(t){const e=t.model;return(n,r)=>{const i=r.keyCode==Ae.arrowup,s=r.keyCode==Ae.arrowdown,o=r.shiftKey,a=e.document.selection;if(!i&&!s)return;const l=s;if(o&&wpe(a,l))return;const c=ppe(t,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(o)return}(c.isCollapsed||gpe(t,c,l))&&(e.change(u=>{const d=l?c.end:c.start;if(o){const h=e.createSelection(a.anchor);h.setFocus(d),u.setSelection(h)}else u.setSelection(d)}),n.stop(),r.preventDefault(),r.stopPropagation())}}}function ppe(t,e,n){const r=t.model;if(n){const i=e.isCollapsed?e.focus:e.getLastPosition(),s=dP(r,i,"forward");if(!s)return null;const o=r.createRange(i,s),a=hP(r.schema,o,"backward");return a?r.createRange(i,a):null}else{const i=e.isCollapsed?e.focus:e.getFirstPosition(),s=dP(r,i,"backward");if(!s)return null;const o=r.createRange(s,i),a=hP(r.schema,o,"forward");return a?r.createRange(a,i):null}}function dP(t,e,n){const r=t.schema,i=t.createRangeIn(e.root),s=n=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:l}of i.getWalker({startPosition:e,direction:n})){if(r.isLimit(a)&&!r.isInline(a))return o;if(l==s&&r.isBlock(a))return null}return null}function hP(t,e,n){const r=n=="backward"?e.end:e.start;if(t.checkChild(r,"$text"))return r;for(const{nextPosition:i}of e.getWalker({direction:n}))if(t.checkChild(i,"$text"))return i;return null}function gpe(t,e,n){const r=t.model,i=t.view.domConverter;if(n){const c=r.createSelection(e.start);r.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=r.createRange(c.focus,e.end))}const s=t.mapper.toViewRange(e),o=i.viewRangeToDom(s),a=ge.getDomRangeRects(o);let l;for(const c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function wpe(t,e){return!t.isCollapsed&&t.isBackward==e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ik extends L{constructor(){super(...arguments),this._previouslySelected=new Set}static get pluginName(){return"Widget"}static get requires(){return[cpe,vu]}init(){const e=this.editor,n=e.editing.view,r=n.document,i=e.t;this.editor.editing.downcastDispatcher.on("selection",(s,o,a)=>{const l=a.writer,c=o.selection;if(c.isCollapsed)return;const u=c.getSelectedElement();if(!u)return;const d=e.editing.mapper.toViewElement(u);zt(d)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(d),{fake:!0,label:Qme(d)})}),this.editor.editing.downcastDispatcher.on("selection",(s,o,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const l=a.writer,c=l.document.selection;let u=null;for(const d of c.getRanges())for(const h of d){const f=h.item;zt(f)&&!ype(f,u)&&(l.addClass(cP,f),this._previouslySelected.add(f),u=f)}},{priority:"low"}),n.addObserver(j0),this.listenTo(r,"mousedown",(...s)=>this._onMousedown(...s)),this.listenTo(r,"arrowKey",(...s)=>{this._handleSelectionChangeOnArrowKeyPress(...s)},{context:[zt,"$text"]}),this.listenTo(r,"arrowKey",(...s)=>{this._preventDefaultOnArrowKeyPress(...s)},{context:"$root"}),this.listenTo(r,"arrowKey",mpe(this.editor.editing),{context:"$text"}),this.listenTo(r,"delete",(s,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),s.stop())},{context:"$root"}),this.listenTo(r,"tab",(s,o)=>{s.eventPhase=="atTarget"&&(o.shiftKey||this._selectFirstNestedEditable()&&(o.preventDefault(),s.stop()))},{context:zt,priority:"low"}),this.listenTo(r,"tab",(s,o)=>{o.shiftKey&&this._selectAncestorWidget()&&(o.preventDefault(),s.stop())},{priority:"low"}),this.listenTo(r,"keydown",(s,o)=>{o.keystroke==Ae.esc&&this._selectAncestorWidget()&&(o.preventDefault(),s.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:i("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:i("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:i("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:i("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:i("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,n){const r=this.editor,i=r.editing.view,s=i.document;let o=n.target;if(n.domEvent.detail>=3){this._selectBlockContent(o)&&n.preventDefault();return}if(vpe(o)||!zt(o)&&(o=o.findAncestor(zt),!o))return;me.isAndroid&&n.preventDefault(),s.isFocused||i.focus();const a=r.editing.mapper.toModelElement(o);this._setSelectionOverElement(a)}_selectBlockContent(e){const n=this.editor,r=n.model,i=n.editing.mapper,s=r.schema,o=i.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=bpe(i.toModelElement(o),r.schema);return a?(r.change(l=>{const c=s.isLimit(a)?null:_pe(l.createPositionAfter(a),s),u=l.createPositionAt(a,0),d=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(u,d))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,n){const r=n.keyCode,i=this.editor.model,s=i.schema,o=i.document.selection,a=o.getSelectedElement(),l=Z8(r,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&s.isObject(a)){const h=c?o.getLastPosition():o.getFirstPosition(),f=s.getNearestSelectionRange(h,c?"forward":"backward");f&&(i.change(p=>{p.setSelection(f)}),n.preventDefault(),e.stop());return}if(!o.isCollapsed&&!n.shiftKey){const h=o.getFirstPosition(),f=o.getLastPosition(),p=h.nodeAfter,g=f.nodeBefore;(p&&s.isObject(p)||g&&s.isObject(g))&&(i.change(_=>{_.setSelection(c?f:h)}),n.preventDefault(),e.stop());return}if(!o.isCollapsed)return;const d=this._getObjectElementNextToSelection(c);if(d&&s.isObject(d)){if(s.isInline(d)&&u)return;this._setSelectionOverElement(d),n.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,n){const r=this.editor.model,i=r.schema,s=r.document.selection.getSelectedElement();s&&i.isObject(s)&&(n.preventDefault(),e.stop())}_handleDelete(e){const r=this.editor.model.document.selection;if(!this.editor.model.canEditAt(r)||!r.isCollapsed)return;const i=this._getObjectElementNextToSelection(e);if(i)return this.editor.model.change(s=>{let o=r.anchor.parent;for(;o.isEmpty;){const a=o;o=a.parent,s.remove(a)}this._setSelectionOverElement(i)}),!0}_setSelectionOverElement(e){this.editor.model.change(n=>{n.setSelection(n.createRangeOn(e))})}_getObjectElementNextToSelection(e){const n=this.editor.model,r=n.schema,i=n.document.selection,s=n.createSelection(i);if(n.modifySelection(s,{direction:e?"forward":"backward"}),s.isEqual(i))return null;const o=e?s.focus.nodeBefore:s.focus.nodeAfter;return o&&r.isObject(o)?o:null}_clearPreviouslySelectedWidgets(e){for(const n of this._previouslySelected)e.removeClass(cP,n);this._previouslySelected.clear()}_selectFirstNestedEditable(){const e=this.editor,r=this.editor.editing.view.document;for(const i of r.selection.getFirstRange().getItems())if(i.is("editableElement")){const s=e.editing.mapper.toModelElement(i);/* istanbul ignore next -- @preserve */if(!s)continue;const o=e.model.createPositionAt(s,0),a=e.model.schema.getNearestSelectionRange(o,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){const e=this.editor,n=e.editing.mapper,i=e.editing.view.document.selection.getFirstPosition().parent,o=(i.is("$text")?i.parent:i).findAncestor(zt);if(!o)return!1;const a=n.toModelElement(o);/* istanbul ignore next -- @preserve */return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}}function vpe(t){let e=t;for(;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(zt(e))return!1;e=e.parent}return!1}function ype(t,e){return e?Array.from(t.getAncestors()).includes(e):!1}function bpe(t,e){for(const n of t.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(n,"$text"))return n;if(e.isLimit(n)&&!e.isObject(n))break}return null}function _pe(t,e){const n=new Vs({startPosition:t});for(const{item:r}of n){if(e.isLimit(r)||!r.is("element"))return null;if(e.checkChild(r,"$text"))return r}return null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class fP extends L{constructor(){super(...arguments),this._toolbarDefinitions=new Map}static get requires(){return[pg]}static get pluginName(){return"WidgetToolbarRepository"}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const n=e.plugins.get("BalloonToolbar");this.listenTo(n,"show",r=>{kpe(e.editing.view.document.selection)&&r.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:n,items:r,getRelatedElement:i,balloonClassName:s="ck-toolbar-container"}){if(!r.length){Ie("widget-toolbar-no-items",{toolbarId:e});return}const o=this.editor,a=o.t,l=new yk(o.locale);if(l.ariaLabel=n||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new T("widget-toolbar-duplicated",this,{toolbarId:e});const c={view:l,getRelatedElement:i,balloonClassName:s,itemsConfig:r,initialized:!1};o.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{const u=i(o.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,n=null,r=null;for(const i of this._toolbarDefinitions.values()){const s=i.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!s)this._isToolbarInBalloon(i)&&this._hideToolbar(i);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(i)&&this._hideToolbar(i);else{const o=s.getAncestors().length;o>e&&(e=o,n=s,r=i)}}r&&this._showToolbar(r,n)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,n){this._isToolbarVisible(e)?mP(this.editor,n):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:L9(this.editor,n),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const r of this._toolbarDefinitions.values())if(this._isToolbarVisible(r)){const i=r.getRelatedElement(this.editor.editing.view.document.selection);mP(this.editor,i)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function mP(t,e){const n=t.plugins.get("ContextualBalloon"),r=L9(t,e);n.updatePosition(r)}function L9(t,e){const n=t.editing.view,r=An.defaultPositions;return{target:n.domConverter.mapViewToDom(e),positions:[r.northArrowSouth,r.northArrowSouthWest,r.northArrowSouthEast,r.southArrowNorth,r.southArrowNorthWest,r.southArrowNorthEast,r.viewportStickyNorth]}}function kpe(t){const e=t.getSelectedElement();return!!(e&&zt(e))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Epe extends Ue(){constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,n,r){const i=new ge(n);this.activeHandlePosition=Tpe(e),this._referenceCoordinates=xpe(n,Ppe(this.activeHandlePosition)),this._originalWidth=i.width,this._originalHeight=i.height,this._aspectRatio=i.width/i.height;const s=r.style.width;s&&s.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(s):this._originalWidthPercents=Cpe(r,i)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function Cpe(t,e){const n=t.parentElement;let r=parseFloat(n.ownerDocument.defaultView.getComputedStyle(n).width);const i=5;let s=0,o=n;for(;isNaN(r);){if(o=o.parentElement,++s>i)return 0;r=parseFloat(n.ownerDocument.defaultView.getComputedStyle(o).width)}return e.width/r*100}function xpe(t,e){const n=new ge(t),r=e.split("-"),i={x:r[1]=="right"?n.right:n.left,y:r[0]=="bottom"?n.bottom:n.top};return i.x+=t.ownerDocument.defaultView.scrollX,i.y+=t.ownerDocument.defaultView.scrollY,i}function Spe(t){return`ck-widget__resizer__handle-${t}`}function Tpe(t){const e=["top-left","top-right","bottom-right","bottom-left"];for(const n of e)if(t.classList.contains(Spe(n)))return n}function Ppe(t){const e=t.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[e[0]]}-${n[e[1]]}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ape extends ee{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",n=>n?`ck-orientation-${n}`:"")],style:{display:e.if("_isVisible","none",n=>!n)}},children:[{text:e.to("_label")}]})}_bindToState(e,n){this.bind("_isVisible").to(n,"proposedWidth",n,"proposedHeight",(r,i)=>r!==null&&i!==null),this.bind("_label").to(n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",n,"proposedWidthPercents",(r,i,s)=>e.unit==="px"?`${r}×${i}`:`${s}%`),this.bind("_viewPosition").to(n,"activeHandlePosition",n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",(r,i,s)=>i<50||s<50?"above-center":r)}_dismiss(){this.unbind(),this._isVisible=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class pP extends Ue(){constructor(e){super(),this._viewResizerWrapper=null,this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(n,r)=>n&&r),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",n=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),n.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(n=>{n.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(n=>{n.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,n=this._options.viewElement;this._options.editor.editing.view.change(i=>{const s=i.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(o){const a=this.toDomElement(o);return e._appendHandles(a),e._appendSizeUI(a),a});i.insert(i.createPositionAt(n,"end"),s),i.addClass("ck-widget_with-resizer",n),this._viewResizerWrapper=s,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new Epe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const n=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{const u=this._options.unit||"%",d=(u==="%"?n.widthPercents:n.width)+u;c.setStyle("width",d,this._options.viewElement)});const i=this._getHandleHost(),s=new ge(i),o=Math.round(s.width),a=Math.round(s.height),l=new ge(i);n.width=Math.round(l.width),n.height=Math.round(l.height),this.redraw(s),this.state.update({...n,handleHostWidth:o,handleHostHeight:a})}commit(){const e=this._options.unit||"%",n=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(n)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const n=this._domResizerWrapper;if(!Ope(n))return;const r=n.parentElement,i=this._getHandleHost(),s=this._viewResizerWrapper,o=[s.getStyle("width"),s.getStyle("height"),s.getStyle("left"),s.getStyle("top")];let a;if(r.isSameNode(i)){const l=e||new ge(i);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[i.offsetWidth+"px",i.offsetHeight+"px",i.offsetLeft+"px",i.offsetTop+"px"];xn(o,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},s)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(n=>{n.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const n=this.state,r=Rpe(e),i=this._options.isCentered?this._options.isCentered(this):!0,s={x:n._referenceCoordinates.x-(r.x+n.originalWidth),y:r.y-n.originalHeight-n._referenceCoordinates.y};i&&n.activeHandlePosition.endsWith("-right")&&(s.x=r.x-(n._referenceCoordinates.x+n.originalWidth)),i&&(s.x*=2);let o=Math.abs(n.originalWidth+s.x),a=Math.abs(n.originalHeight+s.y);return(o/n.aspectRatio>a?"width":"height")=="width"?a=o/n.aspectRatio:o=a*n.aspectRatio,{width:Math.round(o),height:Math.round(a),widthPercents:Math.min(Math.round(n.originalWidthPercents/n.originalWidth*o*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const n=["top-left","top-right","bottom-right","bottom-left"];for(const r of n)e.appendChild(new _r({tag:"div",attributes:{class:`ck-widget__resizer__handle ${Ipe(r)}`}}).render())}_appendSizeUI(e){this._sizeView=new Ape,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function Ipe(t){return`ck-widget__resizer__handle-${t}`}function Rpe(t){return{x:t.pageX,y:t.pageY}}function Ope(t){return t&&t.ownerDocument&&t.ownerDocument.contains(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ww extends L{constructor(){super(...arguments),this._resizers=new Map}static get pluginName(){return"WidgetResize"}init(){const e=this.editor.editing,n=Q.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(j0),this._observer=new(Mr()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(n,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(n,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=ch(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[i,s]of this._resizers)i.isAttached()||(this._resizers.delete(i),s.destroy())},{priority:"lowest"}),this._observer.listenTo(Q.window,"resize",this._redrawSelectedResizerThrottled);const r=this.editor.editing.view.document.selection;r.on("change",()=>{const i=r.getSelectedElement(),s=this.getResizerByViewElement(i)||null;s?this.select(s):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const n=new pP(e),r=this.editor.plugins;if(n.attach(),r.has("WidgetToolbarRepository")){const o=r.get("WidgetToolbarRepository");n.on("begin",()=>{o.forceDisabled("resize")},{priority:"lowest"}),n.on("cancel",()=>{o.clearForceDisabled("resize")},{priority:"highest"}),n.on("commit",()=>{o.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,n);const s=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(s)==n&&this.select(n),n}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const n of this._resizers.values())if(n.containsHandle(e))return n}_mouseDownListener(e,n){const r=n.domTarget;pP.isResizeHandle(r)&&(this._activeResizer=this._getResizerByHandle(r)||null,this._activeResizer&&(this._activeResizer.begin(r),e.stop(),n.preventDefault()))}_mouseMoveListener(e,n){this._activeResizer&&this._activeResizer.updateSize(n)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 *//* istanbul ignore file -- @preserve */const jw=mu("px");class Mpe extends ee{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",n=>!n)],style:{left:e.to("left",n=>jw(n)),top:e.to("top",n=>jw(n)),width:e.to("width",n=>jw(n))}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class mm extends L{constructor(){super(...arguments),this.removeDropMarkerDelayed=rk(()=>this.removeDropMarker(),40),this._updateDropMarkerThrottled=ch(e=>this._updateDropMarker(e),40),this._reconvertMarkerThrottled=ch(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0),this._dropTargetLineView=new Mpe,this._domEmitter=new(Mr()),this._scrollables=new Map}static get pluginName(){return"DragDropTarget"}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,n,r,i,s,o){this.removeDropMarkerDelayed.cancel();const a=gP(this.editor,e,n,r,i,s,o);/* istanbul ignore next -- @preserve */if(a){if(o&&o.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,n,r,i,s,o){const a=gP(this.editor,e,n,r,i,s,o);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(n=>{n.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(n,{writer:r})=>{if(e.model.schema.checkChild(n.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(r);n.markerRange.isCollapsed?this._updateDropTargetLine(n.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const n=this.editor,r=n.model.markers;n.model.change(i=>{r.has("drop-target")?r.get("drop-target").getRange().isEqual(e)||i.updateMarker("drop-target",{range:e}):i.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(n){const r=this.toDomElement(n);return r.append("⁠",n.createElement("span"),"⁠"),r})}_updateDropTargetLine(e){const n=this.editor.editing,r=e.start.nodeBefore,i=e.start.nodeAfter,s=e.start.parent,o=r?n.mapper.toViewElement(r):null,a=o?n.view.domConverter.mapViewToDom(o):null,l=i?n.mapper.toViewElement(i):null,c=l?n.view.domConverter.mapViewToDom(l):null,u=n.mapper.toViewElement(s);if(!u)return;const d=n.view.domConverter.mapViewToDom(u),h=this._getScrollableRect(u),{scrollX:f,scrollY:p}=Q.window,g=a?new ge(a):null,_=c?new ge(c):null,v=new ge(d).excludeScrollbarsAndBorders(),w=g?g.bottom:v.top,b=_?_.top:v.bottom,k=Q.window.getComputedStyle(d),S=w<=b?(w+b)/2:b;if(h.top<S&&S<h.bottom){const C=v.left+parseFloat(k.paddingLeft),E=v.right-parseFloat(k.paddingRight),x=Math.max(C+f,h.left),A=Math.min(E+f,h.right);this._dropTargetLineView.set({isVisible:!0,left:x,top:S+p,width:A-x})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const n=e.root.rootName;let r;if(this._scrollables.has(n))r=this._scrollables.get(n).domElement;else{const i=this.editor.editing.view.domConverter.mapViewToDom(e);r=Dpe(i),this._domEmitter.listenTo(r,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const s=new tf(r,this._reconvertMarkerThrottled);this._scrollables.set(n,{domElement:r,resizeObserver:s})}return new ge(r).excludeScrollbarsAndBorders()}}function gP(t,e,n,r,i,s,o){const a=t.model,l=t.editing.mapper;let u=wP(t,e);for(;u;){if(!s){if(a.schema.checkChild(u,"$text")){if(n){const d=n[0].start,h=l.toModelPosition(d);if(!o||Array.from(o.getItems()).every(p=>a.schema.checkChild(h,p))){if(a.schema.checkChild(h,"$text"))return a.createRange(h);if(d)return pm(t,wP(t,d.parent),r,i)}}}else if(a.schema.isInline(u))return pm(t,u,r,i)}if(a.schema.isBlock(u))return pm(t,u,r,i);if(a.schema.checkChild(u,"$block")){const d=Array.from(u.getChildren()).filter(p=>p.is("element")&&!Npe(t,p));let h=0,f=d.length;if(f==0)return a.createRange(a.createPositionAt(u,"end"));for(;h<f-1;){const p=Math.floor((h+f)/2);$9(t,d[p],r,i)=="before"?f=p:h=p}return pm(t,d[h],r,i)}u=u.parent}return null}function Npe(t,e){const n=t.editing.mapper,r=t.editing.view.domConverter,i=n.toViewElement(e);if(!i)return!0;const s=r.mapViewToDom(i);return Q.window.getComputedStyle(s).float!="none"}function pm(t,e,n,r){const i=t.model;return i.createRange(i.createPositionAt(e,$9(t,e,n,r)))}function $9(t,e,n,r){const i=t.editing.mapper,s=t.editing.view.domConverter,o=i.toViewElement(e),a=s.mapViewToDom(o),l=new ge(a);return t.model.schema.isInline(e)?n<(l.left+l.right)/2?"before":"after":r<(l.top+l.bottom)/2?"before":"after"}function wP(t,e){const n=t.editing.mapper,r=t.editing.view,i=n.toModelElement(e);if(i)return i;const s=r.createPositionBefore(e),o=n.findMappedViewAncestor(s);return n.toModelElement(o)}function Dpe(t){let e=t;do{e=e.parentElement;const n=Q.window.getComputedStyle(e).overflowY;if(n=="auto"||n=="scroll")break}while(e.tagName!="BODY");return e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lpe extends L{constructor(){super(...arguments),this._isBlockDragging=!1,this._domEmitter=new(Mr())}static get pluginName(){return"DragDropBlockToolbar"}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(n,r,i)=>{i?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),me.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const r=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(r,"dragstart",(i,s)=>this._handleBlockDragStart(s)),this._domEmitter.listenTo(Q.document,"dragover",(i,s)=>this._handleBlockDragging(s)),this._domEmitter.listenTo(Q.document,"drop",(i,s)=>this._handleBlockDragging(s)),this._domEmitter.listenTo(Q.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&r.setAttribute("draggable","true"),this.on("change:isEnabled",(i,s,o)=>{r.setAttribute("draggable",o?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const n=this.editor.model,r=n.document.selection,i=this.editor.editing.view,s=Array.from(r.getSelectedBlocks()),o=n.createRange(n.createPositionBefore(s[0]),n.createPositionAfter(s[s.length-1]));n.change(a=>a.setSelection(o)),this._isBlockDragging=!0,i.focus(),i.getObserver(kh).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const n=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),r=e.clientY,i=document.elementFromPoint(n,r),s=this.editor.editing.view;!i||!i.closest(".ck-editor__editable")||s.getObserver(kh).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:i,clientX:n,clientY:r,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $pe extends L{constructor(){super(...arguments),this._clearDraggableAttributesDelayed=rk(()=>this._clearDraggableAttributes(),40),this._blockMode=!1,this._domEmitter=new(Mr())}static get pluginName(){return"DragDrop"}static get requires(){return[os,Ik,mm,Lpe]}init(){const e=this.editor,n=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,n.addObserver(kh),n.addObserver(j0),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(r,i,s)=>{s?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(r,i,s)=>{s||this._finalizeDragging(!1)}),me.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,n=e.model,r=e.editing.view,i=r.document,s=e.plugins.get(mm);this.listenTo(i,"dragstart",(o,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=ti(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const l=n.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");const{dataTransfer:u,domTarget:d,domEvent:h}=a,{clientX:f}=h;this._updatePreview({dataTransfer:u,domTarget:d,clientX:f}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(i,"dragend",(o,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(Q.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(i,"dragenter",()=>{this.isEnabled&&r.focus()}),this.listenTo(i,"dragleave",()=>{s.removeDropMarkerDelayed()}),this.listenTo(i,"dragging",(o,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:l,clientY:c}=a.domEvent;s.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),me.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),o.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,r=e.editing.view.document,i=e.plugins.get(mm);this.listenTo(r,"clipboardInput",(s,o)=>{if(o.method!="drop")return;const{clientX:a,clientY:l}=o.domEvent,c=i.getFinalDropRange(o.target,o.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),s.stop();return}if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),vP(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),s.stop();return}o.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(os);e.on("contentInsertion",(n,r)=>{if(!this.isEnabled||r.method!=="drop")return;const i=r.targetRanges.map(s=>this.editor.editing.mapper.toModelRange(s));this.editor.model.change(s=>s.setSelection(i))},{priority:"high"}),e.on("contentInsertion",(n,r)=>{if(!this.isEnabled||r.method!=="drop")return;const i=vP(r.dataTransfer)=="move",s=!r.resultRange||!r.resultRange.isCollapsed;this._finalizeDragging(s&&i)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,n=e.editing.view,r=n.document;this.listenTo(r,"mousedown",(i,s)=>{if(me.isAndroid||!s)return;this._clearDraggableAttributesDelayed.cancel();let o=yP(s.target);if(me.isBlink&&!e.isReadOnly&&!o&&!r.selection.isCollapsed){const a=r.selection.getSelectedElement();(!a||!zt(a))&&(o=r.selection.editableElement)}o&&(n.change(a=>{a.setAttribute("draggable","true",o)}),this._draggableElement=e.editing.mapper.toModelElement(o))}),this.listenTo(r,"mouseup",()=>{me.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(n=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&n.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const n=this.editor,r=n.model;n.plugins.get(mm).removeDropMarker(),this._clearDraggableAttributes(),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&r.change(s=>{const o=r.createSelection(this._draggedRange);r.deleteContent(o,{doNotAutoparagraph:!0});const a=o.getFirstPosition().parent;a.isEmpty&&!r.schema.checkChild(a,"$text")&&r.schema.checkChild(a,"paragraph")&&s.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const n=this.editor,r=n.model,i=r.document.selection,s=e?yP(e):null;if(s){const c=n.editing.mapper.toModelElement(s);this._draggedRange=Gr.fromRange(r.createRangeOn(c)),this._blockMode=r.schema.isBlock(c),n.plugins.has("WidgetToolbarRepository")&&n.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(i.isCollapsed&&!i.getFirstPosition().parent.isEmpty)return;const o=Array.from(i.getSelectedBlocks()),a=i.getFirstRange();if(o.length==0){this._draggedRange=Gr.fromRange(a);return}const l=F9(r,o);if(o.length>1)this._draggedRange=Gr.fromRange(l),this._blockMode=!0;else if(o.length==1){const c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=Gr.fromRange(c?l:a),this._blockMode=c}r.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:n,clientX:r}){const i=this.editor.editing.view,s=i.document.selection.editableElement,o=i.domConverter.mapViewToDom(s),a=Q.window.getComputedStyle(o);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=cr(Q.document,"div",{style:"position: fixed; left: -999999px;"}),Q.document.body.appendChild(this._previewContainer));const l=new ge(o);if(o.contains(n))return;const c=parseFloat(a.paddingLeft),u=cr(Q.document,"div");u.className="ck ck-content",u.style.width=a.width,u.style.paddingLeft=`${l.left-r+c}px`,me.isiOS&&(u.style.backgroundColor="white"),u.innerHTML=e.getData("text/html"),e.setDragImage(u,0,0),this._previewContainer.appendChild(u)}}function vP(t){return me.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function yP(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(zt);if(zt(t))return t;const e=t.findAncestor(n=>zt(n)||n.is("editableElement"));return zt(e)?e:null}function F9(t,e){const n=e[0],r=e[e.length-1],i=n.getCommonAncestor(r),s=t.createPositionBefore(n),o=t.createPositionAfter(r);if(i&&i.is("element")&&!t.schema.isLimit(i)){const a=t.createRangeOn(i),l=s.isTouching(a.start),c=o.isTouching(a.end);if(l&&c)return F9(t,[i])}return t.createRange(s,o)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fpe extends L{static get pluginName(){return"PastePlainText"}static get requires(){return[os]}init(){const e=this.editor,n=e.model,r=e.editing.view,i=r.document,s=n.document.selection;let o=!1;r.addObserver(kh),this.listenTo(i,"keydown",(a,l)=>{o=l.shiftKey}),e.plugins.get(os).on("contentInsertion",(a,l)=>{!o&&!Vpe(l.content,n.schema)||n.change(c=>{const u=Array.from(s.getAttributes()).filter(([h])=>n.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0}),u.push(...s.getAttributes());const d=c.createRangeIn(l.content);for(const h of d.getItems())h.is("$textProxy")&&c.setAttributes(u,h)})})}}function Vpe(t,e){if(t.childCount>1)return!1;const n=t.getChild(0);return e.isObject(n)?!1:Array.from(n.getAttributeKeys()).length==0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bpe extends L{static get pluginName(){return"Clipboard"}static get requires(){return[R9,os,$pe,Fpe]}init(){const e=this.editor,n=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Copy selected content"),keystroke:"CTRL+C"},{label:n("Paste content"),keystroke:"CTRL+V"},{label:n("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Upe extends He{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,n=e.document.selection;let r=e.schema.getLimitElement(n);if(n.containsEntireContent(r)||!bP(e.schema,r))do if(r=r.parent,!r)return;while(!bP(e.schema,r));e.change(i=>{i.setSelection(r,"in")})}}function bP(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const zpe=nf("Ctrl+A");class Hpe extends L{static get pluginName(){return"SelectAllEditing"}init(){const e=this.editor,n=e.t,i=e.editing.view.document;e.commands.add("selectAll",new Upe(e)),this.listenTo(i,"keydown",(s,o)=>{Hc(o)===zpe&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Select all"),keystroke:"CTRL+A"}]})}}const Wpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jpe extends L{static get pluginName(){return"SelectAllUI"}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const n=this._createButton(Se);return n.set({tooltip:!0}),n}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(rr))}_createButton(e){const n=this.editor,r=n.locale,i=n.commands.get("selectAll"),s=new e(n.locale),o=r.t;return s.set({label:o("Select all"),icon:Wpe,keystroke:"Ctrl+A"}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>{n.execute("selectAll"),n.editing.view.focus()}),s}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Gpe extends L{static get requires(){return[Hpe,jpe]}static get pluginName(){return"SelectAll"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V9 extends He{constructor(e){super(e),this._stack=[],this._createdBatches=new WeakSet,this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(n,r)=>{r[1]={...r[1]};const i=r[1];i.batchType||(i.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(n,r)=>{r[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const n=this.editor.model.document.selection,r={ranges:n.hasOwnRange?Array.from(n.getRanges()):[],isBackward:n.isBackward};this._stack.push({batch:e,selection:r}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,n,r){const i=this.editor.model,s=i.document,o=[],a=e.map(c=>c.getTransformedByOperations(r)),l=a.flat();for(const c of a){const u=c.filter(d=>d.root!=s.graveyard).filter(d=>!Ype(d,l));u.length&&(qpe(u),o.push(u[0]))}o.length&&i.change(c=>{c.setSelection(o,{backward:n})})}_undo(e,n){const r=this.editor.model,i=r.document;this._createdBatches.add(n);const s=e.operations.slice().filter(o=>o.isDocumentOperation);s.reverse();for(const o of s){const a=o.baseVersion+1,l=Array.from(i.history.getOperations(a)),u=wce([o.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let d of u){const h=d.affectedSelectable;h&&!r.canEditAt(h)&&(d=new Zt(d.baseVersion)),n.addOperation(d),r.applyOperation(d),i.history.setOperationAsUndone(o,d)}}}}function qpe(t){t.sort((e,n)=>e.start.isBefore(n.start)?-1:1);for(let e=1;e<t.length;e++){const r=t[e-1].getJoined(t[e],!0);r&&(e--,t.splice(e,2,r))}}function Ype(t,e){return e.some(n=>n!==t&&n.containsRange(t,!0))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Kpe extends V9{execute(e=null){const n=e?this._stack.findIndex(s=>s.batch==e):this._stack.length-1,r=this._stack.splice(n,1)[0],i=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(i,()=>{this._undo(r.batch,i);const s=this.editor.model.document.history.getOperations(r.batch.baseVersion);this._restoreSelection(r.selection.ranges,r.selection.isBackward,s)}),this.fire("revert",r.batch,i),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zpe extends V9{execute(){const e=this._stack.pop(),n=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(n,()=>{const i=e.batch.operations[e.batch.operations.length-1].baseVersion+1,s=this.editor.model.document.history.getOperations(i);this._restoreSelection(e.selection.ranges,e.selection.isBackward,s),this._undo(e.batch,n)}),this.refresh()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Jpe extends L{constructor(){super(...arguments),this._batchRegistry=new WeakSet}static get pluginName(){return"UndoEditing"}init(){const e=this.editor,n=e.t;this._undoCommand=new Kpe(e),this._redoCommand=new Zpe(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(r,i)=>{const s=i[0];if(!s.isDocumentOperation)return;const o=s.batch,a=this._redoCommand.createdBatches.has(o),l=this._undoCommand.createdBatches.has(o);this._batchRegistry.has(o)||(this._batchRegistry.add(o),o.isUndoable&&(a?this._undoCommand.addBatch(o):l||(this._undoCommand.addBatch(o),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(r,i,s)=>{this._redoCommand.addBatch(s)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Undo"),keystroke:"CTRL+Z"},{label:n("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Xpe extends L{static get pluginName(){return"UndoUI"}init(){const e=this.editor,n=e.locale,r=e.t,i=n.uiLanguageDirection=="ltr"?pe.undo:pe.redo,s=n.uiLanguageDirection=="ltr"?pe.redo:pe.undo;this._addButtonsToFactory("undo",r("Undo"),"CTRL+Z",i),this._addButtonsToFactory("redo",r("Redo"),"CTRL+Y",s)}_addButtonsToFactory(e,n,r,i){const s=this.editor;s.ui.componentFactory.add(e,()=>{const o=this._createButton(Se,e,n,r,i);return o.set({tooltip:!0}),o}),s.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(rr,e,n,r,i))}_createButton(e,n,r,i,s){const o=this.editor,a=o.locale,l=o.commands.get(n),c=new e(a);return c.set({label:r,icon:s,keystroke:i}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{o.execute(n),o.editing.view.focus()}),c}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Qpe extends L{static get requires(){return[Jpe,Xpe]}static get pluginName(){return"Undo"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B9 extends L{static get requires(){return[nhe,Bpe,Ak,Gpe,Wme,Sme,Qpe]}static get pluginName(){return"Essentials"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ege extends He{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,n=e.document,r=vn(n.selection.getSelectedBlocks());this.value=!!r&&r.is("element","paragraph"),this.isEnabled=!!r&&_P(r,e.schema)}execute(e={}){const n=this.editor.model,r=n.document,i=e.selection||r.selection;n.canEditAt(i)&&n.change(s=>{const o=i.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&_P(a,n.schema)&&s.rename(a,"paragraph")})}}function _P(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tge extends He{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const n=this.editor.model,r=e.attributes;let i=e.position;n.canEditAt(i)&&n.change(s=>{if(i=this._findPositionToInsertParagraph(i,s),!i)return;const o=s.createElement("paragraph");r&&n.schema.setAllowedAttributes(o,r,s),n.insertContent(o,i),s.setSelection(o,"in")})}_findPositionToInsertParagraph(e,n){const r=this.editor.model;if(r.schema.checkChild(e,"paragraph"))return e;const i=r.schema.findAllowedParent(e,"paragraph");if(!i)return null;const s=e.parent,o=r.schema.checkChild(s,"$text");return s.isEmpty||o&&e.isAtEnd?r.createPositionAfter(s):!s.isEmpty&&o&&e.isAtStart?r.createPositionBefore(s):n.split(e,i).position}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yu extends L{static get pluginName(){return"Paragraph"}init(){const e=this.editor,n=e.model;e.commands.add("paragraph",new ege(e)),e.commands.add("insertParagraph",new tge(e)),n.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(r,{writer:i})=>!yu.paragraphLikeElements.has(r.name)||r.isEmpty?null:i.createElement("paragraph"),view:/.+/,converterPriority:"low"})}}yu.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class nge extends Ue(){constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=n=>{this.loaded=n.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const n=this._reader;return this.total=e.size,new Promise((r,i)=>{n.onload=()=>{const s=n.result;this._data=s,r(s)},n.onerror=()=>{i("error")},n.onabort=()=>{i("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ai extends L{constructor(){super(...arguments),this.loaders=new Nr,this._loadersMap=new Map,this._pendingAction=null}static get pluginName(){return"FileRepository"}static get requires(){return[hg]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,n)=>n?e/n*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return Ie("filerepository-no-upload-adapter"),null;const n=new kP(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(n),this._loadersMap.set(e,n),e instanceof Promise&&n.file.then(r=>{this._loadersMap.set(r,n)}).catch(()=>{}),n.on("change:uploaded",()=>{let r=0;for(const i of this.loaders)r+=i.uploaded;this.uploaded=r}),n.on("change:uploadTotal",()=>{let r=0;for(const i of this.loaders)i.uploadTotal&&(r+=i.uploadTotal);this.uploadTotal=r}),n}destroyLoader(e){const n=e instanceof kP?e:this.getLoader(e);n._destroy(),this.loaders.remove(n),this._loadersMap.forEach((r,i)=>{r===n&&this._loadersMap.delete(i)})}_updatePendingAction(){const e=this.editor.plugins.get(hg);if(this.loaders.length){if(!this._pendingAction){const n=this.editor.t,r=i=>`${n("Upload in progress")} ${parseInt(i)}%.`;this._pendingAction=e.add(r(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",r)}}else e.remove(this._pendingAction),this._pendingAction=null}}class kP extends Ue(){constructor(e,n){super(),this.id=ti(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=n(this),this._reader=new nge,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(r,i)=>i?r/i*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new T("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new T("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const n={};return n.promise=new Promise((r,i)=>{n.rejecter=i,n.isFulfilled=!1,e.then(s=>{n.isFulfilled=!0,r(s)}).catch(s=>{n.isFulfilled=!0,i(s)})}),n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class U9 extends L{static get requires(){return[Ai]}static get pluginName(){return"SimpleUploadAdapter"}init(){const e=this.editor.config.get("simpleUpload");if(e){if(!e.uploadUrl){Ie("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(Ai).createUploadAdapter=n=>new rge(n,e)}}}let rge=class{constructor(e,n){this.loader=e,this.options=n}upload(){return this.loader.file.then(e=>new Promise((n,r)=>{this._initRequest(),this._initListeners(n,r,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.options.uploadUrl,!0),e.responseType="json"}_initListeners(e,n,r){const i=this.xhr,s=this.loader,o=`Couldn't upload file: ${r.name}.`;i.addEventListener("error",()=>n(o)),i.addEventListener("abort",()=>n()),i.addEventListener("load",()=>{const a=i.response;if(!a||a.error)return n(a&&a.error&&a.error.message?a.error.message:o);const l=a.url?{default:a.url}:a.urls;e({...a,urls:l})});/* istanbul ignore else -- @preserve */i.upload&&i.upload.addEventListener("progress",a=>{a.lengthComputable&&(s.uploadTotal=a.total,s.uploaded=a.loaded)})}_sendRequest(e){const n=this.options.headers||{},r=this.options.withCredentials||!1;for(const s of Object.keys(n))this.xhr.setRequestHeader(s,n[s]);this.xhr.withCredentials=r;const i=new FormData;i.append("upload",e),this.xhr.send(i)}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ige extends He{constructor(e,n){super(e),this.modelElements=n}refresh(){const e=vn(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(n=>EP(e,n,this.editor.model.schema))}execute(e){const n=this.editor.model,r=n.document,i=e.value;n.change(s=>{const o=Array.from(r.selection.getSelectedBlocks()).filter(a=>EP(a,i,n.schema));for(const a of o)a.is("element",i)||s.rename(a,i)})}}function EP(t,e,n){return n.checkChild(t.parent,e)&&!n.isObject(t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const CP="paragraph";class sge extends L{static get pluginName(){return"HeadingEditing"}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[yu]}init(){const e=this.editor,n=e.config.get("heading.options"),r=[];for(const i of n)i.model!=="paragraph"&&(e.model.schema.register(i.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(i),r.push(i.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new ige(e,r))}afterInit(){const e=this.editor,n=e.commands.get("enter"),r=e.config.get("heading.options");n&&this.listenTo(n,"afterExecute",(i,s)=>{const o=e.model.document.selection.getFirstPosition().parent;r.some(l=>o.is("element",l.model))&&!o.is("element",CP)&&o.childCount===0&&s.writer.rename(o,CP)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:ea.low+1})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function oge(t){const e=t.t,n={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return t.config.get("heading.options").map(r=>{const i=n[r.title];return i&&i!=r.title&&(r.title=i),r})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class age extends L{static get pluginName(){return"HeadingUI"}init(){const e=this.editor,n=e.t,r=oge(e),i=n("Choose heading"),s=n("Heading");e.ui.componentFactory.add("heading",o=>{const a={},l=new Nr,c=e.commands.get("heading"),u=e.commands.get("paragraph"),d=[c];for(const f of r){const p={type:"button",model:new Sk({label:f.title,class:f.class,role:"menuitemradio",withText:!0})};f.model==="paragraph"?(p.model.bind("isOn").to(u,"value"),p.model.set("commandName","paragraph"),d.push(u)):(p.model.bind("isOn").to(c,"value",g=>g===f.model),p.model.set({commandName:"heading",commandValue:f.model})),l.add(p),a[f.model]=f.title}const h=ho(o);return Ck(h,l,{ariaLabel:s,role:"menu"}),h.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),h.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),h.bind("isEnabled").toMany(d,"isEnabled",(...f)=>f.some(p=>p)),h.buttonView.bind("label").to(c,"value",u,"value",(f,p)=>{const g=p?"paragraph":f;return typeof g=="boolean"||!a[g]?i:a[g]}),h.buttonView.bind("ariaLabel").to(c,"value",u,"value",(f,p)=>{const g=p?"paragraph":f;return typeof g=="boolean"||!a[g]?s:`${a[g]}, ${s}`}),this.listenTo(h,"execute",f=>{const{commandName:p,commandValue:g}=f.source;e.execute(p,g?{value:g}:void 0),e.editing.view.focus()}),h}),e.ui.componentFactory.add("menuBar:heading",o=>{const a=new Kr(o),l=e.commands.get("heading"),c=e.commands.get("paragraph"),u=[l],d=new Kc(o);a.set({class:"ck-heading-dropdown"}),d.set({ariaLabel:n("Heading"),role:"menu"}),a.buttonView.set({label:n("Heading")}),a.panelView.children.add(d);for(const h of r){const f=new gu(o,a),p=new rr(o);f.children.add(p),d.items.add(f),p.set({label:h.title,role:"menuitemradio",class:h.class}),p.bind("ariaChecked").to(p,"isOn"),p.delegate("execute").to(a),p.on("execute",()=>{const g=h.model==="paragraph"?"paragraph":"heading";e.execute(g,{value:h.model}),e.editing.view.focus()}),h.model==="paragraph"?(p.bind("isOn").to(c,"value"),u.push(c)):p.bind("isOn").to(l,"value",g=>g===h.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),a})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class z9 extends L{static get requires(){return[sge,age]}static get pluginName(){return"Heading"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xP=new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);class H9 extends L{constructor(){super(...arguments),this._bodyPlaceholder=new Map}static get pluginName(){return"Title"}static get requires(){return["Paragraph"]}init(){const e=this.editor,n=e.model;n.schema.register("title",{isBlock:!0,allowIn:"$root"}),n.schema.register("title-content",{isBlock:!0,allowIn:"title",allowAttributes:["alignment"]}),n.schema.extend("$text",{allowIn:"title-content"}),n.schema.addAttributeCheck(r=>{if(r.endsWith("title-content $text"))return!1}),e.editing.mapper.on("modelToViewPosition",SP(e.editing.view)),e.data.mapper.on("modelToViewPosition",SP(e.editing.view)),e.conversion.for("downcast").elementToElement({model:"title-content",view:"h1"}),e.conversion.for("downcast").add(r=>r.on("insert:title",(i,s,o)=>{o.consumable.consume(s.item,i.name)})),e.data.upcastDispatcher.on("element:h1",Gw,{priority:"high"}),e.data.upcastDispatcher.on("element:h2",Gw,{priority:"high"}),e.data.upcastDispatcher.on("element:h3",Gw,{priority:"high"}),n.document.registerPostFixer(r=>this._fixTitleContent(r)),n.document.registerPostFixer(r=>this._fixTitleElement(r)),n.document.registerPostFixer(r=>this._fixBodyElement(r)),n.document.registerPostFixer(r=>this._fixExtraParagraph(r)),this._attachPlaceholders(),this._attachTabPressHandling()}getTitle(e={}){const n=e.rootName?e.rootName:void 0,i=this._getTitleElement(n).getChild(0);return this.editor.data.stringify(i,e)}getBody(e={}){const n=this.editor,r=n.data,i=n.model,s=e.rootName?e.rootName:void 0,o=n.model.document.getRoot(s),a=n.editing.view,l=new dk(a.document),c=i.createRangeIn(o),u=l.createDocumentFragment(),d=i.createPositionAfter(o.getChild(0)),h=i.createRange(d,i.createPositionAt(o,"end")),f=new Map;for(const p of i.markers){const g=h.getIntersection(p.getRange());g&&f.set(p.name,g)}return r.mapper.clearBindings(),r.mapper.bindElements(o,u),r.downcastDispatcher.convert(c,f,l,e),l.remove(l.createRangeOn(u.getChild(0))),n.data.processor.toData(u)}_getTitleElement(e){const n=this.editor.model.document.getRoot(e);for(const r of n.getChildren())if(TP(r))return r}_fixTitleContent(e){let n=!1;for(const r of this.editor.model.document.getRootNames()){const i=this._getTitleElement(r);if(!i||i.maxOffset===1)continue;const s=Array.from(i.getChildren());s.shift();for(const o of s)e.move(e.createRangeOn(o),i,"after"),e.rename(o,"paragraph");n=!0}return n}_fixTitleElement(e){let n=!1;const r=this.editor.model;for(const i of this.editor.model.document.getRoots()){const s=Array.from(i.getChildren()).filter(TP),o=s[0],a=i.getChild(0);if(a.is("element","title")){s.length>1&&(PP(s,e,r),n=!0);continue}if(!o&&!xP.has(a.name)){const l=e.createElement("title");e.insert(l,i),e.insertElement("title-content",l),n=!0;continue}xP.has(a.name)?lge(a,e,r):e.move(e.createRangeOn(o),i,0),PP(s,e,r),n=!0}return n}_fixBodyElement(e){let n=!1;for(const r of this.editor.model.document.getRootNames()){const i=this.editor.model.document.getRoot(r);if(i.childCount<2){const s=e.createElement("paragraph");e.insert(s,i,1),this._bodyPlaceholder.set(r,s),n=!0}}return n}_fixExtraParagraph(e){let n=!1;for(const r of this.editor.model.document.getRootNames()){const i=this.editor.model.document.getRoot(r),s=this._bodyPlaceholder.get(r);uge(s,i)&&(this._bodyPlaceholder.delete(r),e.remove(s),n=!0)}return n}_attachPlaceholders(){const e=this.editor,n=e.t,r=e.editing.view,i=e.sourceElement,s=e.config.get("title.placeholder")||n("Type your title"),o=e.config.get("placeholder")||i&&i.tagName.toLowerCase()==="textarea"&&i.getAttribute("placeholder")||n("Type or paste your content here.");e.editing.downcastDispatcher.on("insert:title-content",(l,c,u)=>{const d=u.mapper.toViewElement(c.item);d.placeholder=s,ok({view:r,element:d,keepOnFocus:!0})});const a=new Map;r.document.registerPostFixer(l=>{let c=!1;for(const u of r.document.roots){if(u.isEmpty)continue;const d=u.getChild(1),h=a.get(u.rootName);d!==h&&(h&&(Zy(l,h),l.removeAttribute("data-placeholder",h)),l.setAttribute("data-placeholder",o,d),a.set(u.rootName,d),c=!0),tO(d,!0)&&u.childCount===2&&d.name==="p"?c=eO(l,d)?!0:c:c=Zy(l,d)?!0:c}return c})}_attachTabPressHandling(){const e=this.editor,n=e.model;e.keystrokes.set("TAB",(r,i)=>{n.change(s=>{const o=n.document.selection,a=Array.from(o.getSelectedBlocks());if(a.length===1&&a[0].is("element","title-content")){const c=o.getFirstPosition().root.getChild(1);s.setSelection(c,0),i()}})}),e.keystrokes.set("SHIFT + TAB",(r,i)=>{n.change(s=>{const o=n.document.selection;if(!o.isCollapsed)return;const a=vn(o.getSelectedBlocks()),l=o.getFirstPosition(),c=e.model.document.getRoot(l.root.rootName),u=c.getChild(0),d=c.getChild(1);a===d&&l.isAtStart&&(s.setSelection(u.getChild(0),0),i())})})}}function Gw(t,e,n){const r=e.modelCursor,i=e.viewItem;if(!r.isAtStart||!r.parent.is("element","$root")||!n.consumable.consume(i,{name:!0}))return;const s=n.writer,o=s.createElement("title"),a=s.createElement("title-content");s.append(a,o),s.insert(o,r),n.convertChildren(i,a),n.updateConversionResult(o,e)}function SP(t){return(e,n)=>{const r=n.modelPosition.parent;if(!r.is("element","title"))return;const i=r.parent,s=n.mapper.toViewElement(i);n.viewPosition=t.createPositionAt(s,0),e.stop()}}function TP(t){return t.is("element","title")}function lge(t,e,n){const r=e.createElement("title");e.insert(r,t,"before"),e.insert(t,r,0),e.rename(t,"title-content"),n.schema.removeDisallowedAttributes([t],e)}function PP(t,e,n){let r=!1;for(const i of t)i.index!==0&&(cge(i,e,n),r=!0);return r}function cge(t,e,n){const r=t.getChild(0);if(r.isEmpty){e.remove(t);return}e.move(e.createRangeOn(r),t,"before"),e.rename(r,"paragraph"),e.remove(t),n.schema.removeDisallowedAttributes([r],e)}function uge(t,e){return!(!t||!t.is("element","paragraph")||t.childCount||e.childCount<=2||e.getChild(e.childCount-1)!==t)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dge{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(n=>this._definitions.add(n)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(n,r,i)=>{if(!i.consumable.test(r.item,"attribute:linkHref")||!(r.item.is("selection")||i.schema.isInline(r.item)))return;const s=i.writer,o=s.document.selection;for(const a of this._definitions){const l=s.createAttributeElement("a",a.attributes,{priority:5});a.classes&&s.addClass(a.classes,l);for(const c in a.styles)s.setStyle(c,a.styles[c],l);s.setCustomProperty("link",!0,l),a.callback(r.attributeNewValue)?r.item.is("selection")?s.wrap(o.getFirstRange(),l):s.wrap(i.mapper.toViewRange(r.range),l):s.unwrap(i.mapper.toViewRange(r.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(n,r,{writer:i,mapper:s})=>{const o=s.toViewElement(r.item),a=Array.from(o.getChildren()).find(l=>l.is("element","a"));for(const l of this._definitions){const c=ss(l.attributes);if(l.callback(r.attributeNewValue)){for(const[u,d]of c)u==="class"?i.addClass(d,a):i.setAttribute(u,d,a);l.classes&&i.addClass(l.classes,a);for(const u in l.styles)i.setStyle(u,l.styles[u],a)}else{for(const[u,d]of c)u==="class"?i.removeClass(d,a):i.removeAttribute(u,a);l.classes&&i.removeClass(l.classes,a);for(const u in l.styles)i.removeStyle(u,a)}}})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const hge=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,fge="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",mge=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,pge=/^((\w+:(\/{2,})?)|(\W))/i,gge=["https?","ftps?","mailto"],gm="Ctrl+K";function wge(t){return t.is("attributeElement")&&!!t.getCustomProperty("link")}function AP(t,{writer:e}){const n=e.createAttributeElement("a",{href:t},{priority:5});return e.setCustomProperty("link",!0,n),n}function W9(t,e=gge){const n=String(t),r=e.join("|"),i=new RegExp(`${fge.replace("<protocols>",r)}`,"i");return vge(n,i)?n:"#"}function vge(t,e){return!!t.replace(hge,"").match(e)}function yge(t,e){const n={"Open in a new tab":t("Open in a new tab"),Downloadable:t("Downloadable")};return e.forEach(r=>("label"in r&&n[r.label]&&(r.label=n[r.label]),r)),e}function bge(t){const e=[];if(t)for(const[n,r]of Object.entries(t)){const i=Object.assign({},r,{id:`link${kne(n)}`});e.push(i)}return e}function fb(t,e){return t?e.checkAttribute(t.name,"linkHref"):!1}function _ge(t){return mge.test(t)}function Rk(t,e){const n=_ge(t)?"mailto:":e,r=!!n&&!j9(t);return t&&r?n+t:t}function j9(t){return pge.test(t)}function IP(t){window.open(t,"_blank","noopener")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class kge extends He{constructor(){super(...arguments),this.manualDecorators=new Nr,this.automaticDecorators=new dge}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,n=e.document.selection,r=n.getSelectedElement()||vn(n.getSelectedBlocks());fb(r,e.schema)?(this.value=r.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(r,"linkHref")):(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref"));for(const i of this.manualDecorators)i.value=this._getDecoratorStateFromModel(i.id)}execute(e,n={}){const r=this.editor.model,i=r.document.selection,s=[],o=[];for(const a in n)n[a]?s.push(a):o.push(a);r.change(a=>{if(i.isCollapsed){const l=i.getFirstPosition();if(i.hasAttribute("linkHref")){const c=RP(i);let u=J0(l,"linkHref",i.getAttribute("linkHref"),r);i.getAttribute("linkHref")===c&&(u=this._updateLinkContent(r,a,u,e)),a.setAttribute("linkHref",e,u),s.forEach(d=>{a.setAttribute(d,!0,u)}),o.forEach(d=>{a.removeAttribute(d,u)}),a.setSelection(a.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const c=ss(i.getAttributes());c.set("linkHref",e),s.forEach(d=>{c.set(d,!0)});const{end:u}=r.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...s,...o].forEach(c=>{a.removeSelectionAttribute(c)})}else{const l=r.schema.getValidRanges(i.getRanges(),"linkHref"),c=[];for(const d of i.getSelectedBlocks())r.schema.checkAttribute(d,"linkHref")&&c.push(a.createRangeOn(d));const u=c.slice();for(const d of l)this._isRangeToUpdate(d,c)&&u.push(d);for(const d of u){let h=d;if(u.length===1){const f=RP(i);i.getAttribute("linkHref")===f&&(h=this._updateLinkContent(r,a,d,e),a.setSelection(a.createSelection(h)))}a.setAttribute("linkHref",e,h),s.forEach(f=>{a.setAttribute(f,!0,h)}),o.forEach(f=>{a.removeAttribute(f,h)})}}})}_getDecoratorStateFromModel(e){const n=this.editor.model,r=n.document.selection,i=r.getSelectedElement();return fb(i,n.schema)?i.getAttribute(e):r.getAttribute(e)}_isRangeToUpdate(e,n){for(const r of n)if(r.containsRange(e))return!1;return!0}_updateLinkContent(e,n,r,i){const s=n.createText(i,{linkHref:i});return e.insertContent(s,r)}}function RP(t){if(t.isCollapsed){const e=t.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(t.getFirstRange().getItems());if(e.length>1)return null;const n=e[0];return n.is("$text")||n.is("$textProxy")?n.data:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ege extends He{refresh(){const e=this.editor.model,n=e.document.selection,r=n.getSelectedElement();fb(r,e.schema)?this.isEnabled=e.schema.checkAttribute(r,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(n,"linkHref")}execute(){const e=this.editor,n=this.editor.model,r=n.document.selection,i=e.commands.get("link");n.change(s=>{const o=r.isCollapsed?[J0(r.getFirstPosition(),"linkHref",r.getAttribute("linkHref"),n)]:n.schema.getValidRanges(r.getRanges(),"linkHref");for(const a of o)if(s.removeAttribute("linkHref",a),i)for(const l of i.manualDecorators)s.removeAttribute(l.id,a)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Cge extends Ue(){constructor({id:e,label:n,attributes:r,classes:i,styles:s,defaultValue:o}){super(),this.id=e,this.set("value",void 0),this.defaultValue=o,this.label=n,this.attributes=r,this.classes=i,this.styles=s}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const xge="ck-link_selected",OP="automatic",Sge="manual",Tge=/^(https?:)?\/\//;class G9 extends L{static get pluginName(){return"LinkEditing"}static get requires(){return[nP,x9,os]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,n=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:AP}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(s,o)=>AP(W9(s,n),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:s=>s.getAttribute("href")}}),e.commands.add("link",new kge(e)),e.commands.add("unlink",new Ege(e));const r=yge(e.t,bge(e.config.get("link.decorators")));this._enableAutomaticDecorators(r.filter(s=>s.mode===OP)),this._enableManualDecorators(r.filter(s=>s.mode===Sge)),e.plugins.get(nP).registerAttribute("linkHref"),Pme(e,"linkHref","a",xge),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const n=this.editor,i=n.commands.get("link").automaticDecorators;n.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:OP,callback:s=>!!s&&Tge.test(s),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&n.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const n=this.editor,i=n.commands.get("link").manualDecorators;e.forEach(s=>{n.model.schema.extend("$text",{allowAttributes:s.id});const o=new Cge(s);i.add(o),n.conversion.for("downcast").attributeToElement({model:o.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){const d=l.createAttributeElement("a",o.attributes,{priority:5});o.classes&&l.addClass(o.classes,d);for(const h in o.styles)l.setStyle(h,o.styles[h],d);return l.setCustomProperty("link",!0,d),d}}}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const e=this.editor,r=e.editing.view.document;this.listenTo(r,"click",(i,s)=>{if(!(me.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let a=s.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;const l=a.getAttribute("href");l&&(i.stop(),s.preventDefault(),IP(l))},{context:"$capture"}),this.listenTo(r,"keydown",(i,s)=>{const a=e.commands.get("link").value;a&&s.keyCode===Ae.enter&&s.altKey&&(i.stop(),IP(a))})}_enableSelectionAttributesFixer(){const n=this.editor.model,r=n.document.selection;this.listenTo(r,"change:attribute",(i,{attributeKeys:s})=>{!s.includes("linkHref")||r.hasAttribute("linkHref")||n.change(o=>{Pge(o,Age(n.schema))})})}_enableClipboardIntegration(){const e=this.editor,n=e.model,r=this.editor.config.get("link.defaultProtocol");r&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(i,s)=>{n.change(o=>{const a=o.createRangeIn(s.content);for(const l of a.getItems())if(l.hasAttribute("linkHref")){const c=Rk(l.getAttribute("linkHref"),r);o.setAttribute("linkHref",c,l)}})})}}function Pge(t,e){t.removeSelectionAttribute("linkHref");for(const n of e)t.removeSelectionAttribute(n)}function Age(t){return t.getDefinition("$text").allowAttributes.filter(n=>n.startsWith("link"))}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Ige extends ee{constructor(e,n){super(e),this.focusTracker=new jt,this.keystrokes=new wn,this._focusables=new Dr;const r=e.t;this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),pe.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),pe.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(n),this.children=this._createFormChildren(n.manualDecorators),this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const i=["ck","ck-link-form","ck-responsive-form"];n.manualDecorators.length&&i.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:i,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,n)=>(e[n.name]=n.isOn,e),{})}render(){super.render(),tk({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createUrlInput(){const e=this.locale.t,n=new of(this.locale,Z0);return n.label=e("Link URL"),n}_createButton(e,n,r,i){const s=new Se(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s.extendTemplate({attributes:{class:r}}),i&&s.delegate("execute").to(this,i),s}_createManualDecoratorSwitches(e){const n=this.createCollection();for(const r of e.manualDecorators){const i=new q0(this.locale);i.set({name:r.id,label:r.label,withText:!0}),i.bind("isOn").toMany([r,e],"value",(s,o)=>o===void 0&&s===void 0?!!r.defaultValue:!!s),i.on("execute",()=>{r.set("value",!i.isOn)}),n.add(i)}return n}_createFormChildren(e){const n=this.createCollection();if(n.add(this.urlInputView),e.length){const r=new ee;r.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(i=>({tag:"li",children:[i],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),n.add(r)}return n.add(this.saveButtonView),n.add(this.cancelButtonView),n}}const Rge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Oge extends ee{constructor(e,n={}){super(e),this.focusTracker=new jt,this.keystrokes=new wn,this._focusables=new Dr;const r=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(r("Unlink"),Rge,"unlink"),this.editButtonView=this._createButton(r("Edit link"),pe.pencil,"edit"),this.set("href",void 0),this._linkConfig=n,this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,n,r){const i=new Se(this.locale);return i.set({label:e,icon:n,tooltip:!0}),i.delegate("execute").to(this,r),i}_createPreviewButton(){const e=new Se(this.locale),n=this.bindTemplate,r=this.t;return e.set({withText:!0,tooltip:r("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:n.to("href",i=>i&&W9(i,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",i=>i||r("This link has no URL")),e.bind("isEnabled").to(this,"href",i=>!!i),e.template.tag="a",e.template.eventListeners={},e}}const Mge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ui="link-ui";class Nge extends L{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[pg]}static get pluginName(){return"LinkUI"}init(){const e=this.editor,n=this.editor.t;e.editing.view.addObserver(nue),this._balloon=e.plugins.get(pg),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ui,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ui,view:{name:"span",classes:["ck-fake-link-selection","ck-fake-link-selection_collapsed"]}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Create link"),keystroke:gm},{label:n("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,n=new Oge(e.locale,e.config.get("link")),r=e.commands.get("link"),i=e.commands.get("unlink");return n.bind("href").to(r,"value"),n.editButtonView.bind("isEnabled").to(r),n.unlinkButtonView.bind("isEnabled").to(i),this.listenTo(n,"edit",()=>{this._addFormView()}),this.listenTo(n,"unlink",()=>{e.execute("unlink"),this._hideUI()}),n.keystrokes.set("Esc",(s,o)=>{this._hideUI(),o()}),n.keystrokes.set(gm,(s,o)=>{this._addFormView(),o()}),n}_createFormView(){const e=this.editor,n=e.commands.get("link"),r=e.config.get("link.defaultProtocol"),i=e.config.get("link.allowCreatingEmptyLinks"),s=new(S8(Ige))(e.locale,n);return s.urlInputView.fieldView.bind("value").to(n,"value"),s.urlInputView.bind("isEnabled").to(n,"isEnabled"),s.saveButtonView.bind("isEnabled").to(n,"isEnabled",s.urlInputView,"isEmpty",(o,a)=>o&&(i||!a)),this.listenTo(s,"submit",()=>{const{value:o}=s.urlInputView.fieldView.element,a=Rk(o,r);e.execute("link",a,s.getDecoratorSwitchesState()),this._closeFormView()}),this.listenTo(s,"cancel",()=>{this._closeFormView()}),s.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),s}_createToolbarLinkButton(){const e=this.editor,n=e.commands.get("link");e.ui.componentFactory.add("link",()=>{const r=this._createButton(Se);return r.set({tooltip:!0,isToggleable:!0}),r.bind("isOn").to(n,"value",i=>!!i),r}),e.ui.componentFactory.add("menuBar:link",()=>this._createButton(rr))}_createButton(e){const n=this.editor,r=n.locale,i=n.commands.get("link"),s=new e(n.locale),o=r.t;return s.set({label:o("Link"),icon:Mge,keystroke:gm}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>this._showUI(!0)),s}_enableBalloonActivators(){const e=this.editor,n=e.editing.view.document;this.listenTo(n,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(gm,(r,i)=>{i(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,n)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),n())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,n)=>{this._isUIVisible&&(this._hideUI(),n())}),F0({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const n=this.editor.commands.get("link");this.formView.disableCssTransitions(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=n.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,n=e.editing.view.document;let r=this._getSelectedLinkElement(),i=o();const s=()=>{const a=this._getSelectedLinkElement(),l=o();r&&!a||!r&&l!==i?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),r=a,i=l};function o(){return n.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",s),this.listenTo(this._balloon,"change:visibleView",s)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,n=this.editor.model,r=e.document;let i;if(n.markers.has(Ui)){const s=Array.from(this.editor.editing.mapper.markerNameToElements(Ui)),o=e.createRange(e.createPositionBefore(s[0]),e.createPositionAfter(s[s.length-1]));i=e.domConverter.viewRangeToDom(o)}else i=()=>{const s=this._getSelectedLinkElement();return s?e.domConverter.mapViewToDom(s):e.domConverter.viewRangeToDom(r.selection.getFirstRange())};return{target:i}}_getSelectedLinkElement(){const e=this.editor.editing.view,n=e.document.selection,r=n.getSelectedElement();if(n.isCollapsed||r&&zt(r))return qw(n.getFirstPosition());{const i=n.getFirstRange().getTrimmed(),s=qw(i.start),o=qw(i.end);return!s||s!=o?null:e.createRangeIn(s).getTrimmed().isEqual(i)?s:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(n=>{const r=e.document.selection.getFirstRange();if(e.markers.has(Ui))n.updateMarker(Ui,{range:r});else if(r.start.isAtEnd){const i=r.start.getLastMatchingPosition(({item:s})=>!e.schema.isContent(s),{boundaries:r});n.addMarker(Ui,{usingOperation:!1,affectsData:!1,range:n.createRange(i,r.end)})}else n.addMarker(Ui,{usingOperation:!1,affectsData:!1,range:r})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ui)&&e.change(n=>{n.removeMarker(Ui)})}}function qw(t){return t.getAncestors().find(e=>wge(e))||null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Dge=4,q9=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Lge=2;class Ok extends L{static get requires(){return[vu,G9]}static get pluginName(){return"AutoLink"}init(){const n=this.editor.model.document.selection;n.on("change:range",()=>{this.isEnabled=!n.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,n){return n.textNode&&n.textNode.hasAttribute("linkHref")?J0(n,"linkHref",n.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,n){const i=this.editor.model,s=i.document.selection,o=s.getFirstPosition(),a=s.getLastPosition();let l=n.getJoined(this._expandLinkRange(i,o)||n);l&&(l=l.getJoined(this._expandLinkRange(i,a)||n)),l&&(l.start.isBefore(o)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){const e=this.editor,n=e.model,r=n.document.selection,i=e.plugins.get("ClipboardPipeline"),s=e.commands.get("link");i.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!s.isEnabled||r.isCollapsed||a.method!=="paste"||r.rangeCount>1)return;const l=r.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;const u=c.match(q9);u&&u[2]===c&&(n.change(d=>{this._selectEntireLinks(d,l),s.execute(c)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,n=new Tme(e.model,r=>{if(!$ge(r))return;const i=MP(r.substr(0,r.length-1));if(i)return{url:i}});n.on("matched:data",(r,i)=>{const{batch:s,range:o,url:a}=i;if(!s.isTyping)return;const l=o.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),n.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,n=e.model,r=e.commands.get("enter");r&&r.on("execute",()=>{const i=n.document.selection.getFirstPosition();if(!i.parent.previousSibling)return;const s=n.createRangeIn(i.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(s)})}_enableShiftEnterHandling(){const e=this.editor,n=e.model,r=e.commands.get("shiftEnter");r&&r.on("execute",()=>{const i=n.document.selection.getFirstPosition(),s=n.createRange(n.createPositionAt(i.parent,0),i.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(s)})}_checkAndApplyAutoLinkOnRange(e){const n=this.editor.model,{text:r,range:i}=T9(e,n),s=MP(r);if(s){const o=n.createRange(i.end.getShiftedBy(-s.length),i.end);this._applyAutoLink(s,o)}}_applyAutoLink(e,n){const r=this.editor.model,i=this.editor.config.get("link.defaultProtocol"),s=Rk(e,i);!this.isEnabled||!Fge(n,r)||!j9(s)||Vge(n)||this._persistAutoLink(s,n)}_persistAutoLink(e,n){const r=this.editor.model,i=this.editor.plugins.get("Delete");r.enqueueChange(s=>{s.setAttribute("linkHref",e,n),r.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function $ge(t){return t.length>Dge&&t[t.length-1]===" "&&t[t.length-2]!==" "}function MP(t){const e=q9.exec(t);return e?e[Lge]:null}function Fge(t,e){return e.schema.checkAttributeInSelection(e.createSelection(t),"linkHref")}function Vge(t){const e=t.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Y9 extends L{static get requires(){return[G9,Nge,Ok]}static get pluginName(){return"Link"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class ni{constructor(e,n){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=n.direction=="forward",this._includeSelf=!!n.includeSelf,this._sameAttributes=st(n.sameAttributes||[]),this._sameIndent=!!n.sameIndent,this._lowerIndent=!!n.lowerIndent,this._higherIndent=!!n.higherIndent}static first(e,n){const i=new this(e,n)[Symbol.iterator]();return vn(i)}*[Symbol.iterator](){const e=[];for(const{node:n}of cf(this._getStartNode(),this._isForward?"forward":"backward")){const r=n.getAttribute("listIndent");if(r<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=r}else if(r>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(n);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(i=>n.getAttribute(i)!==this._startElement.getAttribute(i)))break}e.length&&(yield*e,e.length=0),yield n}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}function*cf(t,e="forward"){const n=e=="forward",r=[];let i=null;for(;yt(t);){let s=null;if(i){const o=t.getAttribute("listIndent"),a=i.getAttribute("listIndent");o>a?r[a]=i:o<a?(s=r[o],r.length=o):s=i}yield{node:t,previous:i,previousNodeInList:s},i=t,t=n?t.nextSibling:t.previousSibling}}class Bge{constructor(e){this._listHead=e}[Symbol.iterator](){return cf(this._listHead,"forward")}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Zc{static next(){return ti()}}function yt(t){return!!t&&t.is("element")&&t.hasAttribute("listItemId")}function Mk(t,e={}){return[...ua(t,{...e,direction:"backward"}),...ua(t,{...e,direction:"forward"})]}function ua(t,e={}){const n=e.direction=="forward",r=Array.from(new ni(t,{...e,includeSelf:n,sameIndent:!0,sameAttributes:"listItemId"}));return n?r:r.reverse()}function Uge(t){return Array.from(new ni(t,{direction:"forward",higherIndent:!0}))}function K9(t,e){const n=new ni(t,{sameIndent:!0,sameAttributes:"listType",...e}),r=new ni(t,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(n).reverse(),...r]}function ul(t){return!ni.first(t,{sameIndent:!0,sameAttributes:"listItemId"})}function NP(t){return!ni.first(t,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function uf(t,e={}){t=st(t);const n=e.withNested!==!1,r=new Set;for(const i of t)for(const s of Mk(i,{higherIndent:n}))r.add(s);return kl(r)}function X0(t){t=st(t);const e=new Set;for(const n of t)for(const r of K9(n))e.add(r);return kl(e)}function Nk(t,e){const n=ua(t,{direction:"forward"}),r=Zc.next();for(const i of n)e.setAttribute("listItemId",r,i);return n}function mb(t,e,n){const r={};for(const[s,o]of e.getAttributes())s.startsWith("list")&&(r[s]=o);const i=ua(t,{direction:"forward"});for(const s of i)n.setAttributes(r,s);return i}function pb(t,e,{expand:n,indentBy:r=1}={}){t=st(t);const i=n?uf(t):t;for(const s of i){const o=s.getAttribute("listIndent")+r;o<0?Q0(s,e):e.setAttribute("listIndent",o,s)}return i}function zge(t,e){t=st(t);const n=uf(t),r=new Set,i=Math.min(...n.map(o=>o.getAttribute("listIndent"))),s=new Map;for(const o of n)s.set(o,ni.first(o,{lowerIndent:!0}));for(const o of n){if(r.has(o))continue;r.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){Q0(o,e);continue}if(o.getAttribute("listIndent")==i){const l=Wge(o,s.get(o),e);for(const c of l)r.add(c);if(l.length)continue}e.setAttribute("listIndent",a,o)}return kl(r)}function Q0(t,e){t=st(t);for(const n of t)n.is("element","listItem")&&e.rename(n,"paragraph");for(const n of t)for(const r of n.getAttributeKeys())r.startsWith("list")&&e.removeAttribute(r,n);return t}function Eh(t){if(!t.length)return!1;const e=t[0].getAttribute("listItemId");return e?!t.some(n=>n.getAttribute("listItemId")!=e):!1}function Hge(t,e){const n=[];let r=Number.POSITIVE_INFINITY;for(const{node:i}of cf(t.nextSibling,"forward")){const s=i.getAttribute("listIndent");if(s==0)break;s<r&&(r=s);const o=s-r;e.setAttribute("listIndent",o,i),n.push(i)}return n}function kl(t){return Array.from(t).filter(e=>e.root.rootName!=="$graveyard").sort((e,n)=>e.index-n.index)}function Ch(t){const e=t.document.selection.getSelectedElement();return e&&t.schema.isObject(e)&&t.schema.isBlock(e)?e:null}function Yw(t,e){return e.checkChild(t.parent,"listItem")&&e.checkChild(t,"$text")&&!e.isObject(t)}function wg(t){return t=="numbered"||t=="customNumbered"}function Wge(t,e,n){return ua(e,{direction:"forward"}).pop().index>t.index?mb(t,e,n):[]}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class DP extends He{constructor(e,n){super(e),this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,n=LP(e.document.selection);e.change(r=>{const i=[];Eh(n)&&!ul(n[0])?(this._direction=="forward"&&i.push(...pb(n,r)),i.push(...Nk(n[0],r))):this._direction=="forward"?i.push(...pb(n,r,{expand:!0})):i.push(...zge(n,r));for(const s of i){if(!s.hasAttribute("listType"))continue;const o=ni.first(s,{sameIndent:!0});o&&r.setAttribute("listType",o.getAttribute("listType"),s)}this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",kl(new Set(e)))}_checkEnabled(){let e=LP(this.editor.model.document.selection),n=e[0];if(!n)return!1;if(this._direction=="backward"||Eh(e)&&!ul(e[0]))return!0;e=uf(e),n=e[0];const r=ni.first(n,{sameIndent:!0});return r?r.getAttribute("listType")==n.getAttribute("listType"):!1}}function LP(t){const e=Array.from(t.getSelectedBlocks()),n=e.findIndex(r=>!yt(r));return n!=-1&&(e.length=n),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wm extends He{constructor(e,n,r={}){super(e),this.type=n,this._listWalkerOptions=r.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,r=n.document,i=Ch(n),s=Array.from(r.selection.getSelectedBlocks()).filter(a=>n.schema.checkAttribute(a,"listType")||Yw(a,n.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;n.change(a=>{if(o){const l=s[s.length-1],c=ua(l,{direction:"forward"}),u=[];c.length>1&&u.push(...Nk(c[1],a)),u.push(...Q0(s,a)),u.push(...Hge(l,a)),this._fireAfterExecute(u)}else if((i||r.selection.isCollapsed)&&yt(s[0])){const l=K9(i||s[0],this._listWalkerOptions);for(const c of l)a.setAttributes({...e.additionalAttributes,listType:this.type},c);this._fireAfterExecute(l)}else{const l=[];for(const c of s)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&Yw(c,n.schema)&&a.rename(c,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:Zc.next(),listType:this.type},c),l.push(c);else for(const u of uf(c,{withNested:!1}))u.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},u),l.push(u));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",kl(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,n=Array.from(e.getSelectedBlocks());if(!n.length)return!1;for(const r of n)if(r.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,n=e.schema,r=e.document.selection,i=Array.from(r.getSelectedBlocks());if(!i.length)return!1;if(this.value)return!0;for(const s of i)if(n.checkAttribute(s,"listType")||Yw(s,n))return!0;return!1}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $P extends He{constructor(e,n){super(e),this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const n=this.editor.model,r=n.document.selection,i=[];n.change(s=>{const{firstElement:o,lastElement:a}=this._getMergeSubjectElements(r,e),l=o.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),u=a.getAttribute("listItemId");if(l!=c){const d=Uge(a);i.push(...pb([a,...d],s,{indentBy:l-c,expand:l<c}))}if(e){let d=r;r.isCollapsed&&(d=s.createSelection(s.createRange(s.createPositionAt(o,"end"),s.createPositionAt(a,0)))),n.deleteContent(d,{doNotResetEntireContent:r.isCollapsed});const h=d.getLastPosition().parent,f=h.nextSibling;i.push(h),f&&f!==a&&f.getAttribute("listItemId")==u&&i.push(...mb(f,h,s))}else i.push(...mb(a,o,s));this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",kl(new Set(e)))}_checkEnabled(){const e=this.editor.model,n=e.document.selection,r=Ch(e);if(n.isCollapsed||r){const i=r||n.getFirstPosition().parent;if(!yt(i))return!1;const s=this._direction=="backward"?i.previousSibling:i.nextSibling;if(!s||Eh([i,s]))return!1}else{const i=n.getLastPosition(),s=n.getFirstPosition();if(i.parent===s.parent||!yt(i.parent))return!1}return!0}_getMergeSubjectElements(e,n){const r=this.editor.model,i=Ch(r);let s,o;if(e.isCollapsed||i){const a=i||e.getFirstPosition().parent,l=ul(a);this._direction=="backward"?(o=a,l&&!n?s=ni.first(a,{sameIndent:!0,lowerIndent:!0}):s=a.previousSibling):(s=a,o=a.nextSibling)}else s=e.getFirstPosition().parent,o=e.getLastPosition().parent;return{firstElement:s,lastElement:o}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FP extends He{constructor(e,n){super(e),this._direction=n}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(n=>{const r=Nk(this._getStartBlock(),n);this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",kl(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,n=this._getStartBlock();return e.isCollapsed&&yt(n)&&!ul(n)}_getStartBlock(){const n=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?n:n.nextSibling}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jge extends L{static get pluginName(){return"ListUtils"}expandListBlocksToCompleteList(e){return X0(e)}isFirstBlockOfListItem(e){return ul(e)}isListItemBlock(e){return yt(e)}expandListBlocksToCompleteItems(e,n={}){return uf(e,n)}isNumberedListType(e){return wg(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Z9(t){return t.is("element","ol")||t.is("element","ul")}function vg(t){return t.is("element","li")}function Gge(t){let e=0,n=t.parent;for(;n;){if(vg(n))e++;else{const r=n.previousSibling;r&&vg(r)&&e++}n=n.parent}return e}function qge(t,e,n,r=X9(n,e)){return t.createAttributeElement(J9(n),null,{priority:2*e/100-100,id:r})}function Yge(t,e,n){return t.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:n})}function J9(t){return t=="numbered"||t=="customNumbered"?"ol":"ul"}function X9(t,e){return`list-${t}-${e}`}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gi(t,e){const n=t.nodeBefore;if(yt(n)){let r=n;for(const{node:i}of cf(r,"backward"))if(r=i,e.has(r))return;e.set(n,r)}else{const r=t.nodeAfter;yt(r)&&e.set(r,r)}}function Kge(t,e){let n=0,r=-1,i=null,s=!1;for(const{node:o}of t){const a=o.getAttribute("listIndent");if(a>n){let l;i===null?(i=a-n,l=n):(i>a&&(i=a),l=a-i),l>r+1&&(l=r+1),e.setAttribute("listIndent",l,o),s=!0,r=l}else i=null,n=a+1,r=a}return s}function Zge(t,e,n){const r=new Set;let i=!1;for(const{node:s}of t){if(r.has(s))continue;let o=s.getAttribute("listType"),a=s.getAttribute("listItemId");if(e.has(a)&&(a=Zc.next()),e.add(a),s.is("element","listItem")){s.getAttribute("listItemId")!=a&&(n.setAttribute("listItemId",a,s),i=!0);continue}for(const l of ua(s,{direction:"forward"}))r.add(l),l.getAttribute("listType")!=o&&(a=Zc.next(),o=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(n.setAttribute("listItemId",a,l),i=!0)}return i}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Jge(){return(t,e,n)=>{const{writer:r,schema:i}=n;if(!e.modelRange)return;const s=Array.from(e.modelRange.getItems({shallow:!0})).filter(d=>i.checkAttribute(d,"listItemId"));if(!s.length)return;const o=Zc.next(),a=Gge(e.viewItem);let l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const c=s[0].getAttribute("listType");c&&(l=c);const u={listItemId:o,listIndent:a,listType:l};for(const d of s)d.hasAttribute("listItemId")||r.setAttributes(u,d);s.length>1&&s[1].getAttribute("listItemId")!=u.listItemId&&n.keepEmptyElement(s[0])}}function VP(){return(t,e,n)=>{if(!n.consumable.test(e.viewItem,{name:!0}))return;const r=new G0(e.viewItem.document);for(const i of Array.from(e.viewItem.getChildren()))!vg(i)&&!Z9(i)&&r.remove(i)}}function Xge(t,e,n,r){return()=>{const a=t.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(const d of a)if(d.type=="insert"&&d.name!="$text")gi(d.position,c),d.attributes.has("listItemId")?u.add(d.position.nodeAfter):gi(d.position.getShiftedBy(d.length),c);else if(d.type=="remove"&&d.attributes.has("listItemId"))gi(d.position,c);else if(d.type=="attribute"){const h=d.range.start.nodeAfter;n.includes(d.attributeKey)?(gi(d.range.start,c),d.attributeNewValue===null?(gi(d.range.start.getShiftedBy(1),c),s(h)&&l.push(h)):u.add(h)):yt(h)&&s(h)&&l.push(h)}for(const d of c.values())l.push(...i(d,u));for(const d of new Set(l))e.reconvertItem(d)};function i(a,l){const c=[],u=new Set,d=[];for(const{node:h,previous:f}of cf(a,"forward")){if(u.has(h))continue;const p=h.getAttribute("listIndent");f&&p<f.getAttribute("listIndent")&&(d.length=p+1),d[p]=Object.fromEntries(Array.from(h.getAttributes()).filter(([_])=>n.includes(_)));const g=ua(h,{direction:"forward"});for(const _ of g)u.add(_),(s(_,g)||o(_,d,l))&&c.push(_)}return c}function s(a,l){const c=e.mapper.toViewElement(a);if(!c)return!1;if(r.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;const d=eM(a,n,l);return d&&c.is("element","p")?!0:!!(!d&&c.is("element","span"))}function o(a,l,c){if(c.has(a))return!1;const u=e.mapper.toViewElement(a);let d=l.length-1;for(let h=u.parent;!h.is("editableElement");h=h.parent){const f=vg(h),p=Z9(h);if(!p&&!f)continue;const g=`checkAttributes:${f?"item":"list"}`;if(r.fire(g,{viewElement:h,modelAttributes:l[d]}))break;if(p&&(d--,d<0))return!1}return!0}}function BP(t,e,n,{dataPipeline:r}={}){const i=s0e(t);return(s,o,a)=>{const{writer:l,mapper:c,consumable:u}=a,d=o.item;if(!t.includes(o.attributeKey)||!i(d,u))return;const h=e0e(d,c,n);Q9(h,l,c),r0e(h,l);const f=n0e(d,h,e,l,{dataPipeline:r});i0e(d,f,e,l)}}function Qge(t){return(e,n,r)=>{const{writer:i,mapper:s}=r,o=e.name.split(":")[1];if(!t.checkAttribute(o,"listItemId"))return;const a=s.toViewPosition(n.position),l=n.position.getShiftedBy(n.length),c=s.toViewPosition(l,{isPhantom:!0}),d=i.createRange(a,c).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */d&&Q9(d,i,s)}}function UP(t,{dataPipeline:e}={}){return(n,{writer:r})=>{if(!eM(n,t))return null;if(!e)return r.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const i=r.createContainerElement("p");return r.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}function e0e(t,e,n){const r=n.createRangeOn(t);return e.toViewRange(r).getTrimmed().end.nodeBefore}function t0e(t,e){return(n,r)=>{if(r.modelPosition.offset>0)return;const i=r.modelPosition.parent;if(!yt(i)||!t.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(i)))return;const s=r.mapper.toViewElement(i),o=e.createRangeIn(s),a=o.getWalker();let l=o.start;for(const{item:c}of a){if(c.is("element")&&r.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}r.viewPosition=l}}function Q9(t,e,n){for(;t.parent.is("attributeElement")&&t.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(t),t.parent);const r=[];i(e.createPositionBefore(t).getWalker({direction:"backward"})),i(e.createRangeIn(t).getWalker());for(const s of r)e.remove(s);function i(s){for(const{item:o}of s){if(o.is("element")&&n.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&r.push(o)}}}function n0e(t,e,n,r,{dataPipeline:i}){let s=r.createRangeOn(e);if(!ul(t))return s;for(const o of n){if(o.scope!="itemMarker")continue;const a=o.createElement(r,t,{dataPipeline:i});if(!a||(r.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(t)?r.insert(r.createPositionAt(e,0),a):(r.insert(s.start,a),s=r.createRange(r.createPositionBefore(a),r.createPositionAfter(e))),!o.createWrapperElement||!o.canWrapElement))continue;const l=o.createWrapperElement(r,t,{dataPipeline:i});r.setCustomProperty("listItemWrapper",!0,l),o.canWrapElement(t)?s=r.wrap(s,l):(s=r.wrap(r.createRangeOn(a),l),s=r.createRange(s.start,r.createPositionAfter(e)))}return s}function r0e(t,e){let n=t.parent;for(;n.is("attributeElement")&&["ul","ol","li"].includes(n.name);){const r=n.parent;e.unwrap(e.createRangeOn(t),n),n=r}}function i0e(t,e,n,r){if(!t.hasAttribute("listIndent"))return;const i=t.getAttribute("listIndent");let s=t;for(let o=i;o>=0;o--){const a=Yge(r,o,s.getAttribute("listItemId")),l=qge(r,o,s.getAttribute("listType"));for(const c of n)(c.scope=="list"||c.scope=="item")&&s.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(r,s.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=r.wrap(e,a),e=r.wrap(e,l),o==0||(s=ni.first(s,{lowerIndent:!0}),!s))break}}function s0e(t){return(e,n)=>{const r=[];for(const i of t)e.hasAttribute(i)&&r.push(`attribute:${i}`);return r.every(i=>n.test(e,i)!==!1)?(r.forEach(i=>n.consume(e,i)),!0):!1}}function eM(t,e,n=Mk(t)){if(!yt(t))return!1;for(const r of t.getAttributeKeys())if(!r.startsWith("selection:")&&!e.includes(r))return!1;return n.length<2}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zm=["listType","listIndent","listItemId"];class gb extends L{static get pluginName(){return"ListEditing"}static get requires(){return[Ak,vu,jge,os]}constructor(e){super(e),this._downcastStrategies=[],e.config.define("list.multiBlock",!0)}init(){const e=this.editor,n=e.model,r=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new T("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});n.schema.register("$listItem",{allowAttributes:Zm}),r?(n.schema.extend("$container",{allowAttributesOf:"$listItem"}),n.schema.extend("$block",{allowAttributesOf:"$listItem"}),n.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):n.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const i of Zm)n.schema.setAttributeProperties(i,{copyOnReplace:!0});e.commands.add("numberedList",new wm(e,"numbered")),e.commands.add("bulletedList",new wm(e,"bulleted")),e.commands.add("customNumberedList",new wm(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new wm(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new DP(e,"forward")),e.commands.add("outdentList",new DP(e,"backward")),e.commands.add("splitListItemBefore",new FP(e,"before")),e.commands.add("splitListItemAfter",new FP(e,"after")),r&&(e.commands.add("mergeListItemBackward",new $P(e,"backward")),e.commands.add("mergeListItemForward",new $P(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const n=this.editor.commands,r=n.get("indent"),i=n.get("outdent");r&&r.registerChildCommand(n.get("indentList"),{priority:"high"}),i&&i.registerChildCommand(n.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Zm,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,n=e.commands.get("mergeListItemBackward"),r=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(i,s)=>{const o=e.model.document.selection;Ch(e.model)||e.model.change(()=>{const a=o.getFirstPosition();if(o.isCollapsed&&s.direction=="backward"){if(!a.isAtStart)return;const l=a.parent;if(!yt(l))return;if(!ni.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)NP(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!n||!n.isEnabled)return;n.execute({shouldMergeOnBlocksContentLevel:zP(e.model,"backward")})}s.preventDefault(),i.stop()}else{if(o.isCollapsed&&!o.getLastPosition().isAtEnd||!r||!r.isEnabled)return;r.execute({shouldMergeOnBlocksContentLevel:zP(e.model,"forward")}),s.preventDefault(),i.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,n=e.model,r=e.commands,i=r.get("enter");this.listenTo(e.editing.view.document,"enter",(s,o)=>{const a=n.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&yt(l)&&l.isEmpty&&!o.isSoft){const c=ul(l),u=NP(l);c&&u?(e.execute("outdentList"),o.preventDefault(),s.stop()):c&&!u?(e.execute("splitListItemAfter"),o.preventDefault(),s.stop()):u&&(e.execute("splitListItemBefore"),o.preventDefault(),s.stop())}},{context:"li"}),this.listenTo(i,"afterExecute",()=>{const s=r.get("splitListItemBefore");if(s.refresh(),!s.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;Mk(a).length===2&&s.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(n,r)=>{const i=r.shiftKey?"outdentList":"indentList";this.editor.commands.get(i).isEnabled&&(e.execute(i),r.stopPropagation(),r.preventDefault(),n.stop())},{context:"li"})}_setupConversion(){const e=this.editor,n=e.model,r=this.getListAttributeNames(),i=e.config.get("list.multiBlock"),s=i?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(s,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(s,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",Jge()),a.on("element:ul",VP(),{priority:"high"}),a.on("element:ol",VP(),{priority:"high"})}),i||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:s,view:UP(r),converterPriority:"high"}).add(a=>{a.on("attribute",BP(r,this._downcastStrategies,n)),a.on("remove",Qge(n.schema))}),e.conversion.for("dataDowncast").elementToElement({model:s,view:UP(r,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",BP(r,this._downcastStrategies,n,{dataPipeline:!0}))});const o=t0e(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",o),e.data.mapper.on("modelToViewPosition",o),this.listenTo(n.document,"change:data",Xge(n,e.editing,r,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=J9(c.listType)||l.id!=X9(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,n=this.getListAttributeNames();e.document.registerPostFixer(r=>o0e(e,r,n,this)),this.on("postFixer",(r,{listNodes:i,writer:s})=>{r.return=Kge(i,s)||r.return},{priority:"high"}),this.on("postFixer",(r,{listNodes:i,writer:s,seenIds:o})=>{r.return=Zge(i,o,s)||r.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,n=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",a0e(e),{priority:"high"}),this.listenTo(n,"outputTransformation",(r,i)=>{e.change(s=>{const o=Array.from(i.content.getChildren()),a=o[o.length-1];if(o.length>1&&a.is("element")&&a.isEmpty&&o.slice(0,-1).every(yt)&&s.remove(a),i.method=="copy"||i.method=="cut"){const l=Array.from(i.content.getChildren());Eh(l)&&Q0(l,s)}})})}_setupAccessibilityIntegration(){const e=this.editor,n=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:n("Keystrokes that can be used in a list"),keystrokes:[{label:n("Increase list item indent"),keystroke:"Tab"},{label:n("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function o0e(t,e,n,r){const i=t.document.differ.getChanges(),s=new Map,o=r.editor.config.get("list.multiBlock");let a=!1;for(const c of i){if(c.type=="insert"&&c.name!="$text"){const u=c.position.nodeAfter;if(!t.schema.checkAttribute(u,"listItemId"))for(const d of Array.from(u.getAttributeKeys()))n.includes(d)&&(e.removeAttribute(d,u),a=!0);gi(c.position,s),c.attributes.has("listItemId")||gi(c.position.getShiftedBy(c.length),s);for(const{item:d,previousPosition:h}of t.createRangeIn(u))yt(d)&&gi(h,s)}else c.type=="remove"?gi(c.position,s):c.type=="attribute"&&n.includes(c.attributeKey)&&(gi(c.range.start,s),c.attributeNewValue===null&&gi(c.range.start.getShiftedBy(1),s));if(!o&&c.type=="attribute"&&Zm.includes(c.attributeKey)){const u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(e.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(e.rename(u,"listItem"),a=!0)}}const l=new Set;for(const c of s.values())a=r.fire("postFixer",{listNodes:new Bge(c),listHead:c,writer:e,seenIds:l})||a;return a}function a0e(t){return(e,[n,r])=>{const i=n.is("documentFragment")?Array.from(n.getChildren()):[n];if(!i.length)return;const o=(r?t.createSelection(r):t.document.selection).getFirstPosition();let a;if(yt(o.parent))a=o.parent;else if(yt(o.nodeBefore))a=o.nodeBefore;else return;t.change(l=>{const c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),d=i[0].getAttribute("listIndent")||0,h=Math.max(u-d,0);for(const f of i){const p=yt(f);a.is("element","listItem")&&f.is("element","paragraph")&&l.rename(f,"listItem"),l.setAttributes({listIndent:(p?f.getAttribute("listIndent"):0)+h,listItemId:p?f.getAttribute("listItemId"):Zc.next(),listType:c},f)}})}}function zP(t,e){const n=t.document.selection;if(!n.isCollapsed)return!Ch(t);if(e==="forward")return!0;const i=n.getFirstPosition().parent,s=i.previousSibling;return t.schema.isObject(s)?!1:s.isEmpty?!0:Eh([i,s])}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function HP(t,e,n,r){t.ui.componentFactory.add(e,()=>{const i=WP(Se,t,e,n,r);return i.set({tooltip:!0,isToggleable:!0}),i}),t.ui.componentFactory.add(`menuBar:${e}`,()=>WP(rr,t,e,n,r))}function WP(t,e,n,r,i){const s=e.commands.get(n),o=new t(e.locale);return o.set({label:r,icon:i}),o.bind("isOn","isEnabled").to(s,"value","isEnabled"),o.on("execute",()=>{e.execute(n),e.editing.view.focus()}),o}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l0e extends L{static get pluginName(){return"ListUI"}init(){const e=this.editor.t;HP(this.editor,"numberedList",e("Numbered List"),pe.numberedList),HP(this.editor,"bulletedList",e("Bulleted List"),pe.bulletedList)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class tM extends L{static get requires(){return[gb,l0e]}static get pluginName(){return"List"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c0e extends He{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const n=this.editor.model,r=n.document;let i=Array.from(r.selection.getSelectedBlocks()).filter(s=>yt(s)&&wg(s.getAttribute("listType")));i=X0(i),n.change(s=>{for(const o of i)s.setAttribute("listStart",e>=0?e:1,o)})}_getValue(){const n=this.editor.model.document,r=vn(n.selection.getSelectedBlocks());return r&&yt(r)&&wg(r.getAttribute("listType"))?r.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const nM={},rM={},iM={},sM=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:t,typeAttribute:e,listType:n}of sM)nM[t]=n,rM[t]=e,e&&(iM[e]=t);function oM(){return sM.map(t=>t.listStyle)}function Dk(t){return nM[t]||null}function aM(t){return iM[t]||null}function wb(t){return rM[t]||null}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u0e extends He{constructor(e,n,r){super(e),this.defaultType=n,this._supportedTypes=r}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const n=this.editor.model,r=n.document;n.change(i=>{this._tryToConvertItemsToList(e);let s=Array.from(r.selection.getSelectedBlocks()).filter(o=>o.hasAttribute("listType"));if(s.length){s=X0(s);for(const o of s)i.setAttribute("listStyle",e.type||this.defaultType,o)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=vn(this.editor.model.document.selection.getSelectedBlocks());return yt(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,n=e.commands.get("numberedList"),r=e.commands.get("bulletedList");return n.isEnabled||r.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const n=Dk(e.type);if(!n)return;const r=this.editor,i=`${n}List`;r.commands.get(i).value||r.execute(i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class d0e extends He{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const n=this.editor.model,r=n.document;let i=Array.from(r.selection.getSelectedBlocks()).filter(s=>yt(s)&&s.getAttribute("listType")=="numbered");i=X0(i),n.change(s=>{for(const o of i)s.setAttribute("listReversed",!!e.reversed,o)})}_getValue(){const n=this.editor.model.document,r=vn(n.selection.getSelectedBlocks());return yt(r)&&r.getAttribute("listType")=="numbered"?r.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function jP(t){return(e,n,r)=>{const{writer:i,schema:s,consumable:o}=r;if(o.test(n.viewItem,t.viewConsumables)===!1)return;n.modelRange||Object.assign(n,r.convertChildren(n.viewItem,n.modelCursor));let a=!1;for(const l of n.modelRange.getItems({shallow:!0}))s.checkAttribute(l,t.attributeName)&&t.appliesToListItem(l)&&(l.hasAttribute(t.attributeName)||(i.setAttribute(t.attributeName,t.getAttributeOnUpcast(n.viewItem),l),a=!0));a&&o.consume(n.viewItem,t.viewConsumables)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h0e extends L{static get pluginName(){return"ListPropertiesUtils"}getAllSupportedStyleTypes(){return oM()}getListTypeFromListStyleType(e){return Dk(e)}getListStyleTypeFromTypeAttribute(e){return aM(e)}getTypeAttributeFromListStyleType(e){return wb(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Ku="default";class f0e extends L{static get requires(){return[gb,h0e]}static get pluginName(){return"ListPropertiesEditing"}constructor(e){super(e),e.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const e=this.editor,n=e.model,r=e.plugins.get(gb),i=e.config.get("list.properties"),s=m0e(i);for(const o of s)o.addCommand(e),n.schema.extend("$listItem",{allowAttributes:o.attributeName}),r.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,l,c){o.setAttributeOnDowncast(a,l,c)}});e.conversion.for("upcast").add(o=>{for(const a of s)o.on("element:ol",jP(a)),o.on("element:ul",jP(a))}),r.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:l})=>{for(const c of s)c.getAttributeOnUpcast(a)!=l[c.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(e.commands.get("indentList"),"afterExecute",(o,a)=>{n.change(l=>{for(const c of a)for(const u of s)u.appliesToListItem(c)&&l.setAttribute(u.attributeName,u.defaultValue,c)})}),r.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c}of a)for(const u of s)u.hasValidAttribute(c)||(u.appliesToListItem(c)?l.setAttribute(u.attributeName,u.defaultValue,c):l.removeAttribute(u.attributeName,c),o.return=!0)}),r.on("postFixer",(o,{listNodes:a,writer:l})=>{for(const{node:c,previousNodeInList:u}of a)if(u&&u.getAttribute("listType")==c.getAttribute("listType"))for(const d of s){const{attributeName:h}=d;if(!d.appliesToListItem(c))continue;const f=u.getAttribute(h);c.getAttribute(h)!=f&&(l.setAttribute(h,f,c),o.return=!0)}})}}function m0e(t){const e=[];if(t.styles){const n=typeof t.styles=="object"&&t.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:Ku,viewConsumables:{styles:"list-style-type"},addCommand(r){let i=oM();n&&(i=i.filter(s=>!!wb(s))),r.commands.add("listStyle",new u0e(r,Ku,i))},appliesToListItem(r){return r.getAttribute("listType")=="numbered"||r.getAttribute("listType")=="bulleted"},hasValidAttribute(r){if(!this.appliesToListItem(r))return!r.hasAttribute("listStyle");if(!r.hasAttribute("listStyle"))return!1;const i=r.getAttribute("listStyle");return i==Ku?!0:Dk(i)==r.getAttribute("listType")},setAttributeOnDowncast(r,i,s){if(i&&i!==Ku)if(n){const o=wb(i);if(o){r.setAttribute("type",o,s);return}}else{r.setStyle("list-style-type",i,s);return}r.removeStyle("list-style-type",s),r.removeAttribute("type",s)},getAttributeOnUpcast(r){const i=r.getStyle("list-style-type");if(i)return i;const s=r.getAttribute("type");return s?aM(s):Ku}})}return t.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(n){n.commands.add("listReversed",new d0e(n))},appliesToListItem(n){return n.getAttribute("listType")=="numbered"},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listReversed")},setAttributeOnDowncast(n,r,i){r?n.setAttribute("reversed","reversed",i):n.removeAttribute("reversed",i)},getAttributeOnUpcast(n){return n.hasAttribute("reversed")}}),t.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(n){n.commands.add("listStart",new c0e(n))},appliesToListItem(n){return wg(n.getAttribute("listType"))},hasValidAttribute(n){return this.appliesToListItem(n)==n.hasAttribute("listStart")},setAttributeOnDowncast(n,r,i){r==0||r>1?n.setAttribute("start",r,i):n.removeAttribute("start",i)},getAttributeOnUpcast(n){const r=n.getAttribute("start");return r>=0?r:1}}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lM extends ee{constructor(e,{enabledProperties:n,styleButtonViews:r,styleGridAriaLabel:i}){super(e),this.stylesView=null,this.additionalPropertiesCollapsibleView=null,this.startIndexFieldView=null,this.reversedSwitchButtonView=null,this.focusTracker=new jt,this.keystrokes=new wn,this.focusables=new Dr;const s=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new Lr({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n.styles?(this.stylesView=this._createStylesView(r,i),this.children.add(this.stylesView)):s.push("ck-list-properties_without-styles"),(n.startIndex||n.reversed)&&(this._addNumberedListPropertyViews(n),s.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:s},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);T8({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>Q.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,n){const r=new ee(this.locale);return r.children=r.createCollection(),r.children.addMany(e),r.setTemplate({tag:"div",attributes:{"aria-label":n,class:["ck","ck-list-styles-list"]},children:r.children}),r.children.delegate("execute").to(this),r.focus=function(){this.children.first.focus()},r.focusTracker=new jt,r.keystrokes=new wn,r.render(),r.keystrokes.listenTo(r.element),r}_addNumberedListPropertyViews(e){const n=this.locale.t,r=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),r.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),r.push(this.reversedSwitchButtonView)),e.styles?(this.additionalPropertiesCollapsibleView=new JO(this.locale,r),this.additionalPropertiesCollapsibleView.set({label:n("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(r,"isEnabled",(...i)=>i.some(s=>s)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(i,s,o)=>{o||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(r)}_createStartIndexField(){const e=this.locale.t,n=new of(this.locale,jhe);return n.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),n.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),n.fieldView.on("input",()=>{const r=n.fieldView.element,i=r.valueAsNumber;if(Number.isNaN(i)){n.errorText=e("Invalid start index value.");return}r.checkValidity()?this.fire("listStart",{startIndex:i}):n.errorText=e("Start index must be greater than 0.")}),n}_createReversedSwitchButton(){const e=this.locale.t,n=new q0(this.locale);return n.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),n.delegate("execute").to(this,"listReversed"),n}}const p0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',g0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',w0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',v0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',y0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',b0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',_0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',k0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',E0e='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C0e extends L{static get pluginName(){return"ListPropertiesUI"}init(){const e=this.editor,n=e.locale.t,r=e.config.get("list.properties");if(r.styles){const i=[{label:n("Toggle the disc list style"),tooltip:n("Disc"),type:"disc",icon:p0e},{label:n("Toggle the circle list style"),tooltip:n("Circle"),type:"circle",icon:g0e},{label:n("Toggle the square list style"),tooltip:n("Square"),type:"square",icon:w0e}],s=n("Bulleted List"),o=n("Bulleted list styles toolbar"),a="bulletedList";e.ui.componentFactory.add(a,GP({editor:e,propertiesConfig:r,parentCommandName:a,buttonLabel:s,buttonIcon:pe.bulletedList,styleGridAriaLabel:o,styleDefinitions:i})),e.ui.componentFactory.add(`menuBar:${a}`,qP({editor:e,propertiesConfig:r,parentCommandName:a,buttonLabel:s,styleGridAriaLabel:o,styleDefinitions:i}))}if(r.styles||r.startIndex||r.reversed){const i=[{label:n("Toggle the decimal list style"),tooltip:n("Decimal"),type:"decimal",icon:v0e},{label:n("Toggle the decimal with leading zero list style"),tooltip:n("Decimal with leading zero"),type:"decimal-leading-zero",icon:y0e},{label:n("Toggle the lower–roman list style"),tooltip:n("Lower–roman"),type:"lower-roman",icon:b0e},{label:n("Toggle the upper–roman list style"),tooltip:n("Upper-roman"),type:"upper-roman",icon:_0e},{label:n("Toggle the lower–latin list style"),tooltip:n("Lower-latin"),type:"lower-latin",icon:k0e},{label:n("Toggle the upper–latin list style"),tooltip:n("Upper-latin"),type:"upper-latin",icon:E0e}],s=n("Numbered List"),o=n("Numbered list styles toolbar"),a="numberedList";e.ui.componentFactory.add(a,GP({editor:e,propertiesConfig:r,parentCommandName:a,buttonLabel:s,buttonIcon:pe.numberedList,styleGridAriaLabel:o,styleDefinitions:i})),r.styles&&e.ui.componentFactory.add(`menuBar:${a}`,qP({editor:e,propertiesConfig:r,parentCommandName:a,buttonLabel:s,styleGridAriaLabel:o,styleDefinitions:i}))}}}function GP({editor:t,propertiesConfig:e,parentCommandName:n,buttonLabel:r,buttonIcon:i,styleGridAriaLabel:s,styleDefinitions:o}){const a=t.commands.get(n);return l=>{const c=ho(l,kk),u=c.buttonView;return c.bind("isEnabled").to(a),c.class="ck-list-styles-dropdown",u.on("execute",()=>{t.execute(n),t.editing.view.focus()}),u.set({label:r,icon:i,tooltip:!0,isToggleable:!0}),u.bind("isOn").to(a,"value",d=>!!d),c.once("change:isOpen",()=>{const d=x0e({editor:t,propertiesConfig:e,dropdownView:c,parentCommandName:n,styleGridAriaLabel:s,styleDefinitions:o});c.panelView.children.add(d)}),c.on("execute",()=>{t.editing.view.focus()}),c}}function cM({editor:t,listStyleCommand:e,parentCommandName:n}){const r=t.locale,i=t.commands.get(n);return({label:s,type:o,icon:a,tooltip:l})=>{const c=new Se(r);return c.set({label:s,icon:a,tooltip:l}),e.on("change:value",()=>{c.isOn=e.value===o}),c.on("execute",()=>{i.value?e.value===o?t.execute(n):e.value!==o&&t.execute("listStyle",{type:o}):t.model.change(()=>{t.execute("listStyle",{type:o})})}),c}}function x0e({editor:t,propertiesConfig:e,dropdownView:n,parentCommandName:r,styleDefinitions:i,styleGridAriaLabel:s}){const o=t.locale,a={...e};r!="numberedList"&&(a.startIndex=!1,a.reversed=!1);let l=null;if(a.styles){const u=t.commands.get("listStyle"),d=cM({editor:t,parentCommandName:r,listStyleCommand:u}),h=uM(u);l=i.filter(h).map(d)}const c=new lM(o,{styleGridAriaLabel:s,enabledProperties:a,styleButtonViews:l});if(a.styles&&K0(n,()=>c.stylesView.children.find(u=>u.isOn)),a.startIndex){const u=t.commands.get("listStart");c.startIndexFieldView.bind("isEnabled").to(u),c.startIndexFieldView.fieldView.bind("value").to(u),c.on("listStart",(d,h)=>t.execute("listStart",h))}if(a.reversed){const u=t.commands.get("listReversed");c.reversedSwitchButtonView.bind("isEnabled").to(u),c.reversedSwitchButtonView.bind("isOn").to(u,"value",d=>!!d),c.on("listReversed",()=>{const d=u.value;t.execute("listReversed",{reversed:!d})})}return c.delegate("execute").to(n),c}function qP({editor:t,propertiesConfig:e,parentCommandName:n,buttonLabel:r,styleGridAriaLabel:i,styleDefinitions:s}){return o=>{const a=new Kr(o),l=t.commands.get(n),c=t.commands.get("listStyle"),u=uM(c),d=cM({editor:t,parentCommandName:n,listStyleCommand:c}),h=s.filter(u).map(d),f=new lM(o,{styleGridAriaLabel:i,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:h});return f.delegate("execute").to(a),a.buttonView.set({label:r,icon:pe[n]}),a.panelView.children.add(f),a.bind("isEnabled").to(l,"isEnabled"),a.on("execute",()=>{t.editing.view.focus()}),a}}function uM(t){return typeof t.isStyleTypeSupported=="function"?e=>t.isStyleTypeSupported(e.type):()=>!0}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class dM extends L{static get requires(){return[f0e,C0e]}static get pluginName(){return"ListProperties"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */nf("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */nf("Ctrl+Enter");/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class hM extends L{static get pluginName(){return"AdjacentListsSupport"}init(){const e=this.editor;e.model.schema.register("listSeparator",{allowWhere:"$block",isBlock:!0}),e.conversion.for("upcast").add(r=>{r.on("element:ol",YP()),r.on("element:ul",YP())}).elementToElement({model:"listSeparator",view:"ck-list-separator"}),e.conversion.for("editingDowncast").elementToElement({model:"listSeparator",view:{name:"div",classes:["ck-list-separator","ck-hidden"]}}),e.conversion.for("dataDowncast").elementToElement({model:"listSeparator",view:(r,i)=>{const s=i.writer.createContainerElement("ck-list-separator");return i.writer.setCustomProperty("dataPipeline:transparentRendering",!0,s),s.getFillerOffset=()=>null,s}})}}function YP(){return(t,e,n)=>{const r=e.viewItem,i=r.nextSibling;if(!i||r.name!==i.name)return;e.modelRange||Object.assign(e,n.convertChildren(e.viewItem,e.modelCursor));const s=n.writer,o=s.createElement("listSeparator");if(!n.safeInsert(o,e.modelCursor))return;const a=n.getSplitParts(o);e.modelRange=s.createRange(e.modelRange.start,s.createPositionAfter(a[a.length-1])),n.updateConversionResult(o,e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e1 extends He{constructor(e,n){super(e),this.attributeKey=n}refresh(){const e=this.editor.model,n=e.document;this.value=n.selection.getAttribute(this.attributeKey),this.isEnabled=e.schema.checkAttributeInSelection(n.selection,this.attributeKey)}execute(e={}){const n=this.editor.model,i=n.document.selection,s=e.value,o=e.batch,a=l=>{if(i.isCollapsed)s?l.setSelectionAttribute(this.attributeKey,s):l.removeSelectionAttribute(this.attributeKey);else{const c=n.schema.getValidRanges(i.getRanges(),this.attributeKey);for(const u of c)s?l.setAttribute(this.attributeKey,s,u):l.removeAttribute(this.attributeKey,u)}};o?n.enqueueChange(o,l=>{a(l)}):n.change(l=>{a(l)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Gn="fontSize",qn="fontFamily",Wi="fontColor",Rs="fontBackgroundColor";function fM(t,e){const n={model:{key:t,values:[]},view:{},upcastAlso:{}};for(const r of e)n.model.values.push(r.model),n.view[r.model]=r.view,r.upcastAlso&&(n.upcastAlso[r.model]=r.upcastAlso);return n}function mM(t){return e=>T0e(e.getStyle(t))}function pM(t){return(e,{writer:n})=>n.createAttributeElement("span",{style:`${t}:${e}`},{priority:7})}function S0e({dropdownView:t,colors:e,columns:n,removeButtonLabel:r,colorPickerLabel:i,documentColorsLabel:s,documentColorsCount:o,colorPickerViewConfig:a}){const l=t.locale,c=new m9(l,{colors:e,columns:n,removeButtonLabel:r,colorPickerLabel:i,documentColorsLabel:s,documentColorsCount:o,colorPickerViewConfig:a});return t.colorSelectorView=c,t.panelView.children.add(c),c}function T0e(t){return t.replace(/\s/g,"")}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class P0e extends e1{constructor(e){super(e,qn)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function gM(t){return t.map(A0e).filter(e=>e!==void 0)}function A0e(t){if(typeof t=="object")return t;if(t==="default")return{title:"Default",model:void 0};if(typeof t=="string")return I0e(t)}function I0e(t){const e=t.replace(/"|'/g,"").split(","),n=e[0],r=e.map(R0e).join(", ");return{title:n,model:r,view:{name:"span",styles:{"font-family":r},priority:7}}}function R0e(t){return t=t.trim(),t.indexOf(" ")>0&&(t=`'${t}'`),t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class O0e extends L{static get pluginName(){return"FontFamilyEditing"}constructor(e){super(e),e.config.define(qn,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:qn}),e.model.schema.setAttributeProperties(qn,{isFormatting:!0,copyOnEnter:!0});const n=gM(e.config.get("fontFamily.options")).filter(i=>i.model),r=fM(qn,n);e.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(r),e.commands.add(qn,new P0e(e))}_prepareAnyValueConverters(){const e=this.editor;e.conversion.for("downcast").attributeToElement({model:qn,view:(n,{writer:r})=>r.createAttributeElement("span",{style:"font-family:"+n},{priority:7})}),e.conversion.for("upcast").elementToAttribute({model:{key:qn,value:n=>n.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:qn,value:n=>n.getAttribute("face")}})}}const KP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class M0e extends L{static get pluginName(){return"FontFamilyUI"}init(){const e=this.editor,n=e.t,r=this._getLocalizedOptions(),i=e.commands.get(qn),s=n("Font Family"),o=N0e(r,i);e.ui.componentFactory.add(qn,a=>{const l=ho(a);return Ck(l,o,{role:"menu",ariaLabel:s}),l.buttonView.set({label:s,icon:KP,tooltip:!0}),l.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),l.bind("isEnabled").to(i),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${qn}`,a=>{const l=new Kr(a);l.buttonView.set({label:s,icon:KP}),l.bind("isEnabled").to(i);const c=new Kc(a);for(const u of o){const d=new gu(a,l),h=new rr(a);h.bind(...Object.keys(u.model)).to(u.model),h.bind("ariaChecked").to(h,"isOn"),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,n=e.t;return gM(e.config.get(qn).options).map(i=>(i.title==="Default"&&(i.title=n("Default")),i))}}function N0e(t,e){const n=new Nr;for(const r of t){const i={type:"button",model:new Sk({commandName:qn,commandParam:r.model,label:r.title,role:"menuitemradio",withText:!0})};i.model.bind("isOn").to(e,"value",s=>s===r.model?!0:!s||!r.model?!1:s.split(",")[0].replace(/'/g,"").toLowerCase()===r.model.toLowerCase()),r.view&&typeof r.view!="string"&&r.view.styles&&i.model.set("labelStyle",`font-family: ${r.view.styles["font-family"]}`),n.add(i)}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class D0e extends L{static get requires(){return[O0e,M0e]}static get pluginName(){return"FontFamily"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class L0e extends e1{constructor(e){super(e,Gn)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Lk(t){return t.map(e=>$0e(e)).filter(e=>e!==void 0)}const ZP={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function $0e(t){if(typeof t=="number"&&(t=String(t)),typeof t=="object"&&B0e(t))return vb(t);const e=V0e(t);if(e)return vb(e);if(t==="default")return{model:void 0,title:"Default"};if(!U0e(t))return F0e(t)}function F0e(t){return typeof t=="string"&&(t={title:t,model:`${parseFloat(t)}px`}),t.view={name:"span",styles:{"font-size":t.model}},vb(t)}function vb(t){return t.view&&typeof t.view!="string"&&!t.view.priority&&(t.view.priority=7),t}function V0e(t){return typeof t=="string"?ZP[t]:ZP[t.model]}function B0e(t){return t.title&&t.model&&t.view}function U0e(t){let e;if(typeof t=="object")if(t.model)e=parseFloat(t.model);else throw new T("font-size-invalid-definition",null,t);else e=parseFloat(t);return isNaN(e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const JP=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class z0e extends L{static get pluginName(){return"FontSizeEditing"}constructor(e){super(e),e.config.define(Gn,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:Gn}),e.model.schema.setAttributeProperties(Gn,{isFormatting:!0,copyOnEnter:!0});const n=e.config.get("fontSize.supportAllValues"),r=Lk(this.editor.config.get("fontSize.options")).filter(s=>s.model),i=fM(Gn,r);n?(this._prepareAnyValueConverters(i),this._prepareCompatibilityConverter()):e.conversion.attributeToElement(i),e.commands.add(Gn,new L0e(e))}_prepareAnyValueConverters(e){const n=this.editor,r=e.model.values.filter(i=>!hue(String(i))&&!mue(String(i)));if(r.length)throw new T("font-size-invalid-use-of-named-presets",null,{presets:r});n.conversion.for("downcast").attributeToElement({model:Gn,view:(i,{writer:s})=>{if(i)return s.createAttributeElement("span",{style:"font-size:"+i},{priority:7})}}),n.conversion.for("upcast").elementToAttribute({model:{key:Gn,value:i=>i.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:Gn,value:n=>{const r=n.getAttribute("size"),i=r[0]==="-"||r[0]==="+";let s=parseInt(r,10);i&&(s=3+s);const o=JP.length-1,a=Math.min(Math.max(s,0),o);return JP[a]}}})}}const XP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H0e extends L{static get pluginName(){return"FontSizeUI"}init(){const e=this.editor,n=e.t,r=this._getLocalizedOptions(),i=e.commands.get(Gn),s=n("Font Size"),o=W0e(r,i);e.ui.componentFactory.add(Gn,a=>{const l=ho(a);return Ck(l,o,{role:"menu",ariaLabel:s}),l.buttonView.set({label:s,icon:XP,tooltip:!0}),l.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),l.bind("isEnabled").to(i),this.listenTo(l,"execute",c=>{e.execute(c.source.commandName,{value:c.source.commandParam}),e.editing.view.focus()}),l}),e.ui.componentFactory.add(`menuBar:${Gn}`,a=>{const l=new Kr(a);l.buttonView.set({label:s,icon:XP}),l.bind("isEnabled").to(i);const c=new Kc(a);for(const u of o){const d=new gu(a,l),h=new rr(a);h.bind(...Object.keys(u.model)).to(u.model),h.bind("ariaChecked").to(h,"isOn"),h.delegate("execute").to(l),h.on("execute",()=>{e.execute(u.model.commandName,{value:u.model.commandParam}),e.editing.view.focus()}),d.children.add(h),c.items.add(d)}return l.panelView.children.add(c),l})}_getLocalizedOptions(){const e=this.editor,n=e.t,r={Default:n("Default"),Tiny:n("Tiny"),Small:n("Small"),Big:n("Big"),Huge:n("Huge")};return Lk(e.config.get(Gn).options).map(s=>{const o=r[s.title];return o&&o!=s.title&&(s=Object.assign({},s,{title:o})),s})}}function W0e(t,e){const n=new Nr;for(const r of t){const i={type:"button",model:new Sk({commandName:Gn,commandParam:r.model,label:r.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};r.view&&typeof r.view!="string"&&(r.view.styles&&i.model.set("labelStyle",`font-size:${r.view.styles["font-size"]}`),r.view.classes&&i.model.set("class",`${i.model.class} ${r.view.classes}`)),i.model.bind("isOn").to(e,"value",s=>s===r.model),n.add(i)}return n}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class j0e extends L{static get requires(){return[z0e,H0e]}static get pluginName(){return"FontSize"}normalizeSizeOptions(e){return Lk(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class G0e extends e1{constructor(e){super(e,Wi)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class q0e extends L{static get pluginName(){return"FontColorEditing"}constructor(e){super(e),e.config.define(Wi,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:Wi,value:mM("color")}}),e.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:Wi,value:n=>n.getAttribute("color")}}),e.conversion.for("downcast").attributeToElement({model:Wi,view:pM("color")}),e.commands.add(Wi,new G0e(e)),e.model.schema.extend("$text",{allowAttributes:Wi}),e.model.schema.setAttributeProperties(Wi,{isFormatting:!0,copyOnEnter:!0})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class wM extends L{constructor(e,{commandName:n,componentName:r,icon:i,dropdownLabel:s}){super(e),this.commandName=n,this.componentName=r,this.icon=i,this.dropdownLabel=s,this.columns=e.config.get(`${this.componentName}.columns`)}init(){const e=this.editor,n=e.locale,r=n.t,i=e.commands.get(this.commandName),s=e.config.get(this.componentName),o=ahe(s.colors),a=ohe(n,o),l=s.documentColors,c=s.colorPicker!==!1;e.ui.componentFactory.add(this.componentName,u=>{const d=ho(u);let h=!1;const f=S0e({dropdownView:d,colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:r("Remove color"),colorPickerLabel:r("Color picker"),documentColorsLabel:l!==0?r("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:c?s.colorPicker||{}:!1});return f.bind("selectedColor").to(i,"value"),d.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),d.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),d.bind("isEnabled").to(i),f.on("execute",(p,g)=>{d.isOpen&&e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),g.source!=="colorPicker"&&e.editing.view.focus(),g.source==="colorPickerSaveButton"&&(d.isOpen=!1)}),f.on("colorPicker:show",()=>{this._undoStepBatch=e.model.createBatch()}),f.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(d.isOpen=!1,e.execute("undo",this._undoStepBatch)),e.editing.view.focus()}),d.on("change:isOpen",(p,g,_)=>{h||(h=!0,d.colorSelectorView.appendUI()),_&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),K0(d,()=>d.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(p=>p.isOn)),d}),e.ui.componentFactory.add(`menuBar:${this.componentName}`,u=>{const d=new Kr(u);d.buttonView.set({label:this.dropdownLabel,icon:this.icon}),d.bind("isEnabled").to(i);let h=!1;const f=new m9(u,{colors:a.map(p=>({label:p.label,color:p.model,options:{hasBorder:p.hasBorder}})),columns:this.columns,removeButtonLabel:r("Remove color"),colorPickerLabel:r("Color picker"),documentColorsLabel:l!==0?r("Document colors"):"",documentColorsCount:l===void 0?this.columns:l,colorPickerViewConfig:!1});return f.bind("selectedColor").to(i,"value"),f.delegate("execute").to(d),f.on("execute",(p,g)=>{e.execute(this.commandName,{value:g.value,batch:this._undoStepBatch}),e.editing.view.focus()}),d.on("change:isOpen",(p,g,_)=>{h||(h=!0,f.appendUI()),_&&(l!==0&&f.updateDocumentColors(e.model,this.componentName),f.updateSelectedColors(),f.showColorGridsFragment())}),d.panelView.children.add(f),d})}}const Y0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K0e extends wM{constructor(e){const n=e.locale.t;super(e,{commandName:Wi,componentName:Wi,icon:Y0e,dropdownLabel:n("Font Color")})}static get pluginName(){return"FontColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Z0e extends L{static get requires(){return[q0e,K0e]}static get pluginName(){return"FontColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class J0e extends e1{constructor(e){super(e,Rs)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class X0e extends L{static get pluginName(){return"FontBackgroundColorEditing"}constructor(e){super(e),e.config.define(Rs,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),e.data.addStyleProcessorRules(Cue),e.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:Rs,value:mM("background-color")}}),e.conversion.for("downcast").attributeToElement({model:Rs,view:pM("background-color")}),e.commands.add(Rs,new J0e(e)),e.model.schema.extend("$text",{allowAttributes:Rs}),e.model.schema.setAttributeProperties(Rs,{isFormatting:!0,copyOnEnter:!0})}}const Q0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class e1e extends wM{constructor(e){const n=e.locale.t;super(e,{commandName:Rs,componentName:Rs,icon:Q0e,dropdownLabel:n("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class t1e extends L{static get requires(){return[X0e,e1e]}static get pluginName(){return"FontBackgroundColor"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class vM extends L{static get requires(){return[D0e,j0e,Z0e,t1e]}static get pluginName(){return"Font"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Co(t,e,n,r){let i,s=null;typeof r=="function"?i=r:(s=t.commands.get(r),i=()=>{t.execute(r)}),t.model.document.on("change:data",(o,a)=>{if(s&&!s.isEnabled||!e.isEnabled)return;const l=vn(t.model.document.selection.getRanges());if(!l.isCollapsed||a.isUndo||!a.isLocal)return;const c=Array.from(t.model.document.differ.getChanges()),u=c[0];if(c.length!=1||u.type!=="insert"||u.name!="$text"||u.length!=1)return;const d=u.position.parent;if(d.is("element","codeBlock")||d.is("element","listItem")&&typeof r!="function"&&!["numberedList","bulletedList","todoList"].includes(r)||s&&s.value===!0)return;const h=d.getChild(0),f=t.model.createRangeOn(h);if(!f.containsRange(l)&&!l.end.isEqual(f.end))return;const p=n.exec(h.data.substr(0,l.end.offset));p&&t.model.enqueueChange(g=>{const _=g.createPositionAt(d,0),v=g.createPositionAt(d,p[0].length),w=new Gr(_,v);if(i({match:p})!==!1){g.remove(w);const k=t.model.document.selection.getFirstRange(),S=g.createRangeIn(d);d.isEmpty&&!S.isEqual(k)&&!S.containsRange(k,!0)&&g.remove(d)}w.detach(),t.model.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Vl(t,e,n,r){let i,s;n instanceof RegExp?i=n:s=n,s=s||(o=>{let a;const l=[],c=[];for(;(a=i.exec(o))!==null&&!(a&&a.length<4);){let{index:u,"1":d,"2":h,"3":f}=a;const p=d+h+f;u+=a[0].length-p.length;const g=[u,u+d.length],_=[u+d.length+h.length,u+d.length+h.length+f.length];l.push(g),l.push(_),c.push([u+d.length,u+d.length+h.length])}return{remove:l,format:c}}),t.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const l=t.model,c=l.document.selection;if(!c.isCollapsed)return;const u=Array.from(l.document.differ.getChanges()),d=u[0];if(u.length!=1||d.type!=="insert"||d.name!="$text"||d.length!=1)return;const h=c.focus,f=h.parent,{text:p,range:g}=n1e(l.createRange(l.createPositionAt(f,0),h),l),_=s(p),v=QP(g.start,_.format,l),w=QP(g.start,_.remove,l);v.length&&w.length&&l.enqueueChange(b=>{if(r(b,v)!==!1){for(const S of w.reverse())b.remove(S);l.enqueueChange(()=>{t.plugins.get("Delete").requestUndoOnBackspace()})}})})}function QP(t,e,n){return e.filter(r=>r[0]!==void 0&&r[1]!==void 0).map(r=>n.createRange(t.getShiftedBy(r[0]),t.getShiftedBy(r[1])))}function n1e(t,e){let n=t.start;return{text:Array.from(t.getItems()).reduce((i,s)=>!(s.is("$text")||s.is("$textProxy"))||s.getAttribute("code")?(n=e.createPositionAfter(s),""):i+s.data,""),range:e.createRange(n,t.end)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class yM extends L{static get requires(){return[vu]}static get pluginName(){return"Autoformat"}afterInit(){const e=this.editor,n=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&Co(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&Co(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&Co(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&Co(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const n=vm(this.editor,"bold");Vl(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,n),Vl(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,n)}if(e.get("italic")){const n=vm(this.editor,"italic");Vl(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,n),Vl(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,n)}if(e.get("code")){const n=vm(this.editor,"code");Vl(this.editor,this,/(`)([^`]+)(`)$/g,n)}if(e.get("strikethrough")){const n=vm(this.editor,"strikethrough");Vl(this.editor,this,/(~~)([^~]+)(~~)$/g,n)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(n=>n.match(/^heading[1-6]$/)).forEach(n=>{const r=n[7],i=new RegExp(`^(#{${r}})\\s$`);Co(this.editor,this,i,()=>{if(!e.isEnabled||e.value===n)return!1;this.editor.execute("heading",{value:n})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&Co(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,n=e.model.document.selection;e.commands.get("codeBlock")&&Co(e,this,/^```$/,()=>{if(n.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&Co(this.editor,this,/^---$/,"horizontalLine")}}function vm(t,e){return(n,r)=>{if(!t.commands.get(e).isEnabled)return!1;const s=t.model.schema.getValidRanges(r,e);for(const o of s)n.setAttribute(e,!0,o);n.removeSelectionAttribute(e)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function r1e(t){return t.createContainerElement("span",{class:"image-inline"},t.createEmptyElement("img"))}function e3(t){return t.createContainerElement("figure",{class:"image"},[t.createEmptyElement("img"),t.createSlot("children")])}function bM(t,e){const n=t.plugins.get("ImageUtils"),r=t.plugins.has("ImageInlineEditing")&&t.plugins.has("ImageBlockEditing");return s=>n.isInlineImageView(s)?r&&(s.getStyle("display")=="block"||s.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline")!==e?null:i(s):null;function i(s){const o={name:!0};return s.hasAttribute("src")&&(o.attributes=["src"]),o}}function $k(t,e){const n=vn(e.getSelectedBlocks());return!n||t.isObject(n)||n.isEmpty&&n.name!="listItem"?"imageBlock":"imageInline"}function yg(t){return t&&t.endsWith("px")?parseInt(t):null}function bg(t){const e=yg(t.getStyle("width")),n=yg(t.getStyle("height"));return!!(e&&n)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const i1e=/^(image|image-inline)$/;class ir extends L{constructor(){super(...arguments),this._domEmitter=new(Mr())}static get pluginName(){return"ImageUtils"}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},n=null,r=null,i={}){const s=this.editor,o=s.model,a=o.document.selection,l=_M(s,n||a,r);e={...Object.fromEntries(a.getAttributes()),...e};for(const c in e)o.schema.checkAttribute(l,c)||delete e[c];return o.change(c=>{const{setImageSizes:u=!0}=i,d=c.createElement(l,e);return o.insertObject(d,n,null,{setSelection:"on",findOptimalPosition:!n&&l!="imageInline"?"auto":void 0}),d.parent?(u&&this.setImageNaturalSizeAttributes(d),d):null})}setImageNaturalSizeAttributes(e){const n=e.getAttribute("src");n&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(r=>{const i=new Q.window.Image;this._domEmitter.listenTo(i,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(r.batch,s=>{s.setAttribute("width",i.naturalWidth,e),s.setAttribute("height",i.naturalHeight,e)}),this._domEmitter.stopListening(i,"load")}),i.src=n}))}getClosestSelectedImageWidget(e){const n=e.getFirstPosition();if(!n)return null;const r=e.getSelectedElement();if(r&&this.isImageWidget(r))return r;let i=n.parent;for(;i;){if(i.is("element")&&this.isImageWidget(i))return i;i=i.parent}return null}getClosestSelectedImageElement(e){const n=e.getSelectedElement();return this.isImage(n)?n:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:i1e})}isImageAllowed(){const n=this.editor.model.document.selection;return s1e(this.editor,n)&&o1e(n)}toImageWidget(e,n,r){return n.setCustomProperty("image",!0,e),Kme(e,n,{label:()=>{const o=this.findViewImgElement(e).getAttribute("alt");return o?`${o} ${r}`:r}})}isImageWidget(e){return!!e.getCustomProperty("image")&&zt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const n=this.editor.editing.view;for(const{item:r}of n.createRangeIn(e))if(this.isInlineImageView(r))return r}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function s1e(t,e){if(_M(t,e,null)=="imageBlock"){const r=a1e(e,t.model);if(t.model.schema.checkChild(r,"imageBlock"))return!0}else if(t.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function o1e(t){return[...t.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function a1e(t,e){const r=tpe(t,e).start.parent;return r.isEmpty&&!r.is("element","$root")?r.parent:r}function _M(t,e,n){const r=t.model.schema,i=t.config.get("image.insert.type");return t.plugins.has("ImageBlockEditing")?t.plugins.has("ImageInlineEditing")?n||(i==="inline"?"imageInline":i!=="auto"?"imageBlock":e.is("selection")?$k(r,e):r.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class l1e extends He{refresh(){const r=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!r,this.isEnabled&&r.hasAttribute("alt")?this.value=r.getAttribute("alt"):this.value=!1}execute(e){const n=this.editor,r=n.plugins.get("ImageUtils"),i=n.model,s=r.getClosestSelectedImageElement(i.document.selection);i.change(o=>{o.setAttribute("alt",e.newValue,s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class c1e extends L{static get requires(){return[ir]}static get pluginName(){return"ImageTextAlternativeEditing"}init(){this.editor.commands.add("imageTextAlternative",new l1e(this.editor))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class u1e extends ee{constructor(e){super(e);const n=this.locale.t;this.focusTracker=new jt,this.keystrokes=new wn,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(n("Save"),pe.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(n("Cancel"),pe.cancel,"ck-button-cancel","cancel"),this._focusables=new Dr,this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),tk({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,n,r,i){const s=new Se(this.locale);return s.set({label:e,icon:n,tooltip:!0}),s.extendTemplate({attributes:{class:r}}),i&&s.delegate("execute").to(this,i),s}_createLabeledInputView(){const e=this.locale.t,n=new of(this.locale,Z0);return n.label=e("Text alternative"),n}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function d1e(t){const e=t.plugins.get("ContextualBalloon");if(t.plugins.get("ImageUtils").getClosestSelectedImageWidget(t.editing.view.document.selection)){const r=kM(t);e.updatePosition(r)}}function kM(t){const e=t.editing.view,n=An.defaultPositions,r=t.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(r.getClosestSelectedImageWidget(e.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class h1e extends L{static get requires(){return[pg]}static get pluginName(){return"ImageTextAlternativeUI"}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,n=e.t;e.ui.componentFactory.add("imageTextAlternative",r=>{const i=e.commands.get("imageTextAlternative"),s=new Se(r);return s.set({label:n("Change image text alternative"),icon:pe.textAlternative,tooltip:!0}),s.bind("isEnabled").to(i,"isEnabled"),s.bind("isOn").to(i,"value",o=>!!o),this.listenTo(s,"execute",()=>{this._showForm()}),s})}_createForm(){const e=this.editor,r=e.editing.view.document,i=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(S8(u1e))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(s,o)=>{this._hideForm(!0),o()}),this.listenTo(e.ui,"update",()=>{i.getClosestSelectedImageWidget(r.selection)?this._isVisible&&d1e(e):this._hideForm(!0)}),F0({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,n=e.commands.get("imageTextAlternative"),r=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:kM(e)}),r.fieldView.value=r.fieldView.element.value=n.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class EM extends L{static get requires(){return[c1e,h1e]}static get pluginName(){return"ImageTextAlternative"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function f1e(t){const e=(n,r,i)=>{if(!i.consumable.test(r.viewItem,{name:!0,classes:"image"}))return;const s=t.findViewImgElement(r.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(r.viewItem,{name:!0,classes:"image"});const o=i.convertItem(s,r.modelCursor),a=vn(o.modelRange.getItems());if(!a){i.consumable.revert(r.viewItem,{name:!0,classes:"image"});return}i.convertChildren(r.viewItem,a),i.updateConversionResult(a,r)};return n=>{n.on("element:figure",e)}}function m1e(t){const e=["srcset","media","type","sizes"],n=(r,i,s)=>{const o=i.viewItem;if(!s.consumable.test(o,{name:!0}))return;const a=new Map;for(const u of o.getChildren())if(u.is("element","source")){const d={};for(const h of e)u.hasAttribute(h)&&s.consumable.test(u,{attributes:h})&&(d[h]=u.getAttribute(h));Object.keys(d).length&&a.set(u,d)}const l=t.findViewImgElement(o);if(!l)return;let c=i.modelCursor.parent;if(!c.is("element","imageBlock")){const u=s.convertItem(l,i.modelCursor);i.modelRange=u.modelRange,i.modelCursor=u.modelCursor,c=vn(u.modelRange.getItems())}s.consumable.consume(o,{name:!0});for(const[u,d]of a)s.consumable.consume(u,{attributes:Object.keys(d)});a.size&&s.writer.setAttribute("sources",Array.from(a.values()),c),s.convertChildren(o,c)};return r=>{r.on("element:picture",n)}}function CM(t,e){const n=(r,i,s)=>{if(!s.consumable.consume(i.item,r.name))return;const o=s.writer,a=s.mapper.toViewElement(i.item),l=t.findViewImgElement(a);i.attributeNewValue===null?(o.removeAttribute("srcset",l),o.removeAttribute("sizes",l)):i.attributeNewValue&&(o.setAttribute("srcset",i.attributeNewValue,l),o.setAttribute("sizes","100vw",l))};return r=>{r.on(`attribute:srcset:${e}`,n)}}function p1e(t){const e=(n,r,i)=>{if(!i.consumable.consume(r.item,n.name))return;const s=i.writer,o=i.mapper.toViewElement(r.item),a=t.findViewImgElement(o),l=r.attributeNewValue;if(l&&l.length){const c=s.createContainerElement("picture",null,l.map(h=>s.createEmptyElement("source",h))),u=[];let d=a.parent;for(;d&&d.is("attributeElement");){const h=d.parent;s.unwrap(s.createRangeOn(a),d),u.unshift(d),d=h}s.insert(s.createPositionBefore(a),c),s.move(s.createRangeOn(a),s.createPositionAt(c,"end"));for(const h of u)s.wrap(s.createRangeOn(c),h)}else if(a.parent.is("element","picture")){const c=a.parent;s.move(s.createRangeOn(a),s.createPositionBefore(c)),s.remove(c)}};return n=>{n.on("attribute:sources:imageBlock",e),n.on("attribute:sources:imageInline",e)}}function _g(t,e,n){const r=(i,s,o)=>{if(!o.consumable.consume(s.item,i.name))return;const a=o.writer,l=o.mapper.toViewElement(s.item),c=t.findViewImgElement(l);a.setAttribute(s.attributeKey,s.attributeNewValue||"",c)};return i=>{i.on(`attribute:${n}:${e}`,r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Fk extends hs{observe(e){this.listenTo(e,"load",(n,r)=>{const i=r.target;this.checkShouldIgnoreEventFromTarget(i)||i.tagName=="IMG"&&this._fireEvents(r)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class g1e extends He{constructor(e){super(e);const n=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||n==="block"&&Ie("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||n==="inline"&&Ie("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const n=st(e.source),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(r.getAttributes());n.forEach((o,a)=>{const l=r.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&l&&i.isImage(l)){const c=this.editor.model.createPositionAfter(l);i.insertImage({...o,...s},c)}else i.insertImage({...o,...s})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class w1e extends He{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const n=this.editor.plugins.get("ImageUtils"),r=this.editor.model.document.selection.getSelectedElement();this.isEnabled=n.isImage(r),this.value=this.isEnabled?r.getAttribute("src"):null}execute(e){const n=this.editor.model.document.selection.getSelectedElement(),r=this.editor.plugins.get("ImageUtils");this.editor.model.change(i=>{i.setAttribute("src",e.source,n),this.cleanupImage(i,n),r.setImageNaturalSizeAttributes(n)})}cleanupImage(e,n){e.removeAttribute("srcset",n),e.removeAttribute("sizes",n),e.removeAttribute("sources",n),e.removeAttribute("width",n),e.removeAttribute("height",n),e.removeAttribute("alt",n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class df extends L{static get requires(){return[ir]}static get pluginName(){return"ImageEditing"}init(){const e=this.editor,n=e.conversion;e.editing.view.addObserver(Fk),n.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const r=new g1e(e),i=new w1e(e);e.commands.add("insertImage",r),e.commands.add("replaceImageSource",i),e.commands.add("imageInsert",r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class xM extends L{static get requires(){return[ir]}static get pluginName(){return"ImageSizeAttributes"}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const n=this.editor,r=n.plugins.get("ImageUtils"),i=e==="imageBlock"?"figure":"img";n.conversion.for("upcast").attributeToAttribute({view:{name:i,styles:{width:/.+/}},model:{key:"width",value:o=>bg(o)?yg(o.getStyle("width")):null}}).attributeToAttribute({view:{name:i,key:"width"},model:"width"}).attributeToAttribute({view:{name:i,styles:{height:/.+/}},model:{key:"height",value:o=>bg(o)?yg(o.getStyle("height")):null}}).attributeToAttribute({view:{name:i,key:"height"},model:"height"}),n.conversion.for("editingDowncast").add(o=>{s(o,"width","width",!0),s(o,"height","height",!0)}),n.conversion.for("dataDowncast").add(o=>{s(o,"width","width",!1),s(o,"height","height",!1)});function s(o,a,l,c){o.on(`attribute:${a}:${e}`,(u,d,h)=>{if(!h.consumable.consume(d.item,u.name))return;const f=h.writer,p=h.mapper.toViewElement(d.item),g=r.findViewImgElement(p);if(d.attributeNewValue!==null?f.setAttribute(l,d.attributeNewValue,g):f.removeAttribute(l,g),d.item.hasAttribute("sources"))return;const _=d.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!_&&!c)return;const v=d.item.getAttribute("width"),w=d.item.getAttribute("height");v&&w&&f.setStyle("aspect-ratio",`${v}/${w}`,g)})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class SM extends He{constructor(e,n){super(e),this._modelElementName=n}refresh(){const n=this.editor.plugins.get("ImageUtils"),r=n.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=n.isInlineImage(r):this.isEnabled=n.isBlockImage(r)}execute(e={}){const n=this.editor,r=this.editor.model,i=n.plugins.get("ImageUtils"),s=i.getClosestSelectedImageElement(r.document.selection),o=Object.fromEntries(s.getAttributes());return!o.src&&!o.uploadId?null:r.change(a=>{const{setImageSizes:l=!0}=e,c=Array.from(r.markers).filter(h=>h.getRange().containsItem(s)),u=i.insertImage(o,r.createSelection(s,"on"),this._modelElementName,{setImageSizes:l});if(!u)return null;const d=a.createRangeOn(u);for(const h of c){const f=h.getRange(),p=f.root.rootName!="$graveyard"?f.getJoined(d,!0):d;a.updateMarker(h,{range:p})}return{oldElement:s,newElement:u}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class TM extends L{static get requires(){return[ir]}static get pluginName(){return"ImagePlaceholder"}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("editingDowncast").add(i=>{i.on("attribute:placeholder",(s,o,a)=>{if(!a.consumable.test(o.item,s.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,s.name);const l=a.writer,c=a.mapper.toViewElement(o.item),u=r.findViewImgElement(c);o.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${o.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){const e=this.editor,n=e.model,r=e.editing,i=r.view,s=e.plugins.get("ImageUtils");i.addObserver(Fk),this.listenTo(i.document,"imageLoaded",(o,a)=>{const l=i.domConverter.mapDomToView(a.target);if(!l)return;const c=s.getImageWidgetFromImageView(l);if(!c)return;const u=r.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||n.enqueueChange({isUndoable:!1},d=>{d.removeAttribute("placeholder",u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class PM extends L{static get requires(){return[df,xM,ir,TM,os]}static get pluginName(){return"ImageBlockEditing"}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new SM(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,n=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>e3(o)}),r.for("editingDowncast").elementToStructure({model:"imageBlock",view:(s,{writer:o})=>i.toImageWidget(e3(o),o,n("image widget"))}),r.for("downcast").add(_g(i,"imageBlock","src")).add(_g(i,"imageBlock","alt")).add(CM(i,"imageBlock")),r.for("upcast").elementToElement({view:bM(e,"imageBlock"),model:(s,{writer:o})=>o.createElement("imageBlock",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)}).add(f1e(i))}_setupClipboardIntegration(){const e=this.editor,n=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(i.isInlineImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=n.document.selection.getFirstRange();const u=n.createSelection(c);if($k(n.schema,u)==="imageBlock"){const d=new G0(r.document),h=l.map(f=>d.createElement("figure",{class:"image"},f));a.content=d.createDocumentFragment(h)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&n.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageBlock")&&i.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class v1e extends ee{constructor(e,n=[]){super(e),this.focusTracker=new jt,this.keystrokes=new wn,this._focusables=new Dr,this.children=this.createCollection(),this._focusCycler=new Lr({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const r of n)this.children.add(r),this._focusables.add(r),r instanceof JO&&this._focusables.addMany(r.children);if(this._focusables.length>1)for(const r of this._focusables)y1e(r)&&(r.focusCycler.on("forwardCycle",i=>{this._focusCycler.focusNext(),i.stop()}),r.focusCycler.on("backwardCycle",i=>{this._focusCycler.focusPrevious(),i.stop()}));this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),tk({view:this});for(const n of this._focusables)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element);const e=n=>n.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}function y1e(t){return"focusCycler"in t}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class AM extends L{static get pluginName(){return"ImageInsertUI"}static get requires(){return[ir]}constructor(e){super(e),this._integrations=new Map,e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,n=e.model.document.selection,r=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=r.isImage(n.getSelectedElement())});const i=s=>this._createToolbarComponent(s);e.ui.componentFactory.add("insertImage",i),e.ui.componentFactory.add("imageInsert",i)}registerIntegration({name:e,observable:n,buttonViewCreator:r,formViewCreator:i,requiresForm:s}){this._integrations.has(e)&&Ie("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:n,buttonViewCreator:r,formViewCreator:i,requiresForm:!!s})}_createToolbarComponent(e){const n=this.editor,r=e.t,i=this._prepareIntegrations();if(!i.length)return null;let s;const o=i[0];if(i.length==1){if(!o.requiresForm)return o.buttonViewCreator(!0);s=o.buttonViewCreator(!0)}else{const c=o.buttonViewCreator(!1);s=new kk(e,c),s.tooltip=!0,s.bind("label").to(this,"isImageSelected",u=>r(u?"Replace image":"Insert image"))}const a=this.dropdownView=ho(e,s),l=i.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),a.once("change:isOpen",()=>{const c=i.map(({formViewCreator:d})=>d(i.length==1)),u=new v1e(n.locale,c);a.panelView.children.add(u)}),a}_prepareIntegrations(){const n=this.editor.config.get("image.insert.integrations"),r=[];if(!n.length)return Ie("image-insert-integrations-not-specified"),r;for(const i of n){if(!this._integrations.has(i)){["upload","assetManager","url"].includes(i)||Ie("image-insert-unknown-integration",{item:i});continue}r.push(this._integrations.get(i))}return r.length||Ie("image-insert-integrations-not-registered"),r}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class b1e extends L{static get requires(){return[PM,Ik,EM,AM]}static get pluginName(){return"ImageBlock"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class _1e extends L{static get requires(){return[df,xM,ir,TM,os]}static get pluginName(){return"ImageInlineEditing"}init(){const e=this.editor,n=e.model.schema;n.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"]}),n.addChildCheck((r,i)=>{if(r.endsWith("caption")&&i.name==="imageInline")return!1}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new SM(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,n=e.t,r=e.conversion,i=e.plugins.get("ImageUtils");r.for("dataDowncast").elementToElement({model:"imageInline",view:(s,{writer:o})=>o.createEmptyElement("img")}),r.for("editingDowncast").elementToStructure({model:"imageInline",view:(s,{writer:o})=>i.toImageWidget(r1e(o),o,n("image widget"))}),r.for("downcast").add(_g(i,"imageInline","src")).add(_g(i,"imageInline","alt")).add(CM(i,"imageInline")),r.for("upcast").elementToElement({view:bM(e,"imageInline"),model:(s,{writer:o})=>o.createElement("imageInline",s.hasAttribute("src")?{src:s.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,n=e.model,r=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline");this.listenTo(s,"inputTransformation",(o,a)=>{const l=Array.from(a.content.getChildren());let c;if(!l.every(i.isBlockImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=n.document.selection.getFirstRange();const u=n.createSelection(c);if($k(n.schema,u)==="imageInline"){const d=new G0(r.document),h=l.map(f=>f.childCount===1?(Array.from(f.getAttributes()).forEach(p=>d.setAttribute(...p,i.findViewImgElement(f))),f.getChild(0)):f);a.content=d.createDocumentFragment(h)}}),this.listenTo(s,"contentInsertion",(o,a)=>{a.method==="paste"&&n.change(l=>{const c=l.createRangeIn(a.content);for(const u of c.getItems())u.is("element","imageInline")&&i.setImageNaturalSizeAttributes(u)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class k1e extends L{static get requires(){return[_1e,Ik,EM,AM]}static get pluginName(){return"ImageInline"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class IM extends L{static get requires(){return[b1e,k1e]}static get pluginName(){return"Image"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class RM extends L{static get pluginName(){return"ImageCaptionUtils"}static get requires(){return[ir]}getCaptionFromImageModelElement(e){for(const n of e.getChildren())if(n&&n.is("element","caption"))return n;return null}getCaptionFromModelSelection(e){const n=this.editor.plugins.get("ImageUtils"),r=e.getFirstPosition().findAncestor("caption");return r&&n.isBlockImage(r.parent)?r:null}matchImageCaptionViewElement(e){const n=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&n.isBlockImageView(e.parent)?{name:!0}:null}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class E1e extends He{refresh(){const e=this.editor,n=e.plugins.get("ImageCaptionUtils"),r=e.plugins.get("ImageUtils");if(!e.plugins.has(PM)){this.isEnabled=!1,this.value=!1;return}const i=e.model.document.selection,s=i.getSelectedElement();if(!s){const o=n.getCaptionFromModelSelection(i);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=r.isImage(s),this.isEnabled?this.value=!!n.getCaptionFromImageModelElement(s):this.value=!1}execute(e={}){const{focusCaptionOnShow:n}=e;this.editor.model.change(r=>{this.value?this._hideImageCaption(r):this._showImageCaption(r,n)})}_showImageCaption(e,n){const i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=i.getSelectedElement();const l=s._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=i.getSelectedElement());const c=l||e.createElement("caption");e.append(c,a),n&&e.setSelection(c,"in")}_hideImageCaption(e){const n=this.editor,r=n.model.document.selection,i=n.plugins.get("ImageCaptionEditing"),s=n.plugins.get("ImageCaptionUtils");let o=r.getSelectedElement(),a;o?a=s.getCaptionFromImageModelElement(o):(a=s.getCaptionFromModelSelection(r),o=a.parent),i._saveCaption(o,a),e.setSelection(o,"on"),e.remove(a)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class C1e extends L{static get requires(){return[ir,RM]}static get pluginName(){return"ImageCaptionEditing"}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,n=e.model.schema;n.isRegistered("caption")?n.extend("caption",{allowIn:"imageBlock"}):n.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new E1e(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,n=e.editing.view,r=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),s=e.t;e.conversion.for("upcast").elementToElement({view:o=>i.matchImageCaptionViewElement(o),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>r.isBlockImage(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!r.isBlockImage(o.parent))return null;const l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),l.placeholder=s("Enter image caption"),ok({view:n,element:l,keepOnFocus:!0});const c=o.parent.getAttribute("alt"),u=c?s("Caption for image: %0",[c]):s("Caption for the image");return epe(l,a,{label:u})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,n=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),i=e.commands.get("imageTypeInline"),s=e.commands.get("imageTypeBlock"),o=a=>{if(!a.return)return;const{oldElement:l,newElement:c}=a.return;/* istanbul ignore if: paranoid check -- @preserve */if(!l)return;if(n.isBlockImage(l)){const d=r.getCaptionFromImageModelElement(l);if(d){this._saveCaption(c,d);return}}const u=this._getSavedCaption(l);u&&this._saveCaption(c,u)};i&&this.listenTo(i,"execute",o,{priority:"low"}),s&&this.listenTo(s,"execute",o,{priority:"low"})}_getSavedCaption(e){const n=this._savedCaptionsMap.get(e);return n?ct.fromJSON(n):null}_saveCaption(e,n){this._savedCaptionsMap.set(e,n.toJSON())}_registerCaptionReconversion(){const e=this.editor,n=e.model,r=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils");n.document.on("change:data",()=>{const s=n.document.differ.getChanges();for(const o of s){if(o.attributeKey!=="alt")continue;const a=o.range.start.nodeAfter;if(r.isBlockImage(a)){const l=i.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class x1e extends L{static get requires(){return[RM]}static get pluginName(){return"ImageCaptionUI"}init(){const e=this.editor,n=e.editing.view,r=e.plugins.get("ImageCaptionUtils"),i=e.t;e.ui.componentFactory.add("toggleImageCaption",s=>{const o=e.commands.get("toggleImageCaption"),a=new Se(s);return a.set({icon:pe.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",l=>i(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const l=r.getCaptionFromModelSelection(e.model.document.selection);if(l){const c=e.editing.mapper.toViewElement(l);n.scrollToTheSelection(),n.change(u=>{u.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class OM extends L{static get requires(){return[C1e,x1e]}static get pluginName(){return"ImageCaption"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function MM(t){const e=t.map(n=>n.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function S1e(t){return new Promise((e,n)=>{const r=t.getAttribute("src");fetch(r).then(i=>i.blob()).then(i=>{const s=NM(i,r),a=`image.${s.replace("image/","")}`,l=new File([i],a,{type:s});e(l)}).catch(i=>i&&i.name==="TypeError"?P1e(r).then(e).catch(n):n(i))})}function T1e(t,e){return!t.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function NM(t,e){return t.type?t.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function P1e(t){return A1e(t).then(e=>{const n=NM(e,t),i=`image.${n.replace("image/","")}`;return new File([e],i,{type:n})})}function A1e(t){return new Promise((e,n)=>{const r=Q.document.createElement("img");r.addEventListener("load",()=>{const i=Q.document.createElement("canvas");i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0),i.toBlob(o=>o?e(o):n())}),r.addEventListener("error",()=>n()),r.src=t})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class I1e extends L{static get pluginName(){return"ImageUploadUI"}init(){const e=this.editor,n=e.t,r=()=>{const i=this._createButton(ZO);return i.set({label:n("Upload image from computer"),tooltip:!0}),i};if(e.ui.componentFactory.add("uploadImage",r),e.ui.componentFactory.add("imageUpload",r),e.ui.componentFactory.add("menuBar:uploadImage",()=>{const i=this._createButton(k9);return i.label=n("Image from computer"),i}),e.plugins.has("ImageInsertUI")){const i=e.plugins.get("ImageInsertUI");i.registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>{const s=e.ui.componentFactory.create("uploadImage");return s.bind("label").to(i,"isImageSelected",o=>n(o?"Replace image from computer":"Upload image from computer")),s},formViewCreator:()=>{const s=e.ui.componentFactory.create("uploadImage");return s.withText=!0,s.bind("label").to(i,"isImageSelected",o=>n(o?"Replace from computer":"Upload from computer")),s.on("execute",()=>{i.dropdownView.isOpen=!1}),s}})}}_createButton(e){const n=this.editor,r=n.locale,i=n.commands.get("uploadImage"),s=n.config.get("image.upload.types"),o=MM(s),a=new e(n.locale),l=r.t;return a.set({acceptedType:s.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload image from computer"),icon:pe.imageUpload}),a.bind("isEnabled").to(i),a.on("done",(c,u)=>{const d=Array.from(u).filter(h=>o.test(h.type));d.length&&(n.execute("uploadImage",{file:d}),n.editing.view.focus())}),a}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class R1e extends L{static get pluginName(){return"ImageUploadProgress"}constructor(e){super(e),this.uploadStatusChange=(n,r,i)=>{const s=this.editor,o=r.item,a=o.getAttribute("uploadId");if(!i.consumable.consume(r.item,n.name))return;const l=s.plugins.get("ImageUtils"),c=s.plugins.get(Ai),u=a?r.attributeNewValue:null,d=this.placeholder,h=s.editing.mapper.toViewElement(o),f=i.writer;if(u=="reading"){t3(h,f),n3(l,d,h,f);return}if(u=="uploading"){const p=c.loaders.get(a);t3(h,f),p?(r3(h,f),M1e(h,f,p,s.editing.view),F1e(l,h,f,p)):n3(l,d,h,f);return}u=="complete"&&c.loaders.get(a)&&D1e(h,f,s.editing.view),N1e(h,f),r3(h,f),O1e(h,f)},this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function t3(t,e){t.hasClass("ck-appear")||e.addClass("ck-appear",t)}function O1e(t,e){e.removeClass("ck-appear",t)}function n3(t,e,n,r){n.hasClass("ck-image-upload-placeholder")||r.addClass("ck-image-upload-placeholder",n);const i=t.findViewImgElement(n);i.getAttribute("src")!==e&&r.setAttribute("src",e,i),DM(n,"placeholder")||r.insert(r.createPositionAfter(i),$1e(r))}function r3(t,e){t.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",t),LM(t,e,"placeholder")}function M1e(t,e,n,r){const i=L1e(e);e.insert(e.createPositionAt(t,"end"),i),n.on("change:uploadedPercent",(s,o,a)=>{r.change(l=>{l.setStyle("width",a+"%",i)})})}function N1e(t,e){LM(t,e,"progressBar")}function D1e(t,e,n){const r=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(t,"end"),r),setTimeout(()=>{n.change(i=>i.remove(i.createRangeOn(r)))},3e3)}function L1e(t){const e=t.createUIElement("div",{class:"ck-progress-bar"});return t.setCustomProperty("progressBar",!0,e),e}function $1e(t){const e=t.createUIElement("div",{class:"ck-upload-placeholder-loader"});return t.setCustomProperty("placeholder",!0,e),e}function DM(t,e){for(const n of t.getChildren())if(n.getCustomProperty(e))return n}function LM(t,e,n){const r=DM(t,n);r&&e.remove(e.createRangeOn(r))}function F1e(t,e,n,r){if(r.data){const i=t.findViewImgElement(e);n.setAttribute("src",r.data,i)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class V1e extends He{refresh(){const e=this.editor,n=e.plugins.get("ImageUtils"),r=e.model.document.selection.getSelectedElement();this.isEnabled=n.isImageAllowed()||n.isImage(r)}execute(e){const n=st(e.file),r=this.editor.model.document.selection,i=this.editor.plugins.get("ImageUtils"),s=Object.fromEntries(r.getAttributes());n.forEach((o,a)=>{const l=r.getSelectedElement();if(a&&l&&i.isImage(l)){const c=this.editor.model.createPositionAfter(l);this._uploadImage(o,s,c)}else this._uploadImage(o,s)})}_uploadImage(e,n,r){const i=this.editor,o=i.plugins.get(Ai).createLoader(e),a=i.plugins.get("ImageUtils");o&&a.insertImage({...n,uploadId:o.id},r)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class B1e extends L{static get requires(){return[Ai,bh,os,ir]}static get pluginName(){return"ImageUploadEditing"}constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,n=e.model.document,r=e.conversion,i=e.plugins.get(Ai),s=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline"),a=MM(e.config.get("image.upload.types")),l=new V1e(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),r.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(c,u)=>{if(U1e(u.dataTransfer))return;const d=Array.from(u.dataTransfer.files).filter(h=>h?a.test(h.type):!1);d.length&&(c.stop(),e.model.change(h=>{u.targetRanges&&h.setSelection(u.targetRanges.map(f=>e.editing.mapper.toModelRange(f))),e.execute("uploadImage",{file:d})}))}),this.listenTo(o,"inputTransformation",(c,u)=>{const d=Array.from(e.editing.view.createRangeIn(u.content)).map(f=>f.item).filter(f=>T1e(s,f)&&!f.getAttribute("uploadProcessed")).map(f=>({promise:S1e(f),imageElement:f}));if(!d.length)return;const h=new G0(e.editing.view.document);for(const f of d){h.setAttribute("uploadProcessed",!0,f.imageElement);const p=i.createLoader(f.promise);p&&(h.setAttribute("src","",f.imageElement),h.setAttribute("uploadId",p.id,f.imageElement))}}),e.editing.view.document.on("dragover",(c,u)=>{u.preventDefault()}),n.on("change",()=>{const c=n.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),u=new Set;for(const d of c)if(d.type=="insert"&&d.name!="$text"){const h=d.position.nodeAfter,f=d.position.root.rootName=="$graveyard";for(const p of z1e(e,h)){const g=p.getAttribute("uploadId");if(!g)continue;const _=i.loaders.get(g);_&&(f?u.has(g)||_.abort():(u.add(g),this._uploadImageElements.set(g,p),_.status=="idle"&&this._readAndUpload(_)))}}}),this.on("uploadComplete",(c,{imageElement:u,data:d})=>{const h=d.urls?d.urls:d;this.editor.model.change(f=>{f.setAttribute("src",h.default,u),this._parseAndSetSrcsetAttributeOnImage(h,u,f),s.setImageNaturalSizeAttributes(u)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){const n=this.editor,r=n.model,i=n.locale.t,s=n.plugins.get(Ai),o=n.plugins.get(bh),a=n.plugins.get("ImageUtils"),l=this._uploadImageElements;return r.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{const u=e.upload(),d=l.get(e.id);/* istanbul ignore next -- @preserve */if(me.isSafari){const h=n.editing.mapper.toViewElement(d),f=a.findViewImgElement(h);n.editing.view.once("render",()=>{if(!f.parent)return;const p=n.editing.view.domConverter.mapViewToDom(f.parent);if(!p)return;const g=p.style.display;p.style.display="none",p._ckHack=p.offsetHeight,p.style.display=g})}return r.enqueueChange({isUndoable:!1},h=>{h.setAttribute("uploadStatus","uploading",d)}),u}).then(u=>{r.enqueueChange({isUndoable:!1},d=>{const h=l.get(e.id);d.setAttribute("uploadStatus","complete",h),this.fire("uploadComplete",{data:u,imageElement:h})}),c()}).catch(u=>{if(e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&o.showWarning(u,{title:i("Upload failed"),namespace:"upload"}),r.enqueueChange({isUndoable:!1},d=>{d.remove(l.get(e.id))}),c()});function c(){r.enqueueChange({isUndoable:!1},u=>{const d=l.get(e.id);u.removeAttribute("uploadId",d),u.removeAttribute("uploadStatus",d),l.delete(e.id)}),s.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,n,r){let i=0;const s=Object.keys(e).filter(o=>{const a=parseInt(o,10);if(!isNaN(a))return i=Math.max(i,a),!0}).map(o=>`${e[o]} ${o}w`).join(", ");if(s!=""){const o={srcset:s};!n.hasAttribute("width")&&!n.hasAttribute("height")&&(o.width=i),r.setAttributes(o,n)}}}function U1e(t){return Array.from(t.types).includes("text/html")&&t.getData("text/html")!==""}function z1e(t,e){const n=t.plugins.get("ImageUtils");return Array.from(t.model.createRangeOn(e)).filter(r=>n.isImage(r.item)).map(r=>r.item)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $M extends L{static get pluginName(){return"ImageUpload"}static get requires(){return[B1e,I1e,R1e]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class H1e extends He{refresh(){const e=this.editor,r=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!r,!r||!r.hasAttribute("resizedWidth")?this.value=null:this.value={width:r.getAttribute("resizedWidth"),height:null}}execute(e){const n=this.editor,r=n.model,i=n.plugins.get("ImageUtils"),s=i.getClosestSelectedImageElement(r.document.selection);this.value={width:e.width,height:null},s&&r.change(o=>{o.setAttribute("resizedWidth",e.width,s),o.removeAttribute("resizedHeight",s),i.setImageNaturalSizeAttributes(s)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class FM extends L{static get requires(){return[ir]}static get pluginName(){return"ImageResizeEditing"}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,n=new H1e(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",n),e.commands.add("imageResize",n)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){const n=this.editor,r=n.plugins.get("ImageUtils");n.conversion.for("downcast").add(i=>i.on(`attribute:resizedWidth:${e}`,(s,o,a)=>{if(!a.consumable.consume(o.item,s.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(l.setStyle("width",o.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),n.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:i=>({key:"style",value:{height:i}})}),n.conversion.for("editingDowncast").add(i=>i.on(`attribute:resizedHeight:${e}`,(s,o,a)=>{if(!a.consumable.consume(o.item,s.name))return;const l=a.writer,c=a.mapper.toViewElement(o.item),u=e==="imageInline"?r.findViewImgElement(c):c;o.attributeNewValue!==null?l.setStyle("height",o.attributeNewValue,u):l.removeStyle("height",u)})),n.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:i=>bg(i)?null:i.getStyle("width")}}),n.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:i=>bg(i)?null:i.getStyle("height")}})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const W1e="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",Kw="image_resized";class VM extends L{static get requires(){return[Ww,ir]}static get pluginName(){return"ImageResizeHandles"}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,n=e.editing.view,r=e.plugins.get("ImageUtils");n.addObserver(Fk),this.listenTo(n.document,"imageLoaded",(i,s)=>{if(!s.target.matches(W1e))return;const o=e.editing.view.domConverter,a=o.domToView(s.target),l=r.getImageWidgetFromImageView(a);let c=this.editor.plugins.get(Ww).getResizerByViewElement(l);if(c){c.redraw();return}const u=e.editing.mapper,d=u.toModelElement(l);c=e.plugins.get(Ww).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:d,viewElement:l,editor:e,getHandleHost(h){return h.querySelector("img")},getResizeHost(){return o.mapViewToDom(u.toViewElement(d.parent))},isCentered(){return d.getAttribute("imageStyle")=="alignCenter"},onCommit(h){n.change(f=>{f.removeClass(Kw,l)}),e.execute("resizeImage",{width:h})}}),c.on("updateSize",()=>{l.hasClass(Kw)||n.change(f=>{f.addClass(Kw,l)});const h=d.name==="imageInline"?a:l;h.getStyle("height")&&n.change(f=>{f.removeStyle("height",h)})}),c.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class BM extends L{static get requires(){return[fP,ir]}static get pluginName(){return"ImageToolbar"}afterInit(){const e=this.editor,n=e.t,r=e.plugins.get(fP),i=e.plugins.get("ImageUtils");r.register("image",{ariaLabel:n("Image toolbar"),items:j1e(e.config.get("image.toolbar")||[]),getRelatedElement:s=>i.getClosestSelectedImageWidget(s)})}}function j1e(t){return t.map(e=>ft(e)?e.name:e)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class UM extends L{static get requires(){return[df,ir]}static get pluginName(){return"PictureEditing"}afterInit(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const e=this.editor,n=e.conversion,r=e.plugins.get("ImageUtils");n.for("upcast").add(m1e(r)),n.for("downcast").add(p1e(r))}_setupImageUploadEditingIntegration(){const e=this.editor;if(!e.plugins.has("ImageUploadEditing"))return;const n=e.plugins.get("ImageUploadEditing");this.listenTo(n,"uploadComplete",(r,{imageElement:i,data:s})=>{const o=s.sources;o&&e.model.change(a=>{a.setAttributes({sources:o},i)})})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Vk=["left","right","center","justify"];function zM(t){return Vk.includes(t)}function HM(t,e){return e.contentLanguageDirection=="rtl"?t==="right":t==="left"}function WM(t){const e=t.map(r=>{let i;return typeof r=="string"?i={name:r}:i=r,i}).filter(r=>{const i=Vk.includes(r.name);return i||Ie("alignment-config-name-not-recognized",{option:r}),i}),n=e.filter(r=>!!r.className).length;if(n&&n<e.length)throw new T("alignment-config-classnames-are-missing",{configuredOptions:t});return e.forEach((r,i,s)=>{const o=s.slice(i+1);if(o.some(l=>l.name==r.name))throw new T("alignment-config-name-already-defined",{option:r,configuredOptions:t});if(r.className&&o.some(c=>c.className==r.className))throw new T("alignment-config-classname-already-defined",{option:r,configuredOptions:t})}),e}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Bk="alignment";class G1e extends He{refresh(){const n=this.editor.locale,r=vn(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!r&&this._canBeAligned(r),this.isEnabled&&r.hasAttribute("alignment")?this.value=r.getAttribute("alignment"):this.value=n.contentLanguageDirection==="rtl"?"right":"left"}execute(e={}){const n=this.editor,r=n.locale,i=n.model,s=i.document,o=e.value;i.change(a=>{const l=Array.from(s.selection.getSelectedBlocks()).filter(d=>this._canBeAligned(d)),c=l[0].getAttribute("alignment");HM(o,r)||c===o||!o?q1e(l,a):Y1e(l,a,o)})}_canBeAligned(e){return this.editor.model.schema.checkAttribute(e,Bk)}}function q1e(t,e){for(const n of t)e.removeAttribute(Bk,n)}function Y1e(t,e,n){for(const r of t)e.setAttribute(Bk,n,r)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class K1e extends L{static get pluginName(){return"AlignmentEditing"}constructor(e){super(e),e.config.define("alignment",{options:Vk.map(n=>({name:n}))})}init(){const e=this.editor,n=e.locale,r=e.model.schema,s=WM(e.config.get("alignment.options")).filter(c=>zM(c.name)&&!HM(c.name,n)),o=s.some(c=>!!c.className);r.extend("$block",{allowAttributes:"alignment"}),e.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),o?e.conversion.attributeToAttribute(Q1e(s)):e.conversion.for("downcast").attributeToAttribute(Z1e(s));const a=J1e(s);for(const c of a)e.conversion.for("upcast").attributeToAttribute(c);const l=X1e(s);for(const c of l)e.conversion.for("upcast").attributeToAttribute(c);e.commands.add("alignment",new G1e(e))}}function Z1e(t){const e={};for(const{name:r}of t)e[r]={key:"style",value:{"text-align":r}};return{model:{key:"alignment",values:t.map(r=>r.name)},view:e}}function J1e(t){const e=[];for(const{name:n}of t)e.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return e}function X1e(t){const e=[];for(const{name:n}of t)e.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return e}function Q1e(t){const e={};for(const r of t)e[r.name]={key:"class",value:r.className};return{model:{key:"alignment",values:t.map(r=>r.name)},view:e}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Zu=new Map([["left",pe.alignLeft],["right",pe.alignRight],["center",pe.alignCenter],["justify",pe.alignJustify]]);class ewe extends L{get localizedOptionTitles(){const e=this.editor.t;return{left:e("Align left"),right:e("Align right"),center:e("Align center"),justify:e("Justify")}}static get pluginName(){return"AlignmentUI"}init(){const e=this.editor,n=WM(e.config.get("alignment.options"));n.map(r=>r.name).filter(zM).forEach(r=>this._addButton(r)),this._addToolbarDropdown(n),this._addMenuBarMenu(n)}_addButton(e){this.editor.ui.componentFactory.add(`alignment:${e}`,r=>this._createButton(r,e))}_createButton(e,n,r={}){const i=this.editor,s=i.commands.get("alignment"),o=new Se(e);return o.set({label:this.localizedOptionTitles[n],icon:Zu.get(n),tooltip:!0,isToggleable:!0,...r}),o.bind("isEnabled").to(s),o.bind("isOn").to(s,"value",a=>a===n),this.listenTo(o,"execute",()=>{i.execute("alignment",{value:n}),i.editing.view.focus()}),o}_addToolbarDropdown(e){const n=this.editor;n.ui.componentFactory.add("alignment",i=>{const s=ho(i),o=i.uiLanguageDirection==="rtl"?"w":"e",a=i.t;Ek(s,()=>e.map(u=>this._createButton(i,u.name,{tooltipPosition:o})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:a("Text alignment toolbar")}),s.buttonView.set({label:a("Text alignment"),tooltip:!0}),s.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const l=i.contentLanguageDirection==="rtl"?Zu.get("right"):Zu.get("left"),c=n.commands.get("alignment");return s.buttonView.bind("icon").to(c,"value",u=>Zu.get(u)||l),s.bind("isEnabled").to(c,"isEnabled"),this.listenTo(s,"execute",()=>{n.editing.view.focus()}),s})}_addMenuBarMenu(e){const n=this.editor;n.ui.componentFactory.add("menuBar:alignment",r=>{const i=n.commands.get("alignment"),s=r.t,o=new Kr(r),a=new Kc(r);o.bind("isEnabled").to(i),a.set({ariaLabel:s("Text alignment"),role:"menu"}),o.buttonView.set({label:s("Text alignment")});for(const l of e){const c=new gu(r,o),u=new rr(r);u.extendTemplate({attributes:{"aria-checked":u.bindTemplate.to("isOn")}}),u.delegate("execute").to(o),u.set({label:this.localizedOptionTitles[l.name],icon:Zu.get(l.name)}),u.on("execute",()=>{n.execute("alignment",{value:l.name}),n.editing.view.focus()}),u.bind("isOn").to(i,"value",d=>d===l.name),u.bind("isEnabled").to(i,"isEnabled"),c.children.add(u),a.items.add(c)}return o.panelView.children.add(a),o})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class jM extends L{static get requires(){return[K1e,ewe]}static get pluginName(){return"Alignment"}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const twe={autoRefresh:!0},i3=36e5;class Uk extends Ue(){constructor(e,n={}){if(super(),!e)throw new T("token-missing-token-url",this);n.initValue&&this._validateTokenValue(n.initValue),this.set("value",n.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>nwe(e),this._options={...twe,...n}}init(){return new Promise((e,n)=>{if(!this.value){this.refreshToken().then(e).catch(n);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){return this._refresh().then(e=>(this._validateTokenValue(e),this.set("value",e),this._options.autoRefresh&&this._registerRefreshTokenTimeout(),this))}destroy(){clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const n=typeof e=="string",r=!/^".*"$/.test(e),i=n&&e.split(".").length===3;if(!(r&&i))throw new T("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(){const e=this._getTokenRefreshTimeoutTime();clearTimeout(this._tokenRefreshTimeout),this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},e)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:n}=JSON.parse(atob(e));return n?Math.floor((n*1e3-Date.now())/2):i3}catch{return i3}}static create(e,n={}){return new Uk(e,n).init()}}function nwe(t){return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",t),r.addEventListener("load",()=>{const i=r.status,s=r.response;return i<200||i>299?n(new T("token-cannot-download-new-token",null)):e(s)}),r.addEventListener("error",()=>n(new Error("Network Error"))),r.addEventListener("abort",()=>n(new Error("Abort"))),r.send()})}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const yb=/^data:(\S*?);base64,/;class rwe extends qe(){constructor(e,n,r){if(super(),!e)throw new T("fileuploader-missing-file",null);if(!n)throw new T("fileuploader-missing-token",null);if(!r)throw new T("fileuploader-missing-api-address",null);this.file=swe(e)?iwe(e):e,this._token=n,this._apiAddress=r}onProgress(e){return this.on("progress",(n,r)=>e(r)),this}onError(e){return this.once("error",(n,r)=>e(r)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,n=r=>()=>this.fire("error",r);e.addEventListener("error",n("Network Error")),e.addEventListener("abort",n("Abort"));/* istanbul ignore else -- @preserve */e.upload&&e.upload.addEventListener("progress",r=>{r.lengthComputable&&this.fire("progress",{total:r.total,uploaded:r.loaded})}),e.addEventListener("load",()=>{const r=e.status,i=e.response;if(r<200||r>299)return this.fire("error",i.message||i.error)})}_sendRequest(){const e=new FormData,n=this.xhr;return e.append("file",this.file),new Promise((r,i)=>{n.addEventListener("load",()=>{const s=n.status,o=n.response;return s<200||s>299?o.message?i(new T("fileuploader-uploading-data-failed",this,{message:o.message})):i(o.error):r(o)}),n.addEventListener("error",()=>i(new Error("Network Error"))),n.addEventListener("abort",()=>i(new Error("Abort"))),n.send(e)})}}function iwe(t,e=512){try{const n=t.match(yb)[1],r=atob(t.replace(yb,"")),i=[];for(let s=0;s<r.length;s+=e){const o=r.slice(s,s+e),a=new Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);i.push(new Uint8Array(a))}return new Blob(i,{type:n})}catch{throw new T("fileuploader-decoding-image-data-error",null)}}function swe(t){if(typeof t!="string")return!1;const e=t.match(yb);return!!(e&&e.length)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class owe{constructor(e,n){if(!e)throw new T("uploadgateway-missing-token",null);if(!n)throw new T("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=n}upload(e){return new rwe(e,this._token,this._apiAddress)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class awe extends z0{static get pluginName(){return"CloudServicesCore"}createToken(e,n){return new Uk(e,n)}createUploadGateway(e,n){return new owe(e,n)}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class GM extends z0{constructor(){super(...arguments),this.token=null,this._tokens=new Map}static get pluginName(){return"CloudServices"}static get requires(){return[awe]}async init(){const n=this.context.config.get("cloudServices")||{};for(const[i,s]of Object.entries(n))this[i]=s;if(!this.tokenUrl){this.token=null;return}const r=this.context.plugins.get("CloudServicesCore");this.token=await r.createToken(this.tokenUrl).init(),this._tokens.set(this.tokenUrl,this.token)}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const r=await this.context.plugins.get("CloudServicesCore").createToken(e).init();return this._tokens.set(e,r),r}getTokenFor(e){const n=this._tokens.get(e);if(!n)throw new T("cloudservices-token-not-registered",this);return n}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class lwe extends L{static get pluginName(){return"CKBoxUI"}afterInit(){const e=this.editor;if(!e.commands.get("ckbox"))return;const n=e.t,r=e.ui.componentFactory;if(r.add("ckbox",()=>{const i=this._createButton(Se);return i.tooltip=!0,i}),r.add("menuBar:ckbox",()=>this._createButton(rr)),e.plugins.has("ImageInsertUI")){const i=e.plugins.get("ImageInsertUI");i.registerIntegration({name:"assetManager",observable:()=>e.commands.get("ckbox"),buttonViewCreator:()=>{const s=this.editor.ui.componentFactory.create("ckbox");return s.icon=pe.imageAssetManager,s.bind("label").to(i,"isImageSelected",o=>n(o?"Replace image with file manager":"Insert image with file manager")),s},formViewCreator:()=>{const s=this.editor.ui.componentFactory.create("ckbox");return s.icon=pe.imageAssetManager,s.withText=!0,s.bind("label").to(i,"isImageSelected",o=>n(o?"Replace with file manager":"Insert with file manager")),s.on("execute",()=>{i.dropdownView.isOpen=!1}),s}})}}_createButton(e){const n=this.editor,r=n.locale,i=new e(r),s=n.commands.get("ckbox"),o=r.t;return i.set({label:o("Open file manager"),icon:pe.browseFiles}),i.bind("isOn","isEnabled").to(s,"value","isEnabled"),i.on("execute",()=>{n.execute("ckbox")}),i}}var cwe=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],ad=t=>{let e=0;for(let n=0;n<t.length;n++){let r=t[n],i=cwe.indexOf(r);e=e*83+i}return e},Zw=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Jw=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},uwe=t=>t<0?-1:1,Xw=(t,e)=>uwe(t)*Math.pow(Math.abs(t),e),s3=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},dwe=t=>{if(!t||t.length<6)throw new s3("The blurhash string must be at least 6 characters");let e=ad(t[0]),n=Math.floor(e/9)+1,r=e%9+1;if(t.length!==4+2*r*n)throw new s3(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*r*n}`)},hwe=t=>{let e=t>>16,n=t>>8&255,r=t&255;return[Zw(e),Zw(n),Zw(r)]},fwe=(t,e)=>{let n=Math.floor(t/361),r=Math.floor(t/19)%19,i=t%19;return[Xw((n-9)/9,2)*e,Xw((r-9)/9,2)*e,Xw((i-9)/9,2)*e]},mwe=(t,e,n,r)=>{dwe(t),r=r|1;let i=ad(t[0]),s=Math.floor(i/9)+1,o=i%9+1,a=(ad(t[1])+1)/166,l=new Array(o*s);for(let d=0;d<l.length;d++)if(d===0){let h=ad(t.substring(2,6));l[d]=hwe(h)}else{let h=ad(t.substring(4+d*2,6+d*2));l[d]=fwe(h,a*r)}let c=e*4,u=new Uint8ClampedArray(c*n);for(let d=0;d<n;d++)for(let h=0;h<e;h++){let f=0,p=0,g=0;for(let b=0;b<s;b++)for(let k=0;k<o;k++){let S=Math.cos(Math.PI*h*k/e)*Math.cos(Math.PI*d*b/n),C=l[k+b*o];f+=C[0]*S,p+=C[1]*S,g+=C[2]*S}let _=Jw(f),v=Jw(p),w=Jw(g);u[4*h+0+d*c]=_,u[4*h+1+d*c]=v,u[4*h+2+d*c]=w,u[4*h+3+d*c]=255}return u},pwe=mwe;/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function qM(t){const e=[];let n=0;for(const i in t){const s=parseInt(i,10);isNaN(s)||(s>n&&(n=s),e.push(`${t[i]} ${i}w`))}const r=[{srcset:e.join(","),sizes:`(max-width: ${n}px) 100vw, ${n}px`,type:"image/webp"}];return{imageFallbackUrl:t.default,imageSources:r}}function gwe(t,e){const[,n]=t.value.split("."),r=JSON.parse(atob(n)),i=r.auth&&r.auth.ckbox&&r.auth.ckbox.workspaces||[r.aud];return e?(r.auth&&r.auth.ckbox&&r.auth.ckbox.role)=="superadmin"||i.includes(e)?e:null:i[0]}const Ju=32;function wwe(t){if(t)try{const e=`${Ju}px`,n=document.createElement("canvas");n.setAttribute("width",e),n.setAttribute("height",e);const r=n.getContext("2d");/* istanbul ignore next -- @preserve */if(!r)return;const i=r.createImageData(Ju,Ju),s=pwe(t,Ju,Ju);return i.data.set(s),r.putImageData(i,0,0),n.toDataURL()}catch{return}}function zk({url:t,method:e="GET",data:n,onUploadProgress:r,signal:i,authorization:s}){const o=new XMLHttpRequest;o.open(e,t.toString()),o.setRequestHeader("Authorization",s),o.setRequestHeader("CKBox-Version","CKEditor 5"),o.responseType="json";const a=()=>{o.abort()};return new Promise((l,c)=>{i.throwIfAborted(),i.addEventListener("abort",a),o.addEventListener("loadstart",()=>{i.addEventListener("abort",a)}),o.addEventListener("loadend",()=>{i.removeEventListener("abort",a)}),o.addEventListener("error",()=>{c()}),o.addEventListener("abort",()=>{c()}),o.addEventListener("load",()=>{const u=o.response;if(!u||u.statusCode>=400)return c(u&&u.message);l(u)});/* istanbul ignore else -- @preserve */r&&o.upload.addEventListener("progress",u=>{r(u)}),o.send(n)})}const vwe={"image/gif":"gif","image/jpeg":"jpg","image/png":"png","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"};function ywe(t){return vwe[t]}async function bwe(t,e){try{const n=await fetch(t,{method:"HEAD",cache:"force-cache",...e});return n.ok&&n.headers.get("content-type")||""}catch{return""}}function _we(t){const e=t.name,n=/\.(?<ext>[^.]+)$/;return e.match(n).groups.ext.toLowerCase()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const kwe=1e3;class Ewe extends He{constructor(e){super(e),this._chosenAssets=new Set,this._wrapper=null,this._initListeners()}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(){this.fire("ckbox:open")}_getValue(){return this._wrapper!==null}_checkEnabled(){const e=this.editor.commands.get("insertImage"),n=this.editor.commands.get("link");return!(!e.isEnabled&&!n.isEnabled)}_prepareOptions(){const n=this.editor.config.get("ckbox");return{theme:n.theme,language:n.language,tokenUrl:n.tokenUrl,serviceOrigin:n.serviceOrigin,forceDemoLabel:n.forceDemoLabel,dialog:{onClose:()=>this.fire("ckbox:close")},assets:{onChoose:r=>this.fire("ckbox:choose",r)}}}_initListeners(){const e=this.editor,n=e.model,r=!e.config.get("ckbox.ignoreDataId");this.on("ckbox",()=>{this.refresh()},{priority:"low"}),this.on("ckbox:open",()=>{!this.isEnabled||this.value||(this._wrapper=cr(document,"div",{class:"ck ckbox-wrapper"}),document.body.appendChild(this._wrapper),window.CKBox.mount(this._wrapper,this._prepareOptions()))}),this.on("ckbox:close",()=>{this.value&&(this._wrapper.remove(),this._wrapper=null,e.editing.view.focus())}),this.on("ckbox:choose",(i,s)=>{if(!this.isEnabled)return;const o=e.commands.get("insertImage"),a=e.commands.get("link"),l=Cwe({assets:s,isImageAllowed:o.isEnabled,isLinkAllowed:a.isEnabled}),c=l.length;c!==0&&(n.change(u=>{for(const d of l){const h=d===l[c-1],f=c===1;this._insertAsset(d,h,u,f),r&&(setTimeout(()=>this._chosenAssets.delete(d),kwe),this._chosenAssets.add(d))}}),e.editing.view.focus())}),this.listenTo(e,"destroy",()=>{this.fire("ckbox:close"),this._chosenAssets.clear()})}_insertAsset(e,n,r,i){const a=this.editor.model.document.selection;r.removeSelectionAttribute("linkHref"),e.type==="image"?this._insertImage(e):this._insertLink(e,r,i),n||r.setSelection(a.getLastPosition())}_insertImage(e){const n=this.editor,{imageFallbackUrl:r,imageSources:i,imageTextAlternative:s,imageWidth:o,imageHeight:a,imagePlaceholder:l}=e.attributes;n.execute("insertImage",{source:{src:r,sources:i,alt:s,width:o,height:a,...l?{placeholder:l}:null}})}_insertLink(e,n,r){const i=this.editor,s=i.model,o=s.document.selection,{linkName:a,linkHref:l}=e.attributes;if(o.isCollapsed){const c=ss(o.getAttributes()),u=n.createText(a,c);if(!r){const h=o.getLastPosition(),f=h.parent;f.name==="paragraph"&&f.isEmpty||i.execute("insertParagraph",{position:h});const p=s.insertContent(u);n.setSelection(p),i.execute("link",l);return}const d=s.insertContent(u);n.setSelection(d)}i.execute("link",l)}}function Cwe({assets:t,isImageAllowed:e,isLinkAllowed:n}){return t.map(r=>Swe(r)?{id:r.data.id,type:"image",attributes:YM(r)}:{id:r.data.id,type:"link",attributes:xwe(r)}).filter(r=>r.type==="image"?e:n)}function YM(t){const{imageFallbackUrl:e,imageSources:n}=qM(t.data.imageUrls),{description:r,width:i,height:s,blurHash:o}=t.data.metadata,a=wwe(o);return{imageFallbackUrl:e,imageSources:n,imageTextAlternative:r||"",imageWidth:i,imageHeight:s,...a?{imagePlaceholder:a}:null}}function xwe(t){return{linkName:t.data.name,linkHref:Twe(t)}}function Swe(t){const e=t.data.metadata;return e?e.width&&e.height:!1}function Twe(t){const e=new URL(t.data.url);return e.searchParams.set("download","true"),e.toString()}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */const Pwe="lark";class xh extends L{static get pluginName(){return"CKBoxUtils"}static get requires(){return["CloudServices"]}async init(){const e=this.editor,n=!!e.config.get("ckbox"),r=!!window.CKBox;if(!n&&!r)return;e.config.define("ckbox",{serviceOrigin:"https://api.ckbox.io",defaultUploadCategories:null,ignoreDataId:!1,language:e.locale.uiLanguage,theme:Pwe,tokenUrl:e.config.get("cloudServices.tokenUrl")});const i=e.plugins.get("CloudServices"),s=e.config.get("cloudServices.tokenUrl"),o=e.config.get("ckbox.tokenUrl");if(!o)throw new T("ckbox-plugin-missing-token-url",this);o==s?this._token=i.token:this._token=await i.registerTokenUrl(o)}getToken(){return this._token}getWorkspaceId(){const e=this.editor.t,n=e("Cannot access default workspace."),r=this.editor.config.get("ckbox.defaultUploadWorkspaceId"),i=gwe(this._token,r);if(i==null)throw Wy("ckbox-access-default-workspace-error"),n;return i}async getCategoryIdForFile(e,n){const r=this.editor.t,i=r("Cannot determine a category for the uploaded file."),s=this.editor.config.get("ckbox.defaultUploadCategories"),o=this._getAvailableCategories(n),a=typeof e=="string"?ywe(await bwe(e,n)):_we(e),l=await o;if(!l)throw i;if(s){const u=Object.keys(s).find(d=>s[d].find(h=>h.toLowerCase()==a));if(u){const d=l.find(h=>h.id===u||h.name===u);if(!d)throw i;return d.id}}const c=l.find(u=>u.extensions.find(d=>d.toLowerCase()==a));if(!c)throw i;return c.id}async _getAvailableCategories(e){const r=this.editor,i=this._token,{signal:s}=e,o=r.config.get("ckbox.serviceOrigin"),a=this.getWorkspaceId();try{const c=[];let u=0,d;do{const h=await l(u);c.push(...h.items),d=h.totalCount-(u+50),u+=50}while(d>0);return c}catch{s.throwIfAborted(),Wy("ckbox-fetch-category-http-error");return}function l(c){const u=new URL("categories",o);return u.searchParams.set("limit","50"),u.searchParams.set("offset",c.toString()),u.searchParams.set("workspaceId",a),zk({url:u,signal:s,authorization:i.value})}}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Awe extends L{static get requires(){return["ImageUploadEditing","ImageUploadProgress",Ai,Hk]}static get pluginName(){return"CKBoxUploadAdapter"}async afterInit(){const e=this.editor,n=!!e.config.get("ckbox"),r=!!window.CKBox;if(!n&&!r)return;const i=e.plugins.get(Ai),s=e.plugins.get(xh);i.createUploadAdapter=l=>new Iwe(l,e,s);const o=!e.config.get("ckbox.ignoreDataId"),a=e.plugins.get("ImageUploadEditing");o&&a.on("uploadComplete",(l,{imageElement:c,data:u})=>{e.model.change(d=>{d.setAttribute("ckboxImageId",u.ckboxImageId,c)})})}}let Iwe=class{constructor(e,n,r){this.loader=e,this.token=r.getToken(),this.ckboxUtils=r,this.editor=n,this.controller=new AbortController,this.serviceOrigin=n.config.get("ckbox.serviceOrigin")}async upload(){const e=this.ckboxUtils,n=this.editor.t,r=await this.loader.file,i=await e.getCategoryIdForFile(r,{signal:this.controller.signal}),s=new URL("assets",this.serviceOrigin),o=new FormData;s.searchParams.set("workspaceId",e.getWorkspaceId()),o.append("categoryId",i),o.append("file",r);const a={method:"POST",url:s,data:o,onUploadProgress:l=>{/* istanbul ignore else -- @preserve */l.lengthComputable&&(this.loader.uploadTotal=l.total,this.loader.uploaded=l.loaded)},signal:this.controller.signal,authorization:this.token.value};return zk(a).then(async l=>{const c=qM(l.imageUrls);return{ckboxImageId:l.id,default:c.imageFallbackUrl,sources:c.imageSources}}).catch(()=>{const l=n("Cannot upload file:")+` ${r.name}.`;return Promise.reject(l)})}abort(){this.controller.abort()}};/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Hk extends L{static get pluginName(){return"CKBoxEditing"}static get requires(){return["LinkEditing","PictureEditing",Awe,xh]}init(){const e=this.editor;this._shouldBeInitialised()&&(this._checkImagePlugins(),a3()&&e.commands.add("ckbox",new Ewe(e)))}afterInit(){const e=this.editor;this._shouldBeInitialised()&&(e.config.get("ckbox.ignoreDataId")||(this._initSchema(),this._initConversion(),this._initFixers()))}_shouldBeInitialised(){return!!this.editor.config.get("ckbox")||a3()}_checkImagePlugins(){const e=this.editor;!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing")&&Wy("ckbox-plugin-image-feature-missing",e)}_initSchema(){const n=this.editor.model.schema;n.extend("$text",{allowAttributes:"ckboxLinkId"}),n.isRegistered("imageBlock")&&n.extend("imageBlock",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),n.isRegistered("imageInline")&&n.extend("imageInline",{allowAttributes:["ckboxImageId","ckboxLinkId"]}),n.addAttributeCheck((r,i)=>{if(!!!r.last.getAttribute("linkHref")&&i==="ckboxLinkId")return!1})}_initConversion(){const e=this.editor;e.conversion.for("downcast").add(r=>{r.on("attribute:ckboxLinkId:imageBlock",(i,s,o)=>{const{writer:a,mapper:l,consumable:c}=o;if(!c.consume(s.item,i.name))return;const d=[...l.toViewElement(s.item).getChildren()].find(h=>h.name==="a");d&&(s.item.hasAttribute("ckboxLinkId")?a.setAttribute("data-ckbox-resource-id",s.item.getAttribute("ckboxLinkId"),d):a.removeAttribute("data-ckbox-resource-id",d))},{priority:"low"}),r.on("attribute:ckboxLinkId",(i,s,o)=>{const{writer:a,mapper:l,consumable:c}=o;if(c.consume(s.item,i.name)){if(s.attributeOldValue){const u=o3(a,s.attributeOldValue);a.unwrap(l.toViewRange(s.range),u)}if(s.attributeNewValue){const u=o3(a,s.attributeNewValue);if(s.item.is("selection")){const d=a.document.selection;a.wrap(d.getFirstRange(),u)}else a.wrap(l.toViewRange(s.range),u)}}},{priority:"low"})}),e.conversion.for("upcast").add(r=>{r.on("element:a",(i,s,o)=>{const{writer:a,consumable:l}=o;if(!s.viewItem.getAttribute("href"))return;const c={attributes:["data-ckbox-resource-id"]};if(!l.consume(s.viewItem,c))return;const u=s.viewItem.getAttribute("data-ckbox-resource-id");if(u)if(s.modelRange)for(let d of s.modelRange.getItems())d.is("$textProxy")&&(d=d.textNode),Nwe(d)&&a.setAttribute("ckboxLinkId",u,d);else{const d=s.modelCursor.nodeBefore||s.modelCursor.parent;a.setAttribute("ckboxLinkId",u,d)}},{priority:"low"})}),e.conversion.for("downcast").attributeToAttribute({model:"ckboxImageId",view:"data-ckbox-resource-id"}),e.conversion.for("upcast").elementToAttribute({model:{key:"ckboxImageId",value:r=>r.getAttribute("data-ckbox-resource-id")},view:{attributes:{"data-ckbox-resource-id":/[\s\S]+/}}});const n=e.commands.get("replaceImageSource");n&&this.listenTo(n,"cleanupImage",(r,[i,s])=>{i.removeAttribute("ckboxImageId",s)})}_initFixers(){const e=this.editor,n=e.model,r=n.document.selection;n.document.registerPostFixer(Rwe(e)),n.document.registerPostFixer(Owe(r))}}function Rwe(t){return e=>{let n=!1;const r=t.model,i=t.commands.get("ckbox");if(!i)return n;for(const s of r.document.differ.getChanges()){if(s.type!=="insert"&&s.type!=="attribute")continue;const o=s.type==="insert"?new O(s.position,s.position.getShiftedBy(s.length)):s.range,a=s.type==="attribute"&&s.attributeKey==="linkHref"&&s.attributeNewValue===null;for(const l of o.getItems()){if(a&&l.hasAttribute("ckboxLinkId")){e.removeAttribute("ckboxLinkId",l),n=!0;continue}const c=Mwe(l,i._chosenAssets);for(const u of c){const d=u.type==="image"?"ckboxImageId":"ckboxLinkId";u.id!==l.getAttribute(d)&&(e.setAttribute(d,u.id,l),n=!0)}}}return n}}function Owe(t){return e=>!t.hasAttribute("linkHref")&&t.hasAttribute("ckboxLinkId")?(e.removeSelectionAttribute("ckboxLinkId"),!0):!1}function Mwe(t,e){const n=t.is("element","imageInline")||t.is("element","imageBlock"),r=t.hasAttribute("linkHref");return[...e].filter(i=>{if(i.type==="image"&&n)return i.attributes.imageFallbackUrl===t.getAttribute("src");if(i.type==="link"&&r)return i.attributes.linkHref===t.getAttribute("linkHref")})}function o3(t,e){const n=t.createAttributeElement("a",{"data-ckbox-resource-id":e},{priority:5});return t.setCustomProperty("link",!0,n),n}function Nwe(t){return!!(t.is("$text")||t.is("element","imageInline")||t.is("element","imageBlock"))}function a3(){return!!window.CKBox}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class KM extends L{static get pluginName(){return"CKBox"}static get requires(){return[Hk,lwe]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */function Dwe(t){const e=ZM(t);return n=>n.is("element","imageInline")||n.is("element","imageBlock")?n.hasAttribute("ckboxImageId")?!0:n.hasAttribute("src")?e(n.getAttribute("src")):!1:!1}function ZM(t){if(Array.isArray(t)){const e=t.map(ZM);return n=>e.some(r=>r(n))}if(t=="origin"){const e=Q.window.location.origin;return n=>new URL(n,Q.document.baseURI).origin==e}return typeof t=="function"?t:t instanceof RegExp?e=>!!(e.match(t)||e.replace(/^https?:\/\//,"").match(t)):()=>!1}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Lwe extends He{constructor(e){super(e),this._wrapper=null,this._processInProgress=new Set,this.value=!1,this._canEdit=Dwe(e.config.get("ckbox.allowExternalImagesEditing")),this._prepareOptions=Wse((n,r)=>this._prepareOptionsAbortable(n,r)),this._prepareListeners()}refresh(){const e=this.editor;this.value=this._getValue();const n=e.model.document.selection.getSelectedElement();this.isEnabled=!!n&&this._canEdit(n)&&!this._checkIfElementIsBeingProcessed(n)}execute(){if(this._getValue())return;const e=cr(document,"div",{class:"ck ckbox-wrapper"});this._wrapper=e,this.value=!0,document.body.appendChild(this._wrapper);const r={element:this.editor.model.document.selection.getSelectedElement(),controller:new AbortController};this._prepareOptions(r).then(i=>window.CKBox.mountImageEditor(e,i),i=>{const s=this.editor,o=s.t;s.plugins.get(bh).showWarning(o("Failed to determine category of edited image."),{namespace:"ckbox"}),console.error(i),this._handleImageEditorClose()})}destroy(){this._handleImageEditorClose(),this._prepareOptions.abort();for(const e of this._processInProgress.values())e.controller.abort();super.destroy()}_getValue(){return this._wrapper!==null}async _prepareOptionsAbortable(e,n){const r=this.editor,i=r.config.get("ckbox"),s=r.plugins.get(xh),{element:o}=n;let a;const l=o.getAttribute("ckboxImageId");if(l)a={assetId:l};else{const c=new URL(o.getAttribute("src"),document.baseURI).href,u=await s.getCategoryIdForFile(c,{signal:e});a={imageUrl:c,uploadCategoryId:u}}return{...a,imageEditing:{allowOverwrite:!1},tokenUrl:i.tokenUrl,...i.serviceOrigin&&{serviceOrigin:i.serviceOrigin},onClose:()=>this._handleImageEditorClose(),onSave:c=>this._handleImageEditorSave(n,c)}}_prepareListeners(){this.listenTo(this.editor.model.document,"change:data",()=>{this._getProcessingStatesOfDeletedImages().forEach(n=>{n.controller.abort()})})}_getProcessingStatesOfDeletedImages(){const e=[];for(const n of this._processInProgress.values())n.element.root.rootName=="$graveyard"&&e.push(n);return e}_checkIfElementIsBeingProcessed(e){for(const{element:n}of this._processInProgress)if(Hy(n,e))return!0;return!1}_handleImageEditorClose(){this._wrapper&&(this._wrapper.remove(),this._wrapper=null,this.editor.editing.view.focus(),this.refresh())}_handleImageEditorSave(e,n){const r=this.editor.locale.t,i=this.editor.plugins.get(bh),s=this.editor.plugins.get(hg),o=s.add(r("Processing the edited image."));this._processInProgress.add(e),this._showImageProcessingIndicator(e.element,n),this.refresh(),this._waitForAssetProcessed(n.data.id,e.controller.signal).then(a=>{this._replaceImage(e.element,a)},a=>{this.editor.editing.reconvertItem(e.element),!e.controller.signal.aborted&&(!a||a instanceof T?i.showWarning(r("Server failed to process the image."),{namespace:"ckbox"}):console.error(a))}).finally(()=>{this._processInProgress.delete(e),s.remove(o),this.refresh()})}async _getAssetStatusFromServer(e,n){const r=this.editor.plugins.get(xh),i=new URL("assets/"+e,this.editor.config.get("ckbox.serviceOrigin")),s=await zk({url:i,signal:n,authorization:r.getToken().value}),o=s.metadata.metadataProcessingStatus;if(!o||o=="queued")throw new T("ckbox-image-not-processed");return{data:{...s}}}async _waitForAssetProcessed(e,n){const r=await koe(()=>this._getAssetStatusFromServer(e,n),{signal:n,maxAttempts:5});if(r.data.metadata.metadataProcessingStatus!="success")throw new T("ckbox-image-processing-failed");return r}_showImageProcessingIndicator(e,n){const r=this.editor;r.editing.view.change(i=>{const s=r.editing.mapper.toViewElement(e),a=this.editor.plugins.get("ImageUtils").findViewImgElement(s);i.removeStyle("aspect-ratio",a),i.setAttribute("width",n.data.metadata.width,a),i.setAttribute("height",n.data.metadata.height,a),i.setStyle("width",`${n.data.metadata.width}px`,a),i.setStyle("height",`${n.data.metadata.height}px`,a),i.addClass("image-processing",s)})}_replaceImage(e,n){const r=this.editor,{imageFallbackUrl:i,imageSources:s,imageWidth:o,imageHeight:a,imagePlaceholder:l}=YM(n),c=Array.from(r.model.document.selection.getRanges());r.model.change(u=>{u.setSelection(e,"on"),r.execute("insertImage",{source:{src:i,sources:s,width:o,height:a,...l?{placeholder:l}:null,...e.hasAttribute("alt")?{alt:e.getAttribute("alt")}:null}});const d=e.getChildren();e=r.model.document.selection.getSelectedElement();for(const h of d)u.append(u.cloneElement(h),e);u.setAttribute("ckboxImageId",n.data.id,e),u.setSelection(c)})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class $we extends L{static get pluginName(){return"CKBoxImageEditEditing"}static get requires(){return[Hk,xh,hg,bh,"ImageUtils","ImageEditing"]}init(){const{editor:e}=this;e.commands.add("ckboxImageEdit",new Lwe(e))}}const Fwe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037H5.06l5.058-5.078L6.617 9.15a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v4.354a3.478 3.478 0 0 1 1.5.049V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.147 2.147 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.642-3.11 2.129 2.129 0 0 0-1.873-.978ZM8.089 17.635v2.388h2.389l7.046-7.046-2.39-2.39-7.045 7.048Zm11.282-6.507a.637.637 0 0 0 .139-.692.603.603 0 0 0-.139-.205l-1.49-1.488a.63.63 0 0 0-.899 0l-1.166 1.163 2.39 2.39 1.165-1.168Z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Vwe extends L{static get pluginName(){return"CKBoxImageEditUI"}init(){const e=this.editor;e.ui.componentFactory.add("ckboxImageEdit",n=>{const r=e.commands.get("ckboxImageEdit"),i=new Se(n),s=n.t;return i.set({label:s("Edit image"),icon:Fwe,tooltip:!0}),i.bind("isOn").to(r,"value",r,"isEnabled",(o,a)=>o&&a),i.bind("isEnabled").to(r),this.listenTo(i,"execute",()=>{e.execute("ckboxImageEdit"),e.editing.view.focus()}),i})}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class JM extends L{static get pluginName(){return"CKBoxImageEdit"}static get requires(){return[$we,Vwe]}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class Bwe extends L{static get pluginName(){return"CloudServicesUploadAdapter"}static get requires(){return["CloudServices",Ai]}init(){const e=this.editor,n=e.plugins.get("CloudServices"),r=n.token,i=n.uploadUrl;if(!r)return;const s=e.plugins.get("CloudServicesCore");this._uploadGateway=s.createUploadGateway(r,i),e.plugins.get(Ai).createUploadAdapter=o=>new Uwe(this._uploadGateway,o)}}class Uwe{constructor(e,n){this.uploadGateway=e,this.loader=n}upload(){return this.loader.file.then(e=>(this.fileUploader=this.uploadGateway.upload(e),this.fileUploader.on("progress",(n,r)=>{this.loader.uploadTotal=r.total,this.loader.uploaded=r.uploaded}),this.fileUploader.send()))}abort(){this.fileUploader.abort()}}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */class XM extends L{static get pluginName(){return"EasyImage"}static get requires(){return[Bwe,"ImageUpload"]}init(){const e=this.editor;!e.plugins.has("ImageBlockEditing")&&!e.plugins.has("ImageInlineEditing")&&Ie("easy-image-image-feature-missing",e)}}function zwe({setFormData:t,formData:e}){const[n,r]=m.useState(""),[i,s]=m.useState(!1);return m.useEffect(()=>{e.content?s(!1):s(!0)},[e.content]),y(Be,{children:i?y("div",{className:"flex justify-center items-center pt-80",children:y(V_,{className:"h-8 w-8 animate-spin text-primary"})}):y(x8.CKEditor,{editor:lf,config:{plugins:[XM,KM,$M,yM,yu,E9,P9,B9,A9,IM,z9,Y9,tM,dM,hM,Ok,vM,H9,jM,JM,GM,U9,OM,FM,VM,BM,UM,df],toolbar:["undo","redo","|","heading","|",{label:"Basic Styles",icon:"text",items:["bold","italic","underline","alignment"]},"|","bulletedList","numberedList","|","fontSize","fontFamily","|","image","imageCaption","imageResizeEditing","imageResizeHandles","imageUpload","ckbox","ckboxImageEdit","ImageEditing"],cloudServices:{tokenUrl:"https://107180.cke-cs.com/token/dev/bb45727ab997decb393ca41204eab5ef596d4d01b3fc00ba69bce7a15551?limit=10",uploadUrl:"https://107180.cke-cs.com/easyimage/upload/",withCredentials:!1},list:{multiBlock:!1,properties:{styles:!0,startIndex:!0,reversed:!0}}},tag:"textarea",data:e.content,onReady:o=>{r(o)},onChange:(o,a)=>{const l=a.getData();r(l),t({...e,content:l})},render:o=>{o.setData(e.content)}})})}const Hwe=()=>{const[t,e]=m.useState(null),[n,r]=m.useState(null),[i,s]=m.useState(null),[o,a]=m.useState({}),[l,c]=m.useState(null),[u,d]=m.useState(!1),[h,f]=m.useState([]),[p,g]=m.useState(!1),{postId:_}=s4(),v=pa(),{currentUser:w}=Bn(C=>C.user);m.useEffect(()=>{try{(async()=>{const E=await fetch(`/api/post/getposts?postId=${_}`),x=await E.json();if(!E.ok){console.log(x.message),c(x.message);return}E.ok&&(c(null),a(x.posts[0]),d(!1))})()}catch(C){c(je.error(C.message))}},[_]),m.useEffect(()=>{(async()=>{try{const x=await(await fetch("/api/categories")).json();f(x)}catch(E){console.error("Failed to fetch categories",E)}})()},[]);const b=async()=>{const C=document.getElementById("newCategoryInput"),E=C.value.trim();if(g(!0),!E){je.error("Category name cannot be empty");return}try{const x=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryName:E})});if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const A=await x.json();f([...h,A]),C.value="",g(!1)}catch(x){console.error("Failed to add category",x),je.error("Failed to add category: "+x.message),g(!1)}},k=async()=>{try{if(!t){s(je.error("Please select an image"));return}s(null);const C=$2(T0),E=new Date().getTime()+"-"+t.name,x=L2(C,E),A=N2(x,t);A.on("state_changed",R=>{const $=R.bytesTransferred/R.totalBytes*100;r($.toFixed(0))},R=>{s(je.error("Image upload failed")),r(null)},()=>{D2(A.snapshot.ref).then(R=>{r(null),s(null),a({...o,image:R})})})}catch(C){s(je.error("Image upload failed")),r(null),console.log(C)}};m.useEffect(()=>{let C;return i&&(C=setTimeout(()=>{s(null)},6e3)),()=>{clearTimeout(C)}},[i]);const S=async C=>{if(d(!0),C.preventDefault(),!o._id){console.error(je.error("Error: _id is undefined"));return}a({...o,author:w.username});try{const E=await fetch(`/api/post/updatepost/${o._id}/${w._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});d(!1);const x=await E.json();if(!E.ok){c(je.error(x.message));return}E.ok&&(c(null),v(`/post/${x.slug}`))}catch{c(je.error("Something went wrong"))}};return u?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y(Be,{children:y(qt,{className:"max-w-sm md:min-w-full",children:I("form",{onSubmit:S,children:[I(Dn,{children:[y(vi,{children:"Create Post"}),y(Wh,{children:"Let's creat your blog."})]}),I(hn,{className:"flex flex-col gap-3",children:[I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"title",children:"Title"}),y(fn,{id:"title",placeholder:"title",required:!0,type:"text",onChange:C=>a({...o,title:C.target.value}),defaultValue:o.title})]}),I("div",{className:"flex w-fit md:w-full flex-col space-y-1.5",children:[y("select",{className:"flex h-10 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",onChange:C=>a({...o,category:C.target.value}),value:o.category,id:"category",children:I("optgroup",{className:"dark:bg-[#1C1917]",children:[y("option",{value:"uncategorized",children:"Select a category"}),h.map(C=>y("option",{value:C.categoryName,children:C.categoryName},C._id))]})}),I("div",{className:"flex space-x-2",children:[y(fn,{type:"text",placeholder:"Add new category",id:"newCategoryInput"}),y(it,{type:"button",onClick:b,disabled:p,children:p?"Saving...":"Save"})]})]}),y("div",{className:"flex gap-3 items-center justify-between border-4 border-teal-500 border-dotted p-3",children:I("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[y(Pn,{htmlFor:"picture",children:"Picture"}),y(fn,{id:"picture",type:"file",accept:"image/*",onChange:C=>e(C.target.files[0])}),y(it,{onClick:k,disabled:n,children:"Upload Image"}),n&&y(I0,{value:n}),o.image&&y("img",{src:o.image,alt:"upload",className:"w-full h-72 object-cover"})]})}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"description",children:"Description"}),y("textarea",{id:"description",placeholder:"description",className:"p-2 text-black rounded-sm",type:"text",onChange:C=>a({...o,description:C.target.value}),defaultValue:o.description,required:!0})]}),y("div",{className:"",children:y(zwe,{setFormData:a,formData:o})})]}),y(wa,{className:"flex justify-end",children:u?I(it,{disabled:!0,children:[y(V_,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):y(it,{type:"submit",children:"Publish"})})]},w._id)})})};function l3(){return y("div",{className:"grid min-h-screen w-screen ",children:I("div",{className:"flex flex-col w-full ",children:[y(aR,{}),y("main",{className:"flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6",children:y(Hwe,{})})]})})}function Wwe(){const{currentUser:t}=Bn(e=>e.user);return t?y($_,{}):y(L_,{to:"/sign-in"})}function jwe(){const{currentUser:t}=Bn(e=>e.user);return t&&t.isAdmin?y($_,{}):y(L_,{to:"/sign-in"})}const c3=()=>{const[t,e]=m.useState([]),[n,r]=m.useState([]),[i,s]=m.useState([]),[o,a]=m.useState(0),[l,c]=m.useState(0),[u,d]=m.useState([]),[h,f]=m.useState(0),[p,g]=m.useState(0),[_,v]=m.useState([]),[w,b]=m.useState(0),{currentUser:k}=Bn(S=>S.user);return m.useEffect(()=>{const S=async()=>{try{const A=await fetch("/api/user/getusers?limit=5"),R=await A.json();A.ok&&(e(R.users),a(R.totalUsers),f(R.lastMonthUsers))}catch(A){console.log(A.message)}},C=async()=>{try{const A=await fetch("/api/user/getusers?limit=5"),R=await A.json();A.ok&&(v(R.roles),b(R.roles))}catch(A){console.log(A.message)}},E=async()=>{try{const A=await fetch("/api/post/getposts?limit=5"),R=await A.json();A.ok&&(r(R.posts),c(R.totalPosts),g(R.lastMonthPosts))}catch(A){console.log(A.message)}},x=async()=>{try{const A=await fetch(`/api/post/getposts?userId=${k._id}`),R=await A.json();if(A.ok){s(R.posts),g(R.lastMonthPosts);const $=R.totalPostscurrent.find(z=>z._id===k._id);d($?$.count:0)}}catch(A){console.log(A.message)}};k.isAdmin&&(S(),E(),C()),k.role==="author"&&x()},[k]),y(Be,{children:I("div",{className:"grid gap-4 md:grid-cols-2 md:gap-8 lg:grid-cols-4",children:[k.isAdmin&&I(Be,{children:[I(qt,{children:[I(Dn,{children:[y(vi,{children:"Total Users"}),y(px,{className:"h-4 w-4 text-muted-foreground"})]}),I(hn,{children:[I("div",{className:"text-2xl font-bold",children:["+",o]}),I("p",{className:"text-xs text-muted-foreground",children:["+",h," from last month"]})]})]}),I(qt,{children:[I(Dn,{children:[y(vi,{children:"Total Author"}),y(px,{className:"h-4 w-4 text-muted-foreground"})]}),y(hn,{children:I("div",{className:"text-2xl font-bold",children:["+",w]})})]}),k.isAdmin?I(qt,{children:[I(Dn,{children:[y(vi,{children:"Total Posts"}),y(Ua,{className:"text-muted-foreground"})]}),I(hn,{children:[I("div",{className:"text-2xl font-bold",children:["+",l]}),I("p",{className:"text-xs text-muted-foreground",children:["+",p," from last month"]})]})]}):""]}),k.role==="author"&&I(Be,{children:[I(qt,{children:[I(Dn,{children:[y(vi,{children:"Total MyPosts"}),y(Ua,{className:"text-muted-foreground"})]}),I(hn,{children:[I("div",{className:"text-2xl font-bold",children:["+",u]}),I("p",{className:"text-xs text-muted-foreground",children:["+",p," from last month"]})]})]}),I(qt,{children:[I(Dn,{children:[y(vi,{children:"Total Comments"}),y(Ua,{className:"text-muted-foreground"})]}),I(hn,{children:[I("div",{className:"text-2xl font-bold",children:["+",u]}),I("p",{className:"text-xs text-muted-foreground",children:["+",p," from last month"]})]})]})]})]})})},u3=()=>{const{currentUser:t,error:e,loading:n}=Bn(A=>A.user),[r,i]=m.useState(null),[s,o]=m.useState(null),[a,l]=m.useState(null),[c,u]=m.useState(null),[d,h]=m.useState(!1),[f,p]=m.useState(null),[g,_]=m.useState(null),[v,w]=m.useState({}),b=m.useRef(),k=Hh(),S=A=>{const R=A.target.files[0];R&&(i(R),o(URL.createObjectURL(R)))};m.useEffect(()=>{r&&C()},[r]);const C=async()=>{h(!0),u(null);const A=$2(T0),R=new Date().getTime()+r.name,$=L2(A,R),z=N2($,r);z.on("state_changed",re=>{const Y=re.bytesTransferred/re.totalBytes*100;l(Y.toFixed(0))},re=>{u(je.error("File must be less than 2MB")),l(null),i(null),o(null),h(!1)},()=>{D2(z.snapshot.ref).then(re=>{o(re),w({...v,profilePicture:re}),h(!1),l(null)})})},E=A=>{w({...v,[A.target.id]:A.target.value})},x=async A=>{if(A.preventDefault(),_(null),p(null),Object.keys(v).length===0){_(je.error("No changes made"));return}if(d){_(je.error("Please wait for image to upload"));return}try{k(Qj());const R=await fetch(`/api/user/update/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),$=await R.json();R.ok?(k(eG($)),p(je.success("User's profile updated successfully"))):(k(Yx($.message)),_($.message))}catch(R){k(Yx(R.message)),_(R.message)}};return m.useEffect(()=>{let A;return c&&(A=setTimeout(()=>{u(null)},6e3)),()=>{clearTimeout(A)}},[c]),y(Be,{children:y("form",{onSubmit:x,children:I("div",{className:" flex flex-col items-center gap-4 max-w-lg mx-auto w-full",children:[y("h1",{className:"text-2xl font-extrabold",children:"My Profile"}),y(fn,{type:"file",accept:"image/*",onChange:S,ref:b,className:"hidden"}),I(y0,{className:"md:w-36 md:h-36 w-24 h-24 mb-3 cursor-pointer hover:opacity-60 ",onClick:()=>b.current.click(),children:[y(b0,{src:s||t.profilePicture,className:`${a&&a<100&&"opacity-60"}`}),y(_0,{children:"CN"})]}),a&&y(I0,{value:a}),I(qt,{className:"w-72 sm:w-[350px] pt-6",children:[y(hn,{children:I("div",{className:"grid w-full items-center gap-4",children:[I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"username",children:"Username"}),y(fn,{id:"username",placeholder:"Username",type:"text",defaultValue:t.username,onChange:E})]}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"email",children:"Email"}),y(fn,{id:"email",placeholder:"Email",type:"email",onChange:E,defaultValue:t.email})]}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"password",children:"Password"}),y(fn,{id:"password",placeholder:"Password",type:"password",onChange:E})]}),y("div",{className:"flex flex-col space-y-1.5",children:y("select",{className:"flex h-10 capitalize items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",id:"role",onChange:E,children:I("optgroup",{className:"dark:bg-[#1C1917]",children:[y("option",{defaultValue:t.role,children:t.role}),y("option",{value:"user",children:"User"}),y("option",{value:"author",children:"Author"})]})})})]})}),y(wa,{className:"flex justify-end",children:y(it,{type:"submit",disabled:n||d,className:"w-full",children:n?y(Be,{children:I(it,{disabled:!0,className:"w-full",children:[y(t2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]})}):"Save"})})]})]})})})},Wk=m.forwardRef(({className:t,...e},n)=>y("div",{className:"relative w-full overflow-auto",children:y("table",{ref:n,className:oe("w-full caption-bottom text-sm",t),...e})}));Wk.displayName="Table";const jk=m.forwardRef(({className:t,...e},n)=>y("thead",{ref:n,className:oe("[&_tr]:border-b",t),...e}));jk.displayName="TableHeader";const Gk=m.forwardRef(({className:t,...e},n)=>y("tbody",{ref:n,className:oe("[&_tr:last-child]:border-0",t),...e}));Gk.displayName="TableBody";const QM=m.forwardRef(({className:t,...e},n)=>y("tfoot",{ref:n,className:oe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));QM.displayName="TableFooter";const Sh=m.forwardRef(({className:t,...e},n)=>y("tr",{ref:n,className:oe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Sh.displayName="TableRow";const yi=m.forwardRef(({className:t,...e},n)=>y("th",{ref:n,className:oe("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));yi.displayName="TableHead";const bi=m.forwardRef(({className:t,...e},n)=>y("td",{ref:n,className:oe("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...e}));bi.displayName="TableCell";const Gwe=m.forwardRef(({className:t,...e},n)=>y("caption",{ref:n,className:oe("mt-4 text-sm text-muted-foreground",t),...e}));Gwe.displayName="TableCaption";function qwe(t,[e,n]){return Math.min(n,Math.max(e,t))}function Ywe(t,e){return m.useReducer((n,r)=>{const i=e[n][r];return i??n},t)}const eN="ScrollArea",[tN,dEe]=cs(eN),[Kwe,si]=tN(eN),Zwe=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=t,[a,l]=m.useState(null),[c,u]=m.useState(null),[d,h]=m.useState(null),[f,p]=m.useState(null),[g,_]=m.useState(null),[v,w]=m.useState(0),[b,k]=m.useState(0),[S,C]=m.useState(!1),[E,x]=m.useState(!1),A=bt(e,$=>l($)),R=U_(i);return m.createElement(Kwe,{scope:n,type:r,dir:R,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:_,scrollbarYEnabled:E,onScrollbarYEnabledChange:x,onCornerWidthChange:w,onCornerHeightChange:k},m.createElement(ze.div,U({dir:R},o,{ref:A,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})))}),Jwe="ScrollAreaViewport",Xwe=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,...i}=t,s=si(Jwe,n),o=m.useRef(null),a=bt(e,o,s.onViewportChange);return m.createElement(m.Fragment,null,m.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),m.createElement(ze.div,U({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...t.style}}),m.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),fo="ScrollAreaScrollbar",nN=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=si(fo,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=t.orientation==="horizontal";return m.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?m.createElement(Qwe,U({},r,{ref:e,forceMount:n})):i.type==="scroll"?m.createElement(eve,U({},r,{ref:e,forceMount:n})):i.type==="auto"?m.createElement(rN,U({},r,{ref:e,forceMount:n})):i.type==="always"?m.createElement(qk,U({},r,{ref:e})):null}),Qwe=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=si(fo,t.__scopeScrollArea),[s,o]=m.useState(!1);return m.useEffect(()=>{const a=i.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),m.createElement(ri,{present:n||s},m.createElement(rN,U({"data-state":s?"visible":"hidden"},r,{ref:e})))}),eve=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=si(fo,t.__scopeScrollArea),s=t.orientation==="horizontal",o=n1(()=>l("SCROLL_END"),100),[a,l]=Ywe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,i.scrollHideDelay,l]),m.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(l("SCROLL"),o()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,o]),m.createElement(ri,{present:n||a!=="hidden"},m.createElement(qk,U({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:e,onPointerEnter:ce(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ce(t.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),rN=m.forwardRef((t,e)=>{const n=si(fo,t.__scopeScrollArea),{forceMount:r,...i}=t,[s,o]=m.useState(!1),a=t.orientation==="horizontal",l=n1(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?c:u)}},10);return Jc(n.viewport,l),Jc(n.content,l),m.createElement(ri,{present:r||s},m.createElement(qk,U({"data-state":s?"visible":"hidden"},i,{ref:e})))}),qk=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,i=si(fo,t.__scopeScrollArea),s=m.useRef(null),o=m.useRef(0),[a,l]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=aN(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,f){return lve(h,o.current,a,f)}return n==="horizontal"?m.createElement(tve,U({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,f=d3(h,a,i.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}})):n==="vertical"?m.createElement(nve,U({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,f=d3(h,a);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}})):null}),tve=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=si(fo,t.__scopeScrollArea),[o,a]=m.useState(),l=m.useRef(null),c=bt(e,l,s.onScrollbarXChange);return m.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),m.createElement(sN,U({"data-orientation":"horizontal"},i,{ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":t1(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),cN(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:kg(o.paddingLeft),paddingEnd:kg(o.paddingRight)}})}}))}),nve=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...i}=t,s=si(fo,t.__scopeScrollArea),[o,a]=m.useState(),l=m.useRef(null),c=bt(e,l,s.onScrollbarYChange);return m.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),m.createElement(sN,U({"data-orientation":"vertical"},i,{ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":t1(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),cN(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:kg(o.paddingTop),paddingEnd:kg(o.paddingBottom)}})}}))}),[rve,iN]=tN(fo),sN=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=t,f=si(fo,n),[p,g]=m.useState(null),_=bt(e,A=>g(A)),v=m.useRef(null),w=m.useRef(""),b=f.viewport,k=r.content-r.viewport,S=tn(u),C=tn(l),E=n1(d,10);function x(A){if(v.current){const R=A.clientX-v.current.left,$=A.clientY-v.current.top;c({x:R,y:$})}}return m.useEffect(()=>{const A=R=>{const $=R.target;(p==null?void 0:p.contains($))&&S(R,k)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[b,p,k,S]),m.useEffect(C,[r,C]),Jc(p,E),Jc(f.content,E),m.createElement(rve,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:tn(s),onThumbPointerUp:tn(o),onThumbPositionChange:C,onThumbPointerDown:tn(a)},m.createElement(ze.div,U({},h,{ref:_,style:{position:"absolute",...h.style},onPointerDown:ce(t.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),v.current=p.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),x(A))}),onPointerMove:ce(t.onPointerMove,x),onPointerUp:ce(t.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=w.current,f.viewport&&(f.viewport.style.scrollBehavior=""),v.current=null})})))}),bb="ScrollAreaThumb",ive=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=iN(bb,t.__scopeScrollArea);return m.createElement(ri,{present:n||i.hasThumb},m.createElement(sve,U({ref:e},r)))}),sve=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...i}=t,s=si(bb,n),o=iN(bb,n),{onThumbPositionChange:a}=o,l=bt(e,d=>o.onThumbChange(d)),c=m.useRef(),u=n1(()=>{c.current&&(c.current(),c.current=void 0)},100);return m.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const f=cve(d,a);c.current=f,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,a]),m.createElement(ze.div,U({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ce(t.onPointerDownCapture,d=>{const f=d.target.getBoundingClientRect(),p=d.clientX-f.left,g=d.clientY-f.top;o.onThumbPointerDown({x:p,y:g})}),onPointerUp:ce(t.onPointerUp,o.onThumbPointerUp)}))}),oN="ScrollAreaCorner",ove=m.forwardRef((t,e)=>{const n=si(oN,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?m.createElement(ave,U({},t,{ref:e})):null}),ave=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,i=si(oN,n),[s,o]=m.useState(0),[a,l]=m.useState(0),c=!!(s&&a);return Jc(i.scrollbarX,()=>{var u;const d=((u=i.scrollbarX)===null||u===void 0?void 0:u.offsetHeight)||0;i.onCornerHeightChange(d),l(d)}),Jc(i.scrollbarY,()=>{var u;const d=((u=i.scrollbarY)===null||u===void 0?void 0:u.offsetWidth)||0;i.onCornerWidthChange(d),o(d)}),c?m.createElement(ze.div,U({},r,{ref:e,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...t.style}})):null});function kg(t){return t?parseInt(t,10):0}function aN(t,e){const n=t/e;return isNaN(n)?0:n}function t1(t){const e=aN(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function lve(t,e,n,r="ltr"){const i=t1(n),s=i/2,o=e||s,a=i-o,l=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,d=r==="ltr"?[0,u]:[u*-1,0];return lN([l,c],d)(t)}function d3(t,e,n="ltr"){const r=t1(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,o=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],c=qwe(t,l);return lN([0,o],[0,a])(c)}function lN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function cN(t,e){return t>0&&t<e}const cve=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function i(){const s={left:t.scrollLeft,top:t.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&e(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function n1(t,e){const n=tn(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Jc(t,e){const n=tn(e);Xs(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}const uN=Zwe,uve=Xwe,dve=ove,Yk=m.forwardRef(({className:t,children:e,...n},r)=>I(uN,{ref:r,className:oe("relative overflow-hidden",t),...n,children:[y(uve,{className:"h-full w-full rounded-[inherit]",children:e}),y(Kk,{}),y(dve,{})]}));Yk.displayName=uN.displayName;const Kk=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>y(nN,{ref:r,orientation:e,className:oe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:y(ive,{className:"relative flex-1 rounded-full bg-border"})}));Kk.displayName=nN.displayName;const hve="AlertDialog",[fve,hEe]=cs(hve,[Z7]),mo=Z7(),mve=t=>{const{__scopeAlertDialog:e,...n}=t,r=mo(e);return m.createElement(tR,U({},r,n,{modal:!0}))},pve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=mo(n);return m.createElement(nR,U({},i,r,{ref:e}))}),gve=t=>{const{__scopeAlertDialog:e,...n}=t,r=mo(e);return m.createElement(rR,U({},r,n))},wve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=mo(n);return m.createElement(C2,U({},i,r,{ref:e}))}),dN="AlertDialogContent",[vve,yve]=fve(dN),bve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=mo(n),o=m.useRef(null),a=bt(e,o),l=m.useRef(null);return m.createElement(nJ,{contentName:dN,titleName:_ve,docsSlug:"alert-dialog"},m.createElement(vve,{scope:n,cancelRef:l},m.createElement(x2,U({role:"alertdialog"},s,i,{ref:a,onOpenAutoFocus:ce(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)===null||u===void 0||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault()}),m.createElement(c4,null,r),!1)))}),_ve="AlertDialogTitle",kve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=mo(n);return m.createElement(S2,U({},i,r,{ref:e}))}),Eve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=mo(n);return m.createElement(T2,U({},i,r,{ref:e}))}),Cve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=mo(n);return m.createElement(P2,U({},i,r,{ref:e}))}),xve="AlertDialogCancel",Sve=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=yve(xve,n),s=mo(n),o=bt(e,i);return m.createElement(P2,U({},s,r,{ref:o}))}),Tve=mve,Pve=pve,Ave=gve,hN=wve,fN=bve,mN=Cve,pN=Sve,gN=kve,wN=Eve,vN=Tve,yN=Pve,Ive=Ave,bN=m.forwardRef(({className:t,...e},n)=>y(hN,{className:oe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));bN.displayName=hN.displayName;const Zk=m.forwardRef(({className:t,...e},n)=>I(Ive,{children:[y(bN,{}),y(fN,{ref:n,className:oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Zk.displayName=fN.displayName;const Jk=({className:t,...e})=>y("div",{className:oe("flex flex-col space-y-2 text-center sm:text-left",t),...e});Jk.displayName="AlertDialogHeader";const Xk=({className:t,...e})=>y("div",{className:oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Xk.displayName="AlertDialogFooter";const Qk=m.forwardRef(({className:t,...e},n)=>y(gN,{ref:n,className:oe("text-lg font-semibold",t),...e}));Qk.displayName=gN.displayName;const eE=m.forwardRef(({className:t,...e},n)=>y(wN,{ref:n,className:oe("text-sm text-muted-foreground",t),...e}));eE.displayName=wN.displayName;const tE=m.forwardRef(({className:t,...e},n)=>y(mN,{ref:n,className:oe(l0(),t),...e}));tE.displayName=mN.displayName;const nE=m.forwardRef(({className:t,...e},n)=>y(pN,{ref:n,className:oe(l0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));nE.displayName=pN.displayName;const Rve=({children:t,handleDeleteUser:e})=>I(vN,{children:[y(yN,{asChild:!0,children:t}),I(Zk,{children:[I(Jk,{children:[y(Qk,{children:"Are you sure you want to delete this user?"}),y(eE,{children:"This action cannot be undone. This will permanently delete your user."})]}),I(Xk,{children:[y(nE,{children:" No, cancel"}),y(tE,{onClick:e,children:"Yes, I'm sure"})]})]})]}),Ove=()=>{const{currentUser:t}=Bn(h=>h.user),[e,n]=m.useState([]),[r,i]=m.useState(!0),[s,o]=m.useState(!1),[a,l]=m.useState(""),[c,u]=m.useState(!0);m.useEffect(()=>{const h=async()=>{try{const f=await fetch("/api/user/getusers"),p=await f.json();f.ok&&(n(p.users),u(!1),p.users.length<5&&i(!1))}catch(f){console.log(je.error(f.message))}};t.isAdmin&&(h(),console.log(e))},[t._id]);const d=async()=>{try{const h=await fetch(`/api/user/delete/${a}`,{method:"DELETE"}),f=await h.json();h.ok?(n(p=>p.filter(g=>g._id!==a)),o(!1)):console.log(f.message)}catch(h){console.log(h.message)}};return c?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y(Be,{children:I(qt,{className:"max-w-[360px] sm:min-w-full",children:[y(Dn,{children:y(vi,{children:y("h1",{className:"text-2xl font-extrabold",children:"Users"})})}),y(hn,{children:I(Wk,{children:[y(jk,{children:I(Sh,{children:[y(yi,{className:"hidden md:table-cell",children:"Date created"}),y(yi,{className:"hidden md:table-cell",children:"Username"}),y(yi,{children:"Email"}),y(yi,{children:"Role"}),y(yi,{children:"Action"})]})}),e.map(h=>y(Gk,{children:I(Sh,{children:[y(bi,{className:"font-medium text-sm hidden md:table-cell ",children:nh(h.createdAt," dd-mm-yy")}),y(bi,{className:"hidden md:table-cell ",children:h.username}),y(bi,{className:"font-medium",children:h.email}),y(bi,{className:"font-medium",children:h.role=="author"?y(tq,{className:"text-green-500"}):y(rq,{className:"text-red-500"})}),y(bi,{className:"font-medium",children:y(Rve,{handleDeleteUser:d,children:y(wc,{className:"cursor-pointer",onClick:()=>{l(h._id)},children:"delete"})})})]})},h._id))]})})]})})},Mve=({children:t,handleDeletePost:e})=>I(vN,{children:[y(yN,{asChild:!0,children:t}),I(Zk,{children:[I(Jk,{children:[y(Qk,{children:"Are you sure you want to delete this post?"}),y(eE,{children:"This action cannot be undone. This will permanently delete your post."})]}),I(Xk,{children:[y(nE,{children:" No, cancel"}),y(tE,{onClick:e,children:"Yes, I'm sure"})]})]})]}),Nve=()=>{const{currentUser:t}=Bn(f=>f.user),[e,n]=m.useState([]),[r,i]=m.useState(!0),[s,o]=m.useState(""),[a,l]=m.useState(null),[c,u]=m.useState(!0);m.useEffect(()=>{const f=async()=>{try{const p=await fetch(`/api/post/getposts?userId=${t._id}`),g=await p.json();p.ok&&(n(g.posts),g.posts.lenght<5&&i(!1))}catch(p){l(je.error(p.message))}finally{u(!1)}};t.role=="author"&&f()},[t._id]);const d=async()=>{const f=e.length;try{const p=await fetch(`/api/post/getposts?userId=${t._id}&startIndex=${f}`),g=await p.json();p.ok&&(n(_=>[..._,...g.posts]),g.posts.length<5&&i(!1))}catch(p){je.error(p.message)}},h=async()=>{try{const f=await fetch(`/api/post/deletepost/${s}/${t._id}`,{method:"DELETE"}),p=await f.json();f.ok?n(g=>g.filter(_=>_._id!==s)):console.log(p.message)}catch(f){console.log(je.error(f.message))}};return c?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y(Be,{children:I(qt,{className:"max-w-[360px] sm:min-w-full",children:[I(Dn,{children:[y("h1",{className:"text-2xl font-extrabold",children:"Posts"}),y("div",{className:"flex ms-auto",children:y(it,{asChild:!0,className:"gap-2 h-fit w-fit",children:I(Pe,{to:t.isAdmin?"/admin/dashboard?tab=create-post":"/user/dashboard?tab=create-post",children:[y(nq,{})," Create Post"]})})})]}),I(hn,{children:[I(Wk,{children:[y(jk,{children:I(Sh,{children:[y(yi,{children:"Data updated"}),y(yi,{children:"Post title"}),y(yi,{children:"Author"}),y(yi,{children:"Category"}),y(yi,{children:"Delete"})]})}),e.map((f,p)=>y(Gk,{children:I(Sh,{children:[y(bi,{className:"font-medium",children:nh(f.updatedAt,"mmmm dS, yyyy")}),y(bi,{className:"capitalize font-bold text-sm md:text-lg",children:y(Pe,{to:`/post/${f.slug}`,children:f.title})}),I(bi,{className:"italic text-sm md:text-sm",children:["@",f.author]}),y(bi,{className:" capitalize",children:f.category}),y(bi,{children:I("div",{className:"flex  gap-3",children:[y(Mve,{handleDeletePost:h,children:y(wc,{className:"cursor-pointer",variant:"destructive",onClick:()=>{o(f._id)},children:"Delete"})}),t.isAdmin?y(Pe,{className:"hover:underline",to:`/admin/dashboard/update-post/${f._id}`,children:y(wc,{children:"Edit"})}):y(Pe,{className:"hover:underline",to:`/user/dashboard/update-post/${f._id}`,children:y(wc,{children:"Edit"})})]})})]})},f._id)),y(QM,{})]}),y("div",{className:"flex justify-end items-end p-3",children:r&&y(Be,{children:y(it,{onClick:d,className:"w-fit text-white",children:"Show more"})})})]})]})})};function Dve({setFormData:t,formData:e}){const[n,r]=m.useState(""),[i,s]=m.useState(!1);return m.useEffect(()=>{s(!e)},[e]),y(Be,{children:y(x8.CKEditor,{id:"content",editor:lf,config:{plugins:[XM,KM,$M,yM,yu,E9,P9,B9,A9,IM,z9,Y9,tM,dM,hM,Ok,vM,H9,jM,JM,GM,U9,OM,FM,VM,BM,UM,df],toolbar:["undo","redo","|","heading","|",{label:"Basic Styles",icon:"text",items:["bold","italic","underline","alignment"]},"|","bulletedList","numberedList","|","fontSize","fontFamily","|","image","imageCaption","imageResizeEditing","imageResizeHandles","imageUpload","toggleImageCaption","ckbox","ckboxImageEdit","imageEditing"],cloudServices:{tokenUrl:"https://107180.cke-cs.com/token/dev/bb45727ab997decb393ca41204eab5ef596d4d01b3fc00ba69bce7a15551?limit=10",uploadUrl:"https://107180.cke-cs.com/easyimage/upload/",withCredentials:!1},list:{multiBlock:!1,properties:{styles:!0,startIndex:!0,reversed:!0}}},tag:"textarea",data:n,onChange:(o,a)=>{const l=a.getData();r(l),t({...e,content:l})}})})}const Lve=()=>{const{currentUser:t}=Bn(S=>S.user),[e,n]=m.useState(null),[r,i]=m.useState(null),[s,o]=m.useState(null),[a,l]=m.useState({}),[c,u]=m.useState(null),[d,h]=m.useState(!1),[f,p]=m.useState([]),[g,_]=m.useState(!1),v=pa(),w=async()=>{try{if(!e){o(je.error("Please select an image"));return}o(null);const S=$2(T0),C=new Date().getTime()+"-"+e.name,E=L2(S,C),x=N2(E,e);x.on("state_changed",A=>{const R=A.bytesTransferred/A.totalBytes*100;i(R.toFixed(0))},A=>{o(je.error("Image upload failed")),i(null)},()=>{D2(x.snapshot.ref).then(A=>{i(null),o(null),l({...a,image:A})})})}catch(S){o(je.error("Image upload failed")),i(null),console.log(S)}};m.useEffect(()=>{let S;return s&&(S=setTimeout(()=>{o(null)},6e3)),()=>{clearTimeout(S)}},[s]),m.useEffect(()=>{(async()=>{try{const E=await(await fetch("/api/categories")).json();p(E)}catch(C){console.error("Failed to fetch categories",C)}})()},[]),m.useEffect(()=>{t&&t.username&&l(S=>({...S,author:t.username}))},[t]);const b=async()=>{const S=document.getElementById("newCategoryInput"),C=S.value.trim();if(_(!0),!C){je.error("Category name cannot be empty");return}try{const E=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({categoryName:C})});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const x=await E.json();p([...f,x]),S.value="",_(!1)}catch(E){console.error("Failed to add category",E),je.error("Failed to add category: "+E.message),_(!1)}},k=async S=>{if(h(!0),S.preventDefault(),!a){console.error(je.error("Error: message is undefined"));return}if(!t||!t.username){console.error(je.error("Error: User is undefined"));return}l({...a,author:t.username});try{const C=await fetch("/api/post/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),E=await C.json();if(!C.ok){h(!1),u(je.error(E.message));return}C.ok&&(h(!1),u(null),v(`/post/${E.slug}`))}catch{h(!1),u(je.error("Something went wrong"))}};return d?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y(Be,{children:y(qt,{className:"max-w-sm md:min-w-full",children:I("form",{onSubmit:k,children:[I(Dn,{children:[y(vi,{children:"Create Post"}),y(Wh,{children:"Let's creat your blog."})]}),I(hn,{className:"flex flex-col gap-3",children:[I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"title",children:"Title"}),y(fn,{id:"title",placeholder:"title",type:"text",onChange:S=>l({...a,title:S.target.value})})]}),I("div",{className:"flex w-fit md:w-full flex-col space-y-1.5",children:[y("select",{id:"category",className:"flex h-10 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",onChange:S=>l({...a,category:S.target.value}),children:I("optgroup",{className:"dark:bg-[#1C1917]",children:[y("option",{value:"uncategorized",children:"Select a category"}),f.map(S=>y("option",{value:S.categoryName,children:S.categoryName},S._id))]})}),I("div",{className:"flex space-x-2",children:[y(fn,{type:"text",placeholder:"Add new category",id:"newCategoryInput"}),y(it,{type:"button",onClick:b,disabled:g,children:g?"Saving...":"Save"})]})]}),y("div",{className:"flex gap-3 items-center justify-between border-4 border-teal-500 border-dotted p-3",children:I("div",{className:"grid max-w-sm items-center gap-1.5",children:[y(Pn,{htmlFor:"picture",children:"Picture"}),y(fn,{id:"picture",type:"file",accept:"image/*",onChange:S=>n(S.target.files[0])}),y(it,{onClick:w,disabled:r,children:"Upload Image"}),r&&y(I0,{value:r})]})}),I("div",{className:"flex flex-col space-y-1.5",children:[y(Pn,{htmlFor:"description",children:"Description"}),y("textarea",{id:"description",placeholder:"description",className:"p-2 text-black rounded-sm",type:"text",onChange:S=>l({...a,description:S.target.value})})]}),y(Dve,{id:"content",setFormData:l,formData:a})]}),y(wa,{className:"flex justify-end",children:d?I(it,{disabled:!0,children:[y(V_,{className:"mr-2 h-4 w-4 animate-spin"}),"Please wait"]}):y(it,{type:"submit",children:"Publish"})})]},t._id)})})};function _N(t){const e=m.useRef(document.title);return m.useEffect(()=>{const n=e.current;return document.title=t,()=>{document.title=n}},[t]),m.useEffect(()=>{e.current=document.title},[]),null}const $ve=({tab:t,currentUser:e})=>{let n="My-Blog";return t==="users"?n="Dashboard | Users":t==="profile"?n="Dashboard | Profile":t==="posts"?n="Dashboard | Posts":t==="create-post"?n="Dashboard | Create Post":t==="dash"&&(n="Dashboarad"),_N(n),y("main",{className:"flex flex-1 w-full flex-col gap-4 p-4 lg:gap-6 lg:p-6",children:e.isAdmin||e.role=="author"?I(Be,{children:[t==="dash"&&y(c3,{}),t==="users"&&y(Ove,{}),t==="profile"&&y(u3,{}),t==="posts"&&y(Nve,{}),t==="create-post"&&y(Lve,{})]}):I(Be,{children:[t==="dash"&&y(c3,{}),t==="profile"&&y(u3,{})]})})};function kN(){const t=fl(),[e,n]=m.useState("");m.useEffect(()=>{const s=new URLSearchParams(t.search).get("tab");s&&n(s)},[t.search]);const{currentUser:r}=Bn(i=>i.user);return I("div",{className:"grid min-h-screen w-full md:grid-cols-[220px_1fr] lg:grid-cols-[280px_1fr]",children:[y(cJ,{currentUser:r}),I("div",{className:"flex flex-col",children:[y(aR,{}),y($ve,{currentUser:r,tab:e})]})]})}const Fve=()=>y(kN,{}),Vve=()=>y(kN,{}),_b="horizontal",Bve=["horizontal","vertical"],EN=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=_b,...i}=t,s=CN(r)?r:_b,a=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return m.createElement(ze.div,U({"data-orientation":s},a,i,{ref:e}))});EN.propTypes={orientation(t,e,n){const r=t[e],i=String(r);return r&&!CN(r)?new Error(Uve(i,n)):null}};function Uve(t,e){return`Invalid prop \`orientation\` of value \`${t}\` supplied to \`${e}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${_b}\`.`}function CN(t){return Bve.includes(t)}const xN=EN,SN=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>y(xN,{ref:i,decorative:n,orientation:e,className:oe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));SN.displayName=xN.displayName;const TN=m.forwardRef(({className:t,...e},n)=>y("textarea",{className:oe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));TN.displayName="Textarea";function zve(t){return us({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 0 0-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 0 0 471 99.9c-52 0-98 35-111.8 85.1l-85.9 311h-.3v428h472.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM112 528v364c0 17.7 14.3 32 32 32h65V496h-65c-17.7 0-32 14.3-32 32z"},child:[]}]})(t)}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var PN;function K(){return PN.apply(null,arguments)}function Hve(t){PN=t}function Mi(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function Ga(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function rE(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Le(t,e))return!1;return!0}function Wn(t){return t===void 0}function so(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function hf(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function AN(t,e){var n=[],r,i=t.length;for(r=0;r<i;++r)n.push(e(t[r],r));return n}function Bo(t,e){for(var n in e)Le(e,n)&&(t[n]=e[n]);return Le(e,"toString")&&(t.toString=e.toString),Le(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ms(t,e,n,r){return XN(t,e,n,r,!0).utc()}function Wve(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ye(t){return t._pf==null&&(t._pf=Wve()),t._pf}var kb;Array.prototype.some?kb=Array.prototype.some:kb=function(t){var e=Object(this),n=e.length>>>0,r;for(r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};function iE(t){var e=null,n=!1,r=t._d&&!isNaN(t._d.getTime());if(r&&(e=ye(t),n=kb.call(e.parsedDateParts,function(i){return i!=null}),r=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n),t._strict&&(r=r&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=r;else return r;return t._isValid}function r1(t){var e=ms(NaN);return t!=null?Bo(ye(e),t):ye(e).userInvalidated=!0,e}var h3=K.momentProperties=[],Qw=!1;function sE(t,e){var n,r,i,s=h3.length;if(Wn(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Wn(e._i)||(t._i=e._i),Wn(e._f)||(t._f=e._f),Wn(e._l)||(t._l=e._l),Wn(e._strict)||(t._strict=e._strict),Wn(e._tzm)||(t._tzm=e._tzm),Wn(e._isUTC)||(t._isUTC=e._isUTC),Wn(e._offset)||(t._offset=e._offset),Wn(e._pf)||(t._pf=ye(e)),Wn(e._locale)||(t._locale=e._locale),s>0)for(n=0;n<s;n++)r=h3[n],i=e[r],Wn(i)||(t[r]=i);return t}function ff(t){sE(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Qw===!1&&(Qw=!0,K.updateOffset(this),Qw=!1)}function Ni(t){return t instanceof ff||t!=null&&t._isAMomentObject!=null}function IN(t){K.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function oi(t,e){var n=!0;return Bo(function(){if(K.deprecationHandler!=null&&K.deprecationHandler(null,t),n){var r=[],i,s,o,a=arguments.length;for(s=0;s<a;s++){if(i="",typeof arguments[s]=="object"){i+=`
[`+s+"] ";for(o in arguments[0])Le(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[s];r.push(i)}IN(t+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var f3={};function RN(t,e){K.deprecationHandler!=null&&K.deprecationHandler(t,e),f3[t]||(IN(e),f3[t]=!0)}K.suppressDeprecationWarnings=!1;K.deprecationHandler=null;function ps(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function jve(t){var e,n;for(n in t)Le(t,n)&&(e=t[n],ps(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Eb(t,e){var n=Bo({},t),r;for(r in e)Le(e,r)&&(Ga(t[r])&&Ga(e[r])?(n[r]={},Bo(n[r],t[r]),Bo(n[r],e[r])):e[r]!=null?n[r]=e[r]:delete n[r]);for(r in t)Le(t,r)&&!Le(e,r)&&Ga(t[r])&&(n[r]=Bo({},n[r]));return n}function oE(t){t!=null&&this.set(t)}var Cb;Object.keys?Cb=Object.keys:Cb=function(t){var e,n=[];for(e in t)Le(t,e)&&n.push(e);return n};var Gve={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function qve(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return ps(r)?r.call(e,n):r}function as(t,e,n){var r=""+Math.abs(t),i=e-r.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var aE=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ym=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ev={},Ec={};function ie(t,e,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),t&&(Ec[t]=i),e&&(Ec[e[0]]=function(){return as(i.apply(this,arguments),e[1],e[2])}),n&&(Ec[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function Yve(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function Kve(t){var e=t.match(aE),n,r;for(n=0,r=e.length;n<r;n++)Ec[e[n]]?e[n]=Ec[e[n]]:e[n]=Yve(e[n]);return function(i){var s="",o;for(o=0;o<r;o++)s+=ps(e[o])?e[o].call(i,t):e[o];return s}}function Jm(t,e){return t.isValid()?(e=ON(e,t.localeData()),ev[e]=ev[e]||Kve(e),ev[e](t)):t.localeData().invalidDate()}function ON(t,e){var n=5;function r(i){return e.longDateFormat(i)||i}for(ym.lastIndex=0;n>=0&&ym.test(t);)t=t.replace(ym,r),ym.lastIndex=0,n-=1;return t}var Zve={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Jve(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(aE).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[t])}var Xve="Invalid date";function Qve(){return this._invalidDate}var eye="%d",tye=/\d{1,2}/;function nye(t){return this._ordinal.replace("%d",t)}var rye={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function iye(t,e,n,r){var i=this._relativeTime[n];return ps(i)?i(t,e,n,r):i.replace(/%d/i,t)}function sye(t,e){var n=this._relativeTime[t>0?"future":"past"];return ps(n)?n(e):n.replace(/%s/i,e)}var m3={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ai(t){return typeof t=="string"?m3[t]||m3[t.toLowerCase()]:void 0}function lE(t){var e={},n,r;for(r in t)Le(t,r)&&(n=ai(r),n&&(e[n]=t[r]));return e}var oye={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function aye(t){var e=[],n;for(n in t)Le(t,n)&&e.push({unit:n,priority:oye[n]});return e.sort(function(r,i){return r.priority-i.priority}),e}var MN=/\d/,$r=/\d\d/,NN=/\d{3}/,cE=/\d{4}/,i1=/[+-]?\d{6}/,pt=/\d\d?/,DN=/\d\d\d\d?/,LN=/\d\d\d\d\d\d?/,s1=/\d{1,3}/,uE=/\d{1,4}/,o1=/[+-]?\d{1,6}/,bu=/\d+/,a1=/[+-]?\d+/,lye=/Z|[+-]\d\d:?\d\d/gi,l1=/Z|[+-]\d\d(?::?\d\d)?/gi,cye=/[+-]?\d+(\.\d{1,3})?/,mf=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_u=/^[1-9]\d?/,dE=/^([1-9]\d|\d)/,Eg;Eg={};function Z(t,e,n){Eg[t]=ps(e)?e:function(r,i){return r&&n?n:e}}function uye(t,e){return Le(Eg,t)?Eg[t](e._strict,e._locale):new RegExp(dye(t))}function dye(t){return Gs(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,r,i,s){return n||r||i||s}))}function Gs(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Wr(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function xe(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Wr(e)),n}var xb={};function Je(t,e){var n,r=e,i;for(typeof t=="string"&&(t=[t]),so(e)&&(r=function(s,o){o[e]=xe(s)}),i=t.length,n=0;n<i;n++)xb[t[n]]=r}function pf(t,e){Je(t,function(n,r,i,s){i._w=i._w||{},e(n,i._w,i,s)})}function hye(t,e,n){e!=null&&Le(xb,t)&&xb[t](e,n._a,n,t)}function c1(t){return t%4===0&&t%100!==0||t%400===0}var In=0,Bs=1,Ki=2,Kt=3,Ei=4,Us=5,$a=6,fye=7,mye=8;ie("Y",0,0,function(){var t=this.year();return t<=9999?as(t,4):"+"+t});ie(0,["YY",2],0,function(){return this.year()%100});ie(0,["YYYY",4],0,"year");ie(0,["YYYYY",5],0,"year");ie(0,["YYYYYY",6,!0],0,"year");Z("Y",a1);Z("YY",pt,$r);Z("YYYY",uE,cE);Z("YYYYY",o1,i1);Z("YYYYYY",o1,i1);Je(["YYYYY","YYYYYY"],In);Je("YYYY",function(t,e){e[In]=t.length===2?K.parseTwoDigitYear(t):xe(t)});Je("YY",function(t,e){e[In]=K.parseTwoDigitYear(t)});Je("Y",function(t,e){e[In]=parseInt(t,10)});function Sd(t){return c1(t)?366:365}K.parseTwoDigitYear=function(t){return xe(t)+(xe(t)>68?1900:2e3)};var $N=ku("FullYear",!0);function pye(){return c1(this.year())}function ku(t,e){return function(n){return n!=null?(FN(this,t,n),K.updateOffset(this,e),this):Th(this,t)}}function Th(t,e){if(!t.isValid())return NaN;var n=t._d,r=t._isUTC;switch(e){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function FN(t,e,n){var r,i,s,o,a;if(!(!t.isValid()||isNaN(n))){switch(r=t._d,i=t._isUTC,e){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}s=n,o=t.month(),a=t.date(),a=a===29&&o===1&&!c1(s)?28:a,i?r.setUTCFullYear(s,o,a):r.setFullYear(s,o,a)}}function gye(t){return t=ai(t),ps(this[t])?this[t]():this}function wye(t,e){if(typeof t=="object"){t=lE(t);var n=aye(t),r,i=n.length;for(r=0;r<i;r++)this[n[r].unit](t[n[r].unit])}else if(t=ai(t),ps(this[t]))return this[t](e);return this}function vye(t,e){return(t%e+e)%e}var Lt;Array.prototype.indexOf?Lt=Array.prototype.indexOf:Lt=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function hE(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=vye(e,12);return t+=(e-n)/12,n===1?c1(t)?29:28:31-n%7%2}ie("M",["MM",2],"Mo",function(){return this.month()+1});ie("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});ie("MMMM",0,0,function(t){return this.localeData().months(this,t)});Z("M",pt,_u);Z("MM",pt,$r);Z("MMM",function(t,e){return e.monthsShortRegex(t)});Z("MMMM",function(t,e){return e.monthsRegex(t)});Je(["M","MM"],function(t,e){e[Bs]=xe(t)-1});Je(["MMM","MMMM"],function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);i!=null?e[Bs]=i:ye(n).invalidMonth=t});var yye="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),VN="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),BN=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,bye=mf,_ye=mf;function kye(t,e){return t?Mi(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||BN).test(e)?"format":"standalone"][t.month()]:Mi(this._months)?this._months:this._months.standalone}function Eye(t,e){return t?Mi(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[BN.test(e)?"format":"standalone"][t.month()]:Mi(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Cye(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)s=ms([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase();return n?e==="MMM"?(i=Lt.call(this._shortMonthsParse,o),i!==-1?i:null):(i=Lt.call(this._longMonthsParse,o),i!==-1?i:null):e==="MMM"?(i=Lt.call(this._shortMonthsParse,o),i!==-1?i:(i=Lt.call(this._longMonthsParse,o),i!==-1?i:null)):(i=Lt.call(this._longMonthsParse,o),i!==-1?i:(i=Lt.call(this._shortMonthsParse,o),i!==-1?i:null))}function xye(t,e,n){var r,i,s;if(this._monthsParseExact)return Cye.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=ms([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[r].test(t))return r;if(n&&e==="MMM"&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}}function UN(t,e){if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=xe(e);else if(e=t.localeData().monthsParse(e),!so(e))return t}var n=e,r=t.date();return r=r<29?r:Math.min(r,hE(t.year(),n)),t._isUTC?t._d.setUTCMonth(n,r):t._d.setMonth(n,r),t}function zN(t){return t!=null?(UN(this,t),K.updateOffset(this,!0),this):Th(this,"Month")}function Sye(){return hE(this.year(),this.month())}function Tye(t){return this._monthsParseExact?(Le(this,"_monthsRegex")||HN.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Le(this,"_monthsShortRegex")||(this._monthsShortRegex=bye),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function Pye(t){return this._monthsParseExact?(Le(this,"_monthsRegex")||HN.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Le(this,"_monthsRegex")||(this._monthsRegex=_ye),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function HN(){function t(l,c){return c.length-l.length}var e=[],n=[],r=[],i,s,o,a;for(i=0;i<12;i++)s=ms([2e3,i]),o=Gs(this.monthsShort(s,"")),a=Gs(this.months(s,"")),e.push(o),n.push(a),r.push(a),r.push(o);e.sort(t),n.sort(t),r.sort(t),this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Aye(t,e,n,r,i,s,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,r,i,s,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,r,i,s,o),a}function Ph(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Cg(t,e,n){var r=7+e-n,i=(7+Ph(t,0,r).getUTCDay()-e)%7;return-i+r-1}function WN(t,e,n,r,i){var s=(7+n-r)%7,o=Cg(t,r,i),a=1+7*(e-1)+s+o,l,c;return a<=0?(l=t-1,c=Sd(l)+a):a>Sd(t)?(l=t+1,c=a-Sd(t)):(l=t,c=a),{year:l,dayOfYear:c}}function Ah(t,e,n){var r=Cg(t.year(),e,n),i=Math.floor((t.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=t.year()-1,s=i+qs(o,e,n)):i>qs(t.year(),e,n)?(s=i-qs(t.year(),e,n),o=t.year()+1):(o=t.year(),s=i),{week:s,year:o}}function qs(t,e,n){var r=Cg(t,e,n),i=Cg(t+1,e,n);return(Sd(t)-r+i)/7}ie("w",["ww",2],"wo","week");ie("W",["WW",2],"Wo","isoWeek");Z("w",pt,_u);Z("ww",pt,$r);Z("W",pt,_u);Z("WW",pt,$r);pf(["w","ww","W","WW"],function(t,e,n,r){e[r.substr(0,1)]=xe(t)});function Iye(t){return Ah(t,this._week.dow,this._week.doy).week}var Rye={dow:0,doy:6};function Oye(){return this._week.dow}function Mye(){return this._week.doy}function Nye(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Dye(t){var e=Ah(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}ie("d",0,"do","day");ie("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});ie("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});ie("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});ie("e",0,0,"weekday");ie("E",0,0,"isoWeekday");Z("d",pt);Z("e",pt);Z("E",pt);Z("dd",function(t,e){return e.weekdaysMinRegex(t)});Z("ddd",function(t,e){return e.weekdaysShortRegex(t)});Z("dddd",function(t,e){return e.weekdaysRegex(t)});pf(["dd","ddd","dddd"],function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);i!=null?e.d=i:ye(n).invalidWeekday=t});pf(["d","e","E"],function(t,e,n,r){e[r]=xe(t)});function Lye(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function $ye(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function fE(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Fye="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jN="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vye="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bye=mf,Uye=mf,zye=mf;function Hye(t,e){var n=Mi(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?fE(n,this._week.dow):t?n[t.day()]:n}function Wye(t){return t===!0?fE(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function jye(t){return t===!0?fE(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Gye(t,e,n){var r,i,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)s=ms([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase();return n?e==="dddd"?(i=Lt.call(this._weekdaysParse,o),i!==-1?i:null):e==="ddd"?(i=Lt.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=Lt.call(this._minWeekdaysParse,o),i!==-1?i:null):e==="dddd"?(i=Lt.call(this._weekdaysParse,o),i!==-1||(i=Lt.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=Lt.call(this._minWeekdaysParse,o),i!==-1?i:null)):e==="ddd"?(i=Lt.call(this._shortWeekdaysParse,o),i!==-1||(i=Lt.call(this._weekdaysParse,o),i!==-1)?i:(i=Lt.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=Lt.call(this._minWeekdaysParse,o),i!==-1||(i=Lt.call(this._weekdaysParse,o),i!==-1)?i:(i=Lt.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function qye(t,e,n){var r,i,s;if(this._weekdaysParseExact)return Gye.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=ms([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[r].test(t))return r;if(n&&e==="ddd"&&this._shortWeekdaysParse[r].test(t))return r;if(n&&e==="dd"&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}}function Yye(t){if(!this.isValid())return t!=null?this:NaN;var e=Th(this,"Day");return t!=null?(t=Lye(t,this.localeData()),this.add(t-e,"d")):e}function Kye(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function Zye(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=$ye(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function Jye(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||mE.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Le(this,"_weekdaysRegex")||(this._weekdaysRegex=Bye),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Xye(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||mE.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Uye),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qye(t){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||mE.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=zye),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function mE(){function t(u,d){return d.length-u.length}var e=[],n=[],r=[],i=[],s,o,a,l,c;for(s=0;s<7;s++)o=ms([2e3,1]).day(s),a=Gs(this.weekdaysMin(o,"")),l=Gs(this.weekdaysShort(o,"")),c=Gs(this.weekdays(o,"")),e.push(a),n.push(l),r.push(c),i.push(a),i.push(l),i.push(c);e.sort(t),n.sort(t),r.sort(t),i.sort(t),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function pE(){return this.hours()%12||12}function ebe(){return this.hours()||24}ie("H",["HH",2],0,"hour");ie("h",["hh",2],0,pE);ie("k",["kk",2],0,ebe);ie("hmm",0,0,function(){return""+pE.apply(this)+as(this.minutes(),2)});ie("hmmss",0,0,function(){return""+pE.apply(this)+as(this.minutes(),2)+as(this.seconds(),2)});ie("Hmm",0,0,function(){return""+this.hours()+as(this.minutes(),2)});ie("Hmmss",0,0,function(){return""+this.hours()+as(this.minutes(),2)+as(this.seconds(),2)});function GN(t,e){ie(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}GN("a",!0);GN("A",!1);function qN(t,e){return e._meridiemParse}Z("a",qN);Z("A",qN);Z("H",pt,dE);Z("h",pt,_u);Z("k",pt,_u);Z("HH",pt,$r);Z("hh",pt,$r);Z("kk",pt,$r);Z("hmm",DN);Z("hmmss",LN);Z("Hmm",DN);Z("Hmmss",LN);Je(["H","HH"],Kt);Je(["k","kk"],function(t,e,n){var r=xe(t);e[Kt]=r===24?0:r});Je(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});Je(["h","hh"],function(t,e,n){e[Kt]=xe(t),ye(n).bigHour=!0});Je("hmm",function(t,e,n){var r=t.length-2;e[Kt]=xe(t.substr(0,r)),e[Ei]=xe(t.substr(r)),ye(n).bigHour=!0});Je("hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Kt]=xe(t.substr(0,r)),e[Ei]=xe(t.substr(r,2)),e[Us]=xe(t.substr(i)),ye(n).bigHour=!0});Je("Hmm",function(t,e,n){var r=t.length-2;e[Kt]=xe(t.substr(0,r)),e[Ei]=xe(t.substr(r))});Je("Hmmss",function(t,e,n){var r=t.length-4,i=t.length-2;e[Kt]=xe(t.substr(0,r)),e[Ei]=xe(t.substr(r,2)),e[Us]=xe(t.substr(i))});function tbe(t){return(t+"").toLowerCase().charAt(0)==="p"}var nbe=/[ap]\.?m?\.?/i,rbe=ku("Hours",!0);function ibe(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var YN={calendar:Gve,longDateFormat:Zve,invalidDate:Xve,ordinal:eye,dayOfMonthOrdinalParse:tye,relativeTime:rye,months:yye,monthsShort:VN,week:Rye,weekdays:Fye,weekdaysMin:Vye,weekdaysShort:jN,meridiemParse:nbe},wt={},Xu={},Ih;function sbe(t,e){var n,r=Math.min(t.length,e.length);for(n=0;n<r;n+=1)if(t[n]!==e[n])return n;return r}function p3(t){return t&&t.toLowerCase().replace("_","-")}function obe(t){for(var e=0,n,r,i,s;e<t.length;){for(s=p3(t[e]).split("-"),n=s.length,r=p3(t[e+1]),r=r?r.split("-"):null;n>0;){if(i=u1(s.slice(0,n).join("-")),i)return i;if(r&&r.length>=n&&sbe(s,r)>=n-1)break;n--}e++}return Ih}function abe(t){return!!(t&&t.match("^[^/\\\\]*$"))}function u1(t){var e=null,n;if(wt[t]===void 0&&typeof Tn<"u"&&Tn&&Tn.exports&&abe(t))try{e=Ih._abbr,n=require,n("./locale/"+t),ta(e)}catch{wt[t]=null}return wt[t]}function ta(t,e){var n;return t&&(Wn(e)?n=po(t):n=gE(t,e),n?Ih=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Ih._abbr}function gE(t,e){if(e!==null){var n,r=YN;if(e.abbr=t,wt[t]!=null)RN("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=wt[t]._config;else if(e.parentLocale!=null)if(wt[e.parentLocale]!=null)r=wt[e.parentLocale]._config;else if(n=u1(e.parentLocale),n!=null)r=n._config;else return Xu[e.parentLocale]||(Xu[e.parentLocale]=[]),Xu[e.parentLocale].push({name:t,config:e}),null;return wt[t]=new oE(Eb(r,e)),Xu[t]&&Xu[t].forEach(function(i){gE(i.name,i.config)}),ta(t),wt[t]}else return delete wt[t],null}function lbe(t,e){if(e!=null){var n,r,i=YN;wt[t]!=null&&wt[t].parentLocale!=null?wt[t].set(Eb(wt[t]._config,e)):(r=u1(t),r!=null&&(i=r._config),e=Eb(i,e),r==null&&(e.abbr=t),n=new oE(e),n.parentLocale=wt[t],wt[t]=n),ta(t)}else wt[t]!=null&&(wt[t].parentLocale!=null?(wt[t]=wt[t].parentLocale,t===ta()&&ta(t)):wt[t]!=null&&delete wt[t]);return wt[t]}function po(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Ih;if(!Mi(t)){if(e=u1(t),e)return e;t=[t]}return obe(t)}function cbe(){return Cb(wt)}function wE(t){var e,n=t._a;return n&&ye(t).overflow===-2&&(e=n[Bs]<0||n[Bs]>11?Bs:n[Ki]<1||n[Ki]>hE(n[In],n[Bs])?Ki:n[Kt]<0||n[Kt]>24||n[Kt]===24&&(n[Ei]!==0||n[Us]!==0||n[$a]!==0)?Kt:n[Ei]<0||n[Ei]>59?Ei:n[Us]<0||n[Us]>59?Us:n[$a]<0||n[$a]>999?$a:-1,ye(t)._overflowDayOfYear&&(e<In||e>Ki)&&(e=Ki),ye(t)._overflowWeeks&&e===-1&&(e=fye),ye(t)._overflowWeekday&&e===-1&&(e=mye),ye(t).overflow=e),t}var ube=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dbe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hbe=/Z|[+-]\d\d(?::?\d\d)?/,bm=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],tv=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fbe=/^\/?Date\((-?\d+)/i,mbe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pbe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function KN(t){var e,n,r=t._i,i=ube.exec(r)||dbe.exec(r),s,o,a,l,c=bm.length,u=tv.length;if(i){for(ye(t).iso=!0,e=0,n=c;e<n;e++)if(bm[e][1].exec(i[1])){o=bm[e][0],s=bm[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(i[3]){for(e=0,n=u;e<n;e++)if(tv[e][1].exec(i[3])){a=(i[2]||" ")+tv[e][0];break}if(a==null){t._isValid=!1;return}}if(!s&&a!=null){t._isValid=!1;return}if(i[4])if(hbe.exec(i[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),yE(t)}else t._isValid=!1}function gbe(t,e,n,r,i,s){var o=[wbe(t),VN.indexOf(e),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return s&&o.push(parseInt(s,10)),o}function wbe(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function vbe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ybe(t,e,n){if(t){var r=jN.indexOf(t),i=new Date(e[0],e[1],e[2]).getDay();if(r!==i)return ye(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function bbe(t,e,n){if(t)return pbe[t];if(e)return 0;var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}function ZN(t){var e=mbe.exec(vbe(t._i)),n;if(e){if(n=gbe(e[4],e[3],e[2],e[5],e[6],e[7]),!ybe(e[1],n,t))return;t._a=n,t._tzm=bbe(e[8],e[9],e[10]),t._d=Ph.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),ye(t).rfc2822=!0}else t._isValid=!1}function _be(t){var e=fbe.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(KN(t),t._isValid===!1)delete t._isValid;else return;if(ZN(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:K.createFromInputFallback(t)}K.createFromInputFallback=oi("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Gl(t,e,n){return t??e??n}function kbe(t){var e=new Date(K.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function vE(t){var e,n,r=[],i,s,o;if(!t._d){for(i=kbe(t),t._w&&t._a[Ki]==null&&t._a[Bs]==null&&Ebe(t),t._dayOfYear!=null&&(o=Gl(t._a[In],i[In]),(t._dayOfYear>Sd(o)||t._dayOfYear===0)&&(ye(t)._overflowDayOfYear=!0),n=Ph(o,0,t._dayOfYear),t._a[Bs]=n.getUTCMonth(),t._a[Ki]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=r[e]=i[e];for(;e<7;e++)t._a[e]=r[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Kt]===24&&t._a[Ei]===0&&t._a[Us]===0&&t._a[$a]===0&&(t._nextDay=!0,t._a[Kt]=0),t._d=(t._useUTC?Ph:Aye).apply(null,r),s=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Kt]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==s&&(ye(t).weekdayMismatch=!0)}}function Ebe(t){var e,n,r,i,s,o,a,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(s=1,o=4,n=Gl(e.GG,t._a[In],Ah(mt(),1,4).year),r=Gl(e.W,1),i=Gl(e.E,1),(i<1||i>7)&&(l=!0)):(s=t._locale._week.dow,o=t._locale._week.doy,c=Ah(mt(),s,o),n=Gl(e.gg,t._a[In],c.year),r=Gl(e.w,c.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+s,(e.e<0||e.e>6)&&(l=!0)):i=s),r<1||r>qs(n,s,o)?ye(t)._overflowWeeks=!0:l!=null?ye(t)._overflowWeekday=!0:(a=WN(n,r,i,s,o),t._a[In]=a.year,t._dayOfYear=a.dayOfYear)}K.ISO_8601=function(){};K.RFC_2822=function(){};function yE(t){if(t._f===K.ISO_8601){KN(t);return}if(t._f===K.RFC_2822){ZN(t);return}t._a=[],ye(t).empty=!0;var e=""+t._i,n,r,i,s,o,a=e.length,l=0,c,u;for(i=ON(t._f,t._locale).match(aE)||[],u=i.length,n=0;n<u;n++)s=i[n],r=(e.match(uye(s,t))||[])[0],r&&(o=e.substr(0,e.indexOf(r)),o.length>0&&ye(t).unusedInput.push(o),e=e.slice(e.indexOf(r)+r.length),l+=r.length),Ec[s]?(r?ye(t).empty=!1:ye(t).unusedTokens.push(s),hye(s,r,t)):t._strict&&!r&&ye(t).unusedTokens.push(s);ye(t).charsLeftOver=a-l,e.length>0&&ye(t).unusedInput.push(e),t._a[Kt]<=12&&ye(t).bigHour===!0&&t._a[Kt]>0&&(ye(t).bigHour=void 0),ye(t).parsedDateParts=t._a.slice(0),ye(t).meridiem=t._meridiem,t._a[Kt]=Cbe(t._locale,t._a[Kt],t._meridiem),c=ye(t).era,c!==null&&(t._a[In]=t._locale.erasConvertYear(c,t._a[In])),vE(t),wE(t)}function Cbe(t,e,n){var r;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(r=t.isPM(n),r&&e<12&&(e+=12),!r&&e===12&&(e=0)),e)}function xbe(t){var e,n,r,i,s,o,a=!1,l=t._f.length;if(l===0){ye(t).invalidFormat=!0,t._d=new Date(NaN);return}for(i=0;i<l;i++)s=0,o=!1,e=sE({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[i],yE(e),iE(e)&&(o=!0),s+=ye(e).charsLeftOver,s+=ye(e).unusedTokens.length*10,ye(e).score=s,a?s<r&&(r=s,n=e):(r==null||s<r||o)&&(r=s,n=e,o&&(a=!0));Bo(t,n||e)}function Sbe(t){if(!t._d){var e=lE(t._i),n=e.day===void 0?e.date:e.day;t._a=AN([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(r){return r&&parseInt(r,10)}),vE(t)}}function Tbe(t){var e=new ff(wE(JN(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function JN(t){var e=t._i,n=t._f;return t._locale=t._locale||po(t._l),e===null||n===void 0&&e===""?r1({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Ni(e)?new ff(wE(e)):(hf(e)?t._d=e:Mi(n)?xbe(t):n?yE(t):Pbe(t),iE(t)||(t._d=null),t))}function Pbe(t){var e=t._i;Wn(e)?t._d=new Date(K.now()):hf(e)?t._d=new Date(e.valueOf()):typeof e=="string"?_be(t):Mi(e)?(t._a=AN(e.slice(0),function(n){return parseInt(n,10)}),vE(t)):Ga(e)?Sbe(t):so(e)?t._d=new Date(e):K.createFromInputFallback(t)}function XN(t,e,n,r,i){var s={};return(e===!0||e===!1)&&(r=e,e=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(Ga(t)&&rE(t)||Mi(t)&&t.length===0)&&(t=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=t,s._f=e,s._strict=r,Tbe(s)}function mt(t,e,n,r){return XN(t,e,n,r,!1)}var Abe=oi("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=mt.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:r1()}),Ibe=oi("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=mt.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:r1()});function QN(t,e){var n,r;if(e.length===1&&Mi(e[0])&&(e=e[0]),!e.length)return mt();for(n=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](n))&&(n=e[r]);return n}function Rbe(){var t=[].slice.call(arguments,0);return QN("isBefore",t)}function Obe(){var t=[].slice.call(arguments,0);return QN("isAfter",t)}var Mbe=function(){return Date.now?Date.now():+new Date},Qu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nbe(t){var e,n=!1,r,i=Qu.length;for(e in t)if(Le(t,e)&&!(Lt.call(Qu,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(r=0;r<i;++r)if(t[Qu[r]]){if(n)return!1;parseFloat(t[Qu[r]])!==xe(t[Qu[r]])&&(n=!0)}return!0}function Dbe(){return this._isValid}function Lbe(){return Fi(NaN)}function d1(t){var e=lE(t),n=e.year||0,r=e.quarter||0,i=e.month||0,s=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=Nbe(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=po(),this._bubble()}function Xm(t){return t instanceof d1}function Sb(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function $be(t,e,n){var r=Math.min(t.length,e.length),i=Math.abs(t.length-e.length),s=0,o;for(o=0;o<r;o++)xe(t[o])!==xe(e[o])&&s++;return s+i}function eD(t,e){ie(t,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+as(~~(n/60),2)+e+as(~~n%60,2)})}eD("Z",":");eD("ZZ","");Z("Z",l1);Z("ZZ",l1);Je(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=bE(l1,t)});var Fbe=/([\+\-]|\d\d)/gi;function bE(t,e){var n=(e||"").match(t),r,i,s;return n===null?null:(r=n[n.length-1]||[],i=(r+"").match(Fbe)||["-",0,0],s=+(i[1]*60)+xe(i[2]),s===0?0:i[0]==="+"?s:-s)}function _E(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(Ni(t)||hf(t)?t.valueOf():mt(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),K.updateOffset(n,!1),n):mt(t).local()}function Tb(t){return-Math.round(t._d.getTimezoneOffset())}K.updateOffset=function(){};function Vbe(t,e,n){var r=this._offset||0,i;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=bE(l1,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(i=Tb(this)),this._offset=t,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?rD(this,Fi(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,K.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:Tb(this)}function Bbe(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ube(t){return this.utcOffset(0,t)}function zbe(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Tb(this),"m")),this}function Hbe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=bE(lye,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Wbe(t){return this.isValid()?(t=t?mt(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function jbe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Gbe(){if(!Wn(this._isDSTShifted))return this._isDSTShifted;var t={},e;return sE(t,this),t=JN(t),t._a?(e=t._isUTC?ms(t._a):mt(t._a),this._isDSTShifted=this.isValid()&&$be(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function qbe(){return this.isValid()?!this._isUTC:!1}function Ybe(){return this.isValid()?this._isUTC:!1}function tD(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Kbe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Zbe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Fi(t,e){var n=t,r=null,i,s,o;return Xm(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:so(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(r=Kbe.exec(t))?(i=r[1]==="-"?-1:1,n={y:0,d:xe(r[Ki])*i,h:xe(r[Kt])*i,m:xe(r[Ei])*i,s:xe(r[Us])*i,ms:xe(Sb(r[$a]*1e3))*i}):(r=Zbe.exec(t))?(i=r[1]==="-"?-1:1,n={y:xa(r[2],i),M:xa(r[3],i),w:xa(r[4],i),d:xa(r[5],i),h:xa(r[6],i),m:xa(r[7],i),s:xa(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=Jbe(mt(n.from),mt(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new d1(n),Xm(t)&&Le(t,"_locale")&&(s._locale=t._locale),Xm(t)&&Le(t,"_isValid")&&(s._isValid=t._isValid),s}Fi.fn=d1.prototype;Fi.invalid=Lbe;function xa(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function g3(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Jbe(t,e){var n;return t.isValid()&&e.isValid()?(e=_E(e,t),t.isBefore(e)?n=g3(t,e):(n=g3(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function nD(t,e){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(RN(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),i=Fi(n,r),rD(this,i,t),this}}function rD(t,e,n,r){var i=e._milliseconds,s=Sb(e._days),o=Sb(e._months);t.isValid()&&(r=r??!0,o&&UN(t,Th(t,"Month")+o*n),s&&FN(t,"Date",Th(t,"Date")+s*n),i&&t._d.setTime(t._d.valueOf()+i*n),r&&K.updateOffset(t,s||o))}var Xbe=nD(1,"add"),Qbe=nD(-1,"subtract");function iD(t){return typeof t=="string"||t instanceof String}function e_e(t){return Ni(t)||hf(t)||iD(t)||so(t)||n_e(t)||t_e(t)||t===null||t===void 0}function t_e(t){var e=Ga(t)&&!rE(t),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,o=r.length;for(i=0;i<o;i+=1)s=r[i],n=n||Le(t,s);return e&&n}function n_e(t){var e=Mi(t),n=!1;return e&&(n=t.filter(function(r){return!so(r)&&iD(t)}).length===0),e&&n}function r_e(t){var e=Ga(t)&&!rE(t),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1)s=r[i],n=n||Le(t,s);return e&&n}function i_e(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function s_e(t,e){arguments.length===1&&(arguments[0]?e_e(arguments[0])?(t=arguments[0],e=void 0):r_e(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||mt(),r=_E(n,this).startOf("day"),i=K.calendarFormat(this,r)||"sameElse",s=e&&(ps(e[i])?e[i].call(this,n):e[i]);return this.format(s||this.localeData().calendar(i,this,mt(n)))}function o_e(){return new ff(this)}function a_e(t,e){var n=Ni(t)?t:mt(t);return this.isValid()&&n.isValid()?(e=ai(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function l_e(t,e){var n=Ni(t)?t:mt(t);return this.isValid()&&n.isValid()?(e=ai(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function c_e(t,e,n,r){var i=Ni(t)?t:mt(t),s=Ni(e)?e:mt(e);return this.isValid()&&i.isValid()&&s.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))):!1}function u_e(t,e){var n=Ni(t)?t:mt(t),r;return this.isValid()&&n.isValid()?(e=ai(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(e).valueOf()<=r&&r<=this.clone().endOf(e).valueOf())):!1}function d_e(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function h_e(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function f_e(t,e,n){var r,i,s;if(!this.isValid())return NaN;if(r=_E(t,this),!r.isValid())return NaN;switch(i=(r.utcOffset()-this.utcOffset())*6e4,e=ai(e),e){case"year":s=Qm(this,r)/12;break;case"month":s=Qm(this,r);break;case"quarter":s=Qm(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:Wr(s)}function Qm(t,e){if(t.date()<e.date())return-Qm(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),r=t.clone().add(n,"months"),i,s;return e-r<0?(i=t.clone().add(n-1,"months"),s=(e-r)/(r-i)):(i=t.clone().add(n+1,"months"),s=(e-r)/(i-r)),-(n+s)||0}K.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";K.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function m_e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function p_e(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?Jm(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ps(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Jm(n,"Z")):Jm(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function g_e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,r,i,s;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]',this.format(n+r+i+s)}function w_e(t){t||(t=this.isUtc()?K.defaultFormatUtc:K.defaultFormat);var e=Jm(this,t);return this.localeData().postformat(e)}function v_e(t,e){return this.isValid()&&(Ni(t)&&t.isValid()||mt(t).isValid())?Fi({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function y_e(t){return this.from(mt(),t)}function b_e(t,e){return this.isValid()&&(Ni(t)&&t.isValid()||mt(t).isValid())?Fi({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function __e(t){return this.to(mt(),t)}function sD(t){var e;return t===void 0?this._locale._abbr:(e=po(t),e!=null&&(this._locale=e),this)}var oD=oi("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function aD(){return this._locale}var xg=1e3,Cc=60*xg,Sg=60*Cc,lD=(365*400+97)*24*Sg;function xc(t,e){return(t%e+e)%e}function cD(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-lD:new Date(t,e,n).valueOf()}function uD(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-lD:Date.UTC(t,e,n)}function k_e(t){var e,n;if(t=ai(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?uD:cD,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=xc(e+(this._isUTC?0:this.utcOffset()*Cc),Sg);break;case"minute":e=this._d.valueOf(),e-=xc(e,Cc);break;case"second":e=this._d.valueOf(),e-=xc(e,xg);break}return this._d.setTime(e),K.updateOffset(this,!0),this}function E_e(t){var e,n;if(t=ai(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?uD:cD,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Sg-xc(e+(this._isUTC?0:this.utcOffset()*Cc),Sg)-1;break;case"minute":e=this._d.valueOf(),e+=Cc-xc(e,Cc)-1;break;case"second":e=this._d.valueOf(),e+=xg-xc(e,xg)-1;break}return this._d.setTime(e),K.updateOffset(this,!0),this}function C_e(){return this._d.valueOf()-(this._offset||0)*6e4}function x_e(){return Math.floor(this.valueOf()/1e3)}function S_e(){return new Date(this.valueOf())}function T_e(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function P_e(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function A_e(){return this.isValid()?this.toISOString():null}function I_e(){return iE(this)}function R_e(){return Bo({},ye(this))}function O_e(){return ye(this).overflow}function M_e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ie("N",0,0,"eraAbbr");ie("NN",0,0,"eraAbbr");ie("NNN",0,0,"eraAbbr");ie("NNNN",0,0,"eraName");ie("NNNNN",0,0,"eraNarrow");ie("y",["y",1],"yo","eraYear");ie("y",["yy",2],0,"eraYear");ie("y",["yyy",3],0,"eraYear");ie("y",["yyyy",4],0,"eraYear");Z("N",kE);Z("NN",kE);Z("NNN",kE);Z("NNNN",W_e);Z("NNNNN",j_e);Je(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,r){var i=n._locale.erasParse(t,r,n._strict);i?ye(n).era=i:ye(n).invalidEra=t});Z("y",bu);Z("yy",bu);Z("yyy",bu);Z("yyyy",bu);Z("yo",G_e);Je(["y","yy","yyy","yyyy"],In);Je(["yo"],function(t,e,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[In]=n._locale.eraYearOrdinalParse(t,i):e[In]=parseInt(t,10)});function N_e(t,e){var n,r,i,s=this._eras||po("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=K(s[n].since).startOf("day"),s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":i=K(s[n].until).startOf("day").valueOf(),s[n].until=i.valueOf();break}}return s}function D_e(t,e,n){var r,i,s=this.eras(),o,a,l;for(t=t.toUpperCase(),r=0,i=s.length;r<i;++r)if(o=s[r].name.toUpperCase(),a=s[r].abbr.toUpperCase(),l=s[r].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return s[r];break;case"NNNN":if(o===t)return s[r];break;case"NNNNN":if(l===t)return s[r];break}else if([o,a,l].indexOf(t)>=0)return s[r]}function L_e(t,e){var n=t.since<=t.until?1:-1;return e===void 0?K(t.since).year():K(t.since).year()+(e-t.offset)*n}function $_e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].name;return""}function F_e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].narrow;return""}function V_e(){var t,e,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return r[t].abbr;return""}function B_e(){var t,e,n,r,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=i[t].since<=i[t].until?1:-1,r=this.clone().startOf("day").valueOf(),i[t].since<=r&&r<=i[t].until||i[t].until<=r&&r<=i[t].since)return(this.year()-K(i[t].since).year())*n+i[t].offset;return this.year()}function U_e(t){return Le(this,"_erasNameRegex")||EE.call(this),t?this._erasNameRegex:this._erasRegex}function z_e(t){return Le(this,"_erasAbbrRegex")||EE.call(this),t?this._erasAbbrRegex:this._erasRegex}function H_e(t){return Le(this,"_erasNarrowRegex")||EE.call(this),t?this._erasNarrowRegex:this._erasRegex}function kE(t,e){return e.erasAbbrRegex(t)}function W_e(t,e){return e.erasNameRegex(t)}function j_e(t,e){return e.erasNarrowRegex(t)}function G_e(t,e){return e._eraYearOrdinalRegex||bu}function EE(){var t=[],e=[],n=[],r=[],i,s,o,a,l,c=this.eras();for(i=0,s=c.length;i<s;++i)o=Gs(c[i].name),a=Gs(c[i].abbr),l=Gs(c[i].narrow),e.push(o),t.push(a),n.push(l),r.push(o),r.push(a),r.push(l);this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}ie(0,["gg",2],0,function(){return this.weekYear()%100});ie(0,["GG",2],0,function(){return this.isoWeekYear()%100});function h1(t,e){ie(0,[t,t.length],0,e)}h1("gggg","weekYear");h1("ggggg","weekYear");h1("GGGG","isoWeekYear");h1("GGGGG","isoWeekYear");Z("G",a1);Z("g",a1);Z("GG",pt,$r);Z("gg",pt,$r);Z("GGGG",uE,cE);Z("gggg",uE,cE);Z("GGGGG",o1,i1);Z("ggggg",o1,i1);pf(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,r){e[r.substr(0,2)]=xe(t)});pf(["gg","GG"],function(t,e,n,r){e[r]=K.parseTwoDigitYear(t)});function q_e(t){return dD.call(this,t,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Y_e(t){return dD.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function K_e(){return qs(this.year(),1,4)}function Z_e(){return qs(this.isoWeekYear(),1,4)}function J_e(){var t=this.localeData()._week;return qs(this.year(),t.dow,t.doy)}function X_e(){var t=this.localeData()._week;return qs(this.weekYear(),t.dow,t.doy)}function dD(t,e,n,r,i){var s;return t==null?Ah(this,r,i).year:(s=qs(t,r,i),e>s&&(e=s),Q_e.call(this,t,e,n,r,i))}function Q_e(t,e,n,r,i){var s=WN(t,e,n,r,i),o=Ph(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ie("Q",0,"Qo","quarter");Z("Q",MN);Je("Q",function(t,e){e[Bs]=(xe(t)-1)*3});function e2e(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}ie("D",["DD",2],"Do","date");Z("D",pt,_u);Z("DD",pt,$r);Z("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Je(["D","DD"],Ki);Je("Do",function(t,e){e[Ki]=xe(t.match(pt)[0])});var hD=ku("Date",!0);ie("DDD",["DDDD",3],"DDDo","dayOfYear");Z("DDD",s1);Z("DDDD",NN);Je(["DDD","DDDD"],function(t,e,n){n._dayOfYear=xe(t)});function t2e(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}ie("m",["mm",2],0,"minute");Z("m",pt,dE);Z("mm",pt,$r);Je(["m","mm"],Ei);var n2e=ku("Minutes",!1);ie("s",["ss",2],0,"second");Z("s",pt,dE);Z("ss",pt,$r);Je(["s","ss"],Us);var r2e=ku("Seconds",!1);ie("S",0,0,function(){return~~(this.millisecond()/100)});ie(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ie(0,["SSS",3],0,"millisecond");ie(0,["SSSS",4],0,function(){return this.millisecond()*10});ie(0,["SSSSS",5],0,function(){return this.millisecond()*100});ie(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ie(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ie(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ie(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Z("S",s1,MN);Z("SS",s1,$r);Z("SSS",s1,NN);var Uo,fD;for(Uo="SSSS";Uo.length<=9;Uo+="S")Z(Uo,bu);function i2e(t,e){e[$a]=xe(("0."+t)*1e3)}for(Uo="S";Uo.length<=9;Uo+="S")Je(Uo,i2e);fD=ku("Milliseconds",!1);ie("z",0,0,"zoneAbbr");ie("zz",0,0,"zoneName");function s2e(){return this._isUTC?"UTC":""}function o2e(){return this._isUTC?"Coordinated Universal Time":""}var B=ff.prototype;B.add=Xbe;B.calendar=s_e;B.clone=o_e;B.diff=f_e;B.endOf=E_e;B.format=w_e;B.from=v_e;B.fromNow=y_e;B.to=b_e;B.toNow=__e;B.get=gye;B.invalidAt=O_e;B.isAfter=a_e;B.isBefore=l_e;B.isBetween=c_e;B.isSame=u_e;B.isSameOrAfter=d_e;B.isSameOrBefore=h_e;B.isValid=I_e;B.lang=oD;B.locale=sD;B.localeData=aD;B.max=Ibe;B.min=Abe;B.parsingFlags=R_e;B.set=wye;B.startOf=k_e;B.subtract=Qbe;B.toArray=T_e;B.toObject=P_e;B.toDate=S_e;B.toISOString=p_e;B.inspect=g_e;typeof Symbol<"u"&&Symbol.for!=null&&(B[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});B.toJSON=A_e;B.toString=m_e;B.unix=x_e;B.valueOf=C_e;B.creationData=M_e;B.eraName=$_e;B.eraNarrow=F_e;B.eraAbbr=V_e;B.eraYear=B_e;B.year=$N;B.isLeapYear=pye;B.weekYear=q_e;B.isoWeekYear=Y_e;B.quarter=B.quarters=e2e;B.month=zN;B.daysInMonth=Sye;B.week=B.weeks=Nye;B.isoWeek=B.isoWeeks=Dye;B.weeksInYear=J_e;B.weeksInWeekYear=X_e;B.isoWeeksInYear=K_e;B.isoWeeksInISOWeekYear=Z_e;B.date=hD;B.day=B.days=Yye;B.weekday=Kye;B.isoWeekday=Zye;B.dayOfYear=t2e;B.hour=B.hours=rbe;B.minute=B.minutes=n2e;B.second=B.seconds=r2e;B.millisecond=B.milliseconds=fD;B.utcOffset=Vbe;B.utc=Ube;B.local=zbe;B.parseZone=Hbe;B.hasAlignedHourOffset=Wbe;B.isDST=jbe;B.isLocal=qbe;B.isUtcOffset=Ybe;B.isUtc=tD;B.isUTC=tD;B.zoneAbbr=s2e;B.zoneName=o2e;B.dates=oi("dates accessor is deprecated. Use date instead.",hD);B.months=oi("months accessor is deprecated. Use month instead",zN);B.years=oi("years accessor is deprecated. Use year instead",$N);B.zone=oi("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bbe);B.isDSTShifted=oi("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Gbe);function a2e(t){return mt(t*1e3)}function l2e(){return mt.apply(null,arguments).parseZone()}function mD(t){return t}var $e=oE.prototype;$e.calendar=qve;$e.longDateFormat=Jve;$e.invalidDate=Qve;$e.ordinal=nye;$e.preparse=mD;$e.postformat=mD;$e.relativeTime=iye;$e.pastFuture=sye;$e.set=jve;$e.eras=N_e;$e.erasParse=D_e;$e.erasConvertYear=L_e;$e.erasAbbrRegex=z_e;$e.erasNameRegex=U_e;$e.erasNarrowRegex=H_e;$e.months=kye;$e.monthsShort=Eye;$e.monthsParse=xye;$e.monthsRegex=Pye;$e.monthsShortRegex=Tye;$e.week=Iye;$e.firstDayOfYear=Mye;$e.firstDayOfWeek=Oye;$e.weekdays=Hye;$e.weekdaysMin=jye;$e.weekdaysShort=Wye;$e.weekdaysParse=qye;$e.weekdaysRegex=Jye;$e.weekdaysShortRegex=Xye;$e.weekdaysMinRegex=Qye;$e.isPM=tbe;$e.meridiem=ibe;function Tg(t,e,n,r){var i=po(),s=ms().set(r,e);return i[n](s,t)}function pD(t,e,n){if(so(t)&&(e=t,t=void 0),t=t||"",e!=null)return Tg(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Tg(t,r,n,"month");return i}function CE(t,e,n,r){typeof t=="boolean"?(so(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,so(e)&&(n=e,e=void 0),e=e||"");var i=po(),s=t?i._week.dow:0,o,a=[];if(n!=null)return Tg(e,(n+s)%7,r,"day");for(o=0;o<7;o++)a[o]=Tg(e,(o+s)%7,r,"day");return a}function c2e(t,e){return pD(t,e,"months")}function u2e(t,e){return pD(t,e,"monthsShort")}function d2e(t,e,n){return CE(t,e,n,"weekdays")}function h2e(t,e,n){return CE(t,e,n,"weekdaysShort")}function f2e(t,e,n){return CE(t,e,n,"weekdaysMin")}ta("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=xe(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});K.lang=oi("moment.lang is deprecated. Use moment.locale instead.",ta);K.langData=oi("moment.langData is deprecated. Use moment.localeData instead.",po);var ks=Math.abs;function m2e(){var t=this._data;return this._milliseconds=ks(this._milliseconds),this._days=ks(this._days),this._months=ks(this._months),t.milliseconds=ks(t.milliseconds),t.seconds=ks(t.seconds),t.minutes=ks(t.minutes),t.hours=ks(t.hours),t.months=ks(t.months),t.years=ks(t.years),this}function gD(t,e,n,r){var i=Fi(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function p2e(t,e){return gD(this,t,e,1)}function g2e(t,e){return gD(this,t,e,-1)}function w3(t){return t<0?Math.floor(t):Math.ceil(t)}function w2e(){var t=this._milliseconds,e=this._days,n=this._months,r=this._data,i,s,o,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=w3(Pb(n)+e)*864e5,e=0,n=0),r.milliseconds=t%1e3,i=Wr(t/1e3),r.seconds=i%60,s=Wr(i/60),r.minutes=s%60,o=Wr(s/60),r.hours=o%24,e+=Wr(o/24),l=Wr(wD(e)),n+=l,e-=w3(Pb(l)),a=Wr(n/12),n%=12,r.days=e,r.months=n,r.years=a,this}function wD(t){return t*4800/146097}function Pb(t){return t*146097/4800}function v2e(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if(t=ai(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+r/864e5,n=this._months+wD(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Pb(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return e*24+r/36e5;case"minute":return e*1440+r/6e4;case"second":return e*86400+r/1e3;case"millisecond":return Math.floor(e*864e5)+r;default:throw new Error("Unknown unit "+t)}}function go(t){return function(){return this.as(t)}}var vD=go("ms"),y2e=go("s"),b2e=go("m"),_2e=go("h"),k2e=go("d"),E2e=go("w"),C2e=go("M"),x2e=go("Q"),S2e=go("y"),T2e=vD;function P2e(){return Fi(this)}function A2e(t){return t=ai(t),this.isValid()?this[t+"s"]():NaN}function El(t){return function(){return this.isValid()?this._data[t]:NaN}}var I2e=El("milliseconds"),R2e=El("seconds"),O2e=El("minutes"),M2e=El("hours"),N2e=El("days"),D2e=El("months"),L2e=El("years");function $2e(){return Wr(this.days()/7)}var Ps=Math.round,oc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function F2e(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}function V2e(t,e,n,r){var i=Fi(t).abs(),s=Ps(i.as("s")),o=Ps(i.as("m")),a=Ps(i.as("h")),l=Ps(i.as("d")),c=Ps(i.as("M")),u=Ps(i.as("w")),d=Ps(i.as("y")),h=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),h=h||c<=1&&["M"]||c<n.M&&["MM",c]||d<=1&&["y"]||["yy",d],h[2]=e,h[3]=+t>0,h[4]=r,F2e.apply(null,h)}function B2e(t){return t===void 0?Ps:typeof t=="function"?(Ps=t,!0):!1}function U2e(t,e){return oc[t]===void 0?!1:e===void 0?oc[t]:(oc[t]=e,t==="s"&&(oc.ss=e-1),!0)}function z2e(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=oc,i,s;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(r=Object.assign({},oc,e),e.s!=null&&e.ss==null&&(r.ss=e.s-1)),i=this.localeData(),s=V2e(this,!n,r,i),n&&(s=i.pastFuture(+this,s)),i.postformat(s)}var nv=Math.abs;function Bl(t){return(t>0)-(t<0)||+t}function f1(){if(!this.isValid())return this.localeData().invalidDate();var t=nv(this._milliseconds)/1e3,e=nv(this._days),n=nv(this._months),r,i,s,o,a=this.asSeconds(),l,c,u,d;return a?(r=Wr(t/60),i=Wr(r/60),t%=60,r%=60,s=Wr(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Bl(this._months)!==Bl(a)?"-":"",u=Bl(this._days)!==Bl(a)?"-":"",d=Bl(this._milliseconds)!==Bl(a)?"-":"",l+"P"+(s?c+s+"Y":"")+(n?c+n+"M":"")+(e?u+e+"D":"")+(i||r||t?"T":"")+(i?d+i+"H":"")+(r?d+r+"M":"")+(t?d+o+"S":"")):"P0D"}var Oe=d1.prototype;Oe.isValid=Dbe;Oe.abs=m2e;Oe.add=p2e;Oe.subtract=g2e;Oe.as=v2e;Oe.asMilliseconds=vD;Oe.asSeconds=y2e;Oe.asMinutes=b2e;Oe.asHours=_2e;Oe.asDays=k2e;Oe.asWeeks=E2e;Oe.asMonths=C2e;Oe.asQuarters=x2e;Oe.asYears=S2e;Oe.valueOf=T2e;Oe._bubble=w2e;Oe.clone=P2e;Oe.get=A2e;Oe.milliseconds=I2e;Oe.seconds=R2e;Oe.minutes=O2e;Oe.hours=M2e;Oe.days=N2e;Oe.weeks=$2e;Oe.months=D2e;Oe.years=L2e;Oe.humanize=z2e;Oe.toISOString=f1;Oe.toString=f1;Oe.toJSON=f1;Oe.locale=sD;Oe.localeData=aD;Oe.toIsoString=oi("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",f1);Oe.lang=oD;ie("X",0,0,"unix");ie("x",0,0,"valueOf");Z("x",a1);Z("X",cye);Je("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});Je("x",function(t,e,n){n._d=new Date(xe(t))});//! moment.js
K.version="2.30.1";Hve(mt);K.fn=B;K.min=Rbe;K.max=Obe;K.now=Mbe;K.utc=ms;K.unix=a2e;K.months=c2e;K.isDate=hf;K.locale=ta;K.invalid=r1;K.duration=Fi;K.isMoment=Ni;K.weekdays=d2e;K.parseZone=l2e;K.localeData=po;K.isDuration=Xm;K.monthsShort=u2e;K.weekdaysMin=f2e;K.defineLocale=gE;K.updateLocale=lbe;K.locales=cbe;K.weekdaysShort=h2e;K.normalizeUnits=ai;K.relativeTimeRounding=B2e;K.relativeTimeThreshold=U2e;K.calendarFormat=i_e;K.prototype=B;K.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const H2e=({comment:t,onLike:e,onEdit:n,onDelete:r})=>{const[i,s]=m.useState({});m.useState(!1),m.useState(t.content);const{currentUser:o}=Bn(a=>a.user);return m.useEffect(()=>{(async()=>{try{const l=await fetch(`/api/user/${t.userId}`),c=await l.json();l.ok&&s(c)}catch(l){console.log(l.message)}})()},[t]),y(qt,{className:" bg-transparent mb-4 snap-y",children:y(hn,{className:"flex flex-col gap-6 p-2 scroll-ms-6 snap-start",children:I(qt,{children:[I(Dn,{className:"flex flex-row gap-3",children:[y("img",{className:"w-10 h-10 mt-2 sm:mt-0 rounded-full bg-gray-200",src:i.profilePicture,alt:i.username}),I("div",{className:"sm:flex gap-2",children:[y("p",{className:"text-gray-500",children:i?`@${i.username}`:"anonymous user"}),y("i",{className:"text-gray-400",children:K(t.createdAt).fromNow()})]})]}),y(hn,{children:y("p",{className:" pb-2",children:t.content})}),I(wa,{children:[y("button",{type:"button",onClick:()=>e(t._id),className:` hover:text-blue-500 ${o&&t.likes.includes(o._id)&&"!text-blue-500"}`,children:y(zve,{})}),y("p",{className:"text-gray-400",children:t.numberOfLikes>0&&t.numberOfLikes+" "+(t.numberOfLikes===1?"like":"likes")})]})]})})})};function W2e({postId:t}){const{currentUser:e}=Bn(_=>_.user),[n,r]=m.useState(""),[i,s]=m.useState(null),[o,a]=m.useState([]),[l,c]=m.useState(!1),[u,d]=m.useState(null),h=pa();console.log(o);const f=async _=>{if(_.preventDefault(),!(n.length>50))try{const v=await fetch("/api/comment/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:n,postId:t,userId:e._id})}),w=await v.json();v.ok&&(r(""),s(null),a([w,...o]))}catch(v){s(v.message)}};m.useEffect(()=>{(async()=>{try{const v=await fetch(`/api/comment/getPostComments/${t}`);if(v.ok){const w=await v.json();a(w)}}catch(v){console.log(je.error(v.message))}})()},[t]);const p=async _=>{try{if(!e){h("/sign-in");return}const v=await fetch(`/api/comment/likeComment/${_}`,{method:"PUT"});if(v.ok){const w=await v.json();a(o.map(b=>b._id===_?{...b,likes:w.likes,numberOfLikes:w.likes.length}:b))}}catch(v){console.log(je.error(v.message))}},g=async(_,v)=>{a(o.map(w=>w._id===_._id?{...w,content:v}:w))};return I("div",{className:"max-w-2xl mx-auto w-full p-3",children:[e?I("div",{className:"flex items-center gap-1 my-5 text-gray-500 text-sm",children:[y("p",{children:"Signed in as:"}),y("img",{className:"h-5 w-5 object-cover rounded-full",src:e.profilePicture,alt:""}),I(Pe,{to:"/dashboard?tab=profile",className:"text-xs text-cyan-600 hover:underline",children:["@",e.username]})]}):I("div",{className:"text-sm text-teal-500 my-5 flex gap-1",children:["You must be signed in to comment.",y(Pe,{className:"text-blue-500 hover:underline",to:"/sign-in",children:"Sign In"})]}),e&&I(Be,{children:[I("form",{onSubmit:f,className:"border border-teal-500 rounded-md p-3",children:[y(Pn,{htmlFor:"comment",className:"sr-only",children:"Comment"}),y(TN,{id:"comment",placeholder:"Type your comment here...",className:"min-h-12 resize-none border-0 p-3 shadow-none focus-visible:ring-0",rows:"3",maxLength:"200",onChange:_=>r(_.target.value),value:n}),I("div",{className:"flex items-center p-3 pt-0",children:[I("p",{className:"text-gray-500",children:[200-n.length," characters remaining"]}),I(it,{type:"submit",size:"sm",className:"ml-auto gap-1.5",children:["Submit",y(jB,{className:"size-3.5"})]})]})]}),o.length===0?y("p",{className:"text-sm my-5",children:"No comments yet!"}):I(Be,{children:[I("div",{className:"text-sm my-5 flex items-center gap-1",children:[y("p",{children:"Comments"}),y("div",{className:"border border-gray-400 py-1 px-2 rounded-sm",children:y("p",{children:o.length})})]}),y(Yk,{className:"scrollbar-none pt-6 h-[460px]",children:o.map(_=>y(H2e,{comment:_,onLike:p,onEdit:g,onDelete:v=>{c(!0),d(v)}},_._id))})]})]})]})}const j2e=()=>{const{postSlug:t}=s4(),[e,n]=m.useState(!0),[r,i]=m.useState(!1),[s,o]=m.useState(null);m.useState(!0);const[a,l]=m.useState(null);return m.useEffect(()=>{(async()=>{try{n(!0);const u=await fetch(`/api/post/getposts?slug=${t}`),d=await u.json();if(!u.ok){i(!0),n(!1);return}u.ok&&(o(d.posts[0]),n(!1),i(!1))}catch{i(!0),n(!1)}})()},[t]),m.useEffect(()=>{(async()=>{try{const u=await fetch("/api/post/getposts?limit=3");if(u.ok){const d=await u.json();l(d.posts)}else throw new Error("Failed to fetch recent posts")}catch(u){i(je.error(u.message))}})()},[]),_N(`My Blog | ${t}`),e?y("div",{className:"flex justify-center items-center pt-80",children:y("div",{className:"border-gray-300 h-10 w-10 animate-spin rounded-full border-8 border-t-blue-600"})}):y(Be,{children:I("main",{className:"p-3 flex flex-col max-w-6xl mx-auto dark:bg-gray-800 min-h-screen",children:[y("h1",{className:"text-3xl mt-10 p-3 capitalize text-center font-serif max-w-2xl mx-auto lg:text-4xl",children:s&&s.title}),I("i",{className:"text-xl text-center",children:["Posted by: @",s&&s.author]}),y(Pe,{to:`/search?category=${s&&s.category}`,className:"self-center mt-5",children:y(wc,{children:s&&s.category})}),y("img",{src:s&&s.image,alt:s&&s.title,className:"mt-10 p-3 max-h-[600px] w-full object-cover border rounded-lg"}),I("div",{className:"flex justify-between p-3 border-b border-slate-500 mx-auto w-full max-w-2xl text-xs",children:[y("span",{children:s&&nh(s.updatedAt,"mmmm dS, yyyy")}),I("span",{className:"italic",children:[s&&(s.content.length/1e3).toFixed(0)," mins read"]})]}),y("article",{className:"p-3 max-w-2xl mx-auto w-full prose prose-img:rounded-xl prose-img:md:max-w-[600px] prose-figure:flex prose-figure:flex-col prose-figure:mx-auto prose-figure:md:ms-0 prose-headings:underline prose-headings:underline-offset-4 prose-headings:dark:text-white prose-p:dark:text-gray-400 prose-strong:text-2xl prose-strong:font-bold prose-strong:dark:text-white prose-figcaption:text-center prose-figcaption:italic",dangerouslySetInnerHTML:{__html:s&&s.content}}),y("div",{className:"p-3 max-w-2xl mx-auto w-full",children:y(W2e,{postId:s._id})}),I("div",{className:"p-3  max-w-2xl mx-auto w-full",children:[I("div",{className:"space-y-1",children:[y("h2",{className:"text-2xl font-semibold tracking-tight",children:"Recent Post:"}),y("p",{className:"text-sm text-muted-foreground",children:"Your recent posts. Updated daily."})]}),y(SN,{className:"my-4"}),y("div",{className:"relative",children:I(Yk,{children:[y("div",{className:"flex space-x-4 pb-4",children:a&&a.map(c=>y(Pe,{to:`/post/${c.slug}`,children:I(qt,{className:"group relative w-full border border-teal-500 hover:border-2 h-[300px] overflow-hidden rounded-lg sm:w-[230px] transition-all",children:[I(Dn,{children:[y("p",{className:"capitalize text-sm font-bold",children:c.title}),y("img",{src:c.image,alt:"Photo by Drew Beamer",className:"rounded-md object-cover  w-[150px] h-[150px]",aspectratio:"square"})]}),I(hn,{className:"flex flex-col",children:[I("i",{children:[" @",c.author]}),y("i",{className:"text-sm dark:text-gray-400",children:nh(c.updatedAt,"mmmm dS, yyyy")})]})]})}))}),y(Kk,{orientation:"horizontal"})]})})]})]})})};function G2e(){const{currentUser:t}=Bn(e=>e.user);return t&&t.isAdmin||t&&t.role==="author"?y($_,{}):y(L_,{to:"/sign-in"})}function q2e(){return y(Be,{children:y(nB,{children:I(KV,{children:[y(Br,{path:"/",element:I(Be,{children:[y(jf,{}),y(JG,{})]})}),y(Br,{path:"/sign-in",element:I(Be,{children:[y(jf,{}),y(LZ,{})]})}),y(Br,{path:"/sign-up",element:I(Be,{children:[y(jf,{}),y(FZ,{})]})}),y(Br,{path:"/post/:postSlug",element:I(Be,{children:[y(jf,{}),y(j2e,{})]})}),y(Br,{element:y(Wwe,{}),children:y(Br,{path:"/user/dashboard",element:y(Vve,{})})}),I(Br,{element:y(jwe,{}),children:[y(Br,{path:"/admin/dashboard",element:y(Fve,{})}),y(Br,{path:"/admin/dashboard/update-post/:postId",element:y(l3,{})})]}),y(Br,{element:y(G2e,{}),children:y(Br,{path:"/user/dashboard/update-post/:postId",element:y(l3,{})})})]})})})}var xE="persist:",yD="persist/FLUSH",SE="persist/REHYDRATE",bD="persist/PAUSE",_D="persist/PERSIST",kD="persist/PURGE",ED="persist/REGISTER",Y2e=-1;function ep(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ep=function(n){return typeof n}:ep=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ep(t)}function v3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v3(n,!0).forEach(function(r){Z2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v3(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z2e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J2e(t,e,n,r){r.debug;var i=K2e({},n);return t&&ep(t)==="object"&&Object.keys(t).forEach(function(s){s!=="_persist"&&e[s]===n[s]&&(i[s]=t[s])}),i}function X2e(t){var e=t.blacklist||null,n=t.whitelist||null,r=t.transforms||[],i=t.throttle||0,s="".concat(t.keyPrefix!==void 0?t.keyPrefix:xE).concat(t.key),o=t.storage,a;t.serialize===!1?a=function(S){return S}:typeof t.serialize=="function"?a=t.serialize:a=Q2e;var l=t.writeFailHandler||null,c={},u={},d=[],h=null,f=null,p=function(S){Object.keys(S).forEach(function(C){v(C)&&c[C]!==S[C]&&d.indexOf(C)===-1&&d.push(C)}),Object.keys(c).forEach(function(C){S[C]===void 0&&v(C)&&d.indexOf(C)===-1&&c[C]!==void 0&&d.push(C)}),h===null&&(h=setInterval(g,i)),c=S};function g(){if(d.length===0){h&&clearInterval(h),h=null;return}var k=d.shift(),S=r.reduce(function(C,E){return E.in(C,k,c)},c[k]);if(S!==void 0)try{u[k]=a(S)}catch(C){console.error("redux-persist/createPersistoid: error serializing state",C)}else delete u[k];d.length===0&&_()}function _(){Object.keys(u).forEach(function(k){c[k]===void 0&&delete u[k]}),f=o.setItem(s,a(u)).catch(w)}function v(k){return!(n&&n.indexOf(k)===-1&&k!=="_persist"||e&&e.indexOf(k)!==-1)}function w(k){l&&l(k)}var b=function(){for(;d.length!==0;)g();return f||Promise.resolve()};return{update:p,flush:b}}function Q2e(t){return JSON.stringify(t)}function eke(t){var e=t.transforms||[],n="".concat(t.keyPrefix!==void 0?t.keyPrefix:xE).concat(t.key),r=t.storage;t.debug;var i;return t.deserialize===!1?i=function(o){return o}:typeof t.deserialize=="function"?i=t.deserialize:i=tke,r.getItem(n).then(function(s){if(s)try{var o={},a=i(s);return Object.keys(a).forEach(function(l){o[l]=e.reduceRight(function(c,u){return u.out(c,l,a)},i(a[l]))}),o}catch(l){throw l}else return})}function tke(t){return JSON.parse(t)}function nke(t){var e=t.storage,n="".concat(t.keyPrefix!==void 0?t.keyPrefix:xE).concat(t.key);return e.removeItem(n,rke)}function rke(t){}function y3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y3(n,!0).forEach(function(r){ike(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y3(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ike(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ske(t,e){if(t==null)return{};var n=oke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oke(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ake=5e3;function lke(t,e){var n=t.version!==void 0?t.version:Y2e;t.debug;var r=t.stateReconciler===void 0?J2e:t.stateReconciler,i=t.getStoredState||eke,s=t.timeout!==void 0?t.timeout:ake,o=null,a=!1,l=!0,c=function(d){return d._persist.rehydrated&&o&&!l&&o.update(d),d};return function(u,d){var h=u||{},f=h._persist,p=ske(h,["_persist"]),g=p;if(d.type===_D){var _=!1,v=function(x,A){_||(d.rehydrate(t.key,x,A),_=!0)};if(s&&setTimeout(function(){!_&&v(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},s),l=!1,o||(o=X2e(t)),f)return Es({},e(g,d),{_persist:f});if(typeof d.rehydrate!="function"||typeof d.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return d.register(t.key),i(t).then(function(E){var x=t.migrate||function(A,R){return Promise.resolve(A)};x(E,n).then(function(A){v(A)},function(A){v(void 0,A)})},function(E){v(void 0,E)}),Es({},e(g,d),{_persist:{version:n,rehydrated:!1}})}else{if(d.type===kD)return a=!0,d.result(nke(t)),Es({},e(g,d),{_persist:f});if(d.type===yD)return d.result(o&&o.flush()),Es({},e(g,d),{_persist:f});if(d.type===bD)l=!0;else if(d.type===SE){if(a)return Es({},g,{_persist:Es({},f,{rehydrated:!0})});if(d.key===t.key){var w=e(g,d),b=d.payload,k=r!==!1&&b!==void 0?r(b,u,w,t):w,S=Es({},k,{_persist:Es({},f,{rehydrated:!0})});return c(S)}}}if(!f)return e(u,d);var C=e(g,d);return C===g?u:c(Es({},C,{_persist:f}))}}function b3(t){return dke(t)||uke(t)||cke()}function cke(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function uke(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function dke(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ab(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_3(n,!0).forEach(function(r){hke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_3(n).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var CD={registry:[],bootstrapped:!1},fke=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CD,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ED:return Ab({},e,{registry:[].concat(b3(e.registry),[n.key])});case SE:var r=e.registry.indexOf(n.key),i=b3(e.registry);return i.splice(r,1),Ab({},e,{registry:i,bootstrapped:i.length===0});default:return e}};function mke(t,e,n){var r=i2(fke,CD,void 0),i=function(l){r.dispatch({type:ED,key:l})},s=function(l,c,u){var d={type:SE,payload:c,err:u,key:l};t.dispatch(d),r.dispatch(d)},o=Ab({},r,{purge:function(){var l=[];return t.dispatch({type:kD,result:function(u){l.push(u)}}),Promise.all(l)},flush:function(){var l=[];return t.dispatch({type:yD,result:function(u){l.push(u)}}),Promise.all(l)},pause:function(){t.dispatch({type:bD})},persist:function(){t.dispatch({type:_D,register:i,rehydrate:s})}});return o.persist(),o}var TE={},PE={};PE.__esModule=!0;PE.default=wke;function tp(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tp=function(n){return typeof n}:tp=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tp(t)}function rv(){}var pke={getItem:rv,setItem:rv,removeItem:rv};function gke(t){if((typeof self>"u"?"undefined":tp(self))!=="object"||!(t in self))return!1;try{var e=self[t],n="redux-persist ".concat(t," test");e.setItem(n,"test"),e.getItem(n),e.removeItem(n)}catch{return!1}return!0}function wke(t){var e="".concat(t,"Storage");return gke(e)?self[e]:pke}TE.__esModule=!0;TE.default=bke;var vke=yke(PE);function yke(t){return t&&t.__esModule?t:{default:t}}function bke(t){var e=(0,vke.default)(t);return{getItem:function(r){return new Promise(function(i,s){i(e.getItem(r))})},setItem:function(r,i){return new Promise(function(s,o){s(e.setItem(r,i))})},removeItem:function(r){return new Promise(function(i,s){i(e.removeItem(r))})}}}var xD=void 0,_ke=kke(TE);function kke(t){return t&&t.__esModule?t:{default:t}}var Eke=(0,_ke.default)("local");xD=Eke;const Cke=C6({user:tG}),xke={key:"root",storage:xD,version:1},Ske=lke(xke,Cke),SD=Rj({reducer:Ske,middleware:t=>t({serializableCheck:!1})}),Tke=mke(SD);function np(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?np=function(n){return typeof n}:np=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},np(t)}function Pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ake(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ike(t,e,n){return e&&Ake(t.prototype,e),t}function Rke(t,e){return e&&(np(e)==="object"||typeof e=="function")?e:rp(t)}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ib(t)}function rp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rb(t,e)}function Rb(t,e){return Rb=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Rb(t,e)}function ip(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var TD=function(t){Oke(e,t);function e(){var n,r;Pke(this,e);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=Rke(this,(n=Ib(e)).call.apply(n,[this].concat(s))),ip(rp(r),"state",{bootstrapped:!1}),ip(rp(r),"_unsubscribe",void 0),ip(rp(r),"handlePersistorState",function(){var a=r.props.persistor,l=a.getState(),c=l.bootstrapped;c&&(r.props.onBeforeLift?Promise.resolve(r.props.onBeforeLift()).finally(function(){return r.setState({bootstrapped:!0})}):r.setState({bootstrapped:!0}),r._unsubscribe&&r._unsubscribe())}),r}return Ike(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(m.PureComponent);ip(TD,"defaultProps",{children:null,loading:null});var k3=["light","dark"],Mke="(prefers-color-scheme: dark)",Nke=m.createContext(void 0),Dke={setTheme:t=>{},themes:[]},Lke=()=>{var t;return(t=m.useContext(Nke))!=null?t:Dke};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(p=>`'${p}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?k3.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(p,g=!1,_=!0)=>{let v=o?o[p]:p,w=g?p+"|| ''":`'${v}'`,b="";return i&&_&&!g&&k3.includes(p)&&(b+=`d.style.colorScheme = '${p}';`),n==="class"?g||v?b+=`c.add(${w})`:b+="null":v&&(b+=`d[s](n,${w})`),b},f=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${Mke}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return m.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})});const $ke=({...t})=>{const{theme:e="system"}=Lke();return y(lQ,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};av.createRoot(document.getElementById("root")).render(y(TD,{persistor:Tke,children:y(kG,{store:SD,children:I(YW,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:[y(q2e,{}),y($ke,{})]})})}))});export default Fke();
//# sourceMappingURL=index-BnZADAzJ.js.map
